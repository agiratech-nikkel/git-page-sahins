"use strict";(self.webpackChunksahins=self.webpackChunksahins||[]).push([[776],{36776:(yu,be,h)=>{h.r(be),h.d(be,{InventoryModule:()=>xu});var p=h(36895),e=h(94650),m=h(81390);let Ae=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-inventory"]],decls:1,vars:0,template:function(t,o){1&t&&e._UZ(0,"router-outlet")},dependencies:[m.lC],changeDetection:0}),n})();var s=h(24006),c=h(7155),y=h(69196),F=h(59077),S=h(77579),V=h(78372),$=h(82722),j=h(63900),z=h(17009),C=h(65412),M=h(80529),ke=h(92340),d=h(47839);let Z=(()=>{class n{constructor(t){this.http=t,this.baseUrl=ke.N.baseUrl}getVendors(){return this.http.get(this.baseUrl+d.V.vendor)}getProductBasedVedor(t){return this.http.get(`${this.baseUrl}${d.V.product}/${t}${d.V.vendor}`)}getCenter(){return this.http.get(this.baseUrl+d.V.centers)}searchProduct(t,o,i=null){let r={filter:{}};return t&&""!==t?r.filter={search:t,search_by:"name"}:!!i&&null!==i&&(r=i),this.http.post(`${this.baseUrl+d.V.searchProduct}?page=${o.page}&per_page=${o.perPage}`,r)}getPhleboPagination(t,o){const i=(new M.LE).set("per_page",t).set("page",o).set("sort_order","desc").set("sort_by","created_at");return this.http.post(this.baseUrl+d.V.phelbo+"/search",{},{params:i})}createCenterProdReq(t,o){return this.http.post(this.baseUrl+d.V.inventory+d.V.center+t+d.V.product+d.V.request,o)}getCenterProductRequestPagination(t,o,i){const r=(new M.LE).set("per_page",t).set("page",o).set("sort_order","desc").set("sort_by","created_at");return this.http.post(this.baseUrl+d.V.inventory+d.V.center+"product"+d.V.request+"/search",i,{params:r})}getCenterProductRequest(t,o){return this.http.get(this.baseUrl+d.V.inventory+d.V.center+t+"/product/request/"+o)}centerProdReqUpdate(t,o,i){return this.http.put(this.baseUrl+d.V.inventory+d.V.center+t+"/product/request/"+o,i)}centerProdReqDeny(t,o){return this.http.post(this.baseUrl+d.V.inventory+d.V.center+t+"/product/request/"+o+"/deny",{})}centerProdReqApprove(t,o){return this.http.post(this.baseUrl+d.V.inventory+d.V.center+t+"/product/request/"+o+"/approval",{})}centerProdReqReceiptSave(t,o,i){return this.http.post(this.baseUrl+d.V.inventory+d.V.center+t+"/product/request/"+o+"/inventory/save",i)}centerProdReqClose(t,o,i){return this.http.post(this.baseUrl+d.V.inventory+d.V.center+t+"/product/request/"+o+"/inventory",i)}deleteCenterRequest(t){return this.http.delete(this.baseUrl+d.V.inventory+d.V.center+d.V.product+t)}orderAssigning(t,o){return this.http.post(this.baseUrl,o)}getProductPagination(t,o,i){const r=(new M.LE).set("per_page",t).set("page",o).set("sort_order","desc").set("sort_by","created_at");return this.http.post(this.baseUrl+d.V.searchProduct,i,{params:r})}getAllVendors(t){return this.http.post(this.baseUrl+d.V.vendor,t)}getAllVendorsByProductId(t){return this.http.get(this.baseUrl+d.V.product+"/"+t+d.V.vendor)}getVendorsbypagniation(t,o,i){const r=(new M.LE).set("per_page",t).set("page",o).set("sort_order","desc").set("sort_by","created_at");return this.http.post(this.baseUrl+d.V.vendor+"/search",i,{params:r})}deleteVendor(t){return this.http.delete(this.baseUrl+d.V.vendor+"/"+t)}bulkUploadOrganisation(t){return this.http.post(`${this.baseUrl}/vendor/bulk-upload`,t)}createVendors(t){return this.http.post(this.baseUrl+d.V.vendor,t)}getproductpagination(t,o,i){const r=(new M.LE).set("per_page",t).set("page",o).set("sort_order","desc").set("sort_by","created_at");return this.http.post(this.baseUrl+d.V.product+"/search",i,{params:r})}createProduct(t){return this.http.post(this.baseUrl+d.V.product,t)}getProductById(t){return this.http.get(`${this.baseUrl+d.V.product}/${t}`)}updateProduct(t,o){return this.http.put(`${this.baseUrl+d.V.product}/${t}`,o)}deleteProdct(t){return this.http.delete(`${this.baseUrl+d.V.product}/${t}`)}createPhleboRequest(t,o){return this.http.post(`${this.baseUrl+d.V.inventoryPhelbo}/${t}/${d.V.request}`,o)}getEquipmentPagination(t,o,i){const r=(new M.LE).set("per_page",t).set("page",o).set("sort_order","desc").set("sort_by","created_at");return this.http.post(this.baseUrl+d.V.equipments+"/search",i,{params:r})}createEquipment(t){return this.http.post(this.baseUrl+d.V.equipments,t)}updateEquipment(t,o){return this.http.put(this.baseUrl+d.V.equipments+"/"+t,o)}getEquipment(t){return this.http.get(this.baseUrl+d.V.equipments+"/"+t)}updateEquipmentProductMapping(t,o){return this.http.put(this.baseUrl+d.V.equipments+"/"+t+"/product-mapping",o)}deleteEquipment(t){return this.http.delete(this.baseUrl+d.V.equipments+"/"+t)}getVendorById(t){return this.http.get(this.baseUrl+d.V.vendor+"/"+t)}updateVendor(t,o){return this.http.put(this.baseUrl+d.V.vendor+"/"+t,o)}getVendorPrdoduct(t){return this.http.get(this.baseUrl+d.V.vendor+"/"+t+"/products")}deleteVendorProduct(t){return this.http.delete(this.baseUrl+d.V.vendorproducts+"/"+t)}saveVendorProductMapping(t,o){return this.http.put(this.baseUrl+d.V.vendorproducts+t+"/products",o)}searchCenters(t){return this.http.post(this.baseUrl+d.V.centers+"/search",t)}getAllPhleboRequest(t,o,i){const r=(new M.LE).set("per_page",t).set("page",o).set("sort_order","desc").set("sort_by","created_at");return this.http.post(this.baseUrl+d.V.inventory+d.V.phlebo+"search",i,{params:r})}getPhleboRequest(t,o){return this.http.get(`${this.baseUrl}${d.V.inventory}${d.V.phlebo}${t}${d.V.request}/${o}`)}updatePhleboRequest(t,o,i){return this.http.put(`${this.baseUrl}${d.V.inventory}${d.V.phlebo}${t}${d.V.request}/${o}`,i)}phleboApproval(t,o,i){return this.http.post(`${this.baseUrl}${d.V.inventory}${d.V.phlebo}${t}${d.V.request}/${o}/approved`,i)}phleboDenied(t,o,i){return this.http.post(`${this.baseUrl}${d.V.inventory}${d.V.phlebo}${t}${d.V.request}/${o}/denied`,i)}deletePhleboRequest(t){return this.http.delete(this.baseUrl+d.V.inventory+d.V.phlebo+d.V.request+"/"+t)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(M.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var v=h(97392),G=h(55829),x=h(4859),w=h(51572),T=h(98739),B=h(92688);function Pe(n,a){1&n&&(e.TgZ(0,"th",30),e._uU(1,"Request ID"),e.qZA())}function Ne(n,a){if(1&n&&(e.TgZ(0,"td",31),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(t.request_id)}}function Ue(n,a){1&n&&(e.TgZ(0,"th",30),e._uU(1,"Requested By"),e.qZA())}function Se(n,a){if(1&n&&(e.TgZ(0,"td",31),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(null==t.center?null:t.center.name)}}function De(n,a){1&n&&(e.TgZ(0,"th",30),e._uU(1,"Requested On"),e.qZA())}function Ie(n,a){if(1&n&&(e.TgZ(0,"td",31),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.created_at,"dd/MM/yyyy hh:mm a")," ")}}function Fe(n,a){1&n&&(e.TgZ(0,"th",30),e._uU(1,"Received On"),e.qZA())}function Ye(n,a){if(1&n&&(e.TgZ(0,"td",31),e._uU(1),e.qZA()),2&n){const t=a.$implicit;let o;e.xp6(1),e.hij(" ",null!==(o=t.received_on)&&void 0!==o?o:"-"," ")}}function Re(n,a){1&n&&(e.TgZ(0,"th",30),e._uU(1,"Status"),e.qZA())}const Qe=function(n,a,t,o){return{"status-dark":n,"status-cancel":a,"status-info":t,"status-success":o}};function Je(n,a){if(1&n&&(e.TgZ(0,"td",32)(1,"span",33),e._uU(2),e.ALo(3,"titlecase"),e.qZA()()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngClass",e.l5B(4,Qe,"f28878f9-9257-4d61-a604-795f3ba0a6a0"==(null==t.status?null:t.status.id),"6a75b397-52c4-4d60-ad97-fec0f4a1ccdb"==(null==t.status?null:t.status.id),"2ff55100-24cd-4ae8-9e12-f34565018074"==(null==t.status?null:t.status.id),"f16cedf6-5f28-4f2f-97fd-02fafaf1f6b4"==(null==t.status?null:t.status.id))),e.xp6(1),e.Oqu(e.lcZ(3,2,t.status.name))}}function Oe(n,a){1&n&&(e.TgZ(0,"th",30),e._uU(1,"Action"),e.qZA())}function Me(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"td",31)(1,"mat-icon",34),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.editrequest(r))}),e.qZA(),e.TgZ(2,"mat-icon",35),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.onDeleteRequest(r))}),e._uU(3,"delete"),e.qZA()()}}function Be(n,a){1&n&&(e.TgZ(0,"th",30),e._uU(1,"Details"),e.qZA())}function Le(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"Acknowledge"),e.qZA())}function Ee(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"Receipt Entry"),e.qZA())}function Ve(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",37),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,r=e.oxw();return e.KtG(r.acknowledge(i))}),e.YNc(1,Le,2,0,"span",38),e.YNc(2,Ee,2,0,"span",38),e.qZA()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf","Request Submitted"==(null==t.status?null:t.status.name)),e.xp6(1),e.Q6J("ngIf","Request Approved"==(null==t.status?null:t.status.name))}}function $e(n,a){if(1&n&&(e.TgZ(0,"td",31),e.YNc(1,Ve,3,2,"button",36),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf","Request Submitted"==(null==t.status?null:t.status.name)||"Request Approved"==(null==t.status?null:t.status.name))}}function je(n,a){1&n&&e._UZ(0,"tr",39)}function ze(n,a){1&n&&e._UZ(0,"tr",40)}function He(n,a){1&n&&(e.TgZ(0,"div",41),e._UZ(1,"mat-spinner",42),e.qZA())}function Ge(n,a){1&n&&(e.TgZ(0,"div",43),e._uU(1,"No Data Available!"),e.qZA())}function Ke(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-paginator",44),e.NdJ("page",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.getPageEvent(i))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("length",t.tableLength)("pageIndex",(t.clientsPagination.page||1)-1)("pageSize",t.clientsPagination.perPage)("pageSizeOptions",t.clientsPagination.paginationSizes)("showFirstLastButtons",!0)}}let Ce=(()=>{class n{constructor(t,o,i,r,l){this.cdr=t,this.snackBar=o,this.dialog=i,this.router=r,this.invService=l,this.unsubscribe$=new S.x,this.searchStr=new s.NI(""),this.agamFilters=[],this.searchBy=[],this.centers=[],this.payload={},this.seachPayload={},this.spinner=!1,this.isLoading=!1,this.isEmpty=!1,this.displayedColumns=["Request ID","Requested By","Requested On","Received On","Status","Action","Details"],this.tableRequestData=[],this.dataSource=new c.by(this.tableRequestData),this.clientsPagination=new y.p({page:1,perPage:5,total:this.tableLength}),this.requestMockData='{ "status": "success", "api-message": "Center prduct request search data is retrieved successfully by user Agam Diagnostics Lab - Madurai", "message": "Center prduct request search retrieved successfully", "data": { "results": [ { "id": "f055d5b2-0038-41e6-93f9-53119673e0db", "request_id": 11, "client": "038e6694-01ee-4ce4-baff-2af9714e05ad", "comments": "comment details", "isDeleted": false, "created_at": "2023-02-16T20:32:07.903Z", "approved_at": "2023-02-16T20:32:07.903Z", "created_by": "02e158bf-dcdd-4beb-9ac3-9984dbb16b43", "approved_by": null, "is_active": true, "attachments": [], "center": { "id": "02e158bf-dcdd-4beb-9ac3-9984dbb16b43", "name": "Agam Diagnostics Lab - Madurai", "mobile_number": "7811073993", "email": "sahins_03@agiratech.com", "username": "sahins_03@agiratech.com", "code": 2, "profile_image": null, "isDeleted": false, "created_at": "2023-02-09T07:30:20.811Z", "updated_at": "2023-02-09T07:30:20.811Z", "created_by": "038e6694-01ee-4ce4-baff-2af9714e05ad", "updated_by": null, "is_active": true }, "status": { "id": "f16cedf6-5f28-4f2f-97fd-02fafaf1f6b4", "name": "Request Submitted", "description": null, "master_type": "inventory_status", "is_active": true, "created_at": "2023-01-10T07:00:47.447Z", "updated_at": "2023-01-10T07:00:47.447Z", "created_by": "b991cdcd-275d-4a34-af8b-962b38e1bc9a", "updated_by": null }, "product_details": [ { "id": "e600964d-7772-4be4-8ab6-f70361ac048b", "quantity": 10, "product_details": { "id": "378e3f8e-b7fb-4ce6-b9d2-54139bae8e02", "name": "Urine Collection Jug", "code": 18, "description": "this is a product", "type": "medical", "is_container": false, "is_expiry": false, "is_batch_no": false, "color": "black", "created_at": "2023-01-09T00:44:19.518Z", "updated_at": "2023-01-09T00:44:19.518Z", "created_by": "b991cdcd-275d-4a34-af8b-962b38e1bc9a", "updated_by": null, "isDeleted": false, "is_active": true } } ] }, { "id": "b8560cc5-041a-42d9-ba6b-d866553a2b95", "request_id": 12, "client": "038e6694-01ee-4ce4-baff-2af9714e05ad", "comments": "comment details", "isDeleted": false, "created_at": "2023-02-16T20:39:06.024Z", "approved_at": "2023-02-16T20:39:06.045Z", "created_by": "02e158bf-dcdd-4beb-9ac3-9984dbb16b43", "approved_by": null, "is_active": true, "attachments": [], "center": { "id": "02e158bf-dcdd-4beb-9ac3-9984dbb16b43", "name": "Agam Diagnostics Lab - Madurai", "mobile_number": "7811073993", "email": "sahins_03@agiratech.com", "username": "sahins_03@agiratech.com", "code": 2, "profile_image": null, "isDeleted": false, "created_at": "2023-02-09T07:30:20.811Z", "updated_at": "2023-02-09T07:30:20.811Z", "created_by": "038e6694-01ee-4ce4-baff-2af9714e05ad", "updated_by": null, "is_active": true }, "status": { "id": "2ff55100-24cd-4ae8-9e12-f34565018074", "name": "Request Approved", "description": null, "master_type": "inventory_status", "is_active": true, "created_at": "2023-01-10T07:00:47.447Z", "updated_at": "2023-01-10T07:00:47.447Z", "created_by": "b991cdcd-275d-4a34-af8b-962b38e1bc9a", "updated_by": null }, "product_details": [ { "id": "27c95ce3-2ef6-446d-8a9b-7919b7937f2a", "quantity": 10, "product_details": { "id": "378e3f8e-b7fb-4ce6-b9d2-54139bae8e02", "name": "Urine Collection Jug", "code": 18, "description": "this is a product", "type": "medical", "is_container": false, "is_expiry": false, "is_batch_no": false, "color": "black", "created_at": "2023-01-09T00:44:19.518Z", "updated_at": "2023-01-09T00:44:19.518Z", "created_by": "b991cdcd-275d-4a34-af8b-962b38e1bc9a", "updated_by": null, "isDeleted": false, "is_active": true } } ] }, { "id": "695cda7f-476b-4fbb-9d3a-b5312b839911", "request_id": 13, "client": "038e6694-01ee-4ce4-baff-2af9714e05ad", "comments": "comment details", "isDeleted": false, "created_at": "2023-02-16T20:41:19.792Z", "approved_at": "2023-02-16T20:41:19.810Z", "created_by": "02e158bf-dcdd-4beb-9ac3-9984dbb16b43", "approved_by": null, "is_active": true, "attachments": [ "https://sahins.s3.amazonaws.com/web/attachement/1676575113344.pdf" ], "center": { "id": "02e158bf-dcdd-4beb-9ac3-9984dbb16b43", "name": "Agam Diagnostics Lab - Madurai", "mobile_number": "7811073993", "email": "sahins_03@agiratech.com", "username": "sahins_03@agiratech.com", "code": 2, "profile_image": null, "isDeleted": false, "created_at": "2023-02-09T07:30:20.811Z", "updated_at": "2023-02-09T07:30:20.811Z", "created_by": "038e6694-01ee-4ce4-baff-2af9714e05ad", "updated_by": null, "is_active": true }, "status": { "id": "f16cedf6-5f28-4f2f-97fd-02fafaf1f6b4", "name": "Request Submitted", "description": null, "master_type": "inventory_status", "is_active": true, "created_at": "2023-01-10T07:00:47.447Z", "updated_at": "2023-01-10T07:00:47.447Z", "created_by": "b991cdcd-275d-4a34-af8b-962b38e1bc9a", "updated_by": null }, "product_details": [ { "id": "6e0581ed-36e6-4e9d-9593-f57d4e96f547", "quantity": 10, "product_details": { "id": "378e3f8e-b7fb-4ce6-b9d2-54139bae8e02", "name": "Urine Collection Jug", "code": 18, "description": "this is a product", "type": "medical", "is_container": false, "is_expiry": false, "is_batch_no": false, "color": "black", "created_at": "2023-01-09T00:44:19.518Z", "updated_at": "2023-01-09T00:44:19.518Z", "created_by": "b991cdcd-275d-4a34-af8b-962b38e1bc9a", "updated_by": null, "isDeleted": false, "is_active": true } } ] } ], "pagination": { "per_page": 10, "page": 1, "found": 3, "total": 3 } } }',this.loadFilters(),this.getCenterRequest(),this.searchListener()}ngOnInit(){}create(){this.router.navigateByUrl("inventory/centerrequest/createproduct")}getPageEvent(t){this.clientsPagination.doPagination(t)}loadFilters(){this.agamFilters=[{type:"date",name:"Date",lableKey:"name"},{type:"status",name:"Status",data:[{id:"Request Submitted",name:"Request Submitted"},{id:"Request Approved",name:"Request Approved"},{id:"Request Delivered",name:"Request Delivered"},{id:"Request Denied",name:"Request Denied"}],lableKey:"name"}]}onSearch(t){if(this.search&&""!==this.search)this.payload.filter.search=this.search,this.searchBy.includes("name")&&this.searchBy.includes("code")||(this.searchBy.push("name"),this.searchBy.push("code"));else if(this.payload.filter.search=void 0,this.searchBy.includes("name")&&this.searchBy.includes("code")){let o;o=this.searchBy.indexOf("name"),this.searchBy.splice(o,1),o=this.searchBy.push("code"),this.searchBy.splice(o,1)}this.payload.filter.search_by=this.getSearchBy(),this.getCenterRequest()}getSearchBy(){if(this.searchBy.length>0){let t="";return this.searchBy.forEach((o,i)=>{t+=o,i!==this.searchBy.length-1&&(t+=",")}),t}}searchListener(){this.searchStr.valueChanges.pipe((0,V.b)(400),(0,$.R)(this.unsubscribe$),(0,j.w)(t=>(this.isLoading=!0,this.seachPayload={filter:{location:{city:this.locationName},centers:{name:t}}},null==this.locationName&&delete this.seachPayload.filter.location,null==this.centerName&&delete this.seachPayload.filter.centers,this.cdr.markForCheck(),t||(this.seachPayload={}),this.invService.getCenterProductRequestPagination(this.clientsPagination.perPage,this.clientsPagination.page,this.seachPayload)))).subscribe(t=>{this.dataSource.data=t.data.results,this.tableLength=t.data.pagination.total,this.isLoading=!1,this.isEmpty=!1,0==this.dataSource.data.length&&(this.isEmpty=!0,this.isLoading=!1,this.cdr.markForCheck())})}getCenterRequest(){this.spinner=!0,this.invService.getCenterProductRequestPagination(this.clientsPagination.perPage,this.clientsPagination.page,this.seachPayload).subscribe({next:t=>{t=JSON.parse(this.requestMockData),this.dataSource.data=t.data.results,this.tableLength=t.data.pagination.total,this.isLoading=!1,this.spinner=!1,0==this.dataSource.data.length&&(this.isEmpty=!0),this.cdr.markForCheck()},error:t=>{let o="Something went wrong";t?.error?.message?o=t?.error?.message:t?.error?.error&&(o=t?.error?.error),this.isEmpty=!0,this.snackBar.open(o,"close"),this.spinner=!1,this.cdr.markForCheck()}})}handleFilter(t){console.log("handle filter",t),"date"===t.type&&(this.centerName=t.selected,console.log("date",this.centerName)),"status"===t.type&&(this.locationName=t.selected?.option?.value?.name,console.log("status",this.locationName))}handleSearch(){this.filter()}resetFilter(){this.locationName=void 0,this.centerName=void 0,this.searchStr.reset(),this.getCenterRequest()}filter(){console.log("search called"),this.payload={filter:{location:{city:this.locationName},centers:{name:this.centerName}}}}editrequest(t){this.router.navigateByUrl("inventory/centerrequest/editproduct/"+t.center.id+"/request/"+t.id)}acknowledge(t){"Request Submitted"==t.status.name&&this.router.navigateByUrl("inventory/centerrequest/acknowledge/"+t.center.id+"/request/"+t.id),"Request Approved"==t.status.name&&this.router.navigateByUrl("inventory/centerrequest/billreceipt/"+t.center.id+"/request/"+t.id)}onDeleteRequest(t){this.confirmDialog=this.dialog.open(F.$,{width:"40%",height:"auto",disableClose:!1,data:{message:"Are you sure want to Delete the request: "+t.request_id+" ?",buttonText:{ok:"Delete",cancel:"Cancel"}}}),this.confirmDialog.afterClosed().subscribe(o=>{o&&(this.spinner=!0,this.invService.deleteCenterRequest(t.id).subscribe({next:i=>{this.spinner=!1,this.snackBar.open(i.message,"close"),"success"==i.status&&this.getCenterRequest(),this.cdr.markForCheck()},error:i=>{let r="Something went wrong";i?.error?.message?r=i?.error?.message:i?.error?.error&&(r=i?.error?.error),this.isEmpty=!0,this.snackBar.open(r,"close"),this.spinner=!1,this.cdr.markForCheck()}}))})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(z.ux),e.Y36(C.uw),e.Y36(m.F0),e.Y36(Z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-center-request"]],decls:46,vars:8,consts:[[1,"center-request"],[1,"title","primary"],[1,"center-request__header"],[1,"center-request__header-input"],[1,"center-request__header-input_form"],[1,"row"],[1,"col-xxl-8","col-xl-7","col-lg-7","col-sm-12"],["placholder","Search Request ID",3,"formControl","filters","ngModelChange","filter","search","reset"],[1,"col-xl-5","col-lg-5","col-md-12","col-sm-12","col-xs-12"],[1,"action-buttons","btn-container","createBtn"],[1,"btn"],["routerLink","/centerrequest/create/",1,"btn-icons",3,"click"],["svgIcon","appCreateRequest"],[1,"agm-table--container"],["mat-table","",1,"agm-table",3,"dataSource"],["matColumnDef","Request ID"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Requested By"],["matColumnDef","Requested On"],["matColumnDef","Received On"],["matColumnDef","Status"],["mat-cell","","class","statusColumn",4,"matCellDef"],["matColumnDef","Action"],["matColumnDef","Details"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","spinner-container",4,"ngIf"],["class","empty-row",4,"ngIf"],[3,"length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",1,"statusColumn"],[3,"ngClass"],["svgIcon","appEdit",3,"click"],["svgIcon","appDelete",3,"click"],["class","detail-btn","mat-raised-button","",3,"click",4,"ngIf"],["mat-raised-button","",1,"detail-btn",3,"click"],[4,"ngIf"],["mat-header-row",""],["mat-row",""],[1,"spinner-container"],["diameter","70",1,"spinner"],[1,"empty-row"],[3,"length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div")(2,"h3",1),e._uU(3,"Center Request"),e.qZA()(),e.TgZ(4,"section",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"app-agam-search-filter",7),e.NdJ("ngModelChange",function(r){return o.onSearch(r)})("filter",function(r){return o.handleFilter(r)})("search",function(){return o.handleSearch()})("reset",function(){return o.resetFilter()}),e.qZA()(),e.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"button",11),e.NdJ("click",function(){return o.create()}),e.TgZ(14,"span")(15,"b"),e._uU(16," Create Request "),e.qZA()(),e._UZ(17,"mat-icon",12),e.qZA()()()()()()()(),e.TgZ(18,"section",13)(19,"table",14),e.ynx(20,15),e.YNc(21,Pe,2,0,"th",16),e.YNc(22,Ne,2,1,"td",17),e.BQk(),e.ynx(23,18),e.YNc(24,Ue,2,0,"th",16),e.YNc(25,Se,2,1,"td",17),e.BQk(),e.ynx(26,19),e.YNc(27,De,2,0,"th",16),e.YNc(28,Ie,3,4,"td",17),e.BQk(),e.ynx(29,20),e.YNc(30,Fe,2,0,"th",16),e.YNc(31,Ye,2,1,"td",17),e.BQk(),e.ynx(32,21),e.YNc(33,Re,2,0,"th",16),e.YNc(34,Je,4,9,"td",22),e.BQk(),e.ynx(35,23),e.YNc(36,Oe,2,0,"th",16),e.YNc(37,Me,4,0,"td",17),e.BQk(),e.ynx(38,24),e.YNc(39,Be,2,0,"th",16),e.YNc(40,$e,2,1,"td",17),e.BQk(),e.YNc(41,je,1,0,"tr",25),e.YNc(42,ze,1,0,"tr",26),e.qZA(),e.YNc(43,He,2,0,"div",27),e.YNc(44,Ge,2,0,"div",28),e.YNc(45,Ke,1,5,"mat-paginator",29),e.qZA()()),2&t&&(e.xp6(9),e.Q6J("formControl",o.searchStr)("filters",o.agamFilters),e.xp6(10),e.Q6J("dataSource",o.dataSource),e.xp6(22),e.Q6J("matHeaderRowDef",o.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns),e.xp6(1),e.Q6J("ngIf",o.isLoading),e.xp6(1),e.Q6J("ngIf",o.isEmpty),e.xp6(1),e.Q6J("ngIf",!o.isLoading&&!o.isEmpty))},dependencies:[p.mk,p.O5,v.Hw,s.JJ,s.oH,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,G.oO,x.lW,w.Ou,T.NW,B.N,m.rH,p.rS,p.uU],styles:["app-center-request{overflow:auto!important}  app-center-request .center-request{padding:2.6em}  app-center-request .center-request .agm-search_box{height:auto!important}  app-center-request .center-request__header{display:flex;flex-direction:column;margin-top:2rem}  app-center-request .center-request__header-input{width:100%}  app-center-request .center-request .mat-tab-body-wrapper{margin-top:26px}  app-center-request .center-request .mat-tab-body-wrapper .primary{margin-bottom:0}  app-center-request .center-request .agm-table{margin-top:2em}  app-center-request .center-request .statusColumn .status-success{color:#146300}  app-center-request .center-request .statusColumn .status-info{color:#004990}  app-center-request .center-request .statusColumn .status-cancel{color:#ff4155}  app-center-request .center-request .statusColumn .status-dark{color:#012b3e}  app-center-request .center-request .btn-container{display:flex;justify-content:flex-end}  app-center-request .center-request .btn-container .buttons{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:0 1em}  app-center-request .agm-table{margin-top:2rem;max-width:100%}  app-center-request .agm-table .detail-btn{width:167px;background:#cdd7dc;border-radius:6px}  app-center-request .mat-select-value{text-align:center}@media (min-width: 1025px){  app-center-request .center-request__header{flex-direction:row}}@media only screen and (min-width: 769px) and (max-width: 1024px){  app-center-request .center-request .btn-container{justify-content:flex-end}  app-center-request .center-request__header{flex-direction:column}  app-center-request .center-request__header--input{width:100%}  app-center-request .center-request__header--tab{width:100%}  app-center-request .phlebo-management__header--tab{width:100%}}@media only screen and (min-width: 481px) and (max-width: 768px){  app-center-request .center-request{margin-left:1rem;margin-top:.5rem;margin-right:1rem}  app-center-request .center-request .btn-container{justify-content:flex-end}  app-center-request .center-request__header{flex-direction:column}  app-center-request .center-request__header--input{width:100%}  app-center-request .center-request__header--tab{width:100%}}@media (min-width: 1025px){  app-center-request .agm-filter{width:100%!important}}@media only screen and (min-width: 769px) and (max-width: 1024px){  app-center-request .btn-container{justify-content:end}}@media (max-width: 480px){  app-center-request .center-request{margin-left:1rem;margin-top:.5rem;margin-right:1rem}  app-center-request .center-request .btn-container{justify-content:center}  app-center-request .center-request__header{flex-direction:column}  app-center-request .center-request__header--input{width:100%}  app-center-request .center-request__header--tab{width:100%}  app-center-request .center-request .agm-filter{width:100%!important}  app-center-request .center-request .btn-container{margin-top:2em}}.create-icon[_ngcontent-%COMP%]{width:30px;height:30px;font-size:30px!important}"],changeDetection:0}),n})();var We=h(44466),R=h(48689),A=h(446),qe=h(10266);function Xe(n,a){1&n&&(e.TgZ(0,"th",31),e._uU(1,"Equipment Code"),e.qZA())}function et(n,a){if(1&n&&(e.TgZ(0,"td",32),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.code," ")}}function tt(n,a){1&n&&(e.TgZ(0,"th",31),e._uU(1,"Equipment Name"),e.qZA())}function nt(n,a){if(1&n&&(e.TgZ(0,"td",32),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(t.name)}}function ot(n,a){1&n&&(e.TgZ(0,"th",31),e._uU(1,"Brand"),e.qZA())}function at(n,a){if(1&n&&(e.TgZ(0,"td",32),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(t.brand.name)}}function it(n,a){1&n&&(e.TgZ(0,"th",31),e._uU(1,"Vendor"),e.qZA())}function rt(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,","),e.qZA())}function st(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.YNc(2,rt,2,0,"span",36),e.qZA()),2&n){const t=a.$implicit,o=a.last;e.xp6(1),e.hij(" ",t.name," "),e.xp6(1),e.Q6J("ngIf",!o)}}function ct(n,a){if(1&n&&(e.TgZ(0,"td",33)(1,"div",34),e.YNc(2,st,3,2,"span",35),e.qZA()()),2&n){const t=a.$implicit,o=e.oxw();e.xp6(1),e.Q6J("matTooltip",o.getVendorsName(t.vendors)),e.xp6(1),e.Q6J("ngForOf",t.vendors)}}function lt(n,a){1&n&&(e.TgZ(0,"th",31),e._uU(1,"Department"),e.qZA())}function pt(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,","),e.qZA())}function dt(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.YNc(2,pt,2,0,"span",36),e.qZA()),2&n){const t=a.$implicit,o=a.last;e.xp6(1),e.hij(" ",t.name," "),e.xp6(1),e.Q6J("ngIf",!o)}}function ut(n,a){if(1&n&&(e.TgZ(0,"td",32)(1,"div",34),e.YNc(2,dt,3,2,"span",35),e.qZA()()),2&n){const t=a.$implicit,o=e.oxw();e.xp6(1),e.Q6J("matTooltip",o.getVendorsName(t.departments)),e.xp6(1),e.Q6J("ngForOf",t.departments)}}function mt(n,a){1&n&&(e.TgZ(0,"th",31),e._uU(1,"Center"),e.qZA())}function ht(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,","),e.qZA())}function _t(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.YNc(2,ht,2,0,"span",36),e.qZA()),2&n){const t=a.$implicit,o=a.last;e.xp6(1),e.hij(" ",t.name," "),e.xp6(1),e.Q6J("ngIf",!o)}}function ft(n,a){if(1&n&&(e.TgZ(0,"td",32)(1,"div",34),e.YNc(2,_t,3,2,"span",35),e.qZA()()),2&n){const t=a.$implicit,o=e.oxw();e.xp6(1),e.Q6J("matTooltip",o.getVendorsName(t.centers)),e.xp6(1),e.Q6J("ngForOf",t.centers)}}function gt(n,a){1&n&&(e.TgZ(0,"th",31),e._uU(1,"Created On"),e.qZA())}function bt(n,a){if(1&n&&(e.TgZ(0,"td",32),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.created_at,"dd/MM/yyyy hh:mm a")," ")}}function Ct(n,a){1&n&&(e.TgZ(0,"th",31),e._uU(1,"Action"),e.qZA())}function qt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"td",32),e._UZ(1,"mat-icon",37),e.TgZ(2,"mat-icon",38),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.onRemoveEquipment(r))}),e._uU(3,"delete"),e.qZA()()}if(2&n){const t=a.$implicit;e.xp6(1),e.MGl("routerLink","/inventory/alltests/equipment/",t.id,"/basic")}}function vt(n,a){1&n&&e._UZ(0,"tr",39)}function Zt(n,a){1&n&&e._UZ(0,"tr",40)}let xt=(()=>{class n{constructor(t,o,i,r){this.dialog=t,this.inventoryService=o,this.cdr=i,this.snackBbar=r,this.equipmentList=[],this.displayedColumns=["equipment_Code","equipment_Name","brand","vendor","department","center","created_at","action"],this.searchStr=new s.NI(""),this.agamFilters=[],this.spinner=!1,this.dataSource=new c.by(this.equipmentList),this.equipmentSearch=new s.NI(""),this.payload={filter:{}},this.isEmpty=!1,this.equipmentPagination=new y.p({page:1,perPage:5,total:this.tableLength}),this.unsubscribe$=new S.x,this.searchEquipment()}ngOnInit(){this.loadFilters(),this.getEquipmentList()}onSearch(t){}loadFilters(){this.spinner=!0,this.agamFilters=[{type:"equipementName",name:"Equipment Name",data:this.equipmentList,lableKey:"name"},{type:"department",name:"Department",data:this.equipmentList,lableKey:"department"},{type:"center",name:"Center",data:this.equipmentList,lableKey:"center"}]}getEquipmentList(){this.spinner=!0,this.cdr.markForCheck(),this.inventoryService.getEquipmentPagination(this.equipmentPagination.perPage,this.equipmentPagination.page,this.payload).subscribe(t=>{this.dataSource=t?.data?.results,this.tableLength=t?.data?.pagination?.total,this.isEmpty=0==this.tableLength,this.spinner=!1,this.cdr.markForCheck()},t=>{let o=t?.error?.error;this.spinner=!1,this.snackBbar.open(o,"close"),this.cdr.markForCheck()})}getPageEvent(t){this.equipmentPagination.doPagination(t)}handleFilter(t){}searchEquipment(){this.equipmentSearch.valueChanges.pipe((0,V.b)(400),(0,$.R)(this.unsubscribe$),(0,j.w)(t=>(this.spinner=!0,this.cdr.markForCheck(),this.payload={filter:{search:t,search_by:"name,mobile_number"}},t||(this.payload={}),this.inventoryService.getVendorsbypagniation(this.equipmentPagination.perPage,this.equipmentPagination.page,this.payload)))).subscribe(t=>{this.dataSource=t?.data?.results,this.tableLength=t?.data?.pagination?.total,this.isEmpty=0==this.tableLength,this.spinner=!1,this.cdr.markForCheck()},t=>{this.spinner=!1,this.cdr.markForCheck()})}resetFilter(){this.payload={}}filter(){}onRemoveEquipment(t){this.confirmDialog=this.dialog.open(F.$,{width:"40%",height:"auto",disableClose:!1,data:{message:"Are you sure want to Delete: "+t.name+" ?",buttonText:{ok:"Delete",cancel:"Cancel"}}}),this.confirmDialog.afterClosed().subscribe(o=>{o&&(this.spinner=!0,this.cdr.markForCheck(),this.inventoryService.deleteEquipment(t.id).subscribe({next:i=>{this.spinner=!1,"success"===i.status&&(this.snackBbar.open(i.message,""),this.getEquipmentList()),this.cdr.markForCheck()},error:i=>{let r="Something went wrong";400==i.status?r=i?.error?.error:i?.error?.message&&(r=i?.error?.message),this.snackBbar.open(r,"close"),this.spinner=!1,this.cdr.markForCheck()}}))})}bulkUpload(t){this.spinner=!0;for(var o=0;o<t.target.files.length;o++){const i=new FormData;i.append("file",t.target.files[o]),i.append("upload_type","bulkUpload"),this.inventoryService.bulkUploadOrganisation(i).subscribe(r=>{this.spinner=!1,"success"===r.status&&this.snackBbar.open(r.message,""),this.cdr.markForCheck()},r=>{let l="Something went wrong";400==r.status?l=r?.error?.error:r?.error?.message&&(l=r?.error?.message),this.snackBbar.open(l,"close"),this.spinner=!1,this.cdr.markForCheck()})}}getCentersName(t){return t.map(o=>o.name)}getVendorsName(t){return t.map(o=>o.name)}getDepartmentsName(t){return t.map(o=>o.name)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(C.uw),e.Y36(Z),e.Y36(e.sBO),e.Y36(A.c))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-all-tests"]],decls:51,vars:11,consts:[[1,"all-tests"],[1,"title","primary"],[1,"all-tests__header"],[1,"all-tests__header--input"],[1,"all-tests__header--input_form"],[3,"ngModel","formControl","filters","ngModelChange","search","filter","reset"],[1,"button-common"],[1,"action-buttons"],[1,"btn","sample-btn"],["routerLink","/inventory/alltests/equipment/basic",1,"btn-icons"],["svgIcon","appEquipment"],["type","file","accept",".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel  .xlt, .xltm,.xltx,.xlsm,.xls,.xlsx",1,"uploadfile"],[1,"btn"],[1,"btn-icons"],[1,"agm-table--container"],["mat-table","",1,"agm-table",3,"dataSource"],["matColumnDef","equipment_Code"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","equipment_Name"],["matColumnDef","brand"],["matColumnDef","vendor"],["class","email-break","mat-cell","",4,"matCellDef"],["matColumnDef","department"],["matColumnDef","center"],["matColumnDef","created_at"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page"],["paginator",""],["mat-header-cell",""],["mat-cell",""],["mat-cell","",1,"email-break"],[1,"ellipsis",3,"matTooltip"],[4,"ngFor","ngForOf"],[4,"ngIf"],["svgIcon","appEdit",3,"routerLink"],["svgIcon","appDelete",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div")(2,"h3",1),e._uU(3,"Equipments"),e.qZA()(),e.TgZ(4,"section",2)(5,"div",3)(6,"form",4)(7,"app-agam-search-filter",5),e.NdJ("ngModelChange",function(r){return o.onSearch=r})("ngModelChange",function(r){return o.onSearch(r)})("search",function(){return o.filter()})("filter",function(r){return o.handleFilter(r)})("reset",function(){return o.resetFilter()}),e.qZA()()(),e.TgZ(8,"div",6)(9,"div",7)(10,"div",8)(11,"button",9)(12,"span"),e._uU(13,"Add Equipment"),e.qZA(),e.TgZ(14,"div"),e._UZ(15,"mat-icon",10),e.qZA()()(),e._UZ(16,"input",11),e.TgZ(17,"div",12)(18,"button",13)(19,"span"),e._uU(20," File Upload "),e.qZA()()()()()(),e.TgZ(21,"div",14)(22,"table",15),e.ynx(23,16),e.YNc(24,Xe,2,0,"th",17),e.YNc(25,et,2,1,"td",18),e.BQk(),e.ynx(26,19),e.YNc(27,tt,2,0,"th",17),e.YNc(28,nt,2,1,"td",18),e.BQk(),e.ynx(29,20),e.YNc(30,ot,2,0,"th",17),e.YNc(31,at,2,1,"td",18),e.BQk(),e.ynx(32,21),e.YNc(33,it,2,0,"th",17),e.YNc(34,ct,3,2,"td",22),e.BQk(),e.ynx(35,23),e.YNc(36,lt,2,0,"th",17),e.YNc(37,ut,3,2,"td",18),e.BQk(),e.ynx(38,24),e.YNc(39,mt,2,0,"th",17),e.YNc(40,ft,3,2,"td",18),e.BQk(),e.ynx(41,25),e.YNc(42,gt,2,0,"th",17),e.YNc(43,bt,3,4,"td",18),e.BQk(),e.ynx(44,26),e.YNc(45,Ct,2,0,"th",17),e.YNc(46,qt,4,1,"td",18),e.BQk(),e.YNc(47,vt,1,0,"tr",27),e.YNc(48,Zt,1,0,"tr",28),e.qZA(),e.TgZ(49,"mat-paginator",29,30),e.NdJ("page",function(r){return o.getPageEvent(r)}),e.qZA()()()),2&t&&(e.xp6(7),e.Q6J("ngModel",o.onSearch)("formControl",o.searchStr)("filters",o.agamFilters),e.xp6(15),e.Q6J("dataSource",o.dataSource),e.xp6(25),e.Q6J("matHeaderRowDef",o.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns),e.xp6(1),e.Q6J("length",o.tableLength||0)("pageIndex",(o.equipmentPagination.page||1)-1)("pageSize",o.equipmentPagination.perPage)("pageSizeOptions",o.equipmentPagination.paginationSizes)("showFirstLastButtons",!0))},dependencies:[p.sg,p.O5,v.Hw,s._Y,s.JJ,s.JL,s.F,s.oH,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,T.NW,qe.gM,B.N,m.rH,p.uU],styles:["app-all-tests .all-tests{padding:2.6em}  app-all-tests .all-tests .btn-center{display:flex;justify-content:space-around;align-items:end;width:50%;border-bottom:1px solid rgba(6,70,98,.15)}  app-all-tests .all-tests .btn-container{display:flex;margin-top:-3em}  app-all-tests .all-tests .btn-container .buttons{display:flex;flex-direction:column;justify-content:space-around;align-items:center;padding:0 1em}  app-all-tests .all-tests .btn-container .buttons p{margin-top:16px}  app-all-tests .all-tests__header{display:flex;flex-direction:row;margin-top:2rem;justify-content:space-between}  app-all-tests .all-tests__header--input{width:56%}  app-all-tests .all-tests .mat-tab-body-wrapper{margin-top:26px}  app-all-tests .all-tests .mat-tab-body-wrapper .primary{margin-bottom:0}  app-all-tests .all-tests .mat-select-value{text-align:center}  app-all-tests .all-tests .all-tests__header--tab .active-tab{bottom:0}  app-all-tests .all-tests .all-tests__header--tab .active-tab__button{height:3.5rem;width:3rem;border-radius:50%}  app-all-tests .all-tests .spinner{margin-top:25px;margin-bottom:25px}  app-all-tests .agm-table{margin-top:5vh}  app-all-tests .agm-table .mat-row .mat-cell{max-width:310px;word-wrap:break-word}  app-all-tests .uploadfile{display:none}@media (min-width: 1025px){  app-all-tests .all-tests__header{flex-direction:row}}@media only screen and (min-width: 769px) and (max-width: 1024px){  app-all-tests .all-tests .btn-center{justify-content:center;width:100%}  app-all-tests .all-tests .btn-center .btn-container{margin-top:2em}  app-all-tests .all-tests__header{flex-direction:column}  app-all-tests .all-tests__header--input{width:100%}  app-all-tests .all-tests__header--tab{width:100%}  app-all-tests .all-tests __header--tab{width:100%}}@media only screen and (min-width: 481px) and (max-width: 768px){  app-all-tests .all-tests{margin-left:1rem;margin-top:.5rem;margin-right:1rem}  app-all-tests .all-tests .btn-center{width:97vw}  app-all-tests .all-tests .btn-center .btn-container{margin-top:2em}  app-all-tests .all-tests__header{flex-direction:column}  app-all-tests .all-tests__header--input{width:100%}  app-all-tests .all-tests__header--tab{width:100%}}@media (max-width: 480px){  app-all-tests .all-tests{margin-left:1rem;margin-top:.5rem;margin-right:1rem}  app-all-tests .all-tests .btn-center{flex-direction:column}  app-all-tests .all-tests .btn-center .btn-container{margin-top:2em;justify-content:center;align-items:center;width:93vw}  app-all-tests .all-tests__header{flex-direction:column}  app-all-tests .all-tests__header--input{width:100%}  app-all-tests .all-tests__header--tab{width:100%}}"],changeDetection:0}),n})(),yt=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-center-consumption"]],decls:1,vars:0,template:function(t,o){1&t&&e._UZ(0,"router-outlet")},dependencies:[m.lC],changeDetection:0}),n})();var X=h(15861),Q=h(6260),re=h(87044),ve=h(69751),se=h(68675),P=h(54004),D=h(3238),g=h(59549),k=h(284),Y=h(44850),J=h(84385),ne=h(99602),L=h(53117);function Tt(n,a){1&n&&(e.TgZ(0,"label",35),e._uU(1,"Vendor"),e.qZA())}function wt(n,a){if(1&n&&(e.TgZ(0,"mat-option",36),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function At(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Vendor is Required "),e.qZA())}function kt(n,a){1&n&&(e.TgZ(0,"label",35),e._uU(1,"Batch No"),e.qZA())}function Pt(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Batch Number is Required "),e.qZA())}function Nt(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Batch Number is Requiredsdas "),e.qZA())}function Ut(n,a){1&n&&(e.TgZ(0,"label",35),e._uU(1,"Expiry Date"),e.qZA())}function St(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Expiry Date is Required "),e.qZA())}function Dt(n,a){1&n&&(e.TgZ(0,"label",35),e._uU(1,"Request Quantity"),e.qZA())}function It(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Request Quantity is Required "),e.qZA())}function Ft(n,a){1&n&&(e.TgZ(0,"label",35),e._uU(1,"Action"),e.qZA())}function Yt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",16)(1,"div",17)(2,"div",18),e.YNc(3,Tt,2,0,"label",19),e.TgZ(4,"mat-form-field",20)(5,"mat-select",21),e.NdJ("selectionChange",function(i){const l=e.CHM(t).index,u=e.oxw(2);return e.KtG(u.onVendorSelect(i,l))}),e.YNc(6,wt,2,2,"mat-option",22),e.qZA(),e._UZ(7,"mat-icon",23),e.YNc(8,At,2,0,"mat-error",5),e.qZA()(),e._UZ(9,"mat-divider",24),e.TgZ(10,"div",18),e.YNc(11,kt,2,0,"label",19),e.TgZ(12,"mat-form-field",25)(13,"input",26),e.NdJ("keydown.space",function(i){return i.preventDefault()}),e.qZA(),e.YNc(14,Pt,2,0,"mat-error",5),e.YNc(15,Nt,2,0,"mat-error",5),e.qZA()(),e._UZ(16,"mat-divider",24),e.TgZ(17,"div",18),e.YNc(18,Ut,2,0,"label",19),e.TgZ(19,"mat-form-field",27),e._UZ(20,"input",28),e.TgZ(21,"mat-datepicker-toggle",29),e._UZ(22,"mat-icon",30),e.qZA(),e._UZ(23,"mat-datepicker",null,31),e.YNc(25,St,2,0,"mat-error",5),e.qZA()(),e._UZ(26,"mat-divider",24),e.TgZ(27,"div",18),e.YNc(28,Dt,2,0,"label",19),e.TgZ(29,"mat-form-field",25),e._UZ(30,"input",32),e.YNc(31,It,2,0,"mat-error",5),e.qZA()(),e._UZ(32,"mat-divider",24),e.TgZ(33,"div",18),e.YNc(34,Ft,2,0,"label",19),e.TgZ(35,"div",33)(36,"mat-icon",34),e.NdJ("click",function(){const r=e.CHM(t).index,l=e.oxw(2);return e.KtG(l.deleteReceipt(r))}),e.qZA()()()()()}if(2&n){const t=a.index,o=e.MAs(24),i=e.oxw(2);let r,l,u,_,b;e.xp6(1),e.Q6J("formGroupName",t),e.xp6(2),e.Q6J("ngIf",0==t),e.xp6(3),e.Q6J("ngForOf",i.vendors),e.xp6(2),e.Q6J("ngIf",null==(r=i.formData.controls[t].get("vendor"))||null==r.errors?null:r.errors.required),e.xp6(1),e.Q6J("vertical",!0),e.xp6(2),e.Q6J("ngIf",0==t),e.xp6(2),e.Q6J("disabled",!i.has_batchno),e.xp6(1),e.Q6J("ngIf",null==(l=i.formData.controls[t].get("batch_no"))||null==l.errors?null:l.errors.required),e.xp6(1),e.Q6J("ngIf",null==(u=i.formData.controls[t].get("batch_no"))||null==u.errors?null:u.errors.pattern),e.xp6(1),e.Q6J("vertical",!0),e.xp6(2),e.Q6J("ngIf",0==t),e.xp6(2),e.Q6J("matDatepicker",o)("readonly",i.has_expiry)("disabled",!i.has_expiry)("min",i.minDate),e.xp6(1),e.Q6J("for",o),e.xp6(4),e.Q6J("ngIf",null==(_=i.formData.controls[t].get("expiry_date"))||null==_.errors?null:_.errors.required),e.xp6(1),e.Q6J("vertical",!0),e.xp6(2),e.Q6J("ngIf",0==t),e.xp6(3),e.Q6J("ngIf",null==(b=i.formData.controls[t].get("request_qty"))||null==b.errors?null:b.errors.required),e.xp6(1),e.Q6J("vertical",!0),e.xp6(2),e.Q6J("ngIf",0==t)}}function Rt(n,a){1&n&&(e.TgZ(0,"div",37)(1,"mat-icon"),e._uU(2,"info"),e.qZA(),e.TgZ(3,"span"),e._uU(4," You cannot add same Batch No for a Vendor multiple times."),e.qZA()())}function Qt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"section")(1,"form",7),e.YNc(2,Yt,37,22,"div",8),e.YNc(3,Rt,5,0,"div",9),e.qZA(),e.TgZ(4,"div",10)(5,"div",11)(6,"button",12),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.addform())}),e._UZ(7,"mat-icon",13),e.TgZ(8,"span"),e._uU(9,"Add More"),e.qZA()()()(),e.TgZ(10,"section")(11,"div",14)(12,"button",15),e.NdJ("click",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.onSubmit(i))}),e._uU(13," Submit "),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.productDataForm),e.xp6(1),e.Q6J("ngForOf",t.formData.controls),e.xp6(1),e.Q6J("ngIf",t.has_duplicate),e.xp6(9),e.Q6J("disabled",!t.items.valid)}}function Jt(n,a){1&n&&(e.TgZ(0,"div",38),e._UZ(1,"mat-spinner",39),e.qZA())}class Ot{constructor(){this.product="",this.vendor="",this.batchno="",this.expdate="",this.reqty=""}}let Mt=(()=>{class n{constructor(t,o,i,r,l,u){this.data=t,this.dialogRef=o,this.fb=i,this.cdr=r,this.inventoryService=l,this.snackBbar=u,this.receipt=new Ot,this.dataArray=[],this.isLoading=!0,this.vendors=[],this.has_expiry=!0,this.has_batchno=!0,this.has_duplicate=!1}ngOnInit(){this.minDate=new Date,this.dataArray.push(this.receipt),this.data&&(this.reqProduct=this.data.product,console.log(this.reqProduct),this.getProductVendors(this.reqProduct.product_details.product))}initForm(t=[]){this.productDataForm=new s.cw({items:new s.Oe([])}),this.items=this.productDataForm.get("items"),t.length?t.forEach(o=>{this.items.push(this.createItem({product:o.product,vendor:o.vendor,batch_no:o.batch_no,expiry_date:o.expiry_date,request_qty:o.request_qty}))}):this.items.push(this.createItem({product:this.reqProduct.product_details.product.id,vendor:"",batch_no:"",expiry_date:"",request_qty:""}))}get formData(){return this.productDataForm.get("items")}createItem(t){return this.fb.group({product:new s.NI(t?.product),vendor:new s.NI(t?.vendor),batch_no:new s.NI({value:t?.batch_no,disabled:!this.has_batchno},this.has_batchno?s.kI.required:[]),expiry_date:new s.NI({value:t?.expiry_date,disabled:!this.has_expiry},this.has_expiry?s.kI.required:[]),request_qty:new s.NI(t?.request_qty,[s.kI.required])})}addform(){if(this.has_duplicate=!1,this.items.valid){let t=this.items.value;if(t.length>0){let o=t[t.length-1];1==t.filter(r=>r.vendor==o.vendor&&(!this.has_batchno||this.has_batchno&&r.batch_no==o.batch_no)).length?(this.items=this.productDataForm.get("items"),this.items.push(this.createItem({product:this.reqProduct.product_details.product.id}))):this.has_duplicate=!0}}}deleteReceipt(t){this.items.removeAt(t)}onSubmit(t){this.dialogRef.close(this.items.value)}getProductVendors(t){t?.id&&(this.vendors=[],this.isLoading=!1,this.vendors=[{id:"vendor-1001",name:"vendor1001",price:100,price_unit_lanel:"/kg",price_unit_id:"unit-aaaaa"},{id:"vendor-1002",name:"vendor1002",price:200,price_unit_lanel:"/kg",price_unit_id:"unit-bbbbb"}],this.reqProduct?.new_inventory&&void 0!==typeof this.reqProduct.new_inventory?this.initForm(this.reqProduct.new_inventory):this.initForm())}onVendorSelect(t,o){this.items.controls[o].patchValue({batch_no:"",expiry_date:"",request_qty:0})}keyDownHandler(t){32===t.keyCode&&t.preventDefault()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(C.WI),e.Y36(C.so),e.Y36(s.qu),e.Y36(e.sBO),e.Y36(Z),e.Y36(A.c))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-dialog"]],decls:17,vars:4,consts:[[1,"add-receipt"],[1,"header"],[1,"title","label-name"],[1,"primary","label-value"],["mat-dialog-close","","svgIcon","appClose"],[4,"ngIf"],["class","spinner-container",4,"ngIf"],[3,"formGroup"],["formArrayName","items","class","row",4,"ngFor","ngForOf"],["class","duplicate_err",4,"ngIf"],[1,"row"],[1,"col-lg-12",2,"text-align","right"],["mat-raised-button","",2,"margin-top","1.7em",3,"click"],["svgIcon","appAdd",1,"addicon"],[1,"submit"],[1,"button-mat-all","submitbtn",3,"disabled","click"],["formArrayName","items",1,"row"],[1,"add-receipt_details",3,"formGroupName"],[1,"input"],["class","primary input-label",4,"ngIf"],["appearance","outline",2,"width","13em"],["formControlName","vendor","placeholder","Vendor",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["matSuffix","","svgIcon","appDownArrow"],[3,"vertical"],["appearance","outline"],["type","text","matInput","","formControlName","batch_no",3,"disabled","keydown.space"],["appearance","outline",1,"field-common"],["matInput","","formControlName","expiry_date","placeholder","DD/MM/YYYY",1,"primary",3,"matDatepicker","readonly","disabled","min"],["matSuffix","",3,"for"],["svgIcon","appCalendar","matDatepickerToggleIcon",""],["datepicker",""],["formControlName","request_qty","type","number","matInput","","appNumbersOnly",""],[1,"addbtn"],["svgIcon","appDelete",1,"addicon","del",3,"click"],[1,"primary","input-label"],[3,"value"],[1,"duplicate_err"],[1,"spinner-container"],["diameter","70",1,"spinner"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"section",1)(2,"div")(3,"label",2),e._uU(4,"Product Code: "),e.qZA(),e.TgZ(5,"label",3),e._uU(6),e.qZA()(),e.TgZ(7,"div")(8,"label",2),e._uU(9,"Product Name: "),e.qZA(),e.TgZ(10,"label",3),e._uU(11),e.qZA()(),e.TgZ(12,"div"),e._UZ(13,"mat-icon",4),e.qZA()(),e._UZ(14,"mat-divider"),e.YNc(15,Qt,14,4,"section",5),e.YNc(16,Jt,2,0,"div",6),e.qZA()),2&t&&(e.xp6(6),e.Oqu(o.reqProduct.product_details.product.code),e.xp6(5),e.Oqu(o.reqProduct.product_details.product.name),e.xp6(4),e.Q6J("ngIf",!o.isLoading),e.xp6(1),e.Q6J("ngIf",o.isLoading))},dependencies:[p.sg,p.O5,v.Hw,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.sg,s.u,s.x0,s.CE,D.ey,g.TO,g.KE,g.R9,k.Nt,Y.d,J.gD,x.lW,ne.Mq,ne.hl,ne.nW,ne.Q0,w.Ou,C.ZT,L.X],styles:["app-add-dialog .add-receipt .mat-form-field-appearance-outline .mat-form-field-outline{background-color:#e6ebee;border-radius:5px}  app-add-dialog .add-receipt .mat-form-field-infix{width:60%;text-align:center;padding:.5em 0 .8em}  app-add-dialog .add-receipt .mat-form-field-wrapper{padding-bottom:0}  app-add-dialog .add-receipt .mat-raised-button span{margin-left:10px}  app-add-dialog .add-receipt .duplicate_err{color:var(--status-cancel);display:flex;place-content:center;align-items:center}  app-add-dialog .add-receipt .header{display:flex;align-items:baseline;justify-content:space-between;margin-bottom:20px}  app-add-dialog .add-receipt .header .label-name{margin-right:1rem}  app-add-dialog .add-receipt .header mat-icon{cursor:pointer}  app-add-dialog .add-receipt_details{margin-top:1em;display:flex;flex-direction:row}  app-add-dialog .add-receipt_details .input{display:flex;flex-direction:column;text-align:center;padding:0 1rem;max-width:90%}  app-add-dialog .add-receipt_details .input .input-label{margin:1rem 0}  app-add-dialog .add-receipt_details .addbtn{display:flex;align-items:center;font-size:32px;background-color:#e6ebee;padding:.4em 1em;border-radius:5px;margin-left:.6em}  app-add-dialog .add-receipt_details .addbtn .addicon{cursor:pointer}  app-add-dialog .add-receipt_details .mat-select-arrow-wrapper{display:none}  app-add-dialog .add-receipt .submit{display:flex;justify-content:center;padding-top:3rem}  app-add-dialog .add-receipt .submit .submitbtn{padding:.5em 3em!important;background-color:#053353;color:#fff;font-size:20px;border-radius:10px!important;width:284px;height:59px}"],changeDetection:0}),n})();var Bt=h(54079),K=h(37536),oe=h(63030),N=h(47957),O=h(39349),E=h(5447);const Lt=["table"],Et=function(){return["/inventory/centerrequest"]};function Vt(n,a){1&n&&(e.TgZ(0,"section")(1,"button",25),e._UZ(2,"mat-icon",26),e._uU(3," \xa0 Back "),e.qZA()()),2&n&&(e.xp6(1),e.Q6J("routerLink",e.DdM(1,Et)))}const $t=function(n,a,t,o){return{"status-dark":n,"status-cancel":a,"status-info":t,"status-success":o}};function jt(n,a){if(1&n&&(e.TgZ(0,"section",27)(1,"div",9)(2,"div",28)(3,"div",9)(4,"div",29)(5,"span",30),e._uU(6,"Request ID"),e.qZA()(),e.TgZ(7,"div",31)(8,"p",32),e._uU(9),e.qZA()()()(),e.TgZ(10,"div",33)(11,"div",9)(12,"div",34)(13,"span",30),e._uU(14,"Requested On"),e.qZA()(),e.TgZ(15,"div",34)(16,"p",32),e._uU(17),e.ALo(18,"date"),e.qZA()()()(),e.TgZ(19,"div",33)(20,"div",9)(21,"div",35)(22,"p",30),e._uU(23,"Request"),e.qZA()(),e.TgZ(24,"div",36)(25,"span",37),e._uU(26),e.ALo(27,"titlecase"),e.qZA()()()(),e.TgZ(28,"div",38)(29,"div",9)(30,"div",39)(31,"span",30),e._uU(32,"Requested By"),e.qZA()(),e.TgZ(33,"div",40)(34,"p",32),e._uU(35),e.qZA()()()()()()),2&n){const t=e.oxw();e.xp6(9),e.Oqu(null==t.request_info?null:t.request_info.request_id),e.xp6(8),e.hij(" ",e.xi3(18,5,null==t.request_info?null:t.request_info.created_at,"dd/MM/yyyy hh:mm a")," "),e.xp6(8),e.Q6J("ngClass",e.l5B(10,$t,"f28878f9-9257-4d61-a604-795f3ba0a6a0"==(null==t.request_info||null==t.request_info.status?null:t.request_info.status.id),"6a75b397-52c4-4d60-ad97-fec0f4a1ccdb"==(null==t.request_info||null==t.request_info.status?null:t.request_info.status.id),"2ff55100-24cd-4ae8-9e12-f34565018074"==(null==t.request_info||null==t.request_info.status?null:t.request_info.status.id),"f16cedf6-5f28-4f2f-97fd-02fafaf1f6b4"==(null==t.request_info||null==t.request_info.status?null:t.request_info.status.id))),e.xp6(1),e.Oqu(e.lcZ(27,8,null==t.request_info?null:t.request_info.status.name)),e.xp6(9),e.hij(" ",null==t.request_info||null==t.request_info.center?null:t.request_info.center.name," ")}}function zt(n,a){if(1&n&&(e.TgZ(0,"mat-option",63),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function Ht(n,a){1&n&&(e.TgZ(0,"mat-option",64),e._uU(1,"No Records Found"),e.qZA())}function Gt(n,a){if(1&n&&(e.TgZ(0,"mat-option",63),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",null==t?null:t.name," ")}}function Kt(n,a){1&n&&(e.TgZ(0,"mat-option",64),e._uU(1,"No Records Found"),e.qZA())}function Wt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"section",41)(1,"div",42)(2,"div",9)(3,"div",43)(4,"mat-form-field",44),e._UZ(5,"input",45,46)(7,"input",47),e.TgZ(8,"mat-autocomplete",48,49),e.NdJ("opened",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.updateCenterSelectContainer())})("closed",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onCloseCenterContainer())})("optionSelected",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.onCenterSelection(i))}),e.TgZ(10,"div",50),e.NdJ("scrolled",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.loadMoreCenters())}),e.YNc(11,zt,2,2,"mat-option",51),e.YNc(12,Ht,2,0,"mat-option",52),e.qZA()(),e.TgZ(13,"mat-icon",53),e._uU(14,"search"),e.qZA()()(),e.TgZ(15,"div",54)(16,"form",55)(17,"mat-form-field",56),e._UZ(18,"input",57),e.TgZ(19,"mat-autocomplete",58,59),e.NdJ("opened",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.updateProductSelectContainer())})("optionSelected",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.onProductSelection(i))}),e.TgZ(21,"div",60),e.NdJ("scrolled",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.loadMoreProducts())}),e.YNc(22,Gt,2,2,"mat-option",51),e.YNc(23,Kt,2,0,"mat-option",52),e.qZA()(),e._UZ(24,"mat-icon",61)(25,"mat-divider",62),e.qZA()()()()()()}if(2&n){const t=e.MAs(9),o=e.MAs(20),i=e.oxw();e.xp6(7),e.Q6J("formControl",i.searchCenterInput)("matAutocomplete",t),e.xp6(1),e.Q6J("displayWith",i.centerDisplayWithFn),e.xp6(2),e.Q6J("infiniteScrollDistance",1)("infiniteScrollThrottle",0)("scrollWindow",!0)("fromRoot",!0)("immediateCheck",!1)("alwaysCallback",!1)("infiniteScrollContainer",i.selectanelCenterContainer),e.xp6(1),e.Q6J("ngForOf",i.searchCenterUseAutoComplete.data),e.xp6(1),e.Q6J("ngIf",!i.searchCenterUseAutoComplete.data||!!i.searchCenterUseAutoComplete.data&&0===i.searchCenterUseAutoComplete.data.length),e.xp6(6),e.Q6J("formControl",i.searchProductInput)("matAutocomplete",o),e.xp6(1),e.Q6J("displayWith",i.productDisplayWithFn),e.xp6(2),e.Q6J("infiniteScrollDistance",1)("infiniteScrollThrottle",0)("scrollWindow",!1)("fromRoot",!0)("immediateCheck",!1)("alwaysCallback",!1)("infiniteScrollContainer",i.selectpanelProductContainer),e.xp6(1),e.Q6J("ngForOf",i.searchProductsUseAutoComplete.data),e.xp6(1),e.Q6J("ngIf",!i.searchProductsUseAutoComplete.data||!!i.searchProductsUseAutoComplete.data&&0===i.searchProductsUseAutoComplete.data.length),e.xp6(2),e.Q6J("vertical",!0)}}function Xt(n,a){1&n&&(e.TgZ(0,"th",78),e._uU(1,"Product Code"),e.qZA())}function en(n,a){if(1&n&&(e.TgZ(0,"td",79),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.code," ")}}function tn(n,a){1&n&&(e.TgZ(0,"th",78),e._uU(1,"Product Name"),e.qZA())}function nn(n,a){if(1&n&&(e.TgZ(0,"td",79),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function on(n,a){1&n&&(e.TgZ(0,"th",78),e._uU(1,"Request Quantity"),e.qZA())}function an(n,a){if(1&n&&(e.TgZ(0,"div",82)(1,"mat-form-field",83),e._UZ(2,"input",84),e.qZA()()),2&n){const t=e.oxw(2).index;e.Q6J("formGroupName",t)}}function rn(n,a){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,an,3,1,"div",81),e.qZA()),2&n){const t=a.index,o=e.oxw().index;e.xp6(1),e.Q6J("ngIf",o===t)}}function sn(n,a){if(1&n&&(e.TgZ(0,"td",79),e.YNc(1,rn,2,1,"div",80),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.product_details.controls)}}function cn(n,a){1&n&&(e.TgZ(0,"th",78),e._uU(1,"Action"),e.qZA())}function ln(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"td",79)(1,"mat-icon",85),e.NdJ("click",function(){const i=e.CHM(t),r=i.index,l=i.$implicit,u=e.oxw(2);return e.KtG(u.deleteProduct(r,l))}),e.qZA()()}}function pn(n,a){1&n&&e._UZ(0,"tr",86)}function dn(n,a){1&n&&e._UZ(0,"tr",87)}function un(n,a){1&n&&(e.TgZ(0,"div",88),e._UZ(1,"mat-spinner",89),e.qZA())}function mn(n,a){1&n&&(e.TgZ(0,"div",90),e._uU(1," No Data Available! "),e.qZA())}function hn(n,a){if(1&n&&(e.TgZ(0,"section",65)(1,"table",66,67),e.ynx(3,68),e.YNc(4,Xt,2,0,"th",69),e.YNc(5,en,2,1,"td",70),e.BQk(),e.ynx(6,71),e.YNc(7,tn,2,0,"th",69),e.YNc(8,nn,2,1,"td",70),e.BQk(),e.ynx(9,72),e.YNc(10,on,2,0,"th",69),e.YNc(11,sn,2,1,"td",70),e.BQk(),e.ynx(12,73),e.YNc(13,cn,2,0,"th",69),e.YNc(14,ln,2,0,"td",70),e.BQk(),e.YNc(15,pn,1,0,"tr",74),e.YNc(16,dn,1,0,"tr",75),e.qZA(),e.YNc(17,un,2,0,"div",76),e.YNc(18,mn,2,0,"div",77),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("dataSource",t.productDatasource),e.xp6(14),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(1),e.Q6J("ngIf",t.isLoading),e.xp6(1),e.Q6J("ngIf",!t.productDatasource.data.length)}}function _n(n,a){1&n&&(e.TgZ(0,"th",78),e._uU(1,"Product Code"),e.qZA())}function fn(n,a){if(1&n&&(e.TgZ(0,"td",79),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",null==t.product_details.product?null:t.product_details.product.code," ")}}function gn(n,a){1&n&&(e.TgZ(0,"th",78),e._uU(1,"Product Name"),e.qZA())}function bn(n,a){if(1&n&&(e.TgZ(0,"td",79),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",null==t.product_details.product?null:t.product_details.product.name," ")}}function Cn(n,a){1&n&&(e.TgZ(0,"th",78),e._uU(1,"Request Quantity"),e.qZA())}function qn(n,a){if(1&n&&(e.TgZ(0,"div",82)(1,"mat-form-field",83),e._UZ(2,"input",91),e.qZA()()),2&n){const t=e.oxw(2),i=t.$implicit;e.Q6J("formGroupName",t.index),e.xp6(2),e.s9C("value",i.quantity)}}function vn(n,a){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,qn,3,2,"div",81),e.qZA()),2&n){const t=a.index,o=e.oxw().index;e.xp6(1),e.Q6J("ngIf",o===t)}}function Zn(n,a){if(1&n&&(e.TgZ(0,"td",79),e.YNc(1,vn,2,1,"div",80),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.product_details.controls)}}function xn(n,a){1&n&&(e.TgZ(0,"th",78),e._uU(1,"Action"),e.qZA())}function yn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"td",79)(1,"mat-icon",85),e.NdJ("click",function(){const i=e.CHM(t),r=i.index,l=i.$implicit,u=e.oxw(2);return e.KtG(u.deleteProduct(r,l))}),e.qZA()()}}function Tn(n,a){1&n&&e._UZ(0,"tr",86)}function wn(n,a){1&n&&e._UZ(0,"tr",87)}function An(n,a){1&n&&(e.TgZ(0,"div",88),e._UZ(1,"mat-spinner",89),e.qZA())}function kn(n,a){1&n&&(e.TgZ(0,"div",90),e._uU(1," No Data Available! "),e.qZA())}function Pn(n,a){if(1&n&&(e.TgZ(0,"section",65)(1,"table",66,67),e.ynx(3,68),e.YNc(4,_n,2,0,"th",69),e.YNc(5,fn,2,1,"td",70),e.BQk(),e.ynx(6,71),e.YNc(7,gn,2,0,"th",69),e.YNc(8,bn,2,1,"td",70),e.BQk(),e.ynx(9,72),e.YNc(10,Cn,2,0,"th",69),e.YNc(11,Zn,2,1,"td",70),e.BQk(),e.ynx(12,73),e.YNc(13,xn,2,0,"th",69),e.YNc(14,yn,2,0,"td",70),e.BQk(),e.YNc(15,Tn,1,0,"tr",74),e.YNc(16,wn,1,0,"tr",75),e.qZA(),e.YNc(17,An,2,0,"div",76),e.YNc(18,kn,2,0,"div",77),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("dataSource",t.productDatasource),e.xp6(14),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(1),e.Q6J("ngIf",t.isLoading),e.xp6(1),e.Q6J("ngIf",!t.productDatasource.data.length)}}function Nn(n,a){1&n&&(e.TgZ(0,"th",78),e._uU(1,"Product Code"),e.qZA())}function Un(n,a){if(1&n&&(e.TgZ(0,"td",79),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",null==t.product_details||null==t.product_details.product?null:t.product_details.product.code," ")}}function Sn(n,a){1&n&&(e.TgZ(0,"th",78),e._uU(1,"Product Name"),e.qZA())}function Dn(n,a){if(1&n&&(e.TgZ(0,"td",79),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",null==t.product_details||null==t.product_details.product?null:t.product_details.product.name," ")}}function In(n,a){1&n&&(e.TgZ(0,"th",78),e._uU(1,"Request Quantity"),e.qZA())}function Fn(n,a){if(1&n&&(e.TgZ(0,"td",79),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.quantity," ")}}function Yn(n,a){1&n&&e._UZ(0,"tr",86)}function Rn(n,a){1&n&&e._UZ(0,"tr",87)}function Qn(n,a){1&n&&(e.TgZ(0,"div",90),e._uU(1," No Data Available! "),e.qZA())}function Jn(n,a){if(1&n&&(e.TgZ(0,"section",65)(1,"table",66),e.ynx(2,68),e.YNc(3,Nn,2,0,"th",69),e.YNc(4,Un,2,1,"td",70),e.BQk(),e.ynx(5,71),e.YNc(6,Sn,2,0,"th",69),e.YNc(7,Dn,2,1,"td",70),e.BQk(),e.ynx(8,92),e.YNc(9,In,2,0,"th",69),e.YNc(10,Fn,2,1,"td",70),e.BQk(),e.YNc(11,Yn,1,0,"tr",74),e.YNc(12,Rn,1,0,"tr",75),e.qZA(),e.YNc(13,Qn,2,0,"div",77),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("dataSource",t.productDatasource),e.xp6(10),e.Q6J("matHeaderRowDef",t.ackDisplayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.ackDisplayedColumns),e.xp6(1),e.Q6J("ngIf",!t.productDatasource.data.length)}}function On(n,a){1&n&&(e.TgZ(0,"th",78),e._uU(1,"Product Code"),e.qZA())}function Mn(n,a){if(1&n&&(e.TgZ(0,"td",79),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.product_details.product.code," ")}}function Bn(n,a){1&n&&(e.TgZ(0,"th",78),e._uU(1,"Product Name"),e.qZA())}function Ln(n,a){if(1&n&&(e.TgZ(0,"td",79),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.product_details.product.name," ")}}function En(n,a){1&n&&(e.TgZ(0,"th",78),e._uU(1,"Request Quantity"),e.qZA())}function Vn(n,a){if(1&n&&(e.TgZ(0,"td",79),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.quantity," ")}}function $n(n,a){1&n&&(e.TgZ(0,"th",78),e._uU(1,"Received Quantity"),e.qZA())}function jn(n,a){if(1&n&&(e.TgZ(0,"td",79),e._uU(1),e.qZA()),2&n){const t=a.$implicit;let o;e.xp6(1),e.hij(" ",null!==(o=t.received_quantity_total)&&void 0!==o?o:0," ")}}function zn(n,a){1&n&&(e.TgZ(0,"th",78),e._uU(1,"Add"),e.qZA())}function Hn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"td",79)(1,"mat-icon",96),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.addDialog(r))}),e.qZA()()}}function Gn(n,a){1&n&&e._UZ(0,"tr",86)}function Kn(n,a){1&n&&e._UZ(0,"tr",87)}function Wn(n,a){1&n&&(e.TgZ(0,"div",88),e._UZ(1,"mat-spinner",89),e.qZA())}function Xn(n,a){1&n&&(e.TgZ(0,"div",90),e._uU(1,"No Data Available!"),e.qZA())}function eo(n,a){if(1&n&&(e.TgZ(0,"section",65)(1,"table",66),e.ynx(2,93),e.YNc(3,On,2,0,"th",69),e.YNc(4,Mn,2,1,"td",70),e.BQk(),e.ynx(5,71),e.YNc(6,Bn,2,0,"th",69),e.YNc(7,Ln,2,1,"td",70),e.BQk(),e.ynx(8,92),e.YNc(9,En,2,0,"th",69),e.YNc(10,Vn,2,1,"td",70),e.BQk(),e.ynx(11,94),e.YNc(12,$n,2,0,"th",69),e.YNc(13,jn,2,1,"td",70),e.BQk(),e.ynx(14,95),e.YNc(15,zn,2,0,"th",69),e.YNc(16,Hn,2,0,"td",70),e.BQk(),e.YNc(17,Gn,1,0,"tr",74),e.YNc(18,Kn,1,0,"tr",75),e.qZA(),e.YNc(19,Wn,2,0,"div",76),e.YNc(20,Xn,2,0,"div",77),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("dataSource",t.receiptDatasource),e.xp6(16),e.Q6J("matHeaderRowDef",t.receiptDisplayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.receiptDisplayedColumns),e.xp6(1),e.Q6J("ngIf",t.isLoading),e.xp6(1),e.Q6J("ngIf",t.isEmpty)}}function to(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Only upto 200 characters are allowed "),e.qZA())}function no(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"a",97),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.viewAttachment())}),e._uU(1),e.qZA()}if(2&n){const t=e.oxw();e.xp6(1),e.hij(" Uploaded (",t.attachmentFiles.length,") ")}}function oo(n,a){1&n&&(e.TgZ(0,"div",98),e._uU(1," Choose a file "),e.qZA())}function ao(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",102),e.NdJ("click",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onSubmitRequest(i))}),e._uU(1," Submit "),e.qZA()}}function io(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",99)(1,"button",100),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.cancel())}),e._uU(2," Cancel "),e.qZA(),e.YNc(3,ao,2,0,"button",101),e.qZA()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("ngIf",!t.request_id)}}function ro(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",102),e.NdJ("click",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onUpdateRequest(i))}),e._uU(1," Update "),e.qZA()}}function so(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",99)(1,"button",100),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.cancel())}),e._uU(2," Cancel "),e.qZA(),e.YNc(3,ro,2,0,"button",101),e.qZA()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("ngIf",t.request_id)}}function co(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",99)(1,"button",100),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.cancel())}),e._uU(2," Cancel "),e.qZA(),e.TgZ(3,"button",102),e.NdJ("click",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.onDenyRequest(i))}),e._uU(4," Deny "),e.qZA(),e.TgZ(5,"button",102),e.NdJ("click",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.onApproveRequest(i))}),e._uU(6," Approve "),e.qZA()()}}function lo(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",99)(1,"button",100),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.cancel())}),e._uU(2," Cancel "),e.qZA(),e.TgZ(3,"button",103),e.NdJ("click",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.onSaveReceipt(i))}),e._uU(4," Save "),e.qZA(),e.TgZ(5,"button",104),e.NdJ("click",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.onReceiptClose(i))}),e._uU(6," Save & Close "),e.qZA()()}}function po(n,a){1&n&&(e.TgZ(0,"div",105),e._UZ(1,"mat-spinner"),e.qZA())}let Ze=(()=>{class n{constructor(t,o,i,r,l,u,_,b,f,q){this.cdr=t,this.customerRegistrationService=o,this.inventoryService=i,this.activatedroute=r,this.router=l,this.dialog=u,this.fb=_,this.sharedService=b,this.snackBar=f,this.userService=q,this.vendors=[{key:"Sun",value:"sun"},{key:"Moon",value:"moon"}],this.isLoading=!1,this.spinner=!1,this.isEmpty=!1,this.attachmentFiles=[],this.attachmentPreviewVisible=!1,this.attachmentLength=0,this.dialogFile=[],this.displayedColumns=["Product Code","ProductName","RequestQuantity","Action"],this.ackDisplayedColumns=["Product Code","ProductName","RequestQuantity"],this.receiptDisplayedColumns=["ProductCode","ProductName","RequestQuantity","ReceivedQuantity","Add"],this.productDatasource=new c.by(this.sampledata),this.receiptDatasource=new c.by(this.sampledata),this.searchProductsUseAutoComplete=new Q.d,this.request_info={},this.requestMockData=JSON.parse('{ "status": "success", "api-message": "Client list retrieved successfully", "message": "Client list retrieved successfully", "data": { "id": "8874658c-9b02-48c3-a848-f1f0002b8899", "request_id": 69, "client": "53abeca4-9109-4022-b4a2-b78c9748d1e3", "comments": "comment details", "isDeleted": false, "created_at": "2023-02-09T08:21:40.027Z", "approved_at": "2023-02-09T08:21:40.027Z", "created_by": "53abeca4-9109-4022-b4a2-b78c9748d1e3", "approved_by": null, "is_active": true, "attachments": ["https://sahins.s3.amazonaws.com/web/attachement/1676881745034.jpg","https://sahins.s3.amazonaws.com/web/attachement/1676881748005.jpg"], "center": { "id": "396bab6f-db9e-49f9-823f-8964cb355370", "name": "Agam Diagnostics Coimbatore", "mobile_number": "7811073938", "email": "sahins_8200@agiratech.com", "username": "sahins_8200@agiratech.com", "code": 5, "profile_image": null, "isDeleted": false, "created_at": "2023-01-10T03:58:28.066Z", "updated_at": "2023-01-10T03:58:28.066Z", "created_by": "b991cdcd-275d-4a34-af8b-962b38e1bc9a", "updated_by": "53abeca4-9109-4022-b4a2-b78c9748d1e3", "is_active": true }, "status": { "id": "f16cedf6-5f28-4f2f-97fd-02fafaf1f6b4", "name": "Request Submitted", "description": null, "master_type": "inventory_status", "is_active": true, "created_at": "2023-01-10T07:00:47.447Z", "updated_at": "2023-01-10T07:00:47.447Z", "created_by": "b991cdcd-275d-4a34-af8b-962b38e1bc9a", "updated_by": null }, "product_details": [ { "id": "3c5081b8-8cba-4d73-a457-cc7b45953941", "quantity": 10,"received_quantity":0, "product_details": { "id": "285399f1-a1d3-4faa-a7c5-a954d47f31a9", "price": "100.50", "created_at": "2023-01-10T06:55:30.113Z", "created_by": "b991cdcd-275d-4a34-af8b-962b38e1bc9a", "updated_at": "2023-01-10T06:55:30.113Z", "updated_by": "b991cdcd-275d-4a34-af8b-962b38e1bc9a", "is_active": true, "product": { "id": "7368e307-1c0a-453f-b39e-a424a186afe6", "name": "Test product 101", "code": 17, "description": "this is a product", "type": "medical", "is_container": false, "has_expiry_batchno": false, "color": "black", "created_at": "2023-01-04T23:09:46.293Z", "updated_at": "2023-01-04T23:09:46.293Z", "created_by": "b991cdcd-275d-4a34-af8b-962b38e1bc9a", "updated_by": null, "isDeleted": false, "is_active": true } } }, { "id": "3c5081b8-8cba-4d73-a457-cc7b000041", "quantity": 10,"received_quantity":0, "product_details": { "id": "285399f1-a1d3-4faa-a7c5-a954d0001a9", "price": "100.50", "created_at": "2023-01-10T06:55:30.113Z", "created_by": "b991cdcd-275d-4a34-af8b-962b38e1bc9a", "updated_at": "2023-01-10T06:55:30.113Z", "updated_by": "b991cdcd-275d-4a34-af8b-962b38e1bc9a", "is_active": true, "product": { "id": "7368e307-1c0a-453f-b39e-a424a10012e6", "name": "Test product 102", "code": 18, "description": "this is a product", "type": "medical", "is_container": false, "has_expiry_batchno": false, "color": "black", "created_at": "2023-01-04T23:09:46.293Z", "updated_at": "2023-01-04T23:09:46.293Z", "created_by": "b991cdcd-275d-4a34-af8b-962b38e1bc9a", "updated_by": null, "isDeleted": false, "is_active": true } } } ] } }'),this.productPagination=new y.p({page:1,perPage:5,total:this.tableLength}),this.searchProductInput=new s.NI(""),this.options=["One","Two","Three"],this.unsubscribe$=new S.x,this.url=null,this.createRequest=!1,this.acknowledge=!1,this.bill_receipt=!1,this.filteredOptionCenters$=new ve.y,this.centers=[],this.vendorList=[],this.pageType="null",this.id=null,this.selectedCenter=null,this.CenerNameInputt=new s.NI(""),this.searchCenterInput=new s.NI(""),this.searchCenterUseAutoComplete=new Q.d,this.centerDataSource=[],this.productSearchPayload={},this.filteredOptions=this.searchProductInput.valueChanges.pipe((0,se.O)(""),(0,P.U)(I=>this.filter(I||"")))}get product_details(){return this.productForm.get("product_details")}ngOnInit(){this.getParams(),this.initProductForm(),"editproduct"==this.pageType||"acknowledge"==this.pageType||"billreceipt"==this.pageType?this.getProductRequestInfo():this.pageType="createproduct",("createproduct"==this.pageType||"editproduct"==this.pageType)&&this.centerSearchAutocompleteSetup()}getParams(){this.pageType=this.activatedroute.snapshot.paramMap.get("type"),this.request_id=this.activatedroute.snapshot.paramMap.get("id"),this.center_id=this.activatedroute.snapshot.paramMap.get("center")}initProductForm(){this.productForm=this.fb.group({center:[null,[s.kI.required]],comments:["",[s.kI.maxLength(200)]],product_details:this.fb.array([],[s.kI.required])})}productGroup(t,o=0){return this.fb.group({product_id:[t,[s.kI.required]],quantity:[o,[s.kI.required]]})}getOptionText(t){return t?.name}inventoryDisplayWithFn(t){return t?.name??""}getPageEvent(t){this.productPagination.doPagination(t)}filter(t){const o=t.toLowerCase();return this.options.filter(i=>i.toLowerCase().includes(o))}productSearchAutocompleteSetup(){let t=this.searchProductInput?.valueChanges;t&&(this.searchProductsUseAutoComplete.loadDependency(this.cdr,this.unsubscribe$,t),this.searchProductsUseAutoComplete.pagination.perPage=25,this.searchProductsUseAutoComplete.apiEndpointMethod=()=>(this.productSearchPayload={filter:{search:"",search_by:"",centers:{id:this.selectedCenter.id}}},this.searchProductsUseAutoComplete.searchStr.length>0?(this.productSearchPayload.filter.search=this.searchProductsUseAutoComplete.searchStr,this.productSearchPayload.filter.search_by="name"):(delete this.productSearchPayload.filter.search,delete this.productSearchPayload.filter.search_by),this.inventoryService.searchProduct("",this.searchProductsUseAutoComplete.pagination,this.productSearchPayload).pipe((0,P.U)(o=>(this.cdr.markForCheck(),this.spinner=!1,o.data)))),this.searchProductsUseAutoComplete.listenForAutoCompleteSearchFormControl(this.searchProductInput,()=>{},o=>{}),this.searchProductsUseAutoComplete.loadData(()=>{},()=>{}))}updateProductSelectContainer(){this.selectpanelProductContainer=".product-autocomplete"}onCloseContainer(){this.selectpanelProductContainer=""}productDisplayWithFn(t){return t?.name??""}onProductSelection(t){let o=t.option.value.id;if(0==this.productDatasource.data.filter(r=>r.id==o).length){const r={...t.option.value};this.productDatasource.data.push(r),this.table.renderRows(),this.isEmpty=!1,this.product_details.push(this.productGroup(o)),this.searchProductInput.setValue("")}}deleteProduct(t,o,i=""){console.log(o),"createproduct"==this.pageType?(this.productDatasource.data.splice(t,1),this.product_details.removeAt(t),this.table.renderRows(),0==this.product_details.length&&(this.isEmpty=!0)):1==this.product_details.length?this.snackBar.open("You cannot delete all the products from the request.","close"):(this.confirmDialog=this.dialog.open(F.$,{width:"40%",height:"auto",disableClose:!1,data:{message:"Are you sure want to Delete the product: "+o.product_details.product.name+" ?",buttonText:{ok:"Delete",cancel:"Cancel"}}}),this.confirmDialog.afterClosed().subscribe(r=>{r&&(this.productDatasource.data.splice(t,1),this.product_details.removeAt(t),this.table.renderRows(),this.cdr.markForCheck())}))}loadMoreProducts(){this.searchProductsUseAutoComplete.loadMoreData(()=>{},()=>{})}receivedFileName(t){let o;this.spinner=!0;const i=new FormData;i.append("file",t),i.append("upload_type","attachement"),this.userService.uploadImage(i).subscribe({next:r=>{o=r.message,this.attachmentFiles.push(r?.data?.uploadedFilePath)},error:r=>{this.snackBar.open(r.error.error,"close"),this.spinner=!1},complete:()=>{this.attachmentPreviewVisible=!0,this.spinner=!1,this.snackBar.open(t.name+" "+o,""),this.cdr.markForCheck()}}),this.attachmentFiles&&(this.attachmentPreviewVisible=!0,this.cdr.markForCheck()),this.attachmentLength=this.attachmentFiles.length+1}uploadAttachments(){var t=this;return(0,X.Z)(function*(){t.dialogFile=[];let o={};for(let i of t.attachmentFiles)o={name:i},t.dialogFile.push(o)})()}viewAttachment(){this.uploadAttachments().then(()=>{this.openPreviewDialog()})}openPreviewDialog(){this.attachmentPreviewDialog=this.dialog.open(re.a,{width:"50%",height:"auto",disableClose:!1,data:{canDelete:"acknowledge"!=this.pageType&&"billreceipt"!=this.pageType,file:this.dialogFile}}),this.attachmentPreviewDialog.afterClosed().subscribe(t=>{if(0!=t.length)for(let o of t)this.attachmentFiles.splice(t,1);this.attachmentLength=this.attachmentFiles.length,this.cdr.markForCheck(),0==this.attachmentFiles.length&&(this.attachmentPreviewVisible=!1,this.cdr.markForCheck())})}deleteAttachment(t){this.removeIndex=this.attachmentFiles.findIndex(o=>{if(o.name==t)return o}),this.attachmentFiles.splice(this.removeIndex,1),this.cdr.markForCheck()}cancel(){this.router.navigateByUrl("inventory/centerrequest")}onSubmitRequest(t){this.productForm.markAllAsTouched();let o=this.productForm.value,i={center:this.selectedCenter.id,comments:o.comments,product_details:o.product_details,attachments:[null]};this.productForm.valid?(this.attachmentFiles.length>0&&(i.attachments=this.attachmentFiles),this.createProductRequest(i)):this.snackBar.open("Please select a center and products to request.","close")}createProductRequest(t){this.spinner=!0,this.cdr.detectChanges(),this.inventoryService.createCenterProdReq(t.center,t).subscribe({next:o=>{this.spinner=!1,this.cdr.markForCheck(),this.snackBar.open(o.message,"close"),this.router.navigate(["inventory/centerrequest"])},error:o=>{this.spinner=!1,this.cdr.markForCheck(),this.snackBar.open(o.error.message,"close")}})}get requestId(){let t=("0000"+Math.random()).slice(-2),o=("0000"+Math.random()).slice(-2),i=("0000"+Math.random()).slice(-2),r=("0000"+Math.random()).slice(-2),l=("00000"+Math.random()).slice(-1);return Number(t+o+i+r+l)}updateCenterSelectContainer(){this.selectanelCenterContainer=".center-autocomplete"}centerDisplayWithFn(t){return t?.name??""}onCloseCenterContainer(){this.selectanelCenterContainer=""}onCenterSelection(t){this.selectedCenter=t.option.value,this.productForm.patchValue({center:this.selectedCenter.id}),this.spinner=!0,this.productSearchAutocompleteSetup()}loadMoreCenters(){this.searchCenterUseAutoComplete.loadMoreData(()=>{},()=>{})}centerSearchAutocompleteSetup(){let t=this.searchCenterInput.valueChanges;this.spinner=!0,t&&(this.searchCenterUseAutoComplete.loadDependency(this.cdr,this.unsubscribe$,t),this.searchCenterUseAutoComplete.pagination.perPage=25,this.searchCenterUseAutoComplete.apiEndpointMethod=()=>{let o={filter:{}};return this.searchCenterUseAutoComplete.searchStr.length>0&&(o.filter={search:this.searchCenterUseAutoComplete.searchStr,search_by:"name"}),this.inventoryService.searchCenters(o).pipe((0,P.U)(i=>(this.spinner=!1,this.centerDataSource=i.data.results,this.cdr.markForCheck(),i.data)))},this.searchCenterUseAutoComplete.listenForAutoCompleteSearchFormControl(this.searchCenterInput,()=>{},o=>{}),this.searchCenterUseAutoComplete.loadData(()=>{},()=>{}))}getAllErrors(t){let o=!1;const i=Object.keys(t.controls).reduce((r,l)=>{const u=t.get(l),_=u instanceof s.cw||u instanceof s.Oe?this.getAllErrors(u):u.errors;return _&&(r[l]=_,o=!0),r},{});return o?i:null}getProductRequestInfo(){this.request_info=this.requestMockData.data,this.productForm.patchValue({comments:this.request_info.comments}),this.request_info.attachments?.length>0&&(this.attachmentPreviewVisible=!0,this.attachmentFiles=this.request_info.attachments),this.request_info.product_details.forEach(o=>{this.product_details.push(this.productGroup(o.product_details.product.id,o.quantity))}),"billreceipt"==this.pageType?this.receiptDatasource.data=this.request_info.product_details:this.productDatasource.data=this.request_info.product_details}onUpdateRequest(t){this.spinner=!0,this.cdr.detectChanges(),this.inventoryService.centerProdReqUpdate(this.center_id,this.request_id,this.request_id).subscribe({next:i=>{this.spinner=!1,this.cdr.markForCheck(),this.snackBar.open(i.message,"close"),this.router.navigate(["inventory/centerrequest"])},error:i=>{let r="Something went wrong";i?.error?.message?r=i?.error?.message:i?.error?.error&&(r=i?.error?.error),this.isEmpty=!0,this.snackBar.open(r,"close"),this.spinner=!1,this.cdr.markForCheck()}})}onDenyRequest(t){this.spinner=!0,this.cdr.detectChanges(),this.inventoryService.centerProdReqDeny(this.center_id,this.request_id).subscribe({next:i=>{this.spinner=!1,this.cdr.markForCheck(),this.snackBar.open(i.message,"close"),this.router.navigate(["inventory/centerrequest"])},error:i=>{let r="Something went wrong";i?.error?.message?r=i?.error?.message:i?.error?.error&&(r=i?.error?.error),this.isEmpty=!0,this.snackBar.open(r,"close"),this.spinner=!1,this.cdr.markForCheck()}})}onApproveRequest(t){this.spinner=!0,this.cdr.detectChanges(),this.inventoryService.centerProdReqApprove(this.center_id,this.request_id).subscribe({next:i=>{this.spinner=!1,this.cdr.markForCheck(),this.snackBar.open(i.message,"close"),this.router.navigate(["inventory/centerrequest"])},error:i=>{let r="Something went wrong";i?.error?.message?r=i?.error?.message:i?.error?.error&&(r=i?.error?.error),this.isEmpty=!0,this.snackBar.open(r,"close"),this.spinner=!1,this.cdr.markForCheck()}})}onSaveReceipt(t){this.spinner=!0,this.cdr.detectChanges();let o={inventory_details:[]};this.receiptDatasource.data.forEach(i=>{i.new_inventory?.length&&i.new_inventory.forEach(r=>{let l={product:r.product.toString(),vendor:r.vendor.toString(),batch_no:r.batch_no.toString(),expiry_date:r.expiry_date.toString(),request_qty:Number(r.request_qty)};o.inventory_details.push(l)})}),console.log(o)}onReceiptClose(t){this.spinner=!0,this.cdr.detectChanges(),this.inventoryService.centerProdReqClose(this.center_id,this.request_id,{}).subscribe({next:i=>{this.spinner=!1,this.cdr.markForCheck(),this.snackBar.open(i.message,"close"),this.router.navigate(["inventory/centerrequest"])},error:i=>{let r="Something went wrong";i?.error?.message?r=i?.error?.message:i?.error?.error&&(r=i?.error?.error),this.isEmpty=!0,this.snackBar.open(r,"close"),this.spinner=!1,this.cdr.markForCheck()}})}addDialog(t){this.dialog.open(Mt,{width:"1000px",height:"500px",disableClose:!1,data:{product:t}}).afterClosed().subscribe(i=>{i.length&&(t.new_inventory=i,t.received_quantity||(t.received_quantity=0),t.received_quantity_total=0,t.new_inventory.forEach(r=>{t.received_quantity_total=Number(t.received_quantity_total)+Number(r.request_qty)}),t.received_quantity_total=t.received_quantity_total+t.received_quantity),this.cdr.markForCheck()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(Bt.d),e.Y36(Z),e.Y36(m.gz),e.Y36(m.F0),e.Y36(C.uw),e.Y36(s.qu),e.Y36(K.F),e.Y36(A.c),e.Y36(oe.x))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-create-product-request"]],viewQuery:function(t,o){if(1&t&&e.Gf(Lt,5),2&t){let i;e.iGM(i=e.CRH())&&(o.table=i.first)}},decls:39,vars:20,consts:[[1,"create-product"],[3,"formGroup"],[1,"title","primary"],[4,"ngIf"],["class","ackheader",4,"ngIf"],["class","create-product__header",4,"ngIf"],["class","agm-table--container",4,"ngIf"],[1,"create-product__footer"],[1,"class-product__footer-input"],[1,"row"],[1,"col-xs-12","label"],[1,""],[1,"col-xs-12","textarea"],["appearance","outline",1,"primary","text-area"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","4","cdkAutosizeMaxRows","200","placeholder","Type here","formControlName","comments",3,"readonly"],["autosize","cdkTextareaAutosize"],[1,"row","btns","create-product_attachment"],[1,"attachment"],[1,"attach-tag",3,"icon","disabled","fileName"],[1,"attachemnt-label"],[1,"primary"],["class","attachment-hint pointer",3,"click",4,"ngIf"],["class","file-attachment",4,"ngIf"],["class","form-action-btn",4,"ngIf"],["class","spinner",4,"ngIf"],["mat-button","",1,"backBtn","primary",3,"routerLink"],["svgIcon","appLeftArrow"],[1,"ackheader"],[1,"col-lg-2","col-md-3","col-sm-4"],[1,"col-lg-7","col-md-7","col-sm-7"],[1,"title","label-name"],[1,"col-lg-5","col-md-5","col-sm-5"],[1,"primary","label-value"],[1,"col-lg-3","col-md-3","col-sm-4"],[1,"col-md-6","col-lg-6"],[1,"col-md-3","col-lg-3"],[1,"col-md-9","col-lg-9"],[3,"ngClass"],[1,"col-lg-4","col-md-4","col-sm-4"],[1,"col-lg-5","col-md-5"],[1,"col-lg-7","col-md-7"],[1,"create-product__header"],[1,"create-product__header-input"],[1,"col-lg-4","col-md-4","col-sm-12","col-xs-12","inner-row"],["appearance","outline"],["formControlName","CenerNameInput","type","hidden"],["testNameInput",""],["matInput","","placeholder","Search Center Name",3,"formControl","matAutocomplete"],["autoActiveFirstOption","",1,"autocomplete-scroll",3,"displayWith","opened","closed","optionSelected"],["auto5","matAutocomplete"],["infiniteScroll","",1,"center-autocomplete",3,"infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","fromRoot","immediateCheck","alwaysCallback","infiniteScrollContainer","scrolled"],[3,"value",4,"ngFor","ngForOf"],["disabled","true",4,"ngIf"],["matSuffix",""],[1,"col-lg-6","col-md-6","col-sm-12","col-xs-12","create-product__header-input__filter"],[1,"center-consumption_header--input_form"],["appearance","outline",1,"agm-search_box"],["matInput","","placeholder","Search by Product Name",3,"formControl","matAutocomplete"],["autoActiveFirstOption","",1,"autocomplete-scroll",3,"displayWith","opened","optionSelected"],["auto","matAutocomplete"],["infiniteScroll","",1,"product-autocomplete",3,"infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","fromRoot","immediateCheck","alwaysCallback","infiniteScrollContainer","scrolled"],["matSuffix","","svgIcon","appSearch"],["matSuffix","",3,"vertical"],[3,"value"],["disabled","true"],[1,"agm-table--container"],["mat-table","",1,"agm-table",3,"dataSource"],["table",""],["matColumnDef","Product Code"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","ProductName"],["matColumnDef","RequestQuantity","formArrayName","product_details"],["matColumnDef","Action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","spinner-container",4,"ngIf"],["class","empty-row",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[4,"ngFor","ngForOf"],[3,"formGroupName",4,"ngIf"],[3,"formGroupName"],["appearance","outline",1,"agm-select"],["type","number","matInput","","formControlName","quantity","appNumberOnly",""],["svgIcon","appDelete",3,"click"],["mat-header-row",""],["mat-row",""],[1,"spinner-container"],["diameter","70",1,"spinner"],[1,"empty-row"],["type","number","matInput","","formControlName","quantity","appNumberOnly","",3,"value"],["matColumnDef","RequestQuantity"],["matColumnDef","ProductCode"],["matColumnDef","ReceivedQuantity"],["matColumnDef","Add"],["svgIcon","appAdd",3,"click"],[1,"attachment-hint","pointer",3,"click"],[1,"file-attachment"],[1,"form-action-btn"],["type","button","mat-button","",1,"button-mat-all-cancel",3,"click"],["type","button","mat-button","","class","button-mat-all",3,"click",4,"ngIf"],["type","button","mat-button","",1,"button-mat-all",3,"click"],["type","button","mat-button","",1,"button-mat-all","save",3,"click"],["type","button","mat-button","",1,"save-close",3,"click"],[1,"spinner"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div")(3,"h3",2),e._uU(4),e.qZA(),e.YNc(5,Vt,4,2,"section",3),e.qZA(),e.YNc(6,jt,36,15,"section",4),e.YNc(7,Wt,26,25,"section",5),e.YNc(8,hn,19,5,"section",6),e.YNc(9,Pn,19,5,"section",6),e.YNc(10,Jn,14,4,"section",6),e.YNc(11,eo,21,5,"section",6),e.TgZ(12,"section",7)(13,"div",8)(14,"div",9)(15,"div",10)(16,"h4",11),e._uU(17,"Comments"),e.qZA()(),e.TgZ(18,"div",12)(19,"mat-form-field",13),e._UZ(20,"textarea",14,15),e.TgZ(22,"mat-hint"),e._uU(23,"Maximum allowed characters 200"),e.qZA(),e.YNc(24,to,2,0,"mat-error",3),e.qZA()()(),e.TgZ(25,"div",16)(26,"div",17)(27,"app-agm-add-attachment",18),e.NdJ("fileName",function(r){return o.receivedFileName(r)}),e.qZA(),e.TgZ(28,"div",19)(29,"p",20),e._uU(30,"Attachments"),e.qZA(),e.YNc(31,no,2,1,"a",21),e.YNc(32,oo,2,0,"div",22),e.qZA()(),e.TgZ(33,"div",11),e.YNc(34,io,4,1,"div",23),e.YNc(35,so,4,1,"div",23),e.YNc(36,co,7,0,"div",23),e.YNc(37,lo,7,0,"div",23),e.qZA()()()()()(),e.YNc(38,po,2,0,"div",24)),2&t){let i;e.xp6(1),e.Q6J("formGroup",o.productForm),e.xp6(3),e.hij(" ","createproduct"===o.pageType?"Create Center Product Request":"editproduct"===o.pageType?"Center Product Request - Edit":"acknowledge"===o.pageType?"Center Product Request - Acknowledge":"billreceipt"===o.pageType?"Product Request - Receipt Entry":""," "),e.xp6(1),e.Q6J("ngIf","acknowledge"==o.pageType||"billreceipt"==o.pageType),e.xp6(1),e.Q6J("ngIf",o.request_id&&"createproduct"!=o.pageType),e.xp6(1),e.Q6J("ngIf","createproduct"==o.pageType),e.xp6(1),e.Q6J("ngIf","createproduct"==o.pageType),e.xp6(1),e.Q6J("ngIf","editproduct"==o.pageType),e.xp6(1),e.Q6J("ngIf","acknowledge"==o.pageType),e.xp6(1),e.Q6J("ngIf","billreceipt"==o.pageType),e.xp6(9),e.Q6J("readonly","createproduct"!=o.pageType),e.xp6(4),e.Q6J("ngIf",null==(i=o.productForm.get("comments"))||null==i.errors?null:i.errors.maxlength),e.xp6(3),e.Q6J("icon","appVendorFile")("disabled",o.request_id&&("acknowledge"==o.pageType||"billreceipt"==o.pageType)),e.xp6(4),e.Q6J("ngIf",o.attachmentPreviewVisible),e.xp6(1),e.Q6J("ngIf",!o.attachmentFiles.length),e.xp6(2),e.Q6J("ngIf","createproduct"==o.pageType),e.xp6(1),e.Q6J("ngIf","editproduct"==o.pageType&&""!=(null==o.request_info?null:o.request_info.id)&&o.productDatasource.data.length>0),e.xp6(1),e.Q6J("ngIf","acknowledge"==o.pageType&&""!=(null==o.request_info?null:o.request_info.id)),e.xp6(1),e.Q6J("ngIf","billreceipt"==o.pageType&&""!=(null==o.request_info?null:o.request_info.id)),e.xp6(1),e.Q6J("ngIf",o.spinner)}},dependencies:[p.mk,p.sg,p.O5,R.R,v.Hw,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.F,s.oH,s.sg,s.u,s.x0,s.CE,N.XC,N.ZL,D.ey,O.IC,g.TO,g.KE,g.bx,g.R9,k.Nt,Y.d,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,G.oO,x.lW,w.Ou,E.O,m.rH,p.rS,p.uU],styles:["app-create-product-request .create-product{padding:2.6em}  app-create-product-request .create-product .mat-form-field{width:100%}  app-create-product-request .create-product .agm-search_box{height:auto!important}  app-create-product-request .create-product .status-success{color:#146300}  app-create-product-request .create-product .status-info{color:#004990}  app-create-product-request .create-product .status-cancel{color:#ff4155}  app-create-product-request .create-product .status-dark{color:#012b3e}  app-create-product-request .create-product .ackheader{margin:2.5rem 0}  app-create-product-request .create-product .ackheader .acknowledge{display:flex;justify-content:space-evenly}  app-create-product-request .create-product .ackheader .acknowledge .acknowledge-details{display:flex}  app-create-product-request .create-product .ackheader .acknowledge .acknowledge-details .label-name{margin-right:1rem;font-size:1.25rem}  app-create-product-request .create-product .ackheader .acknowledge .acknowledge-details .label-value{margin-top:.1rem}  app-create-product-request .create-product .ackheader .acknowledge .acknowledge-details .label-value .success{color:#146300}  app-create-product-request .create-product .ackheader .acknowledge .acknowledge-details .label-value .cancel{color:FF4155}  app-create-product-request .create-product .ackheader .acknowledge .acknowledge-details .label-value .dark{color:#012b3e}  app-create-product-request .create-product_requestid{display:flex;flex-direction:row;justify-content:flex-start;margin-top:2.5rem;align-items:baseline}  app-create-product-request .create-product_requestid .label-value{padding-left:3em}  app-create-product-request .create-product .mat-form-field-appearance-outline .mat-form-field-outline{background-color:#e6ebee;border-radius:5px}  app-create-product-request .create-product__header{display:flex;flex-direction:row;margin-top:2.5rem}  app-create-product-request .create-product__header-input{width:100%}  app-create-product-request .create-product__header-input__filter .mat-form-field-appearance-outline .mat-form-field-outline{background-color:#04375233;border-radius:5px}  app-create-product-request .create-product__header .inner-row{display:flex;flex-direction:row;align-items:center;justify-content:end}  app-create-product-request .create-product__header .inner-row .row{display:flex;align-items:center}  app-create-product-request .create-product__header .inner-row .row .mat-form-field{width:100%}  app-create-product-request .create-product__header .text-right{text-align:end;padding-bottom:.8em;padding-right:1em}  app-create-product-request .create-product__action{margin:2.5rem 2.5rem 1rem;justify-content:space-between}  app-create-product-request .create-product__action   .mat-form-field-appearance-outline .mat-form-field-outline{background-color:#04375233;border-radius:5px}  app-create-product-request .create-product__action   .mat-select-arrow{opacity:0}  app-create-product-request .create-product__action   .mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{width:1rem}  app-create-product-request .create-product__action p{color:#043752e6}  app-create-product-request .create-product .agm-table{margin-top:3vh;max-width:100%}  app-create-product-request .create-product .agm-table td.mat-cell{padding:.6rem 1.3rem!important}  app-create-product-request .create-product .agm-table .mat-form-field{width:auto}  app-create-product-request .create-product .agm-table .mat-form-field-infix{padding:.7em 0!important}  app-create-product-request .create-product .agm-table .mat-form-field-appearance-outline .mat-form-field-outline{color:transparent}  app-create-product-request .create-product .agm-table .mat-column-ProductName{min-width:150px}  app-create-product-request .create-product .agm-table .mat-column-Price{min-width:150px}  app-create-product-request .create-product .agm-table .mat-column-ExpiryDate{min-width:150px}  app-create-product-request .create-product .agm-table .mat-column-BillBatchNo .mat-form-field{max-width:100px}  app-create-product-request .create-product .agm-table .mat-column-BillRequestQuantity .mat-form-field{max-width:100px}  app-create-product-request .create-product .agm-table   .mat-select-arrow{opacity:0}  app-create-product-request .create-product .agm-table   .classformfield .mat-form-field-appearance-outline .mat-form-field-outline{background-color:#a7bdca}  app-create-product-request .create-product .agm-table   .mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{width:1rem}  app-create-product-request .create-product .agm-table .mat-form-field{text-align:center}  app-create-product-request .create-product .agm-table .detail-btn{width:167px;background:#cdd7dc;border-radius:6px}  app-create-product-request .create-product .agm-table .agm-select mat-icon{width:1rem!important}  app-create-product-request .create-product .agm-table .mat-form-field-wrapper{padding-bottom:0}  app-create-product-request .create-product .mat-select-value{text-align:center}  app-create-product-request .create-product .text-area{width:100%!important}  app-create-product-request .create-product_attachment .attachment{margin:1rem!important;border-radius:5rem;padding:10px 30px 10px 10px;border:1px solid var(--secondary-color-400);display:flex;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;background:var(--secondary-color-300)}  app-create-product-request .create-product_attachment .attachment .mat-icon{-webkit-transform:scale(2.3);transform:scale(2.3)}  app-create-product-request .create-product_attachment .attachment .attachemnt-label{padding-top:.3rem;padding-left:1rem}  app-create-product-request .create-product_attachment .attachment .attachemnt-label p{margin:0}  app-create-product-request .create-product_attachment .attachment .attachment-hint{color:var(--status-success)}  app-create-product-request .create-product_attachment .attachment .file-attachment{display:flex}  app-create-product-request .create-product_attachment .attachment .file-attachment .delete-icon{margin-left:.5rem;-webkit-transform:scale(1);transform:scale(1);cursor:pointer}  app-create-product-request .create-product__footer{margin-top:3vh}  app-create-product-request .create-product__footer .label{margin:2em 0 0!important}  app-create-product-request .create-product__footer .textarea{margin-top:1vh}  app-create-product-request .create-product .align{display:flex;flex-direction:row;align-items:center;justify-content:start}  app-create-product-request .create-product .padding{padding:0 10px}  app-create-product-request .create-product .btns{margin-bottom:50px}  app-create-product-request .create-product .form-action-btn{width:99%;display:flex;justify-content:end}  app-create-product-request .create-product .form-action-btn .save-close{padding:.5em 3em!important;background-color:#053353;color:#fff;font-size:1em;border-radius:10px!important}  app-create-product-request .create-product .agm-table tr.mat-row{vertical-align:middle}  app-create-product-request .create-product .del-btn{background-color:#e6ebee;padding:.8em 0;border-radius:5px}  app-create-product-request .agm-table--container .empty-row{background-color:#fff;text-align:center;padding:20px}@media screen and (min-width: 769px) and (max-width: 1024px){  app-create-product-request .agm-table--container div .between{display:flex;flex-direction:row;justify-content:space-between}  app-create-product-request .agm-table--container .between{display:flex;flex-direction:row;justify-content:space-between}}@media only screen and (min-width: 481px) and (max-width: 768px){  app-create-product-request .agm-table--container{width:100%;overflow-x:auto;margin-left:0}  app-create-product-request .agm-table--container .between{display:flex;flex-direction:row;justify-content:space-between}  app-create-product-request .agm-table--container .mat-column-Price{min-width:100px!important}}@media (max-width: 480px){  app-create-product-request .agm-table--container{width:100%;overflow-x:auto;margin-left:0}}.autocomplete-scroll[_ngcontent-%COMP%]   .patient-autocomplete[_ngcontent-%COMP%]{max-height:14.375rem;overflow-y:auto}@media screen and (min-width: 769px) and (max-width: 1024px){div[_ngcontent-%COMP%]   .between[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.create-product__header[_ngcontent-%COMP%]   .inner-row[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:320px}}@media screen and (min-width: 481px) and (max-width: 768px){div[_ngcontent-%COMP%]   .between[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}}"],changeDetection:0}),n})();var ee=h(4128);function uo(n,a){1&n&&(e.TgZ(0,"th",30),e._uU(1,"Product Code"),e.qZA())}function mo(n,a){if(1&n&&(e.TgZ(0,"td",31),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(t.code)}}function ho(n,a){1&n&&(e.TgZ(0,"th",30),e._uU(1,"Product Name"),e.qZA())}function _o(n,a){if(1&n&&(e.TgZ(0,"td",31),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(t.name)}}function fo(n,a){1&n&&(e.TgZ(0,"th",30),e._uU(1,"Category"),e.qZA())}function go(n,a){if(1&n&&(e.TgZ(0,"td",31),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.category.name," ")}}function bo(n,a){1&n&&(e.TgZ(0,"th",30),e._uU(1,"Type"),e.qZA())}function Co(n,a){if(1&n&&(e.TgZ(0,"td",31),e._uU(1),e.qZA()),2&n){const t=a.$implicit;let o;e.xp6(1),e.hij(" ",null!==(o=t.type)&&void 0!==o?o:"N/A"," ")}}function qo(n,a){1&n&&(e.TgZ(0,"th",30),e._uU(1,"Department"),e.qZA())}function vo(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,","),e.qZA())}function Zo(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.YNc(2,vo,2,0,"span",37),e.qZA()),2&n){const t=a.$implicit,o=a.last;let i;e.xp6(1),e.hij(" ",null!==(i=null==t?null:t.name)&&void 0!==i?i:"N/A"," "),e.xp6(1),e.Q6J("ngIf",!o)}}function xo(n,a){if(1&n&&(e.TgZ(0,"div",35),e.YNc(1,Zo,3,2,"span",36),e.qZA()),2&n){const t=e.oxw().$implicit,o=e.oxw();e.Q6J("matTooltip",o.getDepartments(null==t?null:t.departments)),e.xp6(1),e.Q6J("ngForOf",null==t?null:t.departments)}}function yo(n,a){1&n&&e._uU(0," N/A ")}function To(n,a){if(1&n&&(e.TgZ(0,"td",32),e.YNc(1,xo,2,2,"div",33),e.YNc(2,yo,1,0,"ng-template",null,34,e.W1O),e.qZA()),2&n){const t=a.$implicit,o=e.MAs(3);e.xp6(1),e.Q6J("ngIf",0!=t.departments.length)("ngIfElse",o)}}function wo(n,a){1&n&&(e.TgZ(0,"th",30),e._uU(1,"Center"),e.qZA())}function Ao(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,","),e.qZA())}function ko(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.YNc(2,Ao,2,0,"span",37),e.qZA()),2&n){const t=a.$implicit,o=a.last;e.xp6(1),e.hij(" ",null==t?null:t.name," "),e.xp6(1),e.Q6J("ngIf",!o)}}function Po(n,a){if(1&n&&(e.TgZ(0,"div",35),e.YNc(1,ko,3,2,"span",36),e.qZA()),2&n){const t=e.oxw().$implicit,o=e.oxw();e.Q6J("matTooltip",o.getCenters(null==t?null:t.centers)),e.xp6(1),e.Q6J("ngForOf",null==t?null:t.centers)}}function No(n,a){1&n&&e._uU(0," N/A ")}function Uo(n,a){if(1&n&&(e.TgZ(0,"td",32),e.YNc(1,Po,2,2,"div",33),e.YNc(2,No,1,0,"ng-template",null,38,e.W1O),e.qZA()),2&n){const t=a.$implicit,o=e.MAs(3);e.xp6(1),e.Q6J("ngIf",0!=t.centers.length)("ngIfElse",o)}}function So(n,a){1&n&&(e.TgZ(0,"th",30),e._uU(1,"Action"),e.qZA())}function Do(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"td",31)(1,"mat-icon",39),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.edit(r.id))}),e.qZA(),e.TgZ(2,"mat-icon",40),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.deleteList(r.id))}),e.qZA()()}}function Io(n,a){1&n&&e._UZ(0,"tr",41)}function Fo(n,a){1&n&&e._UZ(0,"tr",42)}function Yo(n,a){1&n&&(e.TgZ(0,"div",43),e._uU(1,"No Data Available!"),e.qZA())}function Ro(n,a){1&n&&(e.TgZ(0,"div",44),e._UZ(1,"mat-spinner"),e.qZA())}let Qo=(()=>{class n{constructor(t,o,i,r,l,u){this.dialog=t,this.cdr=o,this.inventoryService=i,this.snackBar=r,this.sharedService=l,this.router=u,this.agamFilters=[],this.spinner=!1,this.displayedColumns=["product_code","product_name","quantity","type","department","center","action"],this.dataSource=new c.by,this.data=[],this.tableLength=this.data.length,this.payload={},this.isEmpty=!1,this.PrdouctSearch=new s.NI(null),this.searchStr=new s.NI(""),this.seachPayload={},this.unsubscribe$=new S.x,this.otherPagination=new y.p({page:1,perPage:5,total:this.tableLength})}ngOnInit(){this.loadFilters(),this.getProductList(),this.searchListener()}ngAfterViewInit(){this.dataSource.paginator=this.paginator}getPageEvent(t){this.otherPagination.doPagination(t),this.getProductList()}loadFilters(){(0,ee.D)([this.sharedService.getDepartmentList(),this.sharedService.getCenterList()]).subscribe(([t,o])=>{this.agamFilters=[{type:"department",name:"Department",data:t?.data.departments,lableKey:"name"},{type:"centers",name:"Centers",data:o?.data.centers,lableKey:"name"}]})}edit(t){this.router.navigateByUrl(`inventory/products/${t}`)}deleteList(t){this.confirmConsDialog=this.dialog.open(F.$,{width:"40%",height:"auto",disableClose:!1,data:{message:"Are you sure want to Delete?",buttonText:{ok:"Delete",cancel:"Cancel"}}}),this.confirmConsDialog.afterClosed().subscribe(o=>{o&&(this.spinner=!1,this.cdr.markForCheck(),this.deleteProduct(t))})}deleteProduct(t){this.inventoryService.deleteProdct(t).subscribe({next:o=>{this.spinner=!1,this.cdr.markForCheck(),this.snackBar.open(o?.message,""),this.getProductList()},error:o=>{let i="Something went wrong";o?.error?.message?i=o?.error?.message:o?.error?.error&&(i=o?.error?.error),this.snackBar.open(i,"close"),this.spinner=!1,this.cdr.markForCheck()}})}getProductList(){this.spinner=!0,this.cdr.markForCheck(),this.inventoryService.getproductpagination(this.otherPagination.perPage,this.otherPagination.page,this.seachPayload).subscribe(t=>{this.dataSource.data=t?.data?.results,this.tableLength=t.data?.pagination?.total,this.isEmpty=0===t?.data?.pagination?.total,this.spinner=!1,this.cdr.markForCheck()},t=>{let o=t?.error?.message;t?.error?.message||(o="Something went wrong"),this.spinner=!1,this.snackBar.open(o,"close"),this.cdr.markForCheck()})}searchListener(){this.searchStr.valueChanges.pipe((0,V.b)(400),(0,$.R)(this.unsubscribe$),(0,j.w)(t=>(this.spinner=!0,this.cdr.markForCheck(),this.seachPayload={filter:{search:t,search_by:"name"}},null==this.departmentName&&delete this.seachPayload.filter.departments,null==this.centerName&&delete this.seachPayload.filter.centers,this.cdr.markForCheck(),t||(this.seachPayload={filter:{departments:{id:this.departmentName},centers:{name:this.centerName}}},null==this.departmentName&&delete this.seachPayload.filter.departments,null==this.centerName&&delete this.seachPayload.filter.centers),this.inventoryService.getproductpagination(this.otherPagination.perPage,this.otherPagination.page,this.seachPayload)))).subscribe(t=>{this.dataSource.data=t.data.results,this.tableLength=t.data.pagination.total,this.isEmpty=!1,0==this.dataSource.data.length&&(this.isEmpty=!0),this.spinner=!1,this.cdr.markForCheck()},t=>{let o=t?.error?.message;t?.error?.message||(o="Something went wrong"),this.isEmpty=!0,this.snackBar.open(o,"close"),this.spinner=!1,this.cdr.markForCheck()})}filter(){this.spinner=!0,this.cdr.markForCheck();let o="",i=!1;0!=Object.keys(this.seachPayload).length?(o=this.seachPayload.filter.search,(""!=o||null!=o)&&(i=!0)):i=!1,this.seachPayload=i?{filter:{search:this.seachPayload.filter.search,search_by:"name",departments:{id:this.departmentName},centers:{name:this.centerName}}}:{filter:{departments:{id:this.departmentName},centers:{name:this.centerName}}},null==this.departmentName&&delete this.seachPayload.filter.departments,null==this.centerName&&delete this.seachPayload.filter.centers,this.inventoryService.getproductpagination(this.otherPagination.perPage,this.otherPagination.page,this.seachPayload).subscribe({next:r=>{this.tableLength=r.data.pagination.total,this.dataSource.data=r.data.results,this.isEmpty=!1,0==this.dataSource.data.length&&(this.isEmpty=!0),this.spinner=!1,this.cdr.markForCheck()},error:r=>{let l="Something went wrong";r?.error?.message?l=r?.error?.message:r?.error?.error&&(l=r?.error?.error),this.snackBar.open(l,"close"),this.isEmpty=!0,this.spinner=!1,this.cdr.markForCheck()}})}handleFilter(t){"department"===t.type&&(this.departmentName=t.selected?.option?.value?.id),"centers"===t.type&&(this.centerName=t.selected?.option?.value?.name)}handleSearch(){this.filter()}resetFilter(){this.centerName=void 0,this.departmentName=void 0,this.getProductList()}getCenters(t){return t.map(o=>o.name)}getDepartments(t){return t.map(o=>o.name)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(C.uw),e.Y36(e.sBO),e.Y36(Z),e.Y36(A.c),e.Y36(K.F),e.Y36(m.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-others"]],viewQuery:function(t,o){if(1&t&&e.Gf(T.NW,5),2&t){let i;e.iGM(i=e.CRH())&&(o.paginator=i.first)}},decls:46,vars:12,consts:[[1,"inventory-others"],[1,"inventory-others_title"],[1,"primary"],[1,"inventory-others_search"],[1,"searchBox"],["placholder","Search Product Name",3,"formControl","filters","filter","search","reset"],[1,"button-common"],[1,"action-buttons","createBtn"],["routerLink","../add-new-product",1,"btn","sample-btn"],[1,"btn-icons"],["svgIcon","appEquipment"],[1,"inventory-others_tableList"],[1,"agm-table--container"],["mat-table","",1,"agm-table",3,"dataSource"],["matColumnDef","product_code"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","product_name"],["matColumnDef","quantity"],["matColumnDef","type"],["matColumnDef","department"],["class","email-break","mat-cell","",4,"matCellDef"],["matColumnDef","center"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","empty-row",4,"ngIf"],[3,"length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page"],["paginator",""],["class","spinner",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",1,"email-break"],["class","ellipsis",3,"matTooltip",4,"ngIf","ngIfElse"],["departmentNotAvaible",""],[1,"ellipsis",3,"matTooltip"],[4,"ngFor","ngForOf"],[4,"ngIf"],["centerNotAvaible",""],["svgIcon","appEdit",3,"click"],["svgIcon","appDelete",3,"click"],["mat-header-row",""],["mat-row",""],[1,"empty-row"],[1,"spinner"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"section",1)(2,"h3",2),e._uU(3,"Product List"),e.qZA()(),e.TgZ(4,"section",3)(5,"div",4)(6,"app-agam-search-filter",5),e.NdJ("filter",function(r){return o.handleFilter(r)})("search",function(){return o.handleSearch()})("reset",function(){return o.resetFilter()}),e.qZA()(),e.TgZ(7,"div",6)(8,"div",7)(9,"div",8)(10,"button",9)(11,"span")(12,"b"),e._uU(13," Add New"),e.qZA()(),e._UZ(14,"mat-icon",10),e.qZA()()(),e._UZ(15,"div",7),e.qZA()(),e.TgZ(16,"section",11)(17,"div",12)(18,"table",13),e.ynx(19,14),e.YNc(20,uo,2,0,"th",15),e.YNc(21,mo,2,1,"td",16),e.BQk(),e.ynx(22,17),e.YNc(23,ho,2,0,"th",15),e.YNc(24,_o,2,1,"td",16),e.BQk(),e.ynx(25,18),e.YNc(26,fo,2,0,"th",15),e.YNc(27,go,2,1,"td",16),e.BQk(),e.ynx(28,19),e.YNc(29,bo,2,0,"th",15),e.YNc(30,Co,2,1,"td",16),e.BQk(),e.ynx(31,20),e.YNc(32,qo,2,0,"th",15),e.YNc(33,To,4,2,"td",21),e.BQk(),e.ynx(34,22),e.YNc(35,wo,2,0,"th",15),e.YNc(36,Uo,4,2,"td",21),e.BQk(),e.ynx(37,23),e.YNc(38,So,2,0,"th",15),e.YNc(39,Do,3,0,"td",16),e.BQk(),e.YNc(40,Io,1,0,"tr",24),e.YNc(41,Fo,1,0,"tr",25),e.qZA(),e.YNc(42,Yo,2,0,"div",26),e.TgZ(43,"mat-paginator",27,28),e.NdJ("page",function(r){return o.getPageEvent(r)}),e.qZA()()()(),e.YNc(45,Ro,2,0,"div",29)),2&t&&(e.xp6(6),e.Q6J("formControl",o.searchStr)("filters",o.agamFilters),e.xp6(12),e.Q6J("dataSource",o.dataSource),e.xp6(22),e.Q6J("matHeaderRowDef",o.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns),e.xp6(1),e.Q6J("ngIf",o.isEmpty),e.xp6(1),e.Q6J("length",o.tableLength)("pageIndex",(o.otherPagination.page||1)-1)("pageSize",o.otherPagination.perPage)("pageSizeOptions",o.otherPagination.paginationSizes)("showFirstLastButtons",!0),e.xp6(2),e.Q6J("ngIf",o.spinner))},dependencies:[p.sg,p.O5,v.Hw,s.JJ,s.oH,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,w.Ou,T.NW,qe.gM,B.N,m.rH],styles:["app-others .inventory-others{margin:2.6em}  app-others .inventory-others_title p{padding:2em}  app-others .inventory-others_search{margin-top:2em;display:flex;justify-content:space-between}  app-others .inventory-others_search .searchBox{width:57%}  app-others .inventory-others_search .createBtn{display:flex;flex-direction:column;justify-content:flex-start}  app-others .inventory-others_search .button-common{display:flex}  app-others .inventory-others_tableList{margin-top:2em}  app-others .inventory-others_tableList .mat-form-field-appearance-legacy .mat-form-field-wrapper{text-align:center}  app-others .inventory-others_tableList .ellipsis{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}@media only screen and (min-width: 576px) and (max-width: 768px){  app-others .inventory-others_search{flex-direction:column}  app-others .inventory-others_search .searchBox{width:auto}  app-others .inventory-others_search .button-common{flex-direction:row;justify-content:flex-end}}@media only screen and (min-width: 768px) and (max-width: 992px){  app-others .inventory-others_search{flex-direction:column}  app-others .inventory-others_search .searchBox{width:auto}  app-others .inventory-others_search .button-common{flex-direction:row;justify-content:flex-end}}@media only screen and (min-width: 992px) and (max-width: 1200px){  app-others .inventory-others_search{flex-direction:column}  app-others .inventory-others_search .searchBox{width:auto}  app-others .inventory-others_search .button-common{flex-direction:row;justify-content:flex-end}}"],changeDetection:0}),n})();var Jo=h(56709),W=h(82179);function Oo(n,a){1&n&&(e.TgZ(0,"h3",48),e._uU(1,"Create New Product"),e.qZA())}function Mo(n,a){1&n&&(e.TgZ(0,"h3",48),e._uU(1,"Edit Product"),e.qZA())}function Bo(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Product Name is Required "),e.qZA())}function Lo(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Product Name must contian atleast 2 letters "),e.qZA())}function Eo(n,a){if(1&n&&(e.TgZ(0,"mat-option",49),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij("",t.name," ")}}function Vo(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Center Name is Required "),e.qZA())}function $o(n,a){if(1&n&&(e.TgZ(0,"mat-option",49),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij("",t.name," ")}}function jo(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Departments Name is Required "),e.qZA())}function zo(n,a){if(1&n&&(e.TgZ(0,"mat-option",49),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.key)}}function Ho(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Type is Required "),e.qZA())}function Go(n,a){if(1&n&&(e.TgZ(0,"mat-option",49),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function Ko(n,a){if(1&n&&(e.TgZ(0,"div",20)(1,"div",7)(2,"span",50),e._uU(3,"Equipment "),e.qZA(),e.TgZ(4,"div",14)(5,"mat-form-field",21)(6,"mat-select",51),e.YNc(7,Go,2,2,"mat-option",17),e.qZA(),e._UZ(8,"mat-icon",23),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(7),e.Q6J("ngForOf",t.equipments)}}function Wo(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Description is Required "),e.qZA())}function Xo(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Description is max "),e.qZA())}function ea(n,a){if(1&n&&(e.TgZ(0,"mat-option",49),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij("",t.name," ")}}function ta(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Unit is Required "),e.qZA())}function na(n,a){if(1&n&&(e.TgZ(0,"mat-option",49),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij("",t.name," ")}}function oa(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Category is Required "),e.qZA())}function aa(n,a){1&n&&(e.TgZ(0,"label",57),e._uU(1,"Set Color"),e.qZA())}function ia(n,a){1&n&&e._UZ(0,"input",58)}function ra(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"section",52)(1,"div")(2,"mat-checkbox",53),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.containerValue=i)})("change",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.colorPickerShow=1==i.checked)}),e._uU(3," Container"),e.qZA()(),e.TgZ(4,"div",54),e.YNc(5,aa,2,0,"label",55),e.YNc(6,ia,1,0,"input",56),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngModel",t.containerValue),e.xp6(3),e.Q6J("ngIf",t.colorPickerShow),e.xp6(1),e.Q6J("ngIf",t.colorPickerShow)}}function sa(n,a){1&n&&(e.TgZ(0,"div",59)(1,"span",60),e._uU(2,"Quantity"),e.qZA(),e.TgZ(3,"div",35)(4,"mat-form-field",10),e._UZ(5,"input",61),e.qZA()()())}function ca(n,a){if(1&n&&(e.TgZ(0,"div",59)(1,"span",60),e._uU(2,"Total Amount: "),e.qZA(),e.TgZ(3,"div",35)(4,"mat-form-field",62)(5,"mat-icon",63),e._uU(6,"\u20b9"),e.qZA(),e._UZ(7,"input",64),e.qZA()()()),2&n){const t=e.oxw();e.xp6(7),e.Q6J("value",t.total_amount)}}function la(n,a){1&n&&(e.TgZ(0,"th",84),e._uU(1,"Center"),e.qZA())}function pa(n,a){if(1&n&&(e.TgZ(0,"td",85),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(t.center)}}function da(n,a){1&n&&(e.TgZ(0,"th",84),e._uU(1,"Batch Number"),e.qZA())}function ua(n,a){if(1&n&&(e.TgZ(0,"td",85),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.batch_number," ")}}function ma(n,a){1&n&&(e.TgZ(0,"th",84),e._uU(1,"Expiry Date"),e.qZA())}function ha(n,a){if(1&n&&(e.TgZ(0,"td",85),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.expiry_date,"dd-MM-YYYY")," ")}}function _a(n,a){1&n&&(e.TgZ(0,"th",84),e._uU(1,"Vendor"),e.qZA())}function fa(n,a){if(1&n&&(e.TgZ(0,"td",85),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.vendor.name," ")}}function ga(n,a){1&n&&(e.TgZ(0,"th",84),e._uU(1,"Quantity"),e.qZA())}function ba(n,a){if(1&n&&(e.TgZ(0,"td",85),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(t.quantity)}}function Ca(n,a){1&n&&(e.TgZ(0,"th",84),e._uU(1," Unit Price "),e.TgZ(2,"span",86),e._uU(3," (Per Qty) "),e.qZA()())}function qa(n,a){if(1&n&&(e.TgZ(0,"td",85),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.price_unit.name," ")}}function va(n,a){1&n&&(e.TgZ(0,"th",84),e._uU(1,"Total Amount"),e.qZA())}function Za(n,a){if(1&n&&(e.TgZ(0,"td",85),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.price)," ")}}function xa(n,a){1&n&&(e.TgZ(0,"th",84),e._uU(1,"Alarm Value"),e.qZA())}function ya(n,a){if(1&n&&(e.TgZ(0,"td",87)(1,"mat-form-field",10),e._UZ(2,"input",88),e.qZA(),e.TgZ(3,"span",89),e._uU(4,"days"),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.s9C("value",t.alarm_value)}}function Ta(n,a){1&n&&(e.TgZ(0,"th",84),e._uU(1,"Re Stock"),e.qZA())}function wa(n,a){if(1&n&&(e.TgZ(0,"td",85)(1,"mat-form-field",10),e._UZ(2,"input",90),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.s9C("value",t.reStock)}}function Aa(n,a){1&n&&e._UZ(0,"tr",91)}function ka(n,a){1&n&&e._UZ(0,"tr",92)}function Pa(n,a){1&n&&(e.TgZ(0,"div",93),e._uU(1,"No Data Available!"),e.qZA())}function Na(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-paginator",94),e.NdJ("page",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.getPageEvent(i))}),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("length",t.tableLength)("pageIndex",(t.productPagination.page||1)-1)("pageSize",t.productPagination.perPage)("pageSizeOptions",t.productPagination.paginationSizes)("showFirstLastButtons",!0)}}function Ua(n,a){if(1&n&&(e.TgZ(0,"section",65)(1,"div",66)(2,"form")(3,"table",67),e.ynx(4,68),e.YNc(5,la,2,0,"th",69),e.YNc(6,pa,2,1,"td",70),e.BQk(),e.ynx(7,71),e.YNc(8,da,2,0,"th",69),e.YNc(9,ua,2,1,"td",70),e.BQk(),e.ynx(10,72),e.YNc(11,ma,2,0,"th",69),e.YNc(12,ha,3,4,"td",70),e.BQk(),e.ynx(13,73),e.YNc(14,_a,2,0,"th",69),e.YNc(15,fa,2,1,"td",70),e.BQk(),e.ynx(16,74),e.YNc(17,ga,2,0,"th",69),e.YNc(18,ba,2,1,"td",70),e.BQk(),e.ynx(19,75),e.YNc(20,Ca,4,0,"th",69),e.YNc(21,qa,2,1,"td",70),e.BQk(),e.ynx(22,76),e.YNc(23,va,2,0,"th",69),e.YNc(24,Za,3,3,"td",70),e.BQk(),e.ynx(25,77),e.YNc(26,xa,2,0,"th",69),e.YNc(27,ya,5,1,"td",78),e.BQk(),e.ynx(28,79),e.YNc(29,Ta,2,0,"th",69),e.YNc(30,wa,3,1,"td",70),e.BQk(),e.YNc(31,Aa,1,0,"tr",80),e.YNc(32,ka,1,0,"tr",81),e.qZA(),e.YNc(33,Pa,2,0,"div",82),e.YNc(34,Na,1,5,"mat-paginator",83),e.qZA()()()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("dataSource",t.prodDataSource),e.xp6(28),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(1),e.Q6J("ngIf",t.isEmpty),e.xp6(1),e.Q6J("ngIf",!t.isEmpty)}}function Sa(n,a){1&n&&(e.TgZ(0,"div",95),e._UZ(1,"mat-spinner"),e.qZA())}let xe=(()=>{class n{constructor(t,o,i,r,l,u,_,b,f,q){this.fb=t,this.matDialog=o,this.cdr=i,this.sharedService=r,this.route=l,this.dialog=u,this.snackbar=_,this.router=b,this.snackBbar=f,this.inventoryService=q,this.departments=[],this.departmentsId=[],this.categories=[],this.centers=[],this.centersId=[],this.equipments=[],this.equipmentsId=[],this.units=[],this.city=[{key:"Chennai",value:"chennai"},{key:"Permablur",value:"permablur"},{key:"Trichy",value:"trichy"},{key:"Kanchipuram",value:"kanchipuram"}],this.displayedColumns=["center","batch_number","expiry_date","vendor","quantity","price_per_qty","price","alarm_value","reStock"],this.testTypes=[{key:"Medical",value:"medical"},{key:"Others",value:"other"}],this.prodDataSource=new c.by,this.productData={},this.spinner=!1,this.equipmentShow=!1,this.containerShow=!0,this.payload={},this.numberQuantities=null,this.priceAmount=null,this.containerValue=!1,this.colorPickerShow=!1,this.tableLength=0,this.isEmpty=!0,this.productPagination=new y.p({page:0,perPage:5,total:this.tableLength})}ngOnInit(){this.productcode=this.route.snapshot.paramMap.get("id"),this.productcode?(this.type="edit",this.getProduct(this.productcode)):this.type="create",this.initForm(),this.getSelectValue()}initForm(){this.createProdForm=this.fb.group({name:["",[s.kI.required,s.kI.minLength(2)]],centers:[[],[s.kI.required]],departments:[[],[s.kI.required]],type:["",[s.kI.required]],equipments:[[]],unit:["",[s.kI.required]],category:["",[s.kI.required]],description:["",[s.kI.required,s.kI.maxLength(200)]],is_container:[!1],is_expiry:[!1],is_batch_no:[!1],color:[""]})}typeOption(t){"medical"==t?(this.equipmentShow=!0,this.containerShow=!0,this.containerValue=!1,this.colorPickerShow=!1):(this.equipmentShow=!1,this.containerShow=!1,this.createProdForm.patchValue({equipments:[]})),this.cdr.markForCheck()}patchForm(t){this.createProdForm.patchValue(t),t.centers.forEach(o=>{this.centersId.push(o.id)}),t.departments.forEach(o=>this.departmentsId.push(o.id)),t.equipments.forEach(o=>this.equipmentsId.push(o.id)),this.createProdForm.patchValue({centers:this.centersId,departments:this.departmentsId,unit:t.unit.id,category:t.category.id,equipments:this.equipmentsId,color:t.color}),this.containerValue=t.is_container,this.colorPickerShow=t.is_container,this.typeOption(t.type)}getProduct(t){this.spinner=!0,this.cdr.markForCheck(),(0,ee.D)([this.inventoryService.getProductById(t)]).subscribe(([o])=>{this.productData=o.data,this.patchForm(this.productData),this.spinner=!1,this.cdr.markForCheck()},o=>{let i=o?.error?.message;o?.error?.message||(i="Something went wrong"),this.spinner=!1,this.snackBbar.open(i,"close"),this.cdr.markForCheck()})}getSelectValue(){this.spinner=!0,this.cdr.markForCheck(),(0,ee.D)([this.sharedService.getDepartmentList(),this.sharedService.getInvendoryCategoryList(),this.sharedService.getCenterList(),this.sharedService.getEquipmentsList(),this.sharedService.getUnitsList()]).subscribe({next:([t,o,i,r,l])=>{this.departments=t?.data.departments,this.categories=o?.data.inventory_categories,this.centers=i?.data.centers,this.equipments=r?.data.equipments,this.units=l.data.inventory_units,this.spinner=!1,this.cdr.markForCheck()},error:t=>{let o=t?.error?.message;t?.error?.message||(o="Something went wrong"),this.spinner=!1,this.snackBbar.open(o,"close"),this.cdr.markForCheck()}})}ProductSubmit(){this.createProdForm.valid&&("create"==this.type?this.createProduct():this.updateProduct(this.productcode))}createProduct(){this.spinner=!0,this.cdr.markForCheck(),this.payload=this.createProdForm.value,this.inventoryService.createProduct(this.payload).subscribe({next:t=>{this.snackBbar.open(t.message,"close"),"success"==t.status&&this.router.navigate(["./inventory/products"])},error:t=>{let o="Something went wrong";t?.error?.message?o=t?.error?.message:t?.error?.error&&(o=t?.error?.error),this.snackBbar.open(o,"close"),this.spinner=!1,this.cdr.markForCheck()}})}updateProduct(t){this.spinner=!0,this.cdr.markForCheck(),this.payload=this.createProdForm.value,this.inventoryService.updateProduct(t,this.payload).subscribe({next:o=>{this.router.navigate(["./inventory/products"]),this.snackBbar.open(o.message,""),this.spinner=!1,this.cdr.detectChanges()},error:o=>{let i="Something went wrong";o?.error?.message?i=o?.error?.message:o?.error?.error&&(i=o?.error?.error),this.snackBbar.open(i,"close"),this.spinner=!1,this.cdr.markForCheck()}})}getPageEvent(t){this.productPagination.doPagination(t)}getCenters(t){return t.map(o=>o.name)}onCancelBtn(t){this.router.navigate(["./inventory/products"])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(s.qu),e.Y36(C.uw),e.Y36(e.sBO),e.Y36(K.F),e.Y36(m.gz),e.Y36(C.uw),e.Y36(z.ux),e.Y36(m.F0),e.Y36(A.c),e.Y36(Z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-new-product"]],decls:97,vars:24,consts:[[1,"add-new-product"],["class","primary",4,"ngIf"],[1,"add-new-container",3,"formGroup","submit"],[1,"inputSection"],[1,"inputData"],[1,"row"],[1,"col-lg-4","col-md-4","col-sm-6","col-xs-12"],[1,"row","inputArea"],[1,"col-xl-4","col-lg-5","col-md-5","col-sm-6","required"],[1,"col-xl-8","col-lg-7","col-md-7","col-sm-6"],["floatLabel","never","appearance","outline","element","",1,"agm-input-lg"],["placeholder","Product Name","formControlName","name","appearance","outline","matInput",""],[4,"ngIf"],[1,"col-xl-4","col-lg-4","col-md-5","col-sm-6","required"],[1,"col-xl-8","col-lg-8","col-md-7","col-sm-6"],["appearance","outline",1,"dropdown-mat-all"],["formControlName","centers","placeholder","Center Name","multiple",""],[3,"value",4,"ngFor","ngForOf"],["svgIcon","appDownArrow","matSuffix",""],["formControlName","departments","placeholder","Departments","multiple",""],[1,"col-lg-4","col-md-4","col-sm-6"],["appearance","outline",1,"agm-input-lg","typeForm"],["placeholder","Select Type","formControlName","type",3,"selectionChange"],["matSuffix","","svgIcon","appDownArrow"],["class","col-lg-4 col-md-4 col-sm-6",4,"ngIf"],[1,"row",2,"display","flex","place-items","flex-end"],[1,"col-lg-6","col-md-6","col-sm-6"],[1,"required"],[1,"col-lg-12"],["appearance","outline",1,"descriptionTextArea"],["formControlName","description","matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","5","cdkAutosizeMaxRows","20","formControlName","description"],["autosize","cdkTextareaAutosize"],[1,"row","amountSection"],[1,"row","quantity"],[1,"col-lg-3","required"],[1,"col-lg-4"],["formControlName","unit","placeholder","units"],["formControlName","category","placeholder","Category"],["class","container col-lg-4",4,"ngIf"],["class","row quantity","style","place-content: flex-end",4,"ngIf"],[1,"checkSection"],["formControlName","is_batch_no"],["formControlName","is_expiry",2,"padding-left","4em"],["class","tableList",4,"ngIf"],[1,"form-action-btn"],["type","button","mat-button","",1,"button-mat-all-cancel",3,"click"],["type","submit","mat-button","",1,"button-mat-all"],["class","spinner",4,"ngIf"],[1,"primary"],[3,"value"],[1,"col-xl-4","col-lg-4","col-md-5","col-sm-6"],["placeholder","Select Type","formControlName","equipments","multiple",""],[1,"container","col-lg-4"],["formControlName","is_container",3,"ngModel","ngModelChange","change"],[1,"color-picker"],["for","color",4,"ngIf"],["type","color","formControlName","color",4,"ngIf"],["for","color"],["type","color","formControlName","color"],[1,"row","quantity",2,"place-content","flex-end"],[1,"col-lg-3","text-right"],["placeholder","Product Unit","readonly","","appearance","outline","matInput","","type","number"],["floatLabel","never","appearance","outline",1,"agm-input-lg"],["matPrefix",""],["placeholder","Total amount","appearance","outline","matInput","","readonly","","matInput","","type","number",3,"value"],[1,"tableList"],[1,"agm-table--container"],["mat-table","",1,"agm-table",3,"dataSource"],["matColumnDef","center"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","batch_number"],["matColumnDef","expiry_date"],["matColumnDef","vendor"],["matColumnDef","quantity"],["matColumnDef","price_per_qty"],["matColumnDef","price"],["matColumnDef","alarm_value"],["mat-cell","","style","\n                  display: flex;\n                  align-items: center;\n                  justify-content: center;\n                ",4,"matCellDef"],["matColumnDef","reStock"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","empty-row",4,"ngIf"],[3,"length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[1,"unit_price"],["mat-cell","",2,"display","flex","align-items","center","justify-content","center"],["appearance","outline","matInput","",2,"text-align","center",3,"value"],[2,"margin-left","10px"],["appearance","outline","matInput","","maxlength","4",2,"text-align","center",3,"value"],["mat-header-row",""],["mat-row",""],[1,"empty-row"],[3,"length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page"],[1,"spinner"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,Oo,2,0,"h3",1),e.YNc(2,Mo,2,0,"h3",1),e.TgZ(3,"form",2),e.NdJ("submit",function(){return o.ProductSubmit()}),e.TgZ(4,"section",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"span",8),e._uU(10,"Product Name"),e.qZA(),e.TgZ(11,"div",9)(12,"mat-form-field",10),e._UZ(13,"input",11),e.YNc(14,Bo,2,0,"mat-error",12),e.YNc(15,Lo,2,0,"mat-error",12),e.qZA()()()(),e.TgZ(16,"div",6)(17,"div",7)(18,"span",13),e._uU(19,"Center"),e.qZA(),e.TgZ(20,"div",14)(21,"mat-form-field",15)(22,"mat-select",16),e.YNc(23,Eo,2,2,"mat-option",17),e.qZA(),e._UZ(24,"mat-icon",18),e.YNc(25,Vo,2,0,"mat-error",12),e.qZA()()()(),e.TgZ(26,"div",6)(27,"div",7)(28,"span",8),e._uU(29,"Department"),e.qZA(),e.TgZ(30,"div",9)(31,"mat-form-field",15)(32,"mat-select",19),e.YNc(33,$o,2,2,"mat-option",17),e.qZA(),e._UZ(34,"mat-icon",18),e.YNc(35,jo,2,0,"mat-error",12),e.qZA()()()()(),e.TgZ(36,"div",5)(37,"div",20)(38,"div",7)(39,"span",8),e._uU(40,"Type"),e.qZA(),e.TgZ(41,"div",9)(42,"mat-form-field",21)(43,"mat-select",22),e.NdJ("selectionChange",function(r){return o.typeOption(r.value)}),e.YNc(44,zo,2,2,"mat-option",17),e.qZA(),e._UZ(45,"mat-icon",23),e.YNc(46,Ho,2,0,"mat-error",12),e.qZA()()()(),e.YNc(47,Ko,9,1,"div",24),e.qZA(),e.TgZ(48,"div",25)(49,"div",26)(50,"h4",27),e._uU(51,"Description"),e.qZA()()(),e.TgZ(52,"div",5)(53,"div",28)(54,"mat-form-field",29)(55,"textarea",30,31),e._uU(57,"              "),e.qZA(),e.YNc(58,Wo,2,0,"mat-error",12),e.YNc(59,Xo,2,0,"mat-error",12),e.qZA()()()()(),e.TgZ(60,"section",32)(61,"div",26)(62,"div",33)(63,"span",34),e._uU(64,"Product Unit "),e.qZA(),e.TgZ(65,"div",35)(66,"mat-form-field",15)(67,"mat-select",36),e.YNc(68,ea,2,2,"mat-option",17),e.qZA(),e._UZ(69,"mat-icon",18),e.YNc(70,ta,2,0,"mat-error",12),e.qZA()()(),e.TgZ(71,"div",33)(72,"span",34),e._uU(73,"Category "),e.qZA(),e.TgZ(74,"div",35)(75,"mat-form-field",15)(76,"mat-select",37),e.YNc(77,na,2,2,"mat-option",17),e.qZA(),e._UZ(78,"mat-icon",18),e.YNc(79,oa,2,0,"mat-error",12),e.qZA()()()(),e.YNc(80,ra,7,3,"section",38),e.TgZ(81,"div",26),e.YNc(82,sa,6,0,"div",39),e.YNc(83,ca,8,1,"div",39),e.qZA()(),e.TgZ(84,"section",40)(85,"mat-checkbox",41),e._uU(86,"Batch Number "),e.qZA(),e.TgZ(87,"mat-checkbox",42),e._uU(88,"Expiry Date"),e.qZA()(),e.YNc(89,Ua,35,5,"section",43),e.TgZ(90,"section")(91,"div",44)(92,"button",45),e.NdJ("click",function(r){return o.onCancelBtn(r)}),e._uU(93," Cancel "),e.qZA(),e.TgZ(94,"button",46),e._uU(95),e.qZA()()()()(),e.YNc(96,Sa,2,0,"div",47)),2&t){let i,r,l,u,_,b,f,q,I;e.xp6(1),e.Q6J("ngIf","create"==o.type),e.xp6(1),e.Q6J("ngIf","edit"==o.type),e.xp6(1),e.Q6J("formGroup",o.createProdForm),e.xp6(11),e.Q6J("ngIf",null==(i=o.createProdForm.get("name"))||null==i.errors?null:i.errors.required),e.xp6(1),e.Q6J("ngIf",null==(r=o.createProdForm.get("name"))||null==r.errors?null:r.errors.minLength),e.xp6(8),e.Q6J("ngForOf",o.centers),e.xp6(2),e.Q6J("ngIf",null==(l=o.createProdForm.get("centers"))||null==l.errors?null:l.errors.required),e.xp6(8),e.Q6J("ngForOf",o.departments),e.xp6(2),e.Q6J("ngIf",null==(u=o.createProdForm.get("departments"))||null==u.errors?null:u.errors.required),e.xp6(9),e.Q6J("ngForOf",o.testTypes),e.xp6(2),e.Q6J("ngIf",null==(_=o.createProdForm.get("type"))||null==_.errors?null:_.errors.required),e.xp6(1),e.Q6J("ngIf",o.equipmentShow),e.xp6(11),e.Q6J("ngIf",null==(b=o.createProdForm.get("description"))||null==b.errors?null:b.errors.required),e.xp6(1),e.Q6J("ngIf",null==(f=o.createProdForm.get("description"))||null==f.errors?null:f.errors.maxLength),e.xp6(9),e.Q6J("ngForOf",o.units),e.xp6(2),e.Q6J("ngIf",null==(q=o.createProdForm.get("unit"))||null==q.errors?null:q.errors.required),e.xp6(7),e.Q6J("ngForOf",o.categories),e.xp6(2),e.Q6J("ngIf",null==(I=o.createProdForm.get("category"))||null==I.errors?null:I.errors.required),e.xp6(1),e.Q6J("ngIf",!o.containerShow),e.xp6(2),e.Q6J("ngIf","edit"==o.type),e.xp6(1),e.Q6J("ngIf","edit"==o.type),e.xp6(6),e.Q6J("ngIf","edit"==o.type),e.xp6(6),e.hij(" ","create"===o.type?"Create":"edit"===o.type?"Update":""," "),e.xp6(1),e.Q6J("ngIf",o.spinner)}},dependencies:[p.sg,p.O5,v.Hw,s._Y,s.Fj,s.JJ,s.JL,s.F,s.sg,s.u,D.ey,O.IC,g.TO,g.KE,g.qo,g.R9,k.Nt,J.gD,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,x.lW,Jo.oG,w.Ou,T.NW,p.uU,W.Q],styles:["app-add-new-product .add-new-product{margin:2rem}  app-add-new-product .add-new-product .agm-input-lg{width:100%!important}  app-add-new-product .add-new-product .inputSection .mat-select-arrow-wrapper{display:none}  app-add-new-product .add-new-product .inputSection .mat-form-field-flex{height:3em}  app-add-new-product .add-new-product .inputSection .mat-form-field-infix{padding:.3em}  app-add-new-product .add-new-product .inputSection .mat-form-field{margin-top:1.5em;width:100%}  app-add-new-product .add-new-product .inputSection .mat-form-field-outline{background-color:var(--secondary-color-300);border-radius:3px}  app-add-new-product .add-new-product .inputSection .typeForm .mat-icon{width:18px}  app-add-new-product .add-new-product .inputSection .mat-icon{width:18px}  app-add-new-product .add-new-product .inputSection .inputData{display:flex;flex-direction:column}  app-add-new-product .add-new-product .inputSection .inputData .inputArea{display:flex;align-items:center}  app-add-new-product .add-new-product .inputSection .inputData .inputArea span{text-align:end}  app-add-new-product .add-new-product .inputSection .inputData .textarea{padding:1.5em 2.8em 0}  app-add-new-product .add-new-product .inputSection .inputData .textarea_field{display:flex;align-items:center;justify-content:space-between}  app-add-new-product .add-new-product .inputSection .inputData .textarea .restock{margin-right:-8%;display:flex;align-items:center;justify-content:flex-end}  app-add-new-product .add-new-product .inputSection .inputData .textarea .restock .mat-form-field{width:60%}  app-add-new-product .add-new-product .inputSection .inputData .descriptionTextArea{margin-top:0;width:100%}  app-add-new-product .add-new-product .inputSection .inputData .descriptionTextArea .mat-form-field-flex{height:6em}  app-add-new-product .add-new-product .mat-icon{width:18px}  app-add-new-product .add-new-product .mat-form-field-appearance-outline .mat-form-field-outline{color:transparent}  app-add-new-product .add-new-product .amountSection{display:flex;justify-content:space-between}  app-add-new-product .add-new-product .amountSection .mat-form-field-flex{height:3em}  app-add-new-product .add-new-product .amountSection .mat-form-field-infix{padding:.3em}  app-add-new-product .add-new-product .amountSection .mat-form-field{margin-top:1.5em}  app-add-new-product .add-new-product .amountSection .mat-form-field-outline{background-color:var(--secondary-color-300);border-radius:3px}  app-add-new-product .add-new-product .amountSection .quantity{display:flex;align-items:center}  app-add-new-product .add-new-product .amountSection .quantity .agm-input-lg{width:100%!important}  app-add-new-product .add-new-product .amountSection .prices .quantity{place-content:flex-end}  app-add-new-product .add-new-product .checkSection{margin-top:2em}  app-add-new-product .add-new-product .container{display:flex;justify-content:space-between}  app-add-new-product .add-new-product .container .color-picker{display:flex}  app-add-new-product .add-new-product .container .color-picker label{padding:.3rem 1rem}  app-add-new-product .add-new-product .tableList{margin-top:4em}  app-add-new-product .add-new-product .tableList th.mat-header-cell,   app-add-new-product .add-new-product .tableList td.mat-cell,   app-add-new-product .add-new-product .tableList td.mat-footer-cell{border-bottom-style:none}  app-add-new-product .add-new-product .tableList .agm-table--container .agm-input-lg{width:4rem!important;height:3rem!important}  app-add-new-product .add-new-product .tableList .agm-table--container .agm-input-lg .mat-form-field-flex{height:3em!important}  app-add-new-product .add-new-product .tableList .agm-table--container .agm-input-lg .mat-form-field-outline{background-color:var(--secondary-color-300)}  app-add-new-product .add-new-product .tableList .ellipsis{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}  app-add-new-product .add-new-product .tableList .mat-form-field-appearance-legacy .mat-form-field-wrapper{text-align:center}  app-add-new-product .add-new-product .tableList .mat-form-field-appearance-outline .mat-form-field-infix{padding:.3em 0 0}  app-add-new-product .add-new-product .form-action-btn{width:100%;display:flex;margin-top:50px;justify-content:end}  app-add-new-product .add-new-product .form-action-btn .button-mat-all-cancel{margin-right:50px}  app-add-new-product .add-new-product .unit_price{display:block}"],changeDetection:0}),n})();var ae=h(3848);function Da(n,a){1&n&&(e.TgZ(0,"h3",8),e._uU(1,"Create Equipment"),e.qZA())}function Ia(n,a){if(1&n&&(e.TgZ(0,"h3",8),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.equipmentInfo.name," ")}}function Fa(n,a){1&n&&(e.TgZ(0,"p"),e._uU(1," Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam scelerisque venenatis felis sit amet mattis. Maecenas pharetra dui sit amet nunc tristique maximus. Aliquam et orci sem. Suspendisse congue a sem finibus porttitor. Quisque pharetra et turpis et rhoncus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam scelerisque venenatis felis sit amet mattis. Maecenas pharetra dui sit amet nunc tristique max. "),e.qZA())}function Ya(n,a){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.equipmentInfo.description," ")}}let ce=(()=>{class n{constructor(t,o,i,r,l){this.router=t,this.actRoute=o,this.invtService=i,this.cdr=r,this.snackBbar=l,this.id="",this.spinner=!1,this.selectedIndexValue=0}ngOnInit(){this.equipment_id=this.actRoute.snapshot.params?.id,void 0!==this.equipment_id?(this.getEquipmentInfo(),this.navLinks=[{label:"Basic",link:"/inventory/alltests/equipment/"+this.equipment_id+"/basic",index:0},{label:"Product",link:"/inventory/alltests/equipment/"+this.equipment_id+"/product",index:1}]):this.navLinks=[{label:"Basic",link:"/inventory/alltests/equipment/basic",index:0},{label:"Product",link:"/inventory/alltests/equipment/product",index:1}],this.selectedIndexValue=0,this.selectedIndexValue=this.navLinks.indexOf(this.navLinks.find(t=>t.link===this.router.url)),this.router.events.subscribe(t=>{this.selectedIndexValue=this.navLinks.indexOf(this.navLinks.find(o=>o.link===this.router.url))})}onTabLinkClick(t){this.selectedIndexValue=t}getEquipmentInfo(){""!==this.equipment_id&&(this.spinner=!0,this.invtService.getEquipment(this.equipment_id).pipe((0,P.U)(t=>t.data)).subscribe({next:t=>{this.spinner=!1,this.equipmentInfo=t,this.cdr.detectChanges()},error:t=>{let o="Something went wrong";400==t.status?o=t?.error?.error:t?.error?.message&&(o=t?.error?.message),this.snackBbar.open(o,"close"),this.spinner=!1,this.cdr.markForCheck()}}))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.F0),e.Y36(m.gz),e.Y36(Z),e.Y36(e.sBO),e.Y36(A.c))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-equipment-create"]],features:[e._Bn([p.uU])],decls:15,vars:11,consts:[[1,"equipment-create"],["class","title primary",4,"ngIf"],[1,"equipment-create-container"],[4,"ngIf"],["mat-tab-nav-bar","",1,"agm-tab"],["mat-tab-link","","routerLinkActive","",3,"routerLink","active"],["rla","routerLinkActive"],["mat-tab-link","","routerLinkActive","",3,"routerLink","active","disabled"],[1,"title","primary"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div"),e.YNc(2,Da,2,0,"h3",1),e.YNc(3,Ia,2,1,"h3",1),e.qZA(),e.TgZ(4,"section",2),e.YNc(5,Fa,2,0,"p",3),e.YNc(6,Ya,2,1,"p",3),e.TgZ(7,"nav",4)(8,"a",5,6),e._uU(10),e.qZA(),e.TgZ(11,"a",7,6),e._uU(13),e.qZA()(),e._UZ(14,"router-outlet"),e.qZA()()),2&t){const i=e.MAs(9);e.xp6(2),e.Q6J("ngIf",!o.equipmentInfo),e.xp6(1),e.Q6J("ngIf",o.equipmentInfo),e.xp6(2),e.Q6J("ngIf",!o.equipmentInfo),e.xp6(1),e.Q6J("ngIf",o.equipmentInfo),e.xp6(2),e.Q6J("routerLink",o.navLinks[0].link)("active",!o.equipmentInfo||i.isActive),e.xp6(2),e.hij(" ",o.navLinks[0].label," "),e.xp6(1),e.Q6J("routerLink",o.navLinks[1].link)("active",i.isActive)("disabled",!o.equipmentInfo),e.xp6(2),e.hij(" ",o.navLinks[1].label," ")}},dependencies:[p.O5,ae.BU,ae.Nj,m.lC,m.yS,m.Od],styles:[".equipment-create[_ngcontent-%COMP%]{padding:2.6em}.equipment-create--tabs[_ngcontent-%COMP%]{display:flex}.equipment-create--tabs[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-left:1rem;font-size:1.3rem}.equipment-create--tabs[_ngcontent-%COMP%]   a.secondary[_ngcontent-%COMP%]{color:#424242cc}"],changeDetection:0}),n})();function Ra(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"h3",14)(3,"span",15),e._uU(4,"Product Selected:"),e.qZA(),e.TgZ(5,"button",16),e.NdJ("click",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.onShowProductSelection(i))}),e._UZ(6,"mat-icon",17),e._uU(7," Add More Products "),e.qZA()()()()}}function Qa(n,a){1&n&&(e.TgZ(0,"div")(1,"div",0)(2,"div",25)(3,"p",21),e._uU(4,"No data available!"),e.qZA()()()())}function Ja(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",27)(1,"div",28)(2,"p"),e._uU(3),e.qZA()(),e.TgZ(4,"div",29)(5,"p"),e._uU(6),e.qZA()(),e.TgZ(7,"div",29)(8,"p"),e._uU(9),e.qZA()(),e.TgZ(10,"div",30)(11,"mat-icon",31),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw(3);return e.KtG(l.onDelSelectedProduct(r))}),e._uU(12,"Del"),e.qZA()()()}if(2&n){const t=a.$implicit;e.xp6(3),e.Oqu(t.code),e.xp6(3),e.Oqu(t.name),e.xp6(3),e.Oqu(null==t.departments[0]?null:t.departments[0].name)}}function Oa(n,a){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,Ja,13,3,"div",26),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.selDataSource)}}function Ma(n,a){if(1&n&&(e.TgZ(0,"div",18)(1,"div",19)(2,"div",20)(3,"p",21),e._uU(4,"Product Code"),e.qZA()(),e.TgZ(5,"div",22)(6,"p",21),e._uU(7,"Product Name"),e.qZA()(),e.TgZ(8,"div",22)(9,"p",21),e._uU(10,"Department"),e.qZA()(),e.TgZ(11,"div",23)(12,"p",21),e._uU(13,"Action"),e.qZA()()(),e.YNc(14,Qa,5,0,"div",24),e.YNc(15,Oa,2,1,"div",24),e.qZA()),2&n){const t=e.oxw();e.xp6(14),e.Q6J("ngIf",0==t.selDataSource.length),e.xp6(1),e.Q6J("ngIf",t.selDataSource.length)}}function Ba(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",16),e.NdJ("click",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onShowProductSelection(i))}),e.TgZ(1,"mat-icon"),e._uU(2,"eye"),e.qZA(),e._uU(3),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(3),e.hij(" View Selected Products (",t.selDataSource.length,") ")}}function La(n,a){1&n&&(e.TgZ(0,"th",46),e._uU(1,"Product ID"),e.qZA())}function Ea(n,a){if(1&n&&(e.TgZ(0,"td",47),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.code," ")}}function Va(n,a){1&n&&(e.TgZ(0,"th",46),e._uU(1,"Product Name"),e.qZA())}function $a(n,a){if(1&n&&(e.TgZ(0,"td",47),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.name)," ")}}function ja(n,a){1&n&&(e.TgZ(0,"th",46),e._uU(1,"Type"),e.qZA())}function za(n,a){if(1&n&&(e.TgZ(0,"td",47),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.type)," ")}}function Ha(n,a){1&n&&(e.TgZ(0,"th",46),e._uU(1,"Product Name"),e.qZA())}function Ga(n,a){if(1&n&&(e.TgZ(0,"td",47),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.departments[0].name)," ")}}function Ka(n,a){1&n&&(e.TgZ(0,"th",46),e._uU(1,"Actions"),e.qZA())}function Wa(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"td",47)(1,"button",48),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.onProductSelection(r))}),e.TgZ(2,"mat-icon"),e._uU(3,"check"),e.qZA(),e.TgZ(4,"span"),e._uU(5,"Select"),e.qZA()()()}if(2&n){const t=a.$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("disabled",o.isProductMapped(t))}}function Xa(n,a){1&n&&e._UZ(0,"tr",49)}function ei(n,a){1&n&&e._UZ(0,"tr",50)}function ti(n,a){1&n&&(e.TgZ(0,"div",51),e._uU(1,"No Data Available!"),e.qZA())}function ni(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-paginator",52),e.NdJ("page",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.getPageEvent(i))}),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("length",t.tableLength)("pageIndex",(t.productPagination.page||1)-1)("pageSize",t.productPagination.perPage)("pageSizeOptions",t.productPagination.paginationSizes)("showFirstLastButtons",!0)}}function oi(n,a){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,Ba,4,1,"button",32),e.TgZ(3,"h3",14),e._uU(4,"Choose Products:"),e.qZA(),e.TgZ(5,"div",33)(6,"table",34),e.ynx(7,35),e.YNc(8,La,2,0,"th",36),e.YNc(9,Ea,2,1,"td",37),e.BQk(),e.ynx(10,38),e.YNc(11,Va,2,0,"th",36),e.YNc(12,$a,3,3,"td",37),e.BQk(),e.ynx(13,39),e.YNc(14,ja,2,0,"th",36),e.YNc(15,za,3,3,"td",37),e.BQk(),e.ynx(16,40),e.YNc(17,Ha,2,0,"th",36),e.YNc(18,Ga,3,3,"td",37),e.BQk(),e.ynx(19,41),e.YNc(20,Ka,2,0,"th",36),e.YNc(21,Wa,6,1,"td",37),e.BQk(),e.YNc(22,Xa,1,0,"tr",42),e.YNc(23,ei,1,0,"tr",43),e.qZA(),e.YNc(24,ti,2,0,"div",44),e.YNc(25,ni,1,5,"mat-paginator",45),e.qZA()()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.selDataSource.length),e.xp6(4),e.Q6J("dataSource",t.tabledataSource),e.xp6(16),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(1),e.Q6J("ngIf",t.isEmpty),e.xp6(1),e.Q6J("ngIf",!t.isEmpty)}}function ai(n,a){1&n&&(e.TgZ(0,"div",53),e._UZ(1,"mat-spinner"),e.qZA())}let ii=(()=>{class n{constructor(t,o,i,r,l,u,_,b,f){this.data=t,this.cdr=o,this.dialog=i,this.activatedroute=r,this.inventoryService=l,this.userService=u,this.sharedService=_,this.snackBbar=b,this.dialogRef=f,this.agamFilters=[],this.searchBy=[],this.centers=[],this.dataSource=[],this.prodDatalist=[],this.tabledataSource=new c.by(this.dataSource),this.searchProductNameUseAutoComplete=new Q.d,this.selectanelContainer="",this.spinner=!1,this.unsubscribe$=new S.x,this.searchStr=new s.NI(null),this.selDataSource=[],this.isLoading=!0,this.tableLength=10,this.departmentName="",this.centerName="",this.seachPayload={},this.isEmpty=!1,this.existingProducts=[],this.showSelected=!1,this.productPagination=new y.p({page:1,perPage:5,total:this.tableLength}),this.displayedColumns=["code","name","action"],this.equipmentInfo=t.equipmentInfo,this.existingProducts=t.products}ngOnInit(){this.getProducts(),this.loadFilters(),this.searchListener(),this.filter()}searchListener(){this.spinner=!0,this.searchStr.valueChanges.pipe((0,V.b)(400),(0,$.R)(this.unsubscribe$),(0,j.w)(t=>(this.tabledataSource.data=[],this.tableLength=0,this.isEmpty=!0,this.seachPayload={filter:{search:t,search_by:"name",departments:{name:this.departmentName},centers:{name:this.centerName}}},(""==t||null==t)&&(delete this.seachPayload.filter.search,delete this.seachPayload.filter.search_by),(null==this.departmentName||""==this.departmentName)&&delete this.seachPayload.filter.departments,(null==this.centerName||""==this.centerName)&&delete this.seachPayload.filter.centers,this.productPagination.page=1,this.inventoryService.getProductPagination(this.productPagination.perPage,this.productPagination.page,this.seachPayload)))).subscribe({next:t=>{this.tabledataSource.data=t.data.results,this.tableLength=t.data.pagination.total,this.spinner=!1,this.isEmpty=!1,0==this.tabledataSource.data.length&&(this.isEmpty=!0,this.spinner=!1),this.cdr.markForCheck()},error:t=>{let o=t?.error?.message;t?.error?.message||(o="Something went wrong"),this.snackBbar.open(o,"close"),this.spinner=!1,this.cdr.markForCheck()}})}getPageEvent(t){this.productPagination.doPagination(t),this.getProducts()}loadFilters(){this.spinner=!0,this.sharedService.getCenterList().subscribe(t=>{this.spinner=!1,this.agamFilters=[{type:"centers",name:"Centers",data:t?.data.centers,lableKey:"name"}]})}handleFilter(t){"departments"===t.type&&(this.departmentName=t.selected?.option?.value?.name),"centers"===t.type&&(this.centerName=t.selected?.option?.value?.name)}filter(){this.spinner=!0;let o="",i=!1;0!=Object.keys(this.seachPayload).length?(o=this.seachPayload.filter.search,(""!=o||null!=o)&&(i=!0)):i=!1,i&&null!=this.seachPayload.filter.search&&""!=this.seachPayload.filter.search?(alert("asdas"),this.seachPayload={filter:{search:this.seachPayload.filter.search,search_by:"name",departments:{name:this.departmentName},centers:{name:this.centerName}}}):this.seachPayload={filter:{departments:{name:this.departmentName},centers:{name:this.centerName}}},(null==this.departmentName||""==this.departmentName)&&delete this.seachPayload.filter.departments,(null==this.centerName||""==this.centerName)&&delete this.seachPayload.filter.centers,console.log(this.seachPayload),this.inventoryService.getProductPagination(this.productPagination.perPage,this.productPagination.page,this.seachPayload).subscribe(r=>{this.tabledataSource.data=r.data.results,this.tableLength=r.data.pagination.total,this.spinner=!1,this.isEmpty=!1,0==this.tabledataSource.data.length&&(this.isEmpty=!0,this.spinner=!1),this.cdr.markForCheck()},r=>{let l="Something went wrong";r?.error?.message?l=r?.error?.message:r?.error?.error&&(l=r?.error?.error),this.snackBbar.open(l,"close"),this.spinner=!1,this.cdr.markForCheck()})}handleSearch(){this.filter()}resetFilter(){this.departmentName="",this.centerName="",this.filter()}getSearchBy(){if(this.searchBy.length>0){let t="";return this.searchBy.forEach((o,i)=>{t+=o,i!==this.searchBy.length-1&&(t+=",")}),t}}onSearch(t){if(this.search&&null!==this.search)this.seachPayload.filter.search=this.search,this.searchBy.includes("name")&&this.searchBy.includes("code")||(this.searchBy.push("name"),this.searchBy.push("code"),console.log("2222"));else if(this.seachPayload.filter={},this.searchBy.includes("name")&&this.searchBy.includes("code")){let o;o=this.searchBy.indexOf("name"),this.searchBy.splice(o,1),o=this.searchBy.push("code"),this.searchBy.splice(o,1)}this.seachPayload.filter.search_by=this.getSearchBy()}updateSelectContainer(){this.selectanelContainer=".product-mapping-autocomplete"}inventoryDisplayWithFn(t){return t?.name??""}getProducts(){this.spinner=!0,this.inventoryService.getProductPagination(this.productPagination.perPage,this.productPagination.page,this.seachPayload).subscribe({next:t=>{this.tabledataSource.data=t.data.results,this.tableLength=t.data.pagination.total,this.isEmpty=!1,0==this.tabledataSource.data.length&&(this.isEmpty=!0),this.spinner=!1,this.cdr.markForCheck()},error:t=>{this.isEmpty=!0,this.spinner=!1,this.snackBbar.open("Something went wrong","close"),this.cdr.markForCheck()}})}onDelSelectedProduct(t){this.selDataSource=this.selDataSource.filter(o=>o.id!=t.id)}onCloseClick(){this.dialogRef.close(!0)}onProductSelection(t){let o=this.selDataSource.filter(r=>r.id==t.id),i=this.existingProducts.filter(r=>r.id==t.id);0==o.length&&0==i.length&&this.selDataSource.push(t),this.cdr.detectChanges()}isProductMapped(t){let o=this.selDataSource.filter(r=>r.id==t.id),i=this.existingProducts.filter(r=>r.id==t.id);return o.length>0||i.length>0}onShowProductSelection(t){this.showSelected=1!=this.showSelected}onUpdateProductMapping(t){if(this.selDataSource.length>0){let i={products:[]};this.selDataSource.forEach((r,l)=>{i.products.push(r.id)}),console.log(i)}this.snackBbar.open("Products are mapped successfully",""),this.onCloseClick(),this.cdr.detectChanges()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(C.WI),e.Y36(e.sBO),e.Y36(C.uw),e.Y36(m.gz),e.Y36(Z),e.Y36(oe.x),e.Y36(K.F),e.Y36(A.c),e.Y36(C.so))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-product-select"]],decls:26,vars:7,consts:[[1,"row"],[1,"col-lg-12"],["mat-icon-button","","aria-label","close dialog","mat-dialog-close","",1,"pull-right"],[1,"proList_search"],[1,"col-lg-8","col-sm-8"],[1,"searchBox"],["placholder","Search Product Name",3,"formControl","filters","filter","search","reset"],["class","row",4,"ngIf"],["class","prodselection-container",4,"ngIf"],[1,"product-mapping-bottom"],[1,"col-lg-12","text-right","form-action-btn"],["mat-button","","mat-dialog-close","",1,"button-mat-all-cancel"],["mat-button","",1,"button-mat-all",3,"disabled","click"],["class","spinner",4,"ngIf"],[1,"status_class"],[1,"status_class--primary"],["type","button","mat-button","",2,"float","right",3,"click"],["svgIcon","appAdd"],[1,"prodselection-container"],[1,"row","add-cons-head"],[1,"col-lg-2","col-md-2","col-sm-2"],[1,"text-center"],[1,"col-lg-4","col-md-4","col-sm-4"],[1,"col-lg-2","col-md-2","col-sm-2","text-center"],[4,"ngIf"],[1,"col-lg-12","add-cons-data"],["class","row add-cons-line",4,"ngFor","ngForOf"],[1,"row","add-cons-line"],[1,"col-lg-2","col-md-2","col-sm-2","add-cons-data"],[1,"col-lg-4","col-md-4","col-sm-4","add-cons-data"],[1,"col-lg-2","col-md-","col-sm-2","add-cons-icon","text-center"],["svgIcon","appDelete",3,"click"],["type","button","mat-button","","style","float: right",3,"click",4,"ngIf"],[1,"agm-table--container"],["mat-table","",1,"agm-table",3,"dataSource"],["matColumnDef","code"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","type"],["matColumnDef","department"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","empty-row",4,"ngIf"],[3,"length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["type","button","mat-raised-button","",1,"btn-selected",3,"disabled","click"],["mat-header-row",""],["mat-row",""],[1,"empty-row"],[3,"length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page"],[1,"spinner"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"button",2)(3,"mat-icon"),e._uU(4,"close"),e.qZA()(),e.TgZ(5,"h3"),e._uU(6,"Product Mapping"),e.qZA()()(),e.TgZ(7,"div",0)(8,"div",1)(9,"section",3)(10,"div",0)(11,"div",4)(12,"div",5)(13,"app-agam-search-filter",6),e.NdJ("filter",function(r){return o.handleFilter(r)})("search",function(){return o.handleSearch()})("reset",function(){return o.resetFilter()}),e.qZA()()()()()()(),e.YNc(14,Ra,8,0,"div",7),e.YNc(15,Ma,16,2,"div",8),e.YNc(16,oi,26,6,"div",7),e._UZ(17,"mat-divider",9),e.TgZ(18,"div",0)(19,"div",10)(20,"button",11),e._uU(21," Cancel "),e.qZA(),e.TgZ(22,"button",12),e.NdJ("click",function(r){return o.onUpdateProductMapping(r)}),e.TgZ(23,"span"),e._uU(24,"Update"),e.qZA()()()(),e.YNc(25,ai,2,0,"div",13)),2&t&&(e.xp6(13),e.Q6J("formControl",o.searchStr)("filters",o.agamFilters),e.xp6(1),e.Q6J("ngIf",o.showSelected),e.xp6(1),e.Q6J("ngIf",o.showSelected),e.xp6(1),e.Q6J("ngIf",!o.showSelected),e.xp6(6),e.Q6J("disabled",!o.selDataSource.length),e.xp6(3),e.Q6J("ngIf",o.spinner))},dependencies:[p.sg,p.O5,v.Hw,s.JJ,s.oH,Y.d,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,x.lW,w.Ou,C.ZT,T.NW,B.N,p.rS],styles:[".prodselection-container[_ngcontent-%COMP%]{margin-bottom:30px;padding:0 15px;background:#f7f7f7;border-radius:2px;border:5px solid #c4ced3}.product-mapping-bottom[_ngcontent-%COMP%]{margin-bottom:30px}.agm-table[_ngcontent-%COMP%]   .mat-raised-button[_ngcontent-%COMP%]{background:var(--secondary-color-500)}.agm-table[_ngcontent-%COMP%]   .mat-raised-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:2rem!important}.add-cons-head[_ngcontent-%COMP%]{background-color:var(--secondary-color-300)}.add-cons-head[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem!important;padding-top:8px}.add-cons-line[_ngcontent-%COMP%]{border-bottom:1px solid var(--secondary-color-400)}.add-cons-line[_ngcontent-%COMP%]   .add-cons-data[_ngcontent-%COMP%]{padding:.8rem auto .25rem!important}.add-cons-line[_ngcontent-%COMP%]   .add-cons-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:10px;text-align:center!important}.add-cons-line[_ngcontent-%COMP%]   .add-cons-icon[_ngcontent-%COMP%]{cursor:pointer;padding:.5rem;text-align:center}.add-cons-line[_ngcontent-%COMP%]:last-child{border-bottom:none!important}"],changeDetection:0}),n})();function ri(n,a){1&n&&(e.TgZ(0,"div",41),e._UZ(1,"mat-spinner",42),e.qZA())}function si(n,a){1&n&&(e.TgZ(0,"p",43),e._uU(1," Active "),e.qZA())}function ci(n,a){1&n&&(e.TgZ(0,"p",44),e._uU(1," Inactive "),e.qZA())}function li(n,a){if(1&n&&(e.TgZ(0,"mat-option",45),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",null==t?null:t.name," ")}}function pi(n,a){1&n&&(e.TgZ(0,"th",46),e._uU(1,"Product ID"),e.qZA())}function di(n,a){if(1&n&&(e.TgZ(0,"td",47),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.code," ")}}function ui(n,a){1&n&&(e.TgZ(0,"th",46),e._uU(1,"Product Name"),e.qZA())}function mi(n,a){if(1&n&&(e.TgZ(0,"td",47),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.name)," ")}}function hi(n,a){1&n&&(e.TgZ(0,"th",46),e._uU(1,"Actions"),e.qZA())}function _i(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"td",47)(1,"mat-icon",48),e._uU(2,"Edit"),e.qZA(),e.TgZ(3,"mat-icon",49),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.onRemoveProdItem(r))}),e._uU(4,"Del"),e.qZA()()}if(2&n){const t=a.$implicit;e.xp6(1),e.MGl("routerLink","/inventory/products/",t.id,"")}}function fi(n,a){1&n&&e._UZ(0,"tr",50)}function gi(n,a){1&n&&e._UZ(0,"tr",51)}function bi(n,a){1&n&&(e.TgZ(0,"div",52),e._uU(1,"No Data Available!"),e.qZA())}function Ci(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-paginator",53),e.NdJ("page",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.getPageEvent(i))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("length",t.tableLength)("pageIndex",(t.productPagination.page||1)-1)("pageSize",t.productPagination.perPage)("pageSizeOptions",t.productPagination.paginationSizes)("showFirstLastButtons",!0)}}function qi(n,a){1&n&&(e.TgZ(0,"div",54),e._UZ(1,"mat-spinner"),e.qZA())}let te=(()=>{class n{constructor(t,o,i,r,l){this.cdr=t,this.dialog=o,this.activatedroute=i,this.inventoryService=r,this.snackBbar=l,this.agamFilters=[],this.isLoading=!1,this.dataSource=[],this.tabledataSource=new c.by(this.dataSource),this.displayedColumns=["code","name","action"],this.searchProductNameUseAutoComplete=new Q.d,this.unsubscribe$=new S.x,this.searchInput=new s.NI(null),this.spinner=!1,this.prodDatalist=[],this.selDataSource=[],this.displayedColumnsCreate=["product_code","product_Name","vendor","price","consumed_qty","action"],this.isEmpty=!1,this.tableLength=10,this.productPagination=new y.p({page:1,perPage:5,total:this.tableLength}),this.productSearchAutocompleteSetup()}ngOnInit(){this.activatedroute.parent?.params.subscribe(t=>{this.id=t.id,this.getEquiementInfo()}),this.loadFilters()}loadFilters(){this.isLoading=!1}onSearch(t){}handleFilter(t){}onRemoveProdItem(t){console.log(t),this.confirmDialog=this.dialog.open(F.$,{width:"40%",height:"auto",disableClose:!1,data:{message:"Are you sure want to remove - "+t.name+"?",buttonText:{ok:"Delete",cancel:"Cancel"}}}),this.confirmDialog.afterClosed().subscribe(o=>{if(o){let i=t.equipments.filter(l=>l.id!=this.id);t.equipments=i,this.spinner=!0,this.inventoryService.updateProduct(t.id,{id:t.id,equipments:t.equipments}).subscribe({next:l=>{this.spinner=!1,"success"==l.status&&(this.tabledataSource.data=l.data.results,l.data.pagination.total>0&&(this.isEmpty=!1,this.tableLength=l.data.pagination.total)),this.cdr.detectChanges()}}),this.cdr.detectChanges()}})}updateSelectContainer(){this.selectanelContainer=".product-autocomplete"}inventoryDisplayWithFn(t){return t?.name??""}productSearchAutocompleteSetup(){let t=this.searchInput?.valueChanges;this.spinner=!0,this.cdr.markForCheck(),t&&(this.searchProductNameUseAutoComplete.loadDependency(this.cdr,this.unsubscribe$,t),this.searchProductNameUseAutoComplete.pagination.perPage=6,this.searchProductNameUseAutoComplete.apiEndpointMethod=()=>this.inventoryService.searchProduct(this.searchProductNameUseAutoComplete.searchStr,this.searchProductNameUseAutoComplete.pagination).pipe((0,P.U)(o=>(this.spinner=!1,o.data))),this.searchProductNameUseAutoComplete.listenForAutoCompleteSearchFormControl(this.searchInput,()=>{},o=>{}),this.searchProductNameUseAutoComplete.loadData(()=>{},()=>{}))}onProductSelection(t){let o={id:t.option.value.id,code:t.option.value.code,name:t.option.value.name},i=this.prodDatalist.filter(l=>l.id==o.id),r=this.tabledataSource.data.filter(l=>l.id==o.id);0==i.length&&0==r.length&&(this.prodDatalist.push(o),this.selDataSource=this.prodDatalist),this.cdr.detectChanges()}loadMoreProducts(){this.searchProductNameUseAutoComplete.loadMoreData(()=>{},()=>{})}onOpenProductSelectMapping(t){this.dialog.open(ii,{width:"80%",height:"70%",disableClose:!1,panelClass:"product-select-dialog",data:{equipmentInfo:this.equipmentInfo,products:this.tabledataSource.data}}).afterClosed().subscribe(i=>{i&&this.getEquipmentProducts(),this.cdr.markForCheck()})}getEquiementInfo(){""!=this.id&&(this.spinner=!0,this.inventoryService.getEquipment(this.id).pipe((0,P.U)(t=>t.data)).subscribe(t=>{this.spinner=!1,this.equipmentInfo=t,this.getEquipmentProducts(),this.cdr.detectChanges()}))}getPageEvent(t){this.productPagination.doPagination(t)}getEquipmentProducts(){this.isEmpty=!0,""!==this.id&&(this.spinner=!0,this.inventoryService.searchProduct("",this.productPagination,{filter:{equipments:{id:this.id}}}).subscribe({next:o=>{this.spinner=!1,"success"==o.status&&(this.tabledataSource.data=o.data.results,o.data.pagination.total>0&&(this.isEmpty=!1,this.tableLength=o.data.pagination.total)),this.cdr.detectChanges()}}))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(C.uw),e.Y36(m.gz),e.Y36(Z),e.Y36(A.c))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-equipment-product"]],decls:94,vars:27,consts:[[1,"equipment-product__tab"],["class","spinner-container",4,"ngIf"],[1,"equipment-product-container"],[1,"col-lg-3"],[1,"equipment-product__tab--left-side"],[1,"row"],[1,"col-sm-6"],[1,"primary","line-break"],[1,"col-sm-6","status_class"],["class","primary line-break status_class--success",4,"ngIf"],["class","primary line-break status_class--danger",4,"ngIf"],[1,"col-lg-9"],[1,"equipment-product__tab--right-side"],[1,"proList_search"],[1,"col-lg-8","col-sm-8"],["appearance","outline",1,"agm-search_box"],["matInput","","placeholder","Search by Product Name",3,"formControl","matAutocomplete"],["autoActiveFirstOption","",1,"autocomplete-scroll",3,"displayWith","opened","optionSelected"],["auto","matAutocomplete"],["infiniteScroll","",1,"product-autocomplete",3,"infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","fromRoot","immediateCheck","alwaysCallback","infiniteScrollContainer","scrolled"],[3,"value",4,"ngFor","ngForOf"],["matSuffix","","svgIcon","appSearch"],["matSuffix","",3,"vertical"],[1,"col-lg-4","col-sm-4"],[1,"action-buttons"],[1,"btn","sample-btn"],[1,"btn-icons",3,"click"],[1,"status_class"],[1,"status_class--success"],[1,"agm-table--container"],["mat-table","",1,"agm-table",3,"dataSource"],["matColumnDef","code"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","empty-row",4,"ngIf"],[3,"length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page",4,"ngIf"],["class","spinner",4,"ngIf"],[1,"spinner-container"],["diameter","70",1,"spinner1"],[1,"primary","line-break","status_class--success"],[1,"primary","line-break","status_class--danger"],[3,"value"],["mat-header-cell",""],["mat-cell",""],["svgIcon","appEdit",3,"routerLink"],["svgIcon","appDelete",3,"click"],["mat-header-row",""],["mat-row",""],[1,"empty-row"],[3,"length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page"],[1,"spinner"]],template:function(t,o){if(1&t&&(e.TgZ(0,"section",0),e.YNc(1,ri,2,0,"div",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"p"),e._uU(8,"Equipment"),e.qZA()(),e.TgZ(9,"div",6)(10,"p",7),e._uU(11),e.qZA()()(),e.TgZ(12,"div",5)(13,"div",6)(14,"p"),e._uU(15,"Equipment code"),e.qZA()(),e.TgZ(16,"div",6)(17,"p",7),e._uU(18),e.qZA()()(),e.TgZ(19,"div",5)(20,"div",6)(21,"p"),e._uU(22,"Vendor"),e.qZA()(),e.TgZ(23,"div",6)(24,"p",7),e._uU(25),e.qZA()()(),e.TgZ(26,"div",5)(27,"div",6)(28,"p"),e._uU(29,"Brand"),e.qZA()(),e.TgZ(30,"div",6)(31,"p",7),e._uU(32),e.qZA()()(),e.TgZ(33,"div",5)(34,"div",6)(35,"p"),e._uU(36,"Department"),e.qZA()(),e.TgZ(37,"div",6)(38,"p",7),e._uU(39),e.qZA()()(),e.TgZ(40,"div",5)(41,"div",6)(42,"p"),e._uU(43,"Center"),e.qZA()(),e.TgZ(44,"div",6)(45,"p",7),e._uU(46),e.qZA()()(),e.TgZ(47,"div",5)(48,"div",6)(49,"p"),e._uU(50,"Status"),e.qZA()(),e.TgZ(51,"div",8),e.YNc(52,si,2,0,"p",9),e.YNc(53,ci,2,0,"p",10),e.qZA()()()(),e.TgZ(54,"div",11)(55,"div",12)(56,"h3"),e._uU(57,"Inventory"),e.qZA(),e.TgZ(58,"section",13)(59,"div",5)(60,"div",14)(61,"mat-form-field",15),e._UZ(62,"input",16),e.TgZ(63,"mat-autocomplete",17,18),e.NdJ("opened",function(){return o.updateSelectContainer()})("optionSelected",function(r){return o.onProductSelection(r)}),e.TgZ(65,"div",19),e.NdJ("scrolled",function(){return o.loadMoreProducts()}),e.YNc(66,li,2,2,"mat-option",20),e.qZA()(),e._UZ(67,"mat-icon",21)(68,"mat-divider",22),e.qZA()(),e.TgZ(69,"div",23)(70,"div",24)(71,"div",25)(72,"button",26),e.NdJ("click",function(r){return o.onOpenProductSelectMapping(r)}),e.TgZ(73,"span"),e._uU(74,"Map"),e.qZA()()()()()()(),e.TgZ(75,"h3",27)(76,"span",28),e._uU(77,"Products Mapped:"),e.qZA()(),e.TgZ(78,"div",29)(79,"table",30),e.ynx(80,31),e.YNc(81,pi,2,0,"th",32),e.YNc(82,di,2,1,"td",33),e.BQk(),e.ynx(83,34),e.YNc(84,ui,2,0,"th",32),e.YNc(85,mi,3,3,"td",33),e.BQk(),e.ynx(86,35),e.YNc(87,hi,2,0,"th",32),e.YNc(88,_i,5,1,"td",33),e.BQk(),e.YNc(89,fi,1,0,"tr",36),e.YNc(90,gi,1,0,"tr",37),e.qZA(),e.YNc(91,bi,2,0,"div",38),e.YNc(92,Ci,1,5,"mat-paginator",39),e.qZA()()()()(),e.YNc(93,qi,2,0,"div",40)),2&t){const i=e.MAs(64);e.xp6(1),e.Q6J("ngIf",o.isLoading),e.xp6(10),e.Oqu(null==o.equipmentInfo?null:o.equipmentInfo.name),e.xp6(7),e.Oqu(null==o.equipmentInfo?null:o.equipmentInfo.code),e.xp6(7),e.hij(" ",null==o.equipmentInfo?null:o.equipmentInfo.vendors[0].name," "),e.xp6(7),e.Oqu(null==o.equipmentInfo?null:o.equipmentInfo.brand),e.xp6(7),e.hij(" ",null==o.equipmentInfo?null:o.equipmentInfo.departments[0].name," "),e.xp6(7),e.hij(" ",null==o.equipmentInfo?null:o.equipmentInfo.centers[0].name," "),e.xp6(6),e.Q6J("ngIf",null==o.equipmentInfo?null:o.equipmentInfo.is_active),e.xp6(1),e.Q6J("ngIf",!(null!=o.equipmentInfo&&o.equipmentInfo.is_active)),e.xp6(9),e.Q6J("formControl",o.searchInput)("matAutocomplete",i),e.xp6(1),e.Q6J("displayWith",o.inventoryDisplayWithFn),e.xp6(2),e.Q6J("infiniteScrollDistance",1)("infiniteScrollThrottle",0)("scrollWindow",!1)("fromRoot",!0)("immediateCheck",!1)("alwaysCallback",!1)("infiniteScrollContainer",o.selectanelContainer),e.xp6(1),e.Q6J("ngForOf",o.searchProductNameUseAutoComplete.data),e.xp6(2),e.Q6J("vertical",!0),e.xp6(11),e.Q6J("dataSource",o.tabledataSource),e.xp6(10),e.Q6J("matHeaderRowDef",o.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns),e.xp6(1),e.Q6J("ngIf",o.isEmpty),e.xp6(1),e.Q6J("ngIf",!o.isEmpty),e.xp6(1),e.Q6J("ngIf",o.spinner)}},dependencies:[p.sg,p.O5,R.R,v.Hw,s.Fj,s.JJ,s.oH,N.XC,N.ZL,D.ey,g.KE,g.R9,k.Nt,Y.d,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,w.Ou,T.NW,m.rH,p.rS],styles:[".equipment-product__tab[_ngcontent-%COMP%]{padding-top:2rem}.equipment-product__tab--left-side[_ngcontent-%COMP%]{box-shadow:0 4px 25px #0003;padding:20px;background-color:#f4f4f4;margin-top:3rem}.equipment-product__tab--right-side[_ngcontent-%COMP%]{padding:20px}.equipment-product__tab[_ngcontent-%COMP%]   .line-break[_ngcontent-%COMP%]{min-width:auto!important}.equipment-product__tab[_ngcontent-%COMP%]   .mat-divider-horizontal[_ngcontent-%COMP%]{margin-bottom:2rem}.equipment-product__tab[_ngcontent-%COMP%]   .status_class--success[_ngcontent-%COMP%]{color:var(--status-success)}.equipment-product__tab[_ngcontent-%COMP%]   .status_class--danger[_ngcontent-%COMP%]{color:var(--status-cancel)}.equipment-product__tab[_ngcontent-%COMP%]   .status_class--primary[_ngcontent-%COMP%]{color:var(--status-info)}.equipment-product__tab[_ngcontent-%COMP%]   .prodselection-container[_ngcontent-%COMP%]{margin-bottom:30px;padding:0 15px 15px;background-color:#f4f4f4}.equipment-product__tab[_ngcontent-%COMP%]   .prodselection-container[_ngcontent-%COMP%]   .add-cons-head[_ngcontent-%COMP%]{background-color:var(--secondary-color-300)}.equipment-product__tab[_ngcontent-%COMP%]   .prodselection-container[_ngcontent-%COMP%]   .add-cons-head[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem!important;padding-top:8px}.equipment-product__tab[_ngcontent-%COMP%]   .prodselection-container[_ngcontent-%COMP%]   .add-cons-line[_ngcontent-%COMP%]{border-bottom:1px solid var(--secondary-color-400)}.equipment-product__tab[_ngcontent-%COMP%]   .prodselection-container[_ngcontent-%COMP%]   .add-cons-line[_ngcontent-%COMP%]   .add-cons-data[_ngcontent-%COMP%]{padding:.8rem auto .25rem!important}.equipment-product__tab[_ngcontent-%COMP%]   .prodselection-container[_ngcontent-%COMP%]   .add-cons-line[_ngcontent-%COMP%]   .add-cons-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:10px;text-align:center!important}.equipment-product__tab[_ngcontent-%COMP%]   .prodselection-container[_ngcontent-%COMP%]   .add-cons-line[_ngcontent-%COMP%]   .add-cons-icon[_ngcontent-%COMP%]{cursor:pointer;padding:.5rem;text-align:center}.equipment-product__tab[_ngcontent-%COMP%]   .prodselection-container[_ngcontent-%COMP%]   .add-cons-line[_ngcontent-%COMP%]:last-child{border-bottom:none!important}@media (max-width: 480px){.equipment-product__tab[_ngcontent-%COMP%]   .add-cons-line[_ngcontent-%COMP%]   .add-cons-data[_ngcontent-%COMP%]{padding:.8rem auto .25rem!important}.equipment-product__tab[_ngcontent-%COMP%]   .add-cons-line[_ngcontent-%COMP%]   .add-cons-icon[_ngcontent-%COMP%]{padding:.5rem!important}}"],changeDetection:0}),n})();var vi=h(1576);function Zi(n,a){if(1&n&&(e.TgZ(0,"div",4)(1,"div",33)(2,"h3"),e._uU(3,"Equipment Code"),e.qZA()(),e.TgZ(4,"div",12)(5,"p",13),e._uU(6),e.qZA()()()),2&n){const t=e.oxw();let o;e.xp6(6),e.hij(" ",null!==(o=null==t.equipmentInfo?null:t.equipmentInfo.code)&&void 0!==o?o:"N/A"," ")}}function xi(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Equipment Name is required"),e.qZA())}function yi(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Description is required"),e.qZA())}function Ti(n,a){if(1&n&&(e.TgZ(0,"mat-option",34),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function wi(n,a){if(1&n&&(e.TgZ(0,"mat-option",34),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function Ai(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Department is required"),e.qZA())}function ki(n,a){if(1&n&&(e.TgZ(0,"mat-option",34),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function Pi(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Center is required"),e.qZA())}function Ni(n,a){if(1&n&&(e.TgZ(0,"mat-option",34),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function Ui(n,a){if(1&n&&(e.TgZ(0,"mat-option",34),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.name," ")}}function Si(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"Update"),e.qZA())}function Di(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"Create"),e.qZA())}function Ii(n,a){1&n&&(e.TgZ(0,"div",35),e._UZ(1,"mat-spinner"),e.qZA())}const Fi=function(){return["/inventory/alltests"]};let ie=(()=>{class n{constructor(t,o,i,r,l,u,_,b,f,q){this.fb=t,this.router=o,this.cdr=i,this.datePipe=r,this.sharedService=l,this.invtService=u,this.snackbar=_,this.snackBbar=b,this.activatedroute=f,this.inventoryService=q,this.spinner=!1,this.eqRandomCode="",this.currentDate=new Date,this.vendors=[],this.brands=[],this.centers=[],this.departments=[],this.statusList=[{value:!0,name:"Active"},{value:!1,name:"Inactive"}],this.equipmentInfo=null,this.id=s.j3}ngOnInit(){this.currentDate=this.datePipe.transform(this.currentDate,"yyyy-MM-dd"),this.buildBasicForm(),this.getBrands(),this.getCenters(),this.getDepartments(),this.getVendors(),this.activatedroute.parent?.params.subscribe(t=>{this.id=t.id,typeof this.id<"u"&&this.getEquiementInfo()})}buildBasicForm(){this.equipmentCreateForm=this.fb.group({eqName:new s.NI(null,[s.kI.required,s.kI.minLength(2)]),eqDescription:new s.NI(null,[s.kI.minLength(5)]),eqVendor:new s.NI(null),eqDepartment:new s.NI(null,[s.kI.required]),eqCenter:new s.NI(null,[s.kI.required]),eqBrand:new s.NI(null),eqStatus:new s.NI(null)})}onBasicSubmit(){if(this.equipmentCreateForm.valid){let t=("0000"+Math.random()).slice(-2),o=("0000"+Math.random()).slice(-2),i=("0000"+Math.random()).slice(-2),r=("0000"+Math.random()).slice(-2),l=("00000"+Math.random()).slice(-1),u=Number(t+o+i+r+l),_=this.equipmentCreateForm.value;if(null==this.equipmentInfo)this.inventoryService.createEquipment({code:u,name:_.eqName,description:_.eqDescription,brand:_.eqBrand,centers:[_.eqCenter],departments:[_.eqDepartment],vendors:[_.eqVendor],is_active:_.eqStatus}).subscribe({next:f=>{this.snackBbar.open(f.message,"close"),this.spinner=!1,"success"==f.status&&(alert(f.status),this.router.navigateByUrl("/inventory/alltests/equipment/"+f.data.id+"/product")),this.cdr.markForCheck()},error:f=>{let q="Something went wrong";400==f.status?q=f?.error?.error:f?.error?.message&&(q=f?.error?.message),this.snackBbar.open(q,"close"),this.spinner=!1,this.cdr.markForCheck()}});else{let b={id:this.equipmentInfo.id,name:_.eqName,description:_.eqDescription,brand:_.eqBrand,centers:[_.eqCenter],departments:[_.eqDepartment],vendors:[_.eqVendor],is_active:_.eqStatus};this.inventoryService.updateEquipment(b.id,b).subscribe({next:f=>{this.snackBbar.open(f.message,"close"),this.spinner=!1,"success"==f.status&&this.router.navigateByUrl("/equipment/"+f.data.id+"/product"),this.cdr.markForCheck()},error:f=>{let q="Something went wrong";400==f.status?q=f?.error?.error:f?.error?.message&&(q=f?.error?.message),this.snackBbar.open(q,"close"),this.spinner=!1,this.cdr.markForCheck()}})}}}getCenters(){this.spinner=!0,this.sharedService.getCenterList().pipe((0,P.U)(t=>t.data.centers)).subscribe(t=>{this.spinner=!1,this.centers=t,this.cdr.detectChanges()})}getDepartments(){this.spinner=!0,this.sharedService.getDepartmentList().pipe((0,P.U)(t=>t.data.departments)).subscribe(t=>{this.spinner=!1,this.departments=t,this.cdr.detectChanges()})}getBrands(){this.spinner=!0,this.brands=[{id:"asdasd-34234-234234",name:"Sample Brand"}]}getVendors(){this.spinner=!0,this.invtService.getVendors().pipe((0,P.U)(t=>t.data)).subscribe(t=>{this.spinner=!1,this.vendors=t,this.cdr.detectChanges()})}getEquiementInfo(){""!==this.id&&(this.spinner=!0,this.invtService.getEquipment(this.id).pipe((0,P.U)(t=>t.data)).subscribe(t=>{this.spinner=!1,this.equipmentCreateForm.patchValue({eqName:t.name,eqDescription:t.description,eqBrand:t.brand,eqVendor:t.vendors[0].id,eqDepartment:t.departments[0].id,eqCenter:t.centers[0].id,eqStatus:t.is_active}),this.equipmentInfo=t,this.currentDate=this.datePipe.transform(t.created_at),this.cdr.detectChanges()}))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(s.qu),e.Y36(m.F0),e.Y36(e.sBO),e.Y36(p.uU),e.Y36(K.F),e.Y36(Z),e.Y36(z.ux),e.Y36(A.c),e.Y36(m.gz),e.Y36(Z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-equipment-basic"]],decls:100,vars:21,consts:[[1,"equipment-create--basic-form"],[3,"formGroup","ngSubmit"],[1,"row"],["class","col-lg-4 col-md-4 col-sm-6",4,"ngIf"],[1,"col-lg-4","col-md-4","col-sm-6"],[1,"col-lg-6","col-sm-6"],[1,"required"],["fxLayout","column",1,"agm-input-form"],["appearance","outline",1,"field-common"],["matInput","","formControlName","eqName"],[4,"ngIf"],[1,"col-lg-4","col-md-4","col-sm-6",2,"text-align","right"],[1,"col-lg-6","col-sm-6",2,"text-align","left"],[1,"primary",2,"margin-top","1.3em"],[1,"col-lg-12"],["appearance","outline",1,"field-common","primary","form-textArea"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","6","cdkAutosizeMaxRows","200","placeholder","Type here","formControlName","eqDescription"],["autosize","cdkTextareaAutosize"],[1,"multi-inputs-field"],[1,"col-lg-4","col-sm-6"],["appearance","outline",1,"dropdown-mat-all"],["placeholder","Select Vendor","formControlName","eqVendor",1,"matInput"],[3,"value",4,"ngFor","ngForOf"],["svgIcon","appDownArrow","matSuffix",""],["placeholder","Select Department","formControlName","eqDepartment",1,"matInput"],[1,"col-lg-4","col-sm-6",2,"text-align","right"],["placeholder","Select Center","formControlName","eqCenter",1,"matInput"],["placeholder","Select Brand","formControlName","eqBrand","matInput",""],["placeholder","Select Status","formControlName","eqStatus",1,"matInput"],[1,"form-action-btn","text-right",2,"text-align","right"],["type","button","mat-button","",1,"button-mat-all-cancel",3,"routerLink"],["type","submit","mat-button","",1,"button-mat-all",3,"disabled"],["class","spinner",4,"ngIf"],[1,"col-lg-5","col-sm-6",2,"padding-left","0px"],[3,"value"],[1,"spinner"]],template:function(t,o){if(1&t&&(e.TgZ(0,"section",0)(1,"form",1),e.NdJ("ngSubmit",function(){return o.onBasicSubmit()}),e.TgZ(2,"div",2),e.YNc(3,Zi,7,1,"div",3),e.TgZ(4,"div",4)(5,"div",2)(6,"div",5)(7,"h3",6),e._uU(8,"Equipment Name"),e.qZA()(),e.TgZ(9,"div",5)(10,"div",7)(11,"mat-form-field",8),e._UZ(12,"input",9),e.YNc(13,xi,2,0,"mat-error",10),e.qZA()()()()(),e.TgZ(14,"div",11)(15,"div",2)(16,"div",5)(17,"h3"),e._uU(18,"Created On"),e.qZA()(),e.TgZ(19,"div",12)(20,"p",13),e._uU(21),e.ALo(22,"date"),e.qZA()()()()(),e.TgZ(23,"div",2)(24,"div",14)(25,"h3"),e._uU(26,"Description"),e.qZA(),e.TgZ(27,"div",7)(28,"mat-form-field",15),e._UZ(29,"textarea",16,17),e.YNc(31,yi,2,0,"mat-error",10),e.qZA()()()(),e.TgZ(32,"div",18)(33,"div",2)(34,"div",4)(35,"div",2)(36,"div",19)(37,"h3"),e._uU(38,"Vendor"),e.qZA()(),e.TgZ(39,"div",5)(40,"div",7)(41,"mat-form-field",20)(42,"mat-select",21),e.YNc(43,Ti,2,2,"mat-option",22),e.qZA(),e._UZ(44,"mat-icon",23),e.qZA()()()()(),e.TgZ(45,"div",4)(46,"div",2)(47,"div",19)(48,"h3",6),e._uU(49,"Department"),e.qZA()(),e.TgZ(50,"div",5)(51,"div",7)(52,"mat-form-field",20)(53,"mat-select",24),e.YNc(54,wi,2,2,"mat-option",22),e.qZA(),e._UZ(55,"mat-icon",23),e.YNc(56,Ai,2,0,"mat-error",10),e.qZA()()()()(),e.TgZ(57,"div",4)(58,"div",2)(59,"div",25)(60,"h3",6),e._uU(61,"Center"),e.qZA()(),e.TgZ(62,"div",5)(63,"div",7)(64,"mat-form-field",20)(65,"mat-select",26),e.YNc(66,ki,2,2,"mat-option",22),e.qZA(),e._UZ(67,"mat-icon",23),e.YNc(68,Pi,2,0,"mat-error",10),e.qZA()()()()()(),e.TgZ(69,"div",2)(70,"div",4)(71,"div",2)(72,"div",19)(73,"h3"),e._uU(74,"Brand"),e.qZA()(),e.TgZ(75,"div",5)(76,"div",7)(77,"mat-form-field",20)(78,"mat-select",27),e.YNc(79,Ni,2,2,"mat-option",22),e.qZA(),e._UZ(80,"mat-icon",23),e.qZA()()()()(),e.TgZ(81,"div",4)(82,"div",2)(83,"div",19)(84,"h3",6),e._uU(85,"Status"),e.qZA()(),e.TgZ(86,"div",5)(87,"div",7)(88,"mat-form-field",20)(89,"mat-select",28),e.YNc(90,Ui,2,2,"mat-option",22),e.qZA(),e._UZ(91,"mat-icon",23),e.qZA()()()()()()(),e.TgZ(92,"div",2)(93,"div",29)(94,"button",30),e._uU(95," Cancel "),e.qZA(),e.TgZ(96,"button",31),e.YNc(97,Si,2,0,"span",10),e.YNc(98,Di,2,0,"span",10),e.qZA()()()()(),e.YNc(99,Ii,2,0,"div",32)),2&t){let i,r,l,u;e.xp6(1),e.Q6J("formGroup",o.equipmentCreateForm),e.xp6(2),e.Q6J("ngIf",o.id),e.xp6(10),e.Q6J("ngIf",null==(i=o.equipmentCreateForm.get("eqName"))||null==i.errors?null:i.errors.required),e.xp6(8),e.hij(" ",e.xi3(22,17,o.currentDate,"dd/MM/YYYY hh:mm a")," "),e.xp6(10),e.Q6J("ngIf",null==(r=o.equipmentCreateForm.get("eqDescription"))||null==r.errors?null:r.errors.required),e.xp6(12),e.Q6J("ngForOf",o.vendors),e.xp6(11),e.Q6J("ngForOf",o.departments),e.xp6(2),e.Q6J("ngIf",null==(l=o.equipmentCreateForm.get("eqDepartment"))||null==l.errors?null:l.errors.required),e.xp6(10),e.Q6J("ngForOf",o.centers),e.xp6(2),e.Q6J("ngIf",null==(u=o.equipmentCreateForm.get("eqCenter"))||null==u.errors?null:u.errors.required),e.xp6(11),e.Q6J("ngForOf",o.brands),e.xp6(11),e.Q6J("ngForOf",o.statusList),e.xp6(4),e.Q6J("routerLink",e.DdM(20,Fi)),e.xp6(2),e.Q6J("disabled",!o.equipmentCreateForm.valid),e.xp6(1),e.Q6J("ngIf",o.equipmentInfo),e.xp6(1),e.Q6J("ngIf",!o.equipmentInfo),e.xp6(1),e.Q6J("ngIf",o.spinner)}},dependencies:[p.sg,p.O5,v.Hw,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,D.ey,O.IC,g.TO,g.KE,g.R9,k.Nt,J.gD,vi.xw,x.lW,w.Ou,m.rH,p.uU],styles:[".field-common[_ngcontent-%COMP%]{width:100%}label[_ngcontent-%COMP%]{padding-top:10px;display:block}label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:15px;display:inline-block}.mat-input-element[_ngcontent-%COMP%]{color:#043752}.agm-input-form[_ngcontent-%COMP%]{margin-left:0!important}form[_ngcontent-%COMP%]{margin-top:2rem;margin-bottom:2rem}form[_ngcontent-%COMP%]   .form-action-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:15px}.equipment-create--basic-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:1em}.equipment-create--basic-form[_ngcontent-%COMP%]   .multi-inputs-field[_ngcontent-%COMP%]{margin-top:3em}  app-equipment-basic .equipment-create--basic-form .mat-form-field-appearance-outline .mat-form-field-outline{background-color:#e6ebee;border-radius:5px;color:transparent}"],changeDetection:0}),n})();function Yi(n,a){1&n&&(e.TgZ(0,"div",42)(1,"div",43)(2,"div",44)(3,"p",45),e._uU(4,"Consumption ID"),e.qZA(),e.TgZ(5,"p",46),e._uU(6,"1236458"),e.qZA()(),e.TgZ(7,"div",44)(8,"p",45),e._uU(9,"Center"),e.qZA(),e.TgZ(10,"p",46),e._uU(11,"Agam"),e.qZA()()(),e.TgZ(12,"div",43)(13,"div",44)(14,"p",45),e._uU(15,"Date"),e.qZA(),e.TgZ(16,"p",46),e._uU(17,"15-07-2022 12:00"),e.qZA()(),e.TgZ(18,"div",44)(19,"p",45),e._uU(20,"Created by"),e.qZA(),e.TgZ(21,"p",46),e._uU(22,"Admin"),e.qZA()()()())}function Ri(n,a){if(1&n&&(e.TgZ(0,"mat-option",47),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",null==t?null:t.name," ")}}function Qi(n,a){1&n&&(e.TgZ(0,"mat-option",48),e._uU(1,"No Records Found"),e.qZA())}function Ji(n,a){if(1&n&&(e.TgZ(0,"mat-option",47),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function Oi(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"section",49)(1,"h3",23),e._uU(2,"Center"),e.qZA(),e.TgZ(3,"mat-form-field",50)(4,"mat-select",51),e.NdJ("selectionChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.centerSelect(i))}),e.YNc(5,Ji,2,2,"mat-option",12),e.qZA(),e._UZ(6,"mat-icon",52),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(5),e.Q6J("ngForOf",t.centerDetails)}}function Mi(n,a){1&n&&(e.TgZ(0,"th",68),e._uU(1,"Product Code"),e.qZA())}function Bi(n,a){if(1&n&&(e.TgZ(0,"td",69),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.code," ")}}function Li(n,a){1&n&&(e.TgZ(0,"th",68),e._uU(1,"Product Name"),e.qZA())}function Ei(n,a){if(1&n&&(e.TgZ(0,"td",69),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(t.name)}}function Vi(n,a){1&n&&(e.TgZ(0,"th",70),e._uU(1,"Vendor"),e.qZA())}function $i(n,a){if(1&n&&(e.TgZ(0,"mat-option",47),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.key)}}function ji(n,a){if(1&n&&(e.TgZ(0,"td",71)(1,"mat-form-field",50)(2,"mat-select",72),e.YNc(3,$i,2,2,"mat-option",12),e.qZA(),e._UZ(4,"mat-icon",52),e.qZA()()),2&n){const t=a.$implicit;e.xp6(3),e.Q6J("ngForOf",t.vendors)}}function zi(n,a){1&n&&(e.TgZ(0,"th",68),e._uU(1,"Price"),e.qZA())}function Hi(n,a){if(1&n&&(e.TgZ(0,"td",69),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.price)," ")}}function Gi(n,a){1&n&&(e.TgZ(0,"th",68),e._uU(1,"Batch No"),e.qZA())}function Ki(n,a){if(1&n&&(e.TgZ(0,"td",69),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(t.batch_no)}}function Wi(n,a){1&n&&(e.TgZ(0,"th",70),e._uU(1," Request Quantity "),e.qZA())}function Xi(n,a){if(1&n&&(e.TgZ(0,"td",69)(1,"mat-form-field",73),e._UZ(2,"input",74),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.Q6J("value",t.consumed_qty)}}function er(n,a){1&n&&(e.TgZ(0,"th",68),e._uU(1,"Action"),e.qZA())}function tr(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"td",69)(1,"mat-icon",75),e.NdJ("click",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onRemoveProduct(i))}),e._uU(2,"delete"),e.qZA()()}}function nr(n,a){1&n&&e._UZ(0,"tr",76)}function or(n,a){1&n&&e._UZ(0,"tr",77)}function ar(n,a){if(1&n&&(e.TgZ(0,"div",53)(1,"table",54),e.ynx(2,55),e.YNc(3,Mi,2,0,"th",56),e.YNc(4,Bi,2,1,"td",57),e.BQk(),e.ynx(5,58),e.YNc(6,Li,2,0,"th",56),e.YNc(7,Ei,2,1,"td",57),e.BQk(),e.ynx(8,59),e.YNc(9,Vi,2,0,"th",60),e.YNc(10,ji,5,1,"td",61),e.BQk(),e.ynx(11,62),e.YNc(12,zi,2,0,"th",56),e.YNc(13,Hi,3,3,"td",57),e.BQk(),e.ynx(14,63),e.YNc(15,Gi,2,0,"th",56),e.YNc(16,Ki,2,1,"td",57),e.BQk(),e.ynx(17,64),e.YNc(18,Wi,2,0,"th",60),e.YNc(19,Xi,3,1,"td",57),e.BQk(),e.ynx(20,65),e.YNc(21,er,2,0,"th",56),e.YNc(22,tr,3,0,"td",57),e.BQk(),e.YNc(23,nr,1,0,"tr",66),e.YNc(24,or,1,0,"tr",67),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("dataSource",t.dataSource),e.xp6(22),e.Q6J("matHeaderRowDef",t.displayedColumnsCreate),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumnsCreate)}}function ir(n,a){1&n&&(e.TgZ(0,"th",68),e._uU(1,"Product Code"),e.qZA())}function rr(n,a){if(1&n&&(e.TgZ(0,"td",69),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.code," ")}}function sr(n,a){1&n&&(e.TgZ(0,"th",68),e._uU(1,"Product Name"),e.qZA())}function cr(n,a){if(1&n&&(e.TgZ(0,"td",69),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(t.name)}}function lr(n,a){1&n&&(e.TgZ(0,"th",70),e._uU(1,"Vendor"),e.qZA())}function pr(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-select",79),e.NdJ("selectionChange",function(){const r=e.CHM(t).$implicit,l=e.oxw().$implicit;return e.KtG(l.vendor=r.id)}),e.TgZ(1,"mat-option",47),e._uU(2),e.qZA()()}if(2&n){const t=a.$implicit;e.xp6(1),e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function dr(n,a){if(1&n&&(e.TgZ(0,"td",71)(1,"mat-form-field",50),e.YNc(2,pr,3,2,"mat-select",78),e._UZ(3,"mat-icon",52),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.vendorsDetails)}}function ur(n,a){1&n&&(e.TgZ(0,"th",68),e._uU(1,"Price"),e.qZA())}function mr(n,a){if(1&n&&(e.TgZ(0,"td",69),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.price)," ")}}function hr(n,a){1&n&&(e.TgZ(0,"th",68),e._uU(1,"Batch No"),e.qZA())}function _r(n,a){if(1&n&&(e.TgZ(0,"td",69),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(t.batch_no)}}function fr(n,a){1&n&&(e.TgZ(0,"th",70),e._uU(1," Request Qty "),e.qZA())}function gr(n,a){if(1&n&&(e.TgZ(0,"td",69)(1,"mat-form-field",73),e._UZ(2,"input",74),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.Q6J("value",t.consumed_qty)}}function br(n,a){1&n&&(e.TgZ(0,"th",68),e._uU(1,"Action"),e.qZA())}function Cr(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"td",69)(1,"mat-icon",75),e.NdJ("click",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onRemoveProduct(i))}),e._uU(2,"delete"),e.qZA()()}}function qr(n,a){1&n&&e._UZ(0,"tr",76)}function vr(n,a){1&n&&e._UZ(0,"tr",77)}function Zr(n,a){if(1&n&&(e.TgZ(0,"div",53)(1,"table",54),e.ynx(2,55),e.YNc(3,ir,2,0,"th",56),e.YNc(4,rr,2,1,"td",57),e.BQk(),e.ynx(5,58),e.YNc(6,sr,2,0,"th",56),e.YNc(7,cr,2,1,"td",57),e.BQk(),e.ynx(8,59),e.YNc(9,lr,2,0,"th",60),e.YNc(10,dr,4,1,"td",61),e.BQk(),e.ynx(11,62),e.YNc(12,ur,2,0,"th",56),e.YNc(13,mr,3,3,"td",57),e.BQk(),e.ynx(14,63),e.YNc(15,hr,2,0,"th",56),e.YNc(16,_r,2,1,"td",57),e.BQk(),e.ynx(17,64),e.YNc(18,fr,2,0,"th",60),e.YNc(19,gr,3,1,"td",57),e.BQk(),e.ynx(20,65),e.YNc(21,br,2,0,"th",56),e.YNc(22,Cr,3,0,"td",57),e.BQk(),e.YNc(23,qr,1,0,"tr",66),e.YNc(24,vr,1,0,"tr",67),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("dataSource",t.dataSource),e.xp6(22),e.Q6J("matHeaderRowDef",t.displayedColumnsEdit),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumnsEdit)}}function xr(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",80)(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"mat-icon",81),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.delete(r.name))}),e.qZA()()}if(2&n){const t=a.$implicit;e.xp6(2),e.Oqu(t.name)}}function yr(n,a){1&n&&(e.TgZ(0,"div",80),e._uU(1," Choose a file "),e.qZA())}function Tr(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",82),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onSubmit())}),e._uU(1," Submit "),e.qZA()}}function wr(n,a){1&n&&(e.TgZ(0,"button",83),e._uU(1," Update "),e.qZA())}function Ar(n,a){1&n&&(e.TgZ(0,"div",84),e._UZ(1,"mat-spinner"),e.qZA())}let ye=(()=>{class n{constructor(t,o,i,r,l,u,_){this.cdr=t,this.activeRoute=o,this.route=i,this.inventoryService=r,this.dialog=l,this.snackbar=u,this.snackBbar=_,this.data=[],this.displayedColumnsCreate=["product_code","product_Name","vendor","price","batch_no","consumed_qty","action"],this.displayedColumnsEdit=["product_code","product_Name","vendor","price","batch_no","consumed_qty","action"],this.searchInput=new s.NI(""),this.searchProductUseAutoComplete=new Q.d,this.dataSource=new c.by(this.data),this.attachmentFiles=[],this.unsubscribe$=new S.x,this.reqData=[],this.createCenter=!0,this.spinner=!1,this.remark=new s.NI(""),this.clientsPagination=new y.p({page:1,perPage:5,total:this.tableLength}),this.productSearchAutocompleteSetup()}ngOnInit(){this.id=this.activeRoute.snapshot.params?.id,this.id&&(this.createCenter=!1),this.getIntiData()}updateSelectContainer(){this.selectanelContainer=".patient-autocomplete"}inventoryDisplayWithFn(t){return t?.name??""}onPatientSelection(t){let o={id:t.option.value.id,code:t.option.value.code,name:t.option.value.name,product:t.option.value.id,price:null!=t.option.value.price?t.option.value.price:0,consumed_qty:0,batch_no:null!=t.option.value.batch_no?t.option.value.batch_no:"N/A"};0==this.data.filter(r=>r.id==o.id).length&&(this.data.push(o),this.dataSource.data=this.data),this.cdr.markForCheck()}loadMoreProducts(){this.searchProductUseAutoComplete.loadMoreData(()=>{},()=>{})}getPageEvent(t){}receivedFileName(t){this.attachmentFiles.push(t),this.attachmentFiles=[...new Set(this.attachmentFiles)]}delete(t){this.removeIndex=this.attachmentFiles.findIndex(o=>{if(o.name==t)return o}),this.attachmentFiles.splice(this.removeIndex,1),this.cdr.markForCheck()}onRemoveProduct(t){this.confirmConsDialog=this.dialog.open(F.$,{width:"40%",height:"auto",disableClose:!1,data:{message:"Are you sure want to Delete?",buttonText:{ok:"Delete",cancel:"Cancel"}}}),this.confirmConsDialog.afterClosed().subscribe(o=>{1==o&&(this.data.splice(t,1),this.dataSource.data=this.data,this.cdr.markForCheck())})}cancel(){this.route.navigateByUrl("inventory/centerconsumption")}getIntiData(){this.spinner=!0,this.cdr.markForCheck(),(0,ee.D)([this.inventoryService.getCenter(),this.inventoryService.getVendors()]).subscribe(([t,o])=>{this.centerDetails=t.data.centers,this.vendorsDetails=o.data,this.spinner=!1,this.cdr.markForCheck()})}centerSelect(t){this.centers=t.value}productSearchAutocompleteSetup(){let t=this.searchInput?.valueChanges;this.spinner=!0,this.cdr.markForCheck(),t&&(this.searchProductUseAutoComplete.loadDependency(this.cdr,this.unsubscribe$,t),this.searchProductUseAutoComplete.pagination.perPage=6,this.searchProductUseAutoComplete.apiEndpointMethod=()=>this.inventoryService.searchProduct(this.searchProductUseAutoComplete.searchStr,this.searchProductUseAutoComplete.pagination).pipe((0,P.U)(o=>o.data)),this.searchProductUseAutoComplete.listenForAutoCompleteSearchFormControl(this.searchInput,()=>{},o=>{}),this.searchProductUseAutoComplete.loadData(()=>{},()=>{}))}onSubmit(){let t=!1,o=!1,i="",r="",l="";this.dataSource.data.forEach(U=>{null!=U.vendor?(t=!0,i=" "):(i="please select vendor",t=!1),null!=U.quantity?(U.quantity=Number(U.quantity),o=!0,r=""):(U.quantity=0,r=" please Enter the Consumed Qty",o=!1)});let u=("0000"+Math.random()).slice(-2),_=("0000"+Math.random()).slice(-2),b=("0000"+Math.random()).slice(-2),f=("0000"+Math.random()).slice(-2),q=("00000"+Math.random()).slice(-1);Number(u+_+b+f+q),o&&t&&null!=this.centers?this.inventoryService.createCenterProdReq(this.centers,{comments:this.remark.value,product_details:this.dataSource.data,attachments:[]}).subscribe(H=>{this.route.navigateByUrl("inventory/centerconsumption"),this.snackbar.open(H.message)},H=>{this.snackBbar.open(H.error.error,"")}):(l=null==this.centers?" please select center":"",this.snackbar.open(i+r+l))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(m.gz),e.Y36(m.F0),e.Y36(Z),e.Y36(C.uw),e.Y36(z.ux),e.Y36(A.c))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-center-consump-create"]],decls:48,vars:28,consts:[[1,"center-consumption"],[1,"title","primary"],[1,"center-consumption_header"],["class","row heading",4,"ngIf"],[1,"row","searchSection"],[1,"center-consumption_header--input","col-lg-7"],[1,"center-consumption_header--input_form"],["appearance","outline",1,"agm-search_box"],["matInput","","placeholder","Search by Product Name",3,"formControl","matAutocomplete"],["autoActiveFirstOption","",1,"autocomplete-scroll",3,"displayWith","opened","optionSelected"],["auto","matAutocomplete"],["infiniteScroll","",1,"patient-autocomplete",3,"infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","fromRoot","immediateCheck","alwaysCallback","infiniteScrollContainer","scrolled"],[3,"value",4,"ngFor","ngForOf"],["disabled","true",4,"ngIf"],["matSuffix","","svgIcon","appSearch"],["matSuffix","",3,"vertical"],["class","center-consumption_center col-lg-4",4,"ngIf"],[1,"center-consumption_table"],["class","agm-table--container",4,"ngIf"],[3,"length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page"],["paginator",""],[1,"center-consumption_textarea"],[1,"center-consumption_textarea--heading"],[1,"title"],[1,"center-consumption_textarea--tag"],["appearance","outline",1,"primary","form-textArea"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","4","cdkAutosizeMaxRows","200","placeholder","Type here"],["autosize","cdkTextareaAutosize"],[1,"center-consumption_attachment"],[1,"attachment"],[1,"attach-tag",3,"icon","fileName"],[1,"attachemnt-label"],[1,"primary"],["class","file-attachment",4,"ngFor","ngForOf"],["class","file-attachment",4,"ngIf"],[1,"center-consumption_footer"],[1,"row"],[1,"col-lg-offset-8","col-lg-4","col-sm-offset-6","col-sm-6","action-btn","col"],["mat-button","",1,"button-mat-all-cancel",3,"click"],["mat-button","","class","button-mat-all",3,"click",4,"ngIf"],["mat-button","","class","button-mat-all",4,"ngIf"],["class","spinner",4,"ngIf"],[1,"row","heading"],[1,"col-lg-6","col-md-12","consumption"],[1,"consumption-detail"],[1,"title","label-name"],[1,"primary","label-value"],[3,"value"],["disabled","true"],[1,"center-consumption_center","col-lg-4"],["appearance","outline",1,"field-common","table-input"],["placeholder","Center",3,"selectionChange"],["matSuffix","","svgIcon","appDownArrow"],[1,"agm-table--container"],["mat-table","",1,"agm-table",3,"dataSource"],["matColumnDef","product_code"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","product_Name"],["matColumnDef","vendor"],["class","vendorField","mat-header-cell","",4,"matHeaderCellDef"],["class","vendor","mat-cell","",4,"matCellDef"],["matColumnDef","price"],["matColumnDef","batch_no"],["matColumnDef","consumed_qty"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"vendorField"],["mat-cell","",1,"vendor"],["placeholder","Vendor"],["floatLabel","never","appearance","outline","tableInput","true",1,"agm-input-lg","discount-input"],["matInput","",3,"value"],["svgIcon","appDelete",1,"product-delete",3,"click"],["mat-header-row",""],["mat-row",""],["placeholder","Vendor",3,"selectionChange",4,"ngFor","ngForOf"],["placeholder","Vendor",3,"selectionChange"],[1,"file-attachment"],["svgIcon","appAttachmentDelete",1,"delete-icon",3,"click"],["mat-button","",1,"button-mat-all",3,"click"],["mat-button","",1,"button-mat-all"],[1,"spinner"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div")(2,"h3",1),e._uU(3,"Inventory Center Consumption"),e.qZA()(),e.TgZ(4,"section",2),e.YNc(5,Yi,23,0,"div",3),e.TgZ(6,"div",4)(7,"div",5)(8,"form",6)(9,"mat-form-field",7),e._UZ(10,"input",8),e.TgZ(11,"mat-autocomplete",9,10),e.NdJ("opened",function(){return o.updateSelectContainer()})("optionSelected",function(r){return o.onPatientSelection(r)}),e.TgZ(13,"div",11),e.NdJ("scrolled",function(){return o.loadMoreProducts()}),e.YNc(14,Ri,2,2,"mat-option",12),e.YNc(15,Qi,2,0,"mat-option",13),e.qZA()(),e._UZ(16,"mat-icon",14)(17,"mat-divider",15),e.qZA()()(),e.YNc(18,Oi,7,1,"section",16),e.qZA()(),e.TgZ(19,"section",17),e.YNc(20,ar,25,3,"div",18),e.YNc(21,Zr,25,3,"div",18),e.TgZ(22,"mat-paginator",19,20),e.NdJ("page",function(r){return o.getPageEvent(r)}),e.qZA()(),e.TgZ(24,"section",21)(25,"div",22)(26,"p",23),e._uU(27,"Remark"),e.qZA()(),e.TgZ(28,"div",24)(29,"mat-form-field",25),e._UZ(30,"textarea",26,27),e.qZA()()(),e.TgZ(32,"section",28)(33,"div",29)(34,"app-agm-add-attachment",30),e.NdJ("fileName",function(r){return o.receivedFileName(r)}),e.qZA(),e.TgZ(35,"div",31)(36,"p",32),e._uU(37,"Attachments"),e.qZA(),e.YNc(38,xr,4,1,"div",33),e.YNc(39,yr,2,0,"div",34),e.qZA()(),e.TgZ(40,"footer",35)(41,"div",36)(42,"div",37)(43,"a",38),e.NdJ("click",function(){return o.cancel()}),e._uU(44," Cancel "),e.qZA(),e.YNc(45,Tr,2,0,"button",39),e.YNc(46,wr,2,0,"button",40),e.qZA()()()()(),e.YNc(47,Ar,2,0,"div",41)),2&t){const i=e.MAs(12);e.xp6(5),e.Q6J("ngIf",!o.createCenter),e.xp6(5),e.Q6J("formControl",o.searchInput)("matAutocomplete",i),e.xp6(1),e.Q6J("displayWith",o.inventoryDisplayWithFn),e.xp6(2),e.Q6J("infiniteScrollDistance",1)("infiniteScrollThrottle",0)("scrollWindow",!1)("fromRoot",!0)("immediateCheck",!1)("alwaysCallback",!1)("infiniteScrollContainer",o.selectanelContainer),e.xp6(1),e.Q6J("ngForOf",o.searchProductUseAutoComplete.data),e.xp6(1),e.Q6J("ngIf",!o.searchProductUseAutoComplete.data||!!o.searchProductUseAutoComplete.data&&0===o.searchProductUseAutoComplete.data.length),e.xp6(2),e.Q6J("vertical",!0),e.xp6(1),e.Q6J("ngIf",o.createCenter),e.xp6(2),e.Q6J("ngIf",o.createCenter),e.xp6(1),e.Q6J("ngIf",!o.createCenter),e.xp6(1),e.Q6J("length",o.tableLength||0)("pageIndex",(o.clientsPagination.page||1)-1)("pageSize",o.clientsPagination.perPage)("pageSizeOptions",o.clientsPagination.paginationSizes)("showFirstLastButtons",!0),e.xp6(12),e.Q6J("icon","appVendorFile"),e.xp6(4),e.Q6J("ngForOf",o.attachmentFiles),e.xp6(1),e.Q6J("ngIf",!o.attachmentFiles.length),e.xp6(6),e.Q6J("ngIf",o.createCenter),e.xp6(1),e.Q6J("ngIf",!o.createCenter),e.xp6(1),e.Q6J("ngIf",o.spinner)}},dependencies:[p.sg,p.O5,R.R,v.Hw,s._Y,s.Fj,s.JJ,s.JL,s.F,s.oH,N.XC,N.ZL,D.ey,O.IC,g.KE,g.R9,k.Nt,Y.d,J.gD,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,x.lW,x.zs,w.Ou,T.NW,E.O,W.Q],styles:["app-center-consumption .center-consumption{padding:2.6em}  app-center-consumption .center-consumption .mat-form-field-appearance-outline .mat-form-field-outline{background-color:#e6ebee;border-radius:5px}  app-center-consumption .center-consumption .searchSection{margin-top:4em}  app-center-consumption .center-consumption_center{display:flex;justify-content:flex-end}  app-center-consumption .center-consumption_center h3{display:flex;align-items:center}  app-center-consumption .center-consumption_center .mat-form-field{margin-left:1rem}  app-center-consumption .center-consumption_center .mat-select-arrow-wrapper{display:none}  app-center-consumption .center-consumption_center .mat-icon{-webkit-transform:scale(.5);transform:scale(.5)}  app-center-consumption .center-consumption_header .heading{margin-top:3rem}  app-center-consumption .center-consumption_header .consumption{display:flex;justify-content:space-evenly}  app-center-consumption .center-consumption_header .consumption .consumption-detail{display:flex}  app-center-consumption .center-consumption_header .consumption .consumption-detail .label-name{margin-right:1rem;font-size:1.25rem}  app-center-consumption .center-consumption_header .consumption .consumption-detail .label-value{margin-top:.1rem}  app-center-consumption .center-consumption_textarea{margin-top:2rem}  app-center-consumption .center-consumption_table .agm-table--container .mat-select-arrow-wrapper{display:none}  app-center-consumption .center-consumption_table .agm-table--container .mat-icon{-webkit-transform:scale(.5);transform:scale(.5)}  app-center-consumption .center-consumption_table .agm-table--container .mat-form-field{text-align:center}  app-center-consumption .center-consumption_table .agm-table--container .table-input{width:70%}  app-center-consumption .center-consumption_table .agm-table--container .product-delete{-webkit-transform:scale(1);transform:scale(1)}  app-center-consumption .center-consumption_table .vendorField{width:5%!important}  app-center-consumption .center-consumption_textarea .form-textArea{width:100%}  app-center-consumption .center-consumption_textarea .mat-form-field-appearance-outline .mat-form-field-outline{top:0em}  app-center-consumption .center-consumption_attachment .attachment{display:flex;margin:2rem 1rem}  app-center-consumption .center-consumption_attachment .attachment .mat-icon{-webkit-transform:scale(2.3);transform:scale(2.3)}  app-center-consumption .center-consumption_attachment .attachment .attachemnt-label{padding-top:.3rem;padding-left:1rem}  app-center-consumption .center-consumption_attachment .attachment .attachemnt-label p{margin:0}  app-center-consumption .center-consumption_attachment .attachment .file-attachment{display:flex}  app-center-consumption .center-consumption_attachment .attachment .file-attachment .delete-icon{margin-left:.5rem;-webkit-transform:scale(1);transform:scale(1);cursor:pointer}  app-center-consumption .center-consumption_footer .action-btn{display:flex;justify-content:space-between}  app-center-consumption .center-consumption_footer .action-btn .mat-button{width:45%;padding:.5em 0!important}  app-center-consumption .patient-autocomplete{height:50%}@media (min-width: 1025px){  app-center-consumption .center-consumption__header{flex-direction:row}}@media only screen and (min-width: 769px) and (max-width: 1024px){  app-center-consumption .center-consumption_header .consumption{display:flex;justify-content:space-between}  app-center-consumption .center-consumption_header .consumption .consumption-detail{display:flex}  app-center-consumption .center-consumption_header .center-consumption_center{justify-content:flex-start}  app-center-consumption .center-consumption_attachment{margin-bottom:2rem}}@media only screen and (min-width: 481px) and (max-width: 768px){  app-center-consumption .center-consumption_header{margin-top:2rem}  app-center-consumption .center-consumption_header .consumption{display:flex;justify-content:space-between}  app-center-consumption .center-consumption_header .consumption .consumption-detail{display:flex}  app-center-consumption .center-consumption_header--input{margin-top:3rem;width:80%}  app-center-consumption .center-consumption_attachment{margin-bottom:2rem}}  .autocomplete-scroll .patient-autocomplete{max-height:14.375rem!important;overflow-y:auto}"],changeDetection:0}),n})();function kr(n,a){if(1&n&&(e.TgZ(0,"mat-option",53),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",null==t?null:t.name," ")}}function Pr(n,a){1&n&&(e.TgZ(0,"th",54),e._uU(1,"Product Code"),e.qZA())}function Nr(n,a){if(1&n&&(e.TgZ(0,"td",55),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.code," ")}}function Ur(n,a){1&n&&(e.TgZ(0,"th",54),e._uU(1,"Product Name"),e.qZA())}function Sr(n,a){if(1&n&&(e.TgZ(0,"td",55),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(t.name)}}function Dr(n,a){1&n&&(e.TgZ(0,"th",56),e._uU(1,"Vendor"),e.qZA())}function Ir(n,a){if(1&n&&(e.TgZ(0,"mat-option",53),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.key)}}function Fr(n,a){if(1&n&&(e.TgZ(0,"td",57)(1,"mat-form-field",58)(2,"mat-select",59),e.YNc(3,Ir,2,2,"mat-option",15),e.qZA(),e._UZ(4,"mat-icon",60),e.qZA()()),2&n){const t=a.$implicit;e.xp6(3),e.Q6J("ngForOf",t.vendors)}}function Yr(n,a){1&n&&(e.TgZ(0,"th",54),e._uU(1,"Price"),e.qZA())}function Rr(n,a){if(1&n&&(e.TgZ(0,"td",55),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.price)," ")}}function Qr(n,a){1&n&&(e.TgZ(0,"th",54),e._uU(1,"Batch No"),e.qZA())}function Jr(n,a){if(1&n&&(e.TgZ(0,"td",55),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(t.batch_no)}}function Or(n,a){1&n&&(e.TgZ(0,"th",56),e._uU(1," Consumed Qty "),e.qZA())}function Mr(n,a){if(1&n&&(e.TgZ(0,"td",55)(1,"mat-form-field",61),e._UZ(2,"input",62),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.Q6J("value",t.consumed_qty)}}function Br(n,a){1&n&&e._UZ(0,"tr",63)}function Lr(n,a){1&n&&e._UZ(0,"tr",64)}function Er(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",65)(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"mat-icon",66),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.delete(r.name))}),e.qZA()()}if(2&n){const t=a.$implicit;e.xp6(2),e.Oqu(t.name)}}function Vr(n,a){1&n&&(e.TgZ(0,"div",65),e._uU(1," Choose a file "),e.qZA())}let $r=(()=>{class n{constructor(t,o){this.cdr=t,this.route=o,this.data=[{code:"Eq001-P001",name:"Reagents 100 ml",vendors:[{key:"Sun"},{key:"Mon"}],price:"50 ",batch_no:"100",consumed_qty:"100 "}],this.consumption_info={code:"1002A",created_at:"2023-08-12 10:15:35",consumed_by:"Agam Diagnostics Chennai",created_by:"Admin"},this.displayedColumns=["product_code","product_Name","vendor","price","batch_no","consumed_qty"],this.searchInput=new s.NI(""),this.searchProductNameUseAutoComplete=new Q.d,this.dataSource=new c.by(this.data),this.attachmentFiles=[],this.clientsPagination=new y.p({page:1,perPage:5,total:this.tableLength})}ngOnInit(){}updateSelectContainer(){this.selectanelContainer=".patient-autocomplete"}inventoryDisplayWithFn(t){return t?.name??""}onPatientSelection(t){}loadMoreProducts(){this.searchProductNameUseAutoComplete.loadMoreData(()=>{},()=>{})}getPageEvent(t){}receivedFileName(t){this.attachmentFiles.push(t),this.attachmentFiles=[...new Set(this.attachmentFiles)]}delete(t){this.removeIndex=this.attachmentFiles.findIndex(o=>{if(o.name==t)return o}),this.attachmentFiles.splice(this.removeIndex,1),this.cdr.markForCheck()}deny(){this.route.navigateByUrl("inventory/centerconsumption")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(m.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-center-consump-acknowledge"]],decls:87,vars:30,consts:[[1,"center-consumption"],[1,"title","primary"],[1,"center-consumption_header"],[1,"row"],[1,"col-lg-6","col-md-12","consumption"],[1,"consumption-detail"],[1,"title","label-name"],[1,"primary","label-value"],[1,"center-consumption_header--input","hidden"],[1,"center-consumption_header--input_form"],["appearance","outline",1,"agm-search_box"],["matInput","","placeholder","Search by Product Name",3,"formControl","matAutocomplete"],["autoActiveFirstOption","",1,"autocomplete-scroll",3,"displayWith","opened","optionSelected"],["auto","matAutocomplete"],["infiniteScroll","",1,"patient-autocomplete",3,"infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","fromRoot","immediateCheck","alwaysCallback","infiniteScrollContainer","scrolled"],[3,"value",4,"ngFor","ngForOf"],["matSuffix","","svgIcon","appSearch"],["matSuffix","",3,"vertical"],[1,"center-consumption_table"],[1,"agm-table--container"],["mat-table","",1,"agm-table",3,"dataSource"],["matColumnDef","product_code"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","product_Name"],["matColumnDef","vendor"],["class","vendorField","mat-header-cell","",4,"matHeaderCellDef"],["class","vendor","mat-cell","",4,"matCellDef"],["matColumnDef","price"],["matColumnDef","batch_no"],["matColumnDef","consumed_qty"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page"],["paginator",""],[1,"center-consumption_textarea"],[1,"center-consumption_textarea--heading"],[1,"title"],[1,"center-consumption_textarea--tag"],["appearance","outline",1,"primary","form-textArea"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","4","cdkAutosizeMaxRows","200","placeholder","Type here"],["autosize","cdkTextareaAutosize"],[1,"center-consumption_attachment"],[1,"attachment"],[1,"attach-tag",3,"icon","fileName"],[1,"attachemnt-label"],[1,"primary"],["class","file-attachment",4,"ngFor","ngForOf"],["class","file-attachment",4,"ngIf"],[1,"center-consumption_footer"],[1,"col-lg-offset-8","col-lg-4","col-sm-offset-6","col-sm-6","action-btn","col"],["mat-button","",1,"button-mat-all-cancel",3,"click"],["mat-button","",1,"button-mat-all"],[3,"value"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"vendorField"],["mat-cell","",1,"vendor"],["appearance","outline",1,"field-common","table-input"],["placeholder","Vendor"],["matSuffix","","svgIcon","appDownArrow"],["floatLabel","never","appearance","outline","tableInput","true",1,"agm-input-lg","discount-input"],["matInput","",3,"value"],["mat-header-row",""],["mat-row",""],[1,"file-attachment"],["svgIcon","appAttachmentDelete",1,"delete-icon",3,"click"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div")(2,"p",1),e._uU(3,"Inventory Center Consumption"),e.qZA()(),e.TgZ(4,"section",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"p",6),e._uU(9,"Consumption ID"),e.qZA(),e.TgZ(10,"p",7),e._uU(11),e.qZA()(),e.TgZ(12,"div",5)(13,"p",6),e._uU(14,"Center"),e.qZA(),e.TgZ(15,"p",7),e._uU(16),e.qZA()()(),e.TgZ(17,"div",4)(18,"div",5)(19,"p",6),e._uU(20,"Created Date"),e.qZA(),e.TgZ(21,"p",7),e._uU(22),e.ALo(23,"date"),e.qZA()(),e.TgZ(24,"div",5)(25,"p",6),e._uU(26,"Created by"),e.qZA(),e.TgZ(27,"p",7),e._uU(28),e.qZA()()()(),e.TgZ(29,"div",8)(30,"form",9)(31,"mat-form-field",10),e._UZ(32,"input",11),e.TgZ(33,"mat-autocomplete",12,13),e.NdJ("opened",function(){return o.updateSelectContainer()})("optionSelected",function(r){return o.onPatientSelection(r)}),e.TgZ(35,"div",14),e.NdJ("scrolled",function(){return o.loadMoreProducts()}),e.YNc(36,kr,2,2,"mat-option",15),e.qZA()(),e._UZ(37,"mat-icon",16)(38,"mat-divider",17),e.qZA()()()(),e.TgZ(39,"section",18)(40,"div",19)(41,"table",20),e.ynx(42,21),e.YNc(43,Pr,2,0,"th",22),e.YNc(44,Nr,2,1,"td",23),e.BQk(),e.ynx(45,24),e.YNc(46,Ur,2,0,"th",22),e.YNc(47,Sr,2,1,"td",23),e.BQk(),e.ynx(48,25),e.YNc(49,Dr,2,0,"th",26),e.YNc(50,Fr,5,1,"td",27),e.BQk(),e.ynx(51,28),e.YNc(52,Yr,2,0,"th",22),e.YNc(53,Rr,3,3,"td",23),e.BQk(),e.ynx(54,29),e.YNc(55,Qr,2,0,"th",22),e.YNc(56,Jr,2,1,"td",23),e.BQk(),e.ynx(57,30),e.YNc(58,Or,2,0,"th",26),e.YNc(59,Mr,3,1,"td",23),e.BQk(),e.YNc(60,Br,1,0,"tr",31),e.YNc(61,Lr,1,0,"tr",32),e.qZA(),e.TgZ(62,"mat-paginator",33,34),e.NdJ("page",function(r){return o.getPageEvent(r)}),e.qZA()()(),e.TgZ(64,"section",35)(65,"div",36)(66,"p",37),e._uU(67,"Remark"),e.qZA()(),e.TgZ(68,"div",38)(69,"mat-form-field",39),e._UZ(70,"textarea",40,41),e.qZA()()(),e.TgZ(72,"section",42)(73,"div",43)(74,"app-agm-add-attachment",44),e.NdJ("fileName",function(r){return o.receivedFileName(r)}),e.qZA(),e.TgZ(75,"div",45)(76,"p",46),e._uU(77,"Attachments"),e.qZA(),e.YNc(78,Er,4,1,"div",47),e.YNc(79,Vr,2,0,"div",48),e.qZA()()(),e.TgZ(80,"footer",49)(81,"div",3)(82,"div",50)(83,"a",51),e.NdJ("click",function(){return o.deny()}),e._uU(84," Deny "),e.qZA(),e.TgZ(85,"button",52),e._uU(86,"Approve"),e.qZA()()()()()),2&t){const i=e.MAs(34);e.xp6(11),e.Oqu(o.consumption_info.code),e.xp6(5),e.Oqu(o.consumption_info.consumed_by),e.xp6(6),e.hij(" ",e.xi3(23,27,o.consumption_info.created_at,"dd/mm/yyyy hh:mm a")," "),e.xp6(6),e.Oqu(o.consumption_info.created_by),e.xp6(4),e.Q6J("formControl",o.searchInput)("matAutocomplete",i),e.xp6(1),e.Q6J("displayWith",o.inventoryDisplayWithFn),e.xp6(2),e.Q6J("infiniteScrollDistance",1)("infiniteScrollThrottle",0)("scrollWindow",!1)("fromRoot",!0)("immediateCheck",!1)("alwaysCallback",!1)("infiniteScrollContainer",o.selectanelContainer),e.xp6(1),e.Q6J("ngForOf",o.searchProductNameUseAutoComplete.data),e.xp6(2),e.Q6J("vertical",!0),e.xp6(3),e.Q6J("dataSource",o.dataSource),e.xp6(19),e.Q6J("matHeaderRowDef",o.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns),e.xp6(1),e.Q6J("length",o.tableLength||0)("pageIndex",(o.clientsPagination.page||1)-1)("pageSize",o.clientsPagination.perPage)("pageSizeOptions",o.clientsPagination.paginationSizes)("showFirstLastButtons",!0),e.xp6(12),e.Q6J("icon","appVendorFile"),e.xp6(4),e.Q6J("ngForOf",o.attachmentFiles),e.xp6(1),e.Q6J("ngIf",!o.attachmentFiles.length)}},dependencies:[p.sg,p.O5,R.R,v.Hw,s._Y,s.Fj,s.JJ,s.JL,s.F,s.oH,N.XC,N.ZL,D.ey,O.IC,g.KE,g.R9,k.Nt,Y.d,J.gD,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,x.lW,x.zs,T.NW,E.O,p.uU,W.Q],styles:["app-center-consumption .center-consumption{margin:2rem 3rem}  app-center-consumption .center-consumption_header{margin-top:4rem}  app-center-consumption .center-consumption_header .consumption{display:flex;justify-content:space-around}  app-center-consumption .center-consumption_header .consumption .consumption-detail{display:flex}  app-center-consumption .center-consumption_header .consumption .consumption-detail .label-name{margin-right:1rem;font-size:1.25rem}  app-center-consumption .center-consumption_header .consumption .consumption-detail .label-value{margin-top:.1rem}  app-center-consumption .center-consumption_header--input{margin-top:3rem;width:60%}  app-center-consumption .center-consumption_textarea{margin-top:2rem}  app-center-consumption .center-consumption_table .agm-table--container .mat-select-arrow-wrapper{display:none}  app-center-consumption .center-consumption_table .agm-table--container .mat-icon{-webkit-transform:scale(.5);transform:scale(.5)}  app-center-consumption .center-consumption_table .agm-table--container .mat-form-field{text-align:center}  app-center-consumption .center-consumption_table .agm-table--container .table-input{width:70%}  app-center-consumption .center-consumption_table .vendorField{width:5%!important}  app-center-consumption .center-consumption_textarea .form-textArea{width:100%}  app-center-consumption .center-consumption_textarea .mat-form-field-appearance-outline .mat-form-field-outline{background-color:#e6ebee;border-radius:5px}  app-center-consumption .center-consumption_textarea .mat-form-field-appearance-outline .mat-form-field-flex{background-color:#0003}  app-center-consumption .center-consumption_textarea .mat-form-field-appearance-outline .mat-form-field-outline{top:0em}  app-center-consumption .center-consumption_attachment .attachment{display:flex;margin:2rem 1rem}  app-center-consumption .center-consumption_attachment .attachment .mat-icon{-webkit-transform:scale(2.3);transform:scale(2.3)}  app-center-consumption .center-consumption_attachment .attachment .attachemnt-label{padding-top:.3rem;padding-left:1rem}  app-center-consumption .center-consumption_attachment .attachment .attachemnt-label p{margin:0}  app-center-consumption .center-consumption_attachment .attachment .file-attachment{display:flex}  app-center-consumption .center-consumption_attachment .attachment .file-attachment .delete-icon{margin-left:.5rem;-webkit-transform:scale(1);transform:scale(1);cursor:pointer}  app-center-consumption .center-consumption_footer .action-btn{display:flex;justify-content:space-between}  app-center-consumption .center-consumption_footer .action-btn .mat-button{width:45%;padding:.5em 0!important}@media (min-width: 1025px){  app-center-consumption .center-consumption__header{flex-direction:row}}@media only screen and (min-width: 769px) and (max-width: 1024px){  app-center-consumption .center-consumption_header{margin-top:4rem}  app-center-consumption .center-consumption_header .consumption{display:flex;justify-content:space-around}  app-center-consumption .center-consumption_header .consumption .consumption-detail{display:flex}  app-center-consumption .center-consumption_header--input{margin-top:3rem;width:80%}}@media only screen and (min-width: 481px) and (max-width: 768px){  app-center-consumption .center-consumption_header{margin-top:2rem}  app-center-consumption .center-consumption_header .consumption{display:flex;justify-content:space-between}  app-center-consumption .center-consumption_header .consumption .consumption-detail{display:flex}  app-center-consumption .center-consumption_header--input{margin-top:3rem;width:80%}}"],changeDetection:0}),n})();function jr(n,a){1&n&&(e.TgZ(0,"th",26),e._uU(1,"Consumption ID"),e.qZA())}function zr(n,a){if(1&n&&(e.TgZ(0,"td",27),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.id," ")}}function Hr(n,a){1&n&&(e.TgZ(0,"th",26),e._uU(1,"Consumed By"),e.qZA())}function Gr(n,a){if(1&n&&(e.TgZ(0,"td",27),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(t.name)}}function Kr(n,a){1&n&&(e.TgZ(0,"th",26),e._uU(1,"Center"),e.qZA())}function Wr(n,a){if(1&n&&(e.TgZ(0,"td",28),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.center," ")}}function Xr(n,a){1&n&&(e.TgZ(0,"th",26),e._uU(1,"Consumed On"),e.qZA())}function es(n,a){if(1&n&&(e.TgZ(0,"td",27),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.create_on,"dd/MM/yyyy hh:mm a")," ")}}function ts(n,a){1&n&&(e.TgZ(0,"th",26),e._uU(1,"Action"),e.qZA())}function ns(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"td",27),e._UZ(1,"mat-icon",29),e.TgZ(2,"mat-icon",30),e.NdJ("click",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.onRemoveEquipment(i))}),e._uU(3,"delete"),e.qZA()()}if(2&n){const t=a.$implicit;e.xp6(1),e.MGl("routerLink","/inventory/centerconsumption/",t.id,"")}}function os(n,a){1&n&&(e.TgZ(0,"th",26),e._uU(1,"Detail"),e.qZA())}function as(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"td",27)(1,"button",31),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.acknowledge())}),e._uU(2," Acknowledge "),e.qZA()()}}function is(n,a){1&n&&e._UZ(0,"tr",32)}function rs(n,a){1&n&&e._UZ(0,"tr",33)}let ss=(()=>{class n{constructor(t,o){this.route=t,this.dialog=o,this.data=[{id:"EQ0001",name:"equipment A",center:"Agam Lab A",create_on:"2022-05-20 10:30:45"},{id:"EQ0002",name:"equipment B",center:"Agam Lab B",create_on:"2022-05-25 10:50:45"}],this.displayedColumns=["consumption_id","consumed_by","center","consumed_on","action","detail"],this.searchStr=new s.NI(""),this.agamFilters=[],this.spinner=!1,this.dataSource=new c.by(this.data),this.payload={filter:{}},this.clientsPagination=new y.p({page:1,perPage:5,total:this.tableLength})}ngOnInit(){this.dataSource=this.data,this.loadFilters()}create(){this.route.navigateByUrl("inventory/centerconsumption/create")}acknowledge(){this.route.navigateByUrl("inventory/centerconsumption/acknowledge")}loadFilters(){this.spinner=!0,this.agamFilters=[{type:"requestId",name:"Request Id",data:this.data,lableKey:"id"},{type:"date",name:"Order Date",data:"",lableKey:"name"}]}getPageEvent(t){}onSearch(t){}handleFilter(t){}handleSearch(){}resetFilter(){this.payload={}}filter(){}onRemoveEquipment(t){this.confirmConsDialog=this.dialog.open(F.$,{width:"40%",height:"auto",disableClose:!1,data:{message:"Are you sure want to Delete?",buttonText:{ok:"Delete",cancel:"Cancel"}}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.F0),e.Y36(C.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-center-consump-detail"]],decls:40,vars:11,consts:[[1,"center-consumption"],[1,"title","primary"],[1,"center-consumption__header"],[1,"center-consumption__header--input"],[1,"center-consumption__header--input_form"],[3,"ngModel","formControl","filters","ngModelChange","search","filter","reset"],[1,"button-common"],[1,"action-buttons"],[1,"btn","sample-btn"],[1,"btn-icons",3,"click"],["svgIcon","appCreateConsumption"],[1,"agm-table--container"],["mat-table","",1,"agm-table",3,"dataSource"],["matColumnDef","consumption_id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","consumed_by"],["matColumnDef","center"],["class","email-break","mat-cell","",4,"matCellDef"],["matColumnDef","consumed_on"],["matColumnDef","action"],["matColumnDef","detail"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page"],["paginator",""],["mat-header-cell",""],["mat-cell",""],["mat-cell","",1,"email-break"],["svgIcon","appEdit",3,"routerLink"],["svgIcon","appDelete",3,"click"],["type","button","mat-raised-button","",1,"acknowledge",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div")(2,"h3",1),e._uU(3,"Center Consumption"),e.qZA()(),e.TgZ(4,"section",2)(5,"div",3)(6,"form",4)(7,"app-agam-search-filter",5),e.NdJ("ngModelChange",function(r){return o.onSearch=r})("ngModelChange",function(r){return o.onSearch(r)})("search",function(){return o.filter()})("filter",function(r){return o.handleFilter(r)})("reset",function(){return o.resetFilter()}),e.qZA()()(),e.TgZ(8,"div",6)(9,"div",7)(10,"div",8)(11,"button",9),e.NdJ("click",function(){return o.create()}),e.TgZ(12,"span"),e._uU(13,"Create Consumption"),e.qZA(),e.TgZ(14,"div"),e._UZ(15,"mat-icon",10),e.qZA()()()()()(),e.TgZ(16,"div",11)(17,"table",12),e.ynx(18,13),e.YNc(19,jr,2,0,"th",14),e.YNc(20,zr,2,1,"td",15),e.BQk(),e.ynx(21,16),e.YNc(22,Hr,2,0,"th",14),e.YNc(23,Gr,2,1,"td",15),e.BQk(),e.ynx(24,17),e.YNc(25,Kr,2,0,"th",14),e.YNc(26,Wr,2,1,"td",18),e.BQk(),e.ynx(27,19),e.YNc(28,Xr,2,0,"th",14),e.YNc(29,es,3,4,"td",15),e.BQk(),e.ynx(30,20),e.YNc(31,ts,2,0,"th",14),e.YNc(32,ns,4,1,"td",15),e.BQk(),e.ynx(33,21),e.YNc(34,os,2,0,"th",14),e.YNc(35,as,3,0,"td",15),e.BQk(),e.YNc(36,is,1,0,"tr",22),e.YNc(37,rs,1,0,"tr",23),e.qZA(),e.TgZ(38,"mat-paginator",24,25),e.NdJ("page",function(r){return o.getPageEvent(r)}),e.qZA()()()),2&t&&(e.xp6(7),e.Q6J("ngModel",o.onSearch)("formControl",o.searchStr)("filters",o.agamFilters),e.xp6(10),e.Q6J("dataSource",o.dataSource),e.xp6(19),e.Q6J("matHeaderRowDef",o.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns),e.xp6(1),e.Q6J("length",o.tableLength||0)("pageIndex",(o.clientsPagination.page||1)-1)("pageSize",o.clientsPagination.perPage)("pageSizeOptions",o.clientsPagination.paginationSizes)("showFirstLastButtons",!0))},dependencies:[v.Hw,s._Y,s.JJ,s.JL,s.F,s.oH,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,x.lW,T.NW,B.N,m.rH,p.uU],styles:["app-center-consump-detail .center-consumption{padding:2.6em}  app-center-consump-detail .center-consumption .action-buttons .btn .btn-icons{width:auto!important;padding:0 20px}  app-center-consump-detail .center-consumption .action-buttons .btn .btn-icons span{margin-right:10px}  app-center-consump-detail .center-consumption .btn-center{display:flex;justify-content:space-around;align-items:end;width:50%;border-bottom:1px solid rgba(6,70,98,.15)}  app-center-consump-detail .center-consumption .btn-container{display:flex;margin-top:-3em}  app-center-consump-detail .center-consumption .btn-container .buttons{display:flex;flex-direction:column;justify-content:space-around;align-items:center;padding:0 1em}  app-center-consump-detail .center-consumption .btn-container .buttons p{margin-top:16px}  app-center-consump-detail .center-consumption__header{display:flex;flex-direction:row;margin-top:2rem;justify-content:space-between}  app-center-consump-detail .center-consumption__header--input{width:60%}  app-center-consump-detail .center-consumption .mat-tab-body-wrapper{margin-top:26px}  app-center-consump-detail .center-consumption .mat-tab-body-wrapper .primary{margin-bottom:0}  app-center-consump-detail .center-consumption .mat-select-value{text-align:center}  app-center-consump-detail .center-consumption .center-consumption__header--tab .active-tab{bottom:0}  app-center-consump-detail .center-consumption .center-consumption__header--tab .active-tab__button{height:3.5rem;width:3rem;border-radius:50%}  app-center-consump-detail .center-consumption .spinner{margin-top:25px;margin-bottom:25px}  app-center-consump-detail .agm-table{margin-top:5vh}  app-center-consump-detail .agm-table .mat-row .mat-cell{max-width:310px;word-wrap:break-word}  app-center-consump-detail .agm-table .acknowledge{background:var(--secondary-color-500)}  app-center-consump-detail .uploadfile{display:none}@media (min-width: 1025px){  app-center-consump-detail .center-consumption__header{flex-direction:row}}@media only screen and (min-width: 769px) and (max-width: 1024px){  app-center-consump-detail .center-consumption .btn-center{justify-content:center;width:100%}  app-center-consump-detail .center-consumption .btn-center .btn-container{margin-top:2em}  app-center-consump-detail .center-consumption__header{flex-direction:column}  app-center-consump-detail .center-consumption__header--input{width:100%}  app-center-consump-detail .center-consumption__header--tab{width:100%}  app-center-consump-detail .center-consumption __header--tab{width:100%}}@media only screen and (min-width: 481px) and (max-width: 768px){  app-center-consump-detail .center-consumption{margin-left:1rem;margin-top:.5rem;margin-right:1rem}  app-center-consump-detail .center-consumption .btn-center{width:97vw}  app-center-consump-detail .center-consumption .btn-center .btn-container{margin-top:2em}  app-center-consump-detail .center-consumption__header{flex-direction:column}  app-center-consump-detail .center-consumption__header--input{width:100%}  app-center-consump-detail .center-consumption__header--tab{width:100%}}@media (max-width: 480px){  app-center-consump-detail .center-consumption{margin-left:1rem;margin-top:.5rem;margin-right:1rem}  app-center-consump-detail .center-consumption .btn-center{flex-direction:column}  app-center-consump-detail .center-consumption .btn-center .btn-container{margin-top:2em;justify-content:center;align-items:center;width:93vw}  app-center-consump-detail .center-consumption__header{flex-direction:column}  app-center-consump-detail .center-consumption__header--input{width:100%}  app-center-consump-detail .center-consumption__header--tab{width:100%}}"],changeDetection:0}),n})(),cs=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-phlebo-consumption"]],decls:1,vars:0,template:function(t,o){1&t&&e._UZ(0,"router-outlet")},dependencies:[m.lC],changeDetection:0}),n})();var Te=h(71948),ls=h(59348);function ps(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6),e._UZ(4,"img",7),e.TgZ(5,"div",8),e._UZ(6,"mat-icon",9)(7,"mat-icon",9)(8,"mat-icon",9)(9,"mat-icon",10)(10,"mat-icon",10),e.qZA()()(),e.TgZ(11,"div",11)(12,"div",12)(13,"div",13)(14,"span"),e._uU(15,"Name"),e.qZA(),e.TgZ(16,"span"),e._uU(17,":"),e.qZA(),e.TgZ(18,"span",14),e._uU(19),e.qZA()(),e.TgZ(20,"div",13)(21,"span"),e._uU(22,"Phlebo ID"),e.qZA(),e.TgZ(23,"span"),e._uU(24,":"),e.qZA(),e.TgZ(25,"span",15),e._uU(26),e.qZA()()(),e.TgZ(27,"div",12)(28,"div",13)(29,"span"),e._uU(30,"Age"),e.qZA(),e.TgZ(31,"span"),e._uU(32,":"),e.qZA(),e.TgZ(33,"span",15),e._uU(34),e.ALo(35,"age"),e.qZA()(),e.TgZ(36,"div",13)(37,"span"),e._uU(38,"Gender"),e.qZA(),e.TgZ(39,"span"),e._uU(40,":"),e.qZA(),e.TgZ(41,"span",15),e._uU(42),e.ALo(43,"titlecase"),e.qZA()()(),e.TgZ(44,"div",12)(45,"div",13)(46,"span"),e._uU(47,"Contact No"),e.qZA(),e.TgZ(48,"span"),e._uU(49,":"),e.qZA(),e.TgZ(50,"span",15),e._uU(51),e.qZA()(),e.TgZ(52,"div",13)(53,"span"),e._uU(54,"Email"),e.qZA(),e.TgZ(55,"span"),e._uU(56,":"),e.qZA(),e.TgZ(57,"span",14),e._uU(58),e.qZA()()(),e.TgZ(59,"div",16)(60,"mat-radio-group",17)(61,"mat-radio-button",18),e._uU(62,"Active"),e.qZA()()()(),e.TgZ(63,"div",19)(64,"button",20),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.assignPhlebo(r))}),e._uU(65," Select "),e.qZA()()()()}if(2&n){const t=a.$implicit;e.xp6(4),e.s9C("src",t.profile_image,e.LSH),e.xp6(15),e.Oqu(t.name),e.xp6(7),e.hij("PH",t.code,""),e.xp6(8),e.Oqu(e.lcZ(35,8,t.dob)),e.xp6(8),e.Oqu(e.lcZ(43,10,t.gender)),e.xp6(9),e.hij("+91 ",t.mobile_number,""),e.xp6(7),e.Oqu(t.email),e.xp6(3),e.s9C("checked",t.is_active)}}function ds(n,a){1&n&&(e.TgZ(0,"div",21),e._UZ(1,"mat-spinner",22),e.qZA())}let le=(()=>{class n{constructor(t,o,i,r,l,u){this.inventoryService=t,this.cdr=o,this.activatedRoute=i,this.snackBar=r,this.router=l,this.dialogRef=u,this.isLoading=!0,this.phlebo_info=!1}ngOnInit(){this.orderId=this.activatedRoute.snapshot.params.id,this.getPhlebo()}getPhlebo(){this.isLoading=!0,this.perPage=5,this.inventoryService.getPhleboPagination(this.perPage,this.page).subscribe(t=>{this.isLoading=!1,this.allPhlebo=t.data.results,this.cdr.markForCheck()})}assignPhlebo(t){this.phlebo_info=t,this.dialogRef.close(this.phlebo_info)}onScroll(){this.isLoading=!0,this.cdr.markForCheck(),this.perPage=this.perPage+5,this.inventoryService.getPhleboPagination(this.perPage,this.page).subscribe(t=>{this.allPhlebo=t.data.results,this.total=t.pagination,this.isLoading=!1,this.cdr.markForCheck()})}back(){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Z),e.Y36(e.sBO),e.Y36(m.gz),e.Y36(z.ux),e.Y36(m.F0),e.Y36(C.so))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-phlebo-select"]],decls:3,vars:5,consts:[["infiniteScroll","",1,"search-results",3,"scrollWindow","infiniteScrollThrottle","infiniteScrollDistance","scrolled"],["class","data-container-common sectionMain row",4,"ngFor","ngForOf"],["class","spinner-container",4,"ngIf"],[1,"data-container-common","sectionMain","row"],[1,"col-lg-12"],[1,"section1","col-lg-2","col-md-2"],[1,"phleboProfile"],[1,"profileCircle",3,"src"],[1,"rateing"],["svgIcon","appStar"],["svgIcon","appUnStar"],[1,"col-lg-8","col-md-8"],[1,"data","col-md-4"],[1,"dataField"],[1,"primary","line-break"],[1,"primary"],[1,"data-active","col-lg-4"],["aria-label","Select an option"],[3,"checked"],[1,"section2","col-lg-2","col-md-2"],[1,"button-mat-all","section2-track",3,"click"],[1,"spinner-container"],["diameter","70",1,"spinner"]],template:function(t,o){1&t&&(e.TgZ(0,"section",0),e.NdJ("scrolled",function(){return o.onScroll()}),e.YNc(1,ps,66,12,"div",1),e.YNc(2,ds,2,0,"div",2),e.qZA()),2&t&&(e.Q6J("scrollWindow",!1)("infiniteScrollThrottle",0)("infiniteScrollDistance",.5),e.xp6(1),e.Q6J("ngForOf",o.allPhlebo),e.xp6(1),e.Q6J("ngIf",o.isLoading))},dependencies:[p.sg,p.O5,R.R,v.Hw,Te.VQ,Te.U0,w.Ou,p.rS,ls.C],styles:[".back-button[_ngcontent-%COMP%]{margin:2em 2em 0;padding:.25rem 2rem;color:#26506b}.back-button[_ngcontent-%COMP%]   .back-icon[_ngcontent-%COMP%]{-webkit-transform:scale(.8);transform:scale(.8)}.sectionMain[_ngcontent-%COMP%]{margin:2em;display:flex;justify-content:space-between}.sectionMain[_ngcontent-%COMP%]   .profileCircle[_ngcontent-%COMP%]{width:100px;height:100px;background-color:#26506b;border-radius:50%;margin-bottom:1rem}.sectionMain[_ngcontent-%COMP%]   .phleboProfile[_ngcontent-%COMP%]{display:flex;flex-direction:column}.sectionMain[_ngcontent-%COMP%]   .rateing[_ngcontent-%COMP%]{flex-direction:row}.sectionMain[_ngcontent-%COMP%]   .section1[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.sectionMain[_ngcontent-%COMP%]   .section2[_ngcontent-%COMP%]   .section2-track[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:2rem;width:100%}.sectionMain[_ngcontent-%COMP%]   .dataField[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;gap:1.5rem;align-items:center}.sectionMain[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:3rem}.sectionMain[_ngcontent-%COMP%]   .data-active[_ngcontent-%COMP%]{padding-top:1rem}.sectionMain[_ngcontent-%COMP%]   mat-radio-button.mat-accent[_ngcontent-%COMP%]   .mat-radio-inner-circle[_ngcontent-%COMP%], .sectionMain[_ngcontent-%COMP%]   .mat-radio-button.mat-accent[_ngcontent-%COMP%]   .mat-radio-ripple[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]:not(.mat-radio-persistent-ripple), .sectionMain[_ngcontent-%COMP%]   .mat-radio-button.mat-accent.mat-radio-checked[_ngcontent-%COMP%]   .mat-radio-persistent-ripple[_ngcontent-%COMP%], .sectionMain[_ngcontent-%COMP%]   .mat-radio-button.mat-accent[_ngcontent-%COMP%]:active   .mat-radio-persistent-ripple[_ngcontent-%COMP%]{border-color:green!important}.boxes[_ngcontent-%COMP%]{height:100%;width:44vw;background-color:#00f;overflow:scroll}.container[_ngcontent-%COMP%]{height:100%;width:100%;display:grid;grid-template-columns:1fr 1fr;grid-column-gap:1.5vw;grid-row-gap:5px}.search-results[_ngcontent-%COMP%]{height:100%;overflow:scroll}  .mat-radio-button.mat-accent .mat-radio-ripple .mat-ripple-element{opacity:0!important;background-color:#146300!important}  .mat-radio-button.mat-accent .mat-radio-inner-circle{background-color:#146300!important}  .mat-radio-button.mat-accent.mat-radio-checked .mat-radio-outer-circle{border-color:#146300!important}"],changeDetection:0}),n})();function us(n,a){1&n&&(e.TgZ(0,"h3",49),e._uU(1," Create Phlebo Consumption - Inventory "),e.qZA())}function ms(n,a){1&n&&(e.TgZ(0,"h3",49),e._uU(1," Update Phlebo Consumption - Inventory "),e.qZA())}function hs(n,a){if(1&n&&(e.TgZ(0,"section",50)(1,"div",51)(2,"div",52)(3,"div",53)(4,"p",54),e._uU(5,"Consumption ID"),e.qZA(),e.TgZ(6,"p",55),e._uU(7),e.qZA()(),e.TgZ(8,"div",53)(9,"p",54),e._uU(10,"Consumed By"),e.qZA(),e.TgZ(11,"p",55),e._uU(12),e.qZA()()(),e.TgZ(13,"div",52)(14,"div",53)(15,"p",54),e._uU(16,"Date"),e.qZA(),e.TgZ(17,"p",55),e._uU(18),e.ALo(19,"date"),e.qZA()(),e.TgZ(20,"div",53)(21,"p",54),e._uU(22,"Created by"),e.qZA(),e.TgZ(23,"p",55),e._uU(24),e.qZA()()()()()),2&n){const t=e.oxw();e.xp6(7),e.hij(" ",(null==t.consumption_info?null:t.consumption_info.code)||"N/A"," "),e.xp6(5),e.hij(" ",(null==t.consumption_info?null:t.consumption_info.consumed_by)||"N/A"," "),e.xp6(6),e.hij(" ",e.xi3(19,4,null==t.consumption_info?null:t.consumption_info.created_at,"dd-mm-YYY hh:mm a")||"N/A"," "),e.xp6(6),e.hij(" ",(null==t.consumption_info?null:t.consumption_info.created_by)||"N/A"," ")}}function _s(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"section",50)(1,"div",56)(2,"div",57)(3,"p",54),e._uU(4,"Phlebo Name:"),e.qZA(),e.TgZ(5,"p",55),e._uU(6),e.qZA()()(),e.TgZ(7,"div",58)(8,"div",59)(9,"div",60)(10,"div",61)(11,"button",62),e.NdJ("click",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.onOpenPhleboSelect(i))}),e.TgZ(12,"span"),e._uU(13,"Select Phlebo"),e.qZA(),e.TgZ(14,"div"),e._UZ(15,"mat-icon",63),e.qZA()()()()()()()}if(2&n){const t=e.oxw();e.xp6(6),e.Oqu((null==t.phlebo_info?null:t.phlebo_info.name)||"N/A")}}function fs(n,a){if(1&n&&(e.TgZ(0,"mat-option",64),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",null==t?null:t.name," ")}}function gs(n,a){1&n&&(e.TgZ(0,"th",65),e._uU(1,"Product Code"),e.qZA())}function bs(n,a){if(1&n&&(e.TgZ(0,"td",66),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.code," ")}}function Cs(n,a){1&n&&(e.TgZ(0,"th",65),e._uU(1,"Product Name"),e.qZA())}function qs(n,a){if(1&n&&(e.TgZ(0,"td",66),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(t.name)}}function vs(n,a){1&n&&(e.TgZ(0,"th",67),e._uU(1,"Vendor"),e.qZA())}function Zs(n,a){if(1&n&&(e.TgZ(0,"mat-option",64),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function xs(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"td",68)(1,"mat-form-field",69)(2,"mat-select",70),e.NdJ("selectionChange",function(i){const l=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.onVendorSelect(i,l))}),e.YNc(3,Zs,2,2,"mat-option",11),e.qZA(),e._UZ(4,"mat-icon",71),e.qZA()()}if(2&n){const t=a.$implicit,o=e.oxw();e.xp6(2),e.Q6J("disabled",o.approvelOpt),e.xp6(1),e.Q6J("ngForOf",t.vendors)}}function ys(n,a){1&n&&(e.TgZ(0,"th",65),e._uU(1,"Price"),e.qZA())}function Ts(n,a){if(1&n&&(e.TgZ(0,"td",66),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.price)," ")}}function ws(n,a){1&n&&(e.TgZ(0,"th",65),e._uU(1,"Batch No"),e.qZA())}function As(n,a){if(1&n&&(e.TgZ(0,"td",66),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",(null==t.batch_no?null:t.batch_no.batch_no)||"N/A"," ")}}function ks(n,a){1&n&&(e.TgZ(0,"th",67),e._uU(1," Consumed Quantity "),e.qZA())}function Ps(n,a){if(1&n&&(e.TgZ(0,"td",66)(1,"mat-form-field",72),e._UZ(2,"input",73),e.qZA()()),2&n){const t=a.$implicit,o=e.oxw();e.xp6(2),e.Q6J("value",t.consumed_qty)("disabled",o.approvelOpt)}}function Ns(n,a){1&n&&(e.TgZ(0,"th",65),e._uU(1,"Action"),e.qZA())}function Us(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-icon",75),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,r=e.oxw();return e.KtG(r.onRemoveProduct(i))}),e._uU(1,"delete"),e.qZA()}}function Ss(n,a){if(1&n&&(e.TgZ(0,"td",66),e.YNc(1,Us,2,0,"mat-icon",74),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.approvelOpt)}}function Ds(n,a){1&n&&e._UZ(0,"tr",76)}function Is(n,a){1&n&&e._UZ(0,"tr",77)}function Fs(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",78)(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"mat-icon",79),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.delete(r.name))}),e.qZA()()}if(2&n){const t=a.$implicit;e.xp6(2),e.Oqu(t.name)}}function Ys(n,a){1&n&&(e.TgZ(0,"div",78),e._uU(1," Choose a file "),e.qZA())}function Rs(n,a){1&n&&(e.TgZ(0,"button",80),e._uU(1," Submit "),e.qZA())}function Qs(n,a){1&n&&(e.TgZ(0,"button",80),e._uU(1," Update "),e.qZA())}function Js(n,a){1&n&&(e.TgZ(0,"button",80),e._uU(1," Approve "),e.qZA())}let pe=(()=>{class n{constructor(t,o,i,r,l,u){this.cdr=t,this.activeRoute=o,this.route=i,this.dialog=r,this.inventoryService=l,this.snackBbar=u,this.data=[],this.vendors=[],this.displayedColumnsCreate=["product_code","product_Name","vendor","price","consumed_qty","action"],this.displayedColumnsEdit=["product_code","product_Name","vendor","price","batch_no","consumed_qty","action"],this.searchInput=new s.NI(""),this.searchProductNameUseAutoComplete=new Q.d,this.dataSource=new c.by(this.data),this.attachmentFiles=[],this.unsubscribe$=new S.x,this.createOpt=!0,this.editOpt=!1,this.approvelOpt=!1,this.spinner=!1,this.remark=new s.NI(""),this.clientsPagination=new y.p({page:1,perPage:5,total:this.tableLength}),this.productSearchAutocompleteSetup()}ngOnInit(){this.id=this.activeRoute.snapshot.params?.id;let t=this.activeRoute.snapshot.params?.action;this.id?(this.createOpt=!1,this.getConsumptionDetails(),"approvel"==t?this.approvelOpt=!0:this.editOpt=!0):this.createOpt=!0}getIntiData(){this.spinner=!0,this.cdr.markForCheck(),(0,ee.D)([this.inventoryService.getVendors()]).subscribe(([t])=>{this.vendorsDetails=t.data,this.spinner=!1,this.cdr.markForCheck()})}updateSelectContainer(){this.selectanelContainer=".product-autocomplete"}inventoryDisplayWithFn(t){return t?.name??""}onPatientSelection(t){let o={id:t.option.value.id,code:t.option.value.code,name:t.option.value.name,product:t.option.value.id,price:null!=t.option.value.price?t.option.value.price:"0.00",batch_no:null!=t.option.value.batch_no?t.option.value.batch_no:"-",consumed_qty:null!=t.option.value.quantity?t.option.value.quantity:"0",vendors:[]};0==this.data.filter(r=>r.id==o.id).length&&this.getProductVendors(o),this.cdr.markForCheck()}loadMoreProducts(){this.searchProductNameUseAutoComplete.loadMoreData(()=>{},()=>{})}getPageEvent(t){}receivedFileName(t){this.attachmentFiles.push(t),this.attachmentFiles=[...new Set(this.attachmentFiles)]}delete(t){this.removeIndex=this.attachmentFiles.findIndex(o=>{if(o.name==t)return o}),this.attachmentFiles.splice(this.removeIndex,1),this.cdr.markForCheck()}onRemoveProduct(t){this.confirmConsDialog=this.dialog.open(F.$,{width:"40%",height:"auto",disableClose:!1,data:{message:"Are you sure want to Delete? "+t.name,buttonText:{ok:"Delete",cancel:"Cancel"}}})}onSubmit(t){}cancel(){this.route.navigateByUrl("inventory/phleboconsumption")}onOpenPhleboSelect(t){this.dialog.open(le,{width:"80%",height:"70%",disableClose:!1}).afterClosed().subscribe(i=>{this.phlebo_info=i,this.cdr.markForCheck()})}productSearchAutocompleteSetup(){let t=this.searchInput?.valueChanges;this.spinner=!0,this.cdr.markForCheck(),t&&(this.searchProductNameUseAutoComplete.loadDependency(this.cdr,this.unsubscribe$,t),this.searchProductNameUseAutoComplete.pagination.perPage=6,this.searchProductNameUseAutoComplete.apiEndpointMethod=()=>this.inventoryService.searchProduct(this.searchProductNameUseAutoComplete.searchStr,this.searchProductNameUseAutoComplete.pagination).pipe((0,P.U)(o=>o.data)),this.searchProductNameUseAutoComplete.listenForAutoCompleteSearchFormControl(this.searchInput,()=>{},o=>{}),this.searchProductNameUseAutoComplete.loadData(()=>{},()=>{}))}getConsumptionDetails(){this.consumption_info={code:"1002A",created_at:"2023-08-12 10:15:35",consumed_by:"Shaw A",created_by:"Shaw A"},this.dataSource=[{id:"89a9kjd-23kjhjk",code:"102DF",name:"Tube",product:"899sd-sdff",price:"0.00",batch_no:"BAT9898",consumed_qty:"10",vendors:[{id:"23423dg-856634",code:"VNDA",name:"Vendor A"},{id:"23423dg-567567",code:"VNDB",name:"Vendor B"},{id:"43356678-856634",code:"VNDC",name:"Vendor C"}]}]}getProductVendors(t){t?.id&&(this.vendors=[],this.inventoryService.getAllVendorsByProductId(t.id).subscribe({next:o=>{if("success"==o.status){let i=[];console.log(o.data),o.data.forEach((r,l)=>{i.push({id:r.vendor.id,name:r.vendor.name,price:r.price,price_unit_lanel:r.price_unit.name,price_unit_id:r.price_unit.id})}),t.vendors=i,console.log(t.vendors)}this.data.push(t),this.dataSource.data=this.data,this.searchInput.setValue(""),this.cdr.markForCheck()},error:o=>{this.snackBbar.open("Equipment create successfully","success")}}))}onVendorSelect(t,o){let i=o.vendors.filter(r=>r.id==t.value);console.log(i)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(m.gz),e.Y36(m.F0),e.Y36(C.uw),e.Y36(Z),e.Y36(A.c))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-phlebo-consump-create"]],decls:67,vars:26,consts:[[1,"phlebo-consumption"],["class","title primary",4,"ngIf"],["class","row phlebo-consumption_header",4,"ngIf"],[1,"phlebo-consumption_header"],[1,"phlebo-consumption_header--input"],[1,"center-consumption_header--input_form",3,"ngSubmit"],["appearance","outline",1,"agm-search_box"],["matInput","","placeholder","Search by Product Name",3,"formControl","matAutocomplete"],["autoActiveFirstOption","",1,"autocomplete-scroll",3,"displayWith","opened","optionSelected"],["auto","matAutocomplete"],["infiniteScroll","",1,"product-autocomplete",3,"infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","fromRoot","immediateCheck","alwaysCallback","infiniteScrollContainer","scrolled"],[3,"value",4,"ngFor","ngForOf"],["matSuffix","","svgIcon","appSearch"],["matSuffix","",3,"vertical"],[1,"phlebo-consumption_table"],[1,"agm-table--container"],["mat-table","",1,"agm-table",3,"dataSource"],["matColumnDef","product_code"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","product_Name"],["matColumnDef","vendor"],["class","vendorField","mat-header-cell","",4,"matHeaderCellDef"],["class","vendor","mat-cell","",4,"matCellDef"],["matColumnDef","price"],["matColumnDef","batch_no"],["matColumnDef","consumed_qty"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"phlebo-consumption_textarea"],[1,"center-consumption_textarea--heading"],[1,"title"],[1,"phlebo-consumption_textarea--tag"],["appearance","outline",1,"primary","form-textArea"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","4","cdkAutosizeMaxRows","200","placeholder","Type here",3,"disabled"],["autosize","cdkTextareaAutosize"],[1,"phlebo-consumption_attachment"],[1,"attachment"],[1,"attach-tag",3,"icon","fileName"],[1,"attachemnt-label"],[1,"primary"],["class","file-attachment",4,"ngFor","ngForOf"],["class","file-attachment",4,"ngIf"],[1,"phlebo-consumption_footer"],[1,"row"],[1,"col-lg-offset-8","col-lg-4","col-sm-offset-6","col-sm-6","action-btn","col"],["mat-button","",1,"button-mat-all-cancel",3,"click"],["type","submit","mat-button","","class","button-mat-all",4,"ngIf"],[1,"title","primary"],[1,"row","phlebo-consumption_header"],[1,"row","heading"],[1,"col-lg-6","col-md-12","consumption"],[1,"consumption-detail"],[1,"title","label-name"],[1,"primary","label-value"],[1,"col-xl-10","col-lg-9","col-md-9","col-sm-9","consumptions"],[1,"consumption-detail",2,"margin-top","20px"],[1,"col-xl-2","col-lg-3","col-md-3","col-sm-3","consumptions"],[1,"button-common"],[1,"action-buttons","text-right"],[1,"btn","sample-btn"],[1,"btn-icons",3,"click"],["svgIcon","appEditAction"],[3,"value"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"vendorField"],["mat-cell","",1,"vendor"],["appearance","outline",1,"field-common","table-input"],["placeholder","Vendor",3,"disabled","selectionChange"],["matSuffix","","svgIcon","appDownArrow"],["floatLabel","never","appearance","outline","tableInput","true",1,"agm-input-lg","discount-input"],["matInput","",3,"value","disabled"],["svgIcon","appDelete","class","product-delete",3,"click",4,"ngIf"],["svgIcon","appDelete",1,"product-delete",3,"click"],["mat-header-row",""],["mat-row",""],[1,"file-attachment"],["svgIcon","appAttachmentDelete",1,"delete-icon",3,"click"],["type","submit","mat-button","",1,"button-mat-all"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div"),e.YNc(2,us,2,0,"h3",1),e.YNc(3,ms,2,0,"h3",1),e.qZA(),e.YNc(4,hs,25,7,"section",2),e.YNc(5,_s,16,1,"section",2),e.TgZ(6,"section",3)(7,"div",4)(8,"form",5),e.NdJ("ngSubmit",function(r){return o.onSubmit(r)}),e.TgZ(9,"mat-form-field",6),e._UZ(10,"input",7),e.TgZ(11,"mat-autocomplete",8,9),e.NdJ("opened",function(){return o.updateSelectContainer()})("optionSelected",function(r){return o.onPatientSelection(r)}),e.TgZ(13,"div",10),e.NdJ("scrolled",function(){return o.loadMoreProducts()}),e.YNc(14,fs,2,2,"mat-option",11),e.qZA()(),e._UZ(15,"mat-icon",12)(16,"mat-divider",13),e.qZA()()()(),e.TgZ(17,"section",14)(18,"div",15)(19,"table",16),e.ynx(20,17),e.YNc(21,gs,2,0,"th",18),e.YNc(22,bs,2,1,"td",19),e.BQk(),e.ynx(23,20),e.YNc(24,Cs,2,0,"th",18),e.YNc(25,qs,2,1,"td",19),e.BQk(),e.ynx(26,21),e.YNc(27,vs,2,0,"th",22),e.YNc(28,xs,5,2,"td",23),e.BQk(),e.ynx(29,24),e.YNc(30,ys,2,0,"th",18),e.YNc(31,Ts,3,3,"td",19),e.BQk(),e.ynx(32,25),e.YNc(33,ws,2,0,"th",18),e.YNc(34,As,2,1,"td",19),e.BQk(),e.ynx(35,26),e.YNc(36,ks,2,0,"th",22),e.YNc(37,Ps,3,2,"td",19),e.BQk(),e.ynx(38,27),e.YNc(39,Ns,2,0,"th",18),e.YNc(40,Ss,2,1,"td",19),e.BQk(),e.YNc(41,Ds,1,0,"tr",28),e.YNc(42,Is,1,0,"tr",29),e.qZA()()(),e.TgZ(43,"section",30)(44,"div",31)(45,"p",32),e._uU(46,"Remark"),e.qZA()(),e.TgZ(47,"div",33)(48,"mat-form-field",34),e._UZ(49,"textarea",35,36),e.qZA()()(),e.TgZ(51,"section",37)(52,"div",38)(53,"app-agm-add-attachment",39),e.NdJ("fileName",function(r){return o.receivedFileName(r)}),e.qZA(),e.TgZ(54,"div",40)(55,"p",41),e._uU(56,"Attachments"),e.qZA(),e.YNc(57,Fs,4,1,"div",42),e.YNc(58,Ys,2,0,"div",43),e.qZA()()(),e.TgZ(59,"footer",44)(60,"div",45)(61,"div",46)(62,"a",47),e.NdJ("click",function(){return o.cancel()}),e._uU(63," Cancel "),e.qZA(),e.YNc(64,Rs,2,0,"button",48),e.YNc(65,Qs,2,0,"button",48),e.YNc(66,Js,2,0,"button",48),e.qZA()()()()),2&t){const i=e.MAs(12);e.xp6(2),e.Q6J("ngIf",!o.consumption_info),e.xp6(1),e.Q6J("ngIf",o.consumption_info),e.xp6(1),e.Q6J("ngIf",o.editOpt||o.approvelOpt),e.xp6(1),e.Q6J("ngIf",o.createOpt),e.xp6(5),e.Q6J("formControl",o.searchInput)("matAutocomplete",i),e.xp6(1),e.Q6J("displayWith",o.inventoryDisplayWithFn),e.xp6(2),e.Q6J("infiniteScrollDistance",1)("infiniteScrollThrottle",0)("scrollWindow",!1)("fromRoot",!0)("immediateCheck",!1)("alwaysCallback",!1)("infiniteScrollContainer",o.selectanelContainer),e.xp6(1),e.Q6J("ngForOf",o.searchProductNameUseAutoComplete.data),e.xp6(2),e.Q6J("vertical",!0),e.xp6(3),e.Q6J("dataSource",o.dataSource),e.xp6(22),e.Q6J("matHeaderRowDef",o.displayedColumnsEdit),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumnsEdit),e.xp6(7),e.Q6J("disabled",o.approvelOpt),e.xp6(4),e.Q6J("icon","appVendorFile"),e.xp6(4),e.Q6J("ngForOf",o.attachmentFiles),e.xp6(1),e.Q6J("ngIf",!o.attachmentFiles.length),e.xp6(6),e.Q6J("ngIf",o.createOpt),e.xp6(1),e.Q6J("ngIf",o.editOpt),e.xp6(1),e.Q6J("ngIf",o.approvelOpt)}},dependencies:[p.sg,p.O5,R.R,v.Hw,s._Y,s.Fj,s.JJ,s.JL,s.F,s.oH,N.XC,N.ZL,D.ey,O.IC,g.KE,g.R9,k.Nt,Y.d,J.gD,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,x.lW,x.zs,E.O,p.uU,W.Q],styles:["app-phlebo-consumption .phlebo-consumption{padding:2.6em}  app-phlebo-consumption .phlebo-consumption_header{margin-top:2rem}  app-phlebo-consumption .phlebo-consumption_header .consumptions{display:flex;justify-content:space-between}  app-phlebo-consumption .phlebo-consumption_header .consumptions .consumption-detail{display:flex}  app-phlebo-consumption .phlebo-consumption_header .consumptions .consumption-detail .label-name{margin-right:1rem;font-size:1.25rem}  app-phlebo-consumption .phlebo-consumption_header .consumptions .consumption-detail .select-phlebo{cursor:pointer;margin-right:1rem;color:#000}  app-phlebo-consumption .phlebo-consumption_header .consumptions .consumption-detail .phlebo-icon{margin:0 .5rem;display:flex;height:50%;align-items:center}  app-phlebo-consumption .phlebo-consumption_header .consumptions .consumption-detail .label-value{margin-top:.1rem;margin-right:.5rem}  app-phlebo-consumption .phlebo-consumption_header .consump{margin-top:1rem;display:flex;justify-content:flex-start}  app-phlebo-consumption .phlebo-consumption_header .consump .consumption-detail{display:flex;justify-content:center}  app-phlebo-consumption .phlebo-consumption_header .consump .consumption-detail .label-name{margin-right:1rem;font-size:1.25rem}  app-phlebo-consumption .phlebo-consumption_header .consump .consumption-detail .select-phlebo{cursor:pointer;margin-right:1rem;color:#000}  app-phlebo-consumption .phlebo-consumption_header .consump .consumption-detail .phlebo-icon{margin:0 .5rem;display:flex;height:50%;align-items:center}  app-phlebo-consumption .phlebo-consumption_header .consumption{display:flex;justify-content:space-evenly}  app-phlebo-consumption .phlebo-consumption_header .consumption .consumption-detail{display:flex}  app-phlebo-consumption .phlebo-consumption_header .consumption .consumption-detail .label-name{margin-right:1rem;font-size:1.25rem}  app-phlebo-consumption .phlebo-consumption_header .consumption .consumption-detail .select-phlebo{cursor:pointer}  app-phlebo-consumption .phlebo-consumption_header .consumption .consumption-detail .label-value{margin-top:.1rem}  app-phlebo-consumption .phlebo-consumption_header--input{margin-top:2rem;width:60%}  app-phlebo-consumption .phlebo-consumption_textarea{margin-top:2rem}  app-phlebo-consumption .phlebo-consumption_table .agm-table--container .mat-select-arrow-wrapper{display:none}  app-phlebo-consumption .phlebo-consumption_table .agm-table--container .mat-icon{-webkit-transform:scale(.5);transform:scale(.5)}  app-phlebo-consumption .phlebo-consumption_table .agm-table--container .mat-form-field{text-align:center}  app-phlebo-consumption .phlebo-consumption_table .agm-table--container .mat-form-field .mat-form-field-outline{background-color:var(--secondary-color-300)}  app-phlebo-consumption .phlebo-consumption_table .agm-table--container .table-input{width:70%}  app-phlebo-consumption .phlebo-consumption_table .agm-table--container .product-delete{-webkit-transform:scale(1);transform:scale(1)}  app-phlebo-consumption .phlebo-consumption_table .vendorField{width:5%!important}  app-phlebo-consumption .phlebo-consumption_textarea .form-textArea{width:100%}  app-phlebo-consumption .phlebo-consumption_textarea .mat-form-field-appearance-outline .mat-form-field-flex{background-color:var(--secondary-color-100)}  app-phlebo-consumption .phlebo-consumption_textarea .mat-form-field-appearance-outline .mat-form-field-outline{top:0em}  app-phlebo-consumption .phlebo-consumption_attachment .attachment{display:flex;margin:2rem 1rem}  app-phlebo-consumption .phlebo-consumption_attachment .attachment .mat-icon{-webkit-transform:scale(2.3);transform:scale(2.3)}  app-phlebo-consumption .phlebo-consumption_attachment .attachment .attachemnt-label{padding-top:.3rem;padding-left:1rem}  app-phlebo-consumption .phlebo-consumption_attachment .attachment .attachemnt-label p{margin:0}  app-phlebo-consumption .phlebo-consumption_attachment .attachment .file-attachment{display:flex}  app-phlebo-consumption .phlebo-consumption_attachment .attachment .file-attachment .delete-icon{margin-left:.5rem;-webkit-transform:scale(1);transform:scale(1);cursor:pointer}  app-phlebo-consumption .phlebo-consumption_footer .action-btn{display:flex;justify-content:space-between}  app-phlebo-consumption .phlebo-consumption_footer .action-btn .mat-button{width:45%;padding:.5em 0!important}@media (min-width: 1025px){  app-phlebo-consumption .phlebo-consumption__header{flex-direction:row}}@media only screen and (min-width: 769px) and (max-width: 1024px){  app-phlebo-consumption .phlebo-consumption_header{margin-top:4rem}  app-phlebo-consumption .phlebo-consumption_header .consumption{display:flex;justify-content:space-between}  app-phlebo-consumption .phlebo-consumption_header .consumption .consumption-detail{display:flex}  app-phlebo-consumption .phlebo-consumption_header--input{margin-top:3rem;width:80%}  app-phlebo-consumption .phlebo-consumption_attachment{margin-bottom:2rem}}@media only screen and (min-width: 481px) and (max-width: 768px){  app-phlebo-consumption .phlebo-consumption_header{margin-top:2rem}  app-phlebo-consumption .phlebo-consumption_header .consumption{display:flex;justify-content:space-between}  app-phlebo-consumption .phlebo-consumption_header .consumption .consumption-detail{display:flex}  app-phlebo-consumption .phlebo-consumption_header--input{margin-top:3rem;width:80%}  app-phlebo-consumption .phlebo-consumption_attachment{margin-bottom:2.5rem}}"],changeDetection:0}),n})();function Os(n,a){1&n&&(e.TgZ(0,"th",27),e._uU(1,"Consumption ID"),e.qZA())}function Ms(n,a){if(1&n&&(e.TgZ(0,"td",28),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("routerLink","./"+t.id+"/approvel"),e.xp6(1),e.hij(" ",t.code," ")}}function Bs(n,a){1&n&&(e.TgZ(0,"th",27),e._uU(1,"Consumed By"),e.qZA())}function Ls(n,a){if(1&n&&(e.TgZ(0,"td",29),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(t.name)}}function Es(n,a){1&n&&(e.TgZ(0,"th",27),e._uU(1,"Created By"),e.qZA())}function Vs(n,a){if(1&n&&(e.TgZ(0,"td",30),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.created_by," ")}}function $s(n,a){1&n&&(e.TgZ(0,"th",27),e._uU(1,"Consumed On"),e.qZA())}function js(n,a){if(1&n&&(e.TgZ(0,"td",29),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.create_on,"dd/MM/yyyy hh:mm a")," ")}}function zs(n,a){1&n&&(e.TgZ(0,"th",27),e._uU(1,"Action"),e.qZA())}function Hs(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"td",29),e._UZ(1,"mat-icon",31),e.TgZ(2,"mat-icon",32),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.onRemoveEquipment(r))}),e._uU(3,"delete"),e.qZA()()}if(2&n){const t=a.$implicit;e.xp6(1),e.MGl("routerLink","/inventory/phleboconsumption/",t.id,"")}}function Gs(n,a){1&n&&(e.TgZ(0,"th",27),e._uU(1,"Detail"),e.qZA())}function Ks(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"td",29)(1,"button",33),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.acknowledge())}),e._uU(2," Acknowledge "),e.qZA()()}}function Ws(n,a){1&n&&e._UZ(0,"tr",34)}function Xs(n,a){1&n&&e._UZ(0,"tr",35)}let ec=(()=>{class n{constructor(t,o){this.route=t,this.dialog=o,this.data=[{id:"s34234-343fsdfsdf",code:"EQ0001",name:"Shaw",created_by:"Shaw",create_on:"2022-05-20 10:30:45"},{id:"s34234-343fsdfsdf",code:"EQ0002",name:"Shaw B",created_by:"Agam Lab B",create_on:"2022-05-20 10:30:45"},{id:"s34234-343fsdfsdf",code:"EQ0003",name:"Shaw C",created_by:"Shaw C",create_on:"2022-05-20 10:45:45"}],this.displayedColumns=["consumption_id","consumed_by","center","consumed_on","action","detail"],this.searchStr=new s.NI(""),this.agamFilters=[],this.spinner=!1,this.dataSource=new c.by(this.data),this.payload={filter:{}},this.clientsPagination=new y.p({page:1,perPage:5,total:this.tableLength})}ngOnInit(){this.dataSource=this.data,this.loadFilters()}create(){this.route.navigateByUrl("inventory/phleboconsumption/create")}acknowledge(){this.route.navigateByUrl("inventory/phleboconsumption/acknowledge")}loadFilters(){this.spinner=!0,this.agamFilters=[{type:"requestId",name:"Request Id",data:this.data,lableKey:"id"},{type:"date",name:"Order Date",data:"",lableKey:"name"}]}getPageEvent(t){}onSearch(t){}handleFilter(t){}handleSearch(){}resetFilter(){this.payload={}}filter(){}onRemoveEquipment(t){this.confirmConsDialog=this.dialog.open(F.$,{width:"40%",height:"auto",disableClose:!1,data:{message:"Are you sure want to Delete? "+t.code,buttonText:{ok:"Delete",cancel:"Cancel"}}})}getVendors(){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.F0),e.Y36(C.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-phlebo-consump-detail"]],decls:40,vars:11,consts:[[1,"phlebo-consumption"],[1,"title","primary"],[1,"phlebo-consumption__header"],[1,"phlebo-consumption__header--input"],[1,"phlebo-consumption__header--input_form"],[3,"ngModel","formControl","filters","ngModelChange","search","filter","reset"],[1,"button-common"],[1,"action-buttons"],[1,"btn","sample-btn"],[1,"btn-icons",3,"click"],["svgIcon","appCreateConsumption"],[1,"agm-table--container"],["mat-table","",1,"agm-table",3,"dataSource"],["matColumnDef","consumption_id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",3,"routerLink",4,"matCellDef"],["matColumnDef","consumed_by"],["mat-cell","",4,"matCellDef"],["matColumnDef","center"],["class","email-break","mat-cell","",4,"matCellDef"],["matColumnDef","consumed_on"],["matColumnDef","action"],["matColumnDef","detail"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page"],["paginator",""],["mat-header-cell",""],["mat-cell","",3,"routerLink"],["mat-cell",""],["mat-cell","",1,"email-break"],["svgIcon","appEdit",3,"routerLink"],["svgIcon","appDelete",3,"click"],["type","button","mat-raised-button","",1,"acknowledge",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div")(2,"h3",1),e._uU(3,"Phlebo Consumption"),e.qZA()(),e.TgZ(4,"section",2)(5,"div",3)(6,"form",4)(7,"app-agam-search-filter",5),e.NdJ("ngModelChange",function(r){return o.onSearch=r})("ngModelChange",function(r){return o.onSearch(r)})("search",function(){return o.filter()})("filter",function(r){return o.handleFilter(r)})("reset",function(){return o.resetFilter()}),e.qZA()()(),e.TgZ(8,"div",6)(9,"div",7)(10,"div",8)(11,"button",9),e.NdJ("click",function(){return o.create()}),e.TgZ(12,"span"),e._uU(13,"Create Consumption"),e.qZA(),e.TgZ(14,"div"),e._UZ(15,"mat-icon",10),e.qZA()()()()()(),e.TgZ(16,"div",11)(17,"table",12),e.ynx(18,13),e.YNc(19,Os,2,0,"th",14),e.YNc(20,Ms,2,2,"td",15),e.BQk(),e.ynx(21,16),e.YNc(22,Bs,2,0,"th",14),e.YNc(23,Ls,2,1,"td",17),e.BQk(),e.ynx(24,18),e.YNc(25,Es,2,0,"th",14),e.YNc(26,Vs,2,1,"td",19),e.BQk(),e.ynx(27,20),e.YNc(28,$s,2,0,"th",14),e.YNc(29,js,3,4,"td",17),e.BQk(),e.ynx(30,21),e.YNc(31,zs,2,0,"th",14),e.YNc(32,Hs,4,1,"td",17),e.BQk(),e.ynx(33,22),e.YNc(34,Gs,2,0,"th",14),e.YNc(35,Ks,3,0,"td",17),e.BQk(),e.YNc(36,Ws,1,0,"tr",23),e.YNc(37,Xs,1,0,"tr",24),e.qZA(),e.TgZ(38,"mat-paginator",25,26),e.NdJ("page",function(r){return o.getPageEvent(r)}),e.qZA()()()),2&t&&(e.xp6(7),e.Q6J("ngModel",o.onSearch)("formControl",o.searchStr)("filters",o.agamFilters),e.xp6(10),e.Q6J("dataSource",o.dataSource),e.xp6(19),e.Q6J("matHeaderRowDef",o.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns),e.xp6(1),e.Q6J("length",o.tableLength||0)("pageIndex",(o.clientsPagination.page||1)-1)("pageSize",o.clientsPagination.perPage)("pageSizeOptions",o.clientsPagination.paginationSizes)("showFirstLastButtons",!0))},dependencies:[v.Hw,s._Y,s.JJ,s.JL,s.F,s.oH,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,x.lW,T.NW,B.N,m.rH,p.uU],styles:["app-phlebo-consump-detail .phlebo-consumption{padding:2.6em}  app-phlebo-consump-detail .phlebo-consumption .action-buttons .btn .btn-icons{width:auto!important;padding:0 20px}  app-phlebo-consump-detail .phlebo-consumption .action-buttons .btn .btn-icons span{margin-right:10px}  app-phlebo-consump-detail .phlebo-consumption .btn-center{display:flex;justify-content:space-around;align-items:end;width:50%;border-bottom:1px solid rgba(6,70,98,.15)}  app-phlebo-consump-detail .phlebo-consumption .btn-container{display:flex;margin-top:-3em}  app-phlebo-consump-detail .phlebo-consumption .btn-container .buttons{display:flex;flex-direction:column;justify-content:space-around;align-items:center;padding:0 1em}  app-phlebo-consump-detail .phlebo-consumption .btn-container .buttons p{margin-top:16px}  app-phlebo-consump-detail .phlebo-consumption__header{display:flex;flex-direction:row;margin-top:2rem;justify-content:space-between}  app-phlebo-consump-detail .phlebo-consumption__header--input{width:60%}  app-phlebo-consump-detail .phlebo-consumption .mat-tab-body-wrapper{margin-top:26px}  app-phlebo-consump-detail .phlebo-consumption .mat-tab-body-wrapper .primary{margin-bottom:0}  app-phlebo-consump-detail .phlebo-consumption .mat-select-value{text-align:center}  app-phlebo-consump-detail .phlebo-consumption .phlebo-consumption__header--tab .active-tab{bottom:0}  app-phlebo-consump-detail .phlebo-consumption .phlebo-consumption__header--tab .active-tab__button{height:3.5rem;width:3rem;border-radius:50%}  app-phlebo-consump-detail .phlebo-consumption .spinner{margin-top:25px;margin-bottom:25px}  app-phlebo-consump-detail .agm-table{margin-top:5vh}  app-phlebo-consump-detail .agm-table .mat-row .mat-cell{max-width:310px;word-wrap:break-word}  app-phlebo-consump-detail .agm-table .acknowledge{background:var(--secondary-color-500)}  app-phlebo-consump-detail .uploadfile{display:none}@media (min-width: 1025px){  app-phlebo-consump-detail .center-consumption__header{flex-direction:row}}@media only screen and (min-width: 769px) and (max-width: 1024px){  app-phlebo-consump-detail .center-consumption .btn-center{justify-content:center;width:100%}  app-phlebo-consump-detail .center-consumption .btn-center .btn-container{margin-top:2em}  app-phlebo-consump-detail .center-consumption__header{flex-direction:column}  app-phlebo-consump-detail .center-consumption__header--input{width:100%}  app-phlebo-consump-detail .center-consumption__header--tab{width:100%}  app-phlebo-consump-detail .center-consumption __header--tab{width:100%}}@media only screen and (min-width: 481px) and (max-width: 768px){  app-phlebo-consump-detail .center-consumption{margin-left:1rem;margin-top:.5rem;margin-right:1rem}  app-phlebo-consump-detail .center-consumption .btn-center{width:97vw}  app-phlebo-consump-detail .center-consumption .btn-center .btn-container{margin-top:2em}  app-phlebo-consump-detail .center-consumption__header{flex-direction:column}  app-phlebo-consump-detail .center-consumption__header--input{width:100%}  app-phlebo-consump-detail .center-consumption__header--tab{width:100%}}@media (max-width: 480px){  app-phlebo-consump-detail .center-consumption{margin-left:1rem;margin-top:.5rem;margin-right:1rem}  app-phlebo-consump-detail .center-consumption .btn-center{flex-direction:column}  app-phlebo-consump-detail .center-consumption .btn-center .btn-container{margin-top:2em;justify-content:center;align-items:center;width:93vw}  app-phlebo-consump-detail .center-consumption__header{flex-direction:column}  app-phlebo-consump-detail .center-consumption__header--input{width:100%}  app-phlebo-consump-detail .center-consumption__header--tab{width:100%}}"],changeDetection:0}),n})();function tc(n,a){if(1&n&&(e.TgZ(0,"mat-option",54),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",null==t?null:t.name," ")}}function nc(n,a){1&n&&(e.TgZ(0,"th",55),e._uU(1,"Product Code"),e.qZA())}function oc(n,a){if(1&n&&(e.TgZ(0,"td",56),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.code," ")}}function ac(n,a){1&n&&(e.TgZ(0,"th",55),e._uU(1,"Product Name"),e.qZA())}function ic(n,a){if(1&n&&(e.TgZ(0,"td",56),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(t.name)}}function rc(n,a){1&n&&(e.TgZ(0,"th",57),e._uU(1,"Vendor"),e.qZA())}function sc(n,a){if(1&n&&(e.TgZ(0,"mat-option",54),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.key)}}function cc(n,a){if(1&n&&(e.TgZ(0,"td",58)(1,"mat-form-field",59)(2,"mat-select",60),e.YNc(3,sc,2,2,"mat-option",16),e.qZA(),e._UZ(4,"mat-icon",61),e.qZA()()),2&n){const t=a.$implicit;e.xp6(3),e.Q6J("ngForOf",t.vendors)}}function lc(n,a){1&n&&(e.TgZ(0,"th",55),e._uU(1,"Price"),e.qZA())}function pc(n,a){if(1&n&&(e.TgZ(0,"td",56),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.price)," ")}}function dc(n,a){1&n&&(e.TgZ(0,"th",55),e._uU(1,"Batch No"),e.qZA())}function uc(n,a){if(1&n&&(e.TgZ(0,"td",56),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(t.batch_no)}}function mc(n,a){1&n&&(e.TgZ(0,"th",57),e._uU(1," Consumed Qty "),e.qZA())}function hc(n,a){if(1&n&&(e.TgZ(0,"td",56)(1,"mat-form-field",62),e._UZ(2,"input",63),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.Q6J("value",t.consumed_qty)}}function _c(n,a){1&n&&e._UZ(0,"tr",64)}function fc(n,a){1&n&&e._UZ(0,"tr",65)}function gc(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",66)(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"mat-icon",67),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.delete(r.name))}),e.qZA()()}if(2&n){const t=a.$implicit;e.xp6(2),e.Oqu(t.name)}}function bc(n,a){1&n&&(e.TgZ(0,"div",66),e._uU(1," Choose a file "),e.qZA())}let Cc=(()=>{class n{constructor(t,o){this.cdr=t,this.route=o,this.data=[],this.displayedColumns=["product_code","product_Name","vendor","price","batch_no","consumed_qty"],this.searchInput=new s.NI(""),this.searchProductNameUseAutoComplete=new Q.d,this.dataSource=new c.by(this.data),this.attachmentFiles=[],this.clientsPagination=new y.p({page:1,perPage:5,total:this.tableLength})}ngOnInit(){this.getConsumptionDetails()}updateSelectContainer(){this.selectanelContainer=".patient-autocomplete"}inventoryDisplayWithFn(t){return t?.name??""}onPatientSelection(t){}loadMoreProducts(){this.searchProductNameUseAutoComplete.loadMoreData(()=>{},()=>{})}getPageEvent(t){}receivedFileName(t){this.attachmentFiles.push(t),this.attachmentFiles=[...new Set(this.attachmentFiles)]}delete(t){this.removeIndex=this.attachmentFiles.findIndex(o=>{if(o.name==t)return o}),this.attachmentFiles.splice(this.removeIndex,1),this.cdr.markForCheck()}deny(){this.route.navigateByUrl("inventory/phleboconsumption")}getConsumptionDetails(){this.consumption_info={code:"1002A",created_at:"2023-08-12 10:15:35",consumed_by:"Shaw A",created_by:"Shaw A"},this.dataSource=[{id:"89a9kjd-23kjhjk",code:"102DF",name:"Tube",product:"899sd-sdff",price:"0.00",batch_no:"BAT9898",consumed_qty:"10",vendors:[{id:"23423dg-856634",code:"VNDA",name:"Vendor A"},{id:"23423dg-567567",code:"VNDB",name:"Vendor B"},{id:"43356678-856634",code:"VNDC",name:"Vendor C"}]}]}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(m.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-phlebo-consump-acknowledge"]],decls:82,vars:29,consts:[[1,"phlebo-consumption"],[1,"title","primary"],[1,"phlebo-consumption_header"],[1,"row"],[1,"col-lg-6","col-md-12","consumption"],[1,"consumption-detail"],[1,"title","label-name"],[1,"primary","label-value"],[1,"col-lg-6","col-md-12","consumption","second"],[1,"phlebo-consumption_header--input","hidden"],[1,"phlebo-consumption_header--input_form"],["appearance","outline",1,"agm-search_box"],["matInput","","placeholder","Search by Product Name",3,"formControl","matAutocomplete"],["autoActiveFirstOption","",1,"autocomplete-scroll",3,"displayWith","opened","optionSelected"],["auto","matAutocomplete"],["infiniteScroll","",1,"patient-autocomplete",3,"infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","fromRoot","immediateCheck","alwaysCallback","infiniteScrollContainer","scrolled"],[3,"value",4,"ngFor","ngForOf"],["matSuffix","","svgIcon","appSearch"],["matSuffix","",3,"vertical"],[1,"phlebo-consumption_table"],[1,"agm-table--container"],["mat-table","",1,"agm-table",3,"dataSource"],["matColumnDef","product_code"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","product_Name"],["matColumnDef","vendor"],["class","vendorField","mat-header-cell","",4,"matHeaderCellDef"],["class","vendor","mat-cell","",4,"matCellDef"],["matColumnDef","price"],["matColumnDef","batch_no"],["matColumnDef","consumed_qty"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page"],["paginator",""],[1,"phlebo-consumption_textarea"],[1,"phlebo-consumption_textarea--heading"],[1,"title"],[1,"phlebo-consumption_textarea--tag"],["appearance","outline",1,"primary","form-textArea"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","4","cdkAutosizeMaxRows","200","placeholder","Type here"],["autosize","cdkTextareaAutosize"],[1,"phlebo-consumption_attachment"],[1,"attachment"],[1,"attach-tag",3,"icon","fileName"],[1,"attachemnt-label"],[1,"primary"],["class","file-attachment",4,"ngFor","ngForOf"],["class","file-attachment",4,"ngIf"],[1,"phlebo-consumption_footer"],[1,"col-lg-offset-8","col-lg-4","col-sm-offset-6","col-sm-6","action-btn","col"],["mat-button","",1,"button-mat-all-cancel",3,"click"],["mat-button","",1,"button-mat-all"],[3,"value"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"vendorField"],["mat-cell","",1,"vendor"],["appearance","outline",1,"field-common","table-input"],["placeholder","Vendor"],["matSuffix","","svgIcon","appDownArrow"],["floatLabel","never","appearance","outline","tableInput","true",1,"agm-input-lg","discount-input"],["matInput","",3,"value"],["mat-header-row",""],["mat-row",""],[1,"file-attachment"],["svgIcon","appAttachmentDelete",1,"delete-icon",3,"click"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div")(2,"h3",1),e._uU(3,"Inventory Phlebo Consumption"),e.qZA()(),e.TgZ(4,"section",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"p",6),e._uU(9,"Name"),e.qZA(),e.TgZ(10,"p",7),e._uU(11),e.qZA()(),e.TgZ(12,"div",5)(13,"p",6),e._uU(14,"Consumption ID"),e.qZA(),e.TgZ(15,"p",7),e._uU(16),e.qZA()()(),e.TgZ(17,"div",8)(18,"div",5)(19,"p",6),e._uU(20,"Date"),e.qZA(),e.TgZ(21,"p",7),e._uU(22),e.ALo(23,"date"),e.qZA()()()(),e.TgZ(24,"div",9)(25,"form",10)(26,"mat-form-field",11),e._UZ(27,"input",12),e.TgZ(28,"mat-autocomplete",13,14),e.NdJ("opened",function(){return o.updateSelectContainer()})("optionSelected",function(r){return o.onPatientSelection(r)}),e.TgZ(30,"div",15),e.NdJ("scrolled",function(){return o.loadMoreProducts()}),e.YNc(31,tc,2,2,"mat-option",16),e.qZA()(),e._UZ(32,"mat-icon",17)(33,"mat-divider",18),e.qZA()()()(),e.TgZ(34,"section",19)(35,"div",20)(36,"table",21),e.ynx(37,22),e.YNc(38,nc,2,0,"th",23),e.YNc(39,oc,2,1,"td",24),e.BQk(),e.ynx(40,25),e.YNc(41,ac,2,0,"th",23),e.YNc(42,ic,2,1,"td",24),e.BQk(),e.ynx(43,26),e.YNc(44,rc,2,0,"th",27),e.YNc(45,cc,5,1,"td",28),e.BQk(),e.ynx(46,29),e.YNc(47,lc,2,0,"th",23),e.YNc(48,pc,3,3,"td",24),e.BQk(),e.ynx(49,30),e.YNc(50,dc,2,0,"th",23),e.YNc(51,uc,2,1,"td",24),e.BQk(),e.ynx(52,31),e.YNc(53,mc,2,0,"th",27),e.YNc(54,hc,3,1,"td",24),e.BQk(),e.YNc(55,_c,1,0,"tr",32),e.YNc(56,fc,1,0,"tr",33),e.qZA(),e.TgZ(57,"mat-paginator",34,35),e.NdJ("page",function(r){return o.getPageEvent(r)}),e.qZA()()(),e.TgZ(59,"section",36)(60,"div",37)(61,"p",38),e._uU(62,"Remark"),e.qZA()(),e.TgZ(63,"div",39)(64,"mat-form-field",40),e._UZ(65,"textarea",41,42),e.qZA()()(),e.TgZ(67,"section",43)(68,"div",44)(69,"app-agm-add-attachment",45),e.NdJ("fileName",function(r){return o.receivedFileName(r)}),e.qZA(),e.TgZ(70,"div",46)(71,"p",47),e._uU(72,"Attachments"),e.qZA(),e.YNc(73,gc,4,1,"div",48),e.YNc(74,bc,2,0,"div",49),e.qZA()()(),e.TgZ(75,"footer",50)(76,"div",3)(77,"div",51)(78,"a",52),e.NdJ("click",function(){return o.deny()}),e._uU(79," Deny "),e.qZA(),e.TgZ(80,"button",53),e._uU(81,"Approve"),e.qZA()()()()()),2&t){const i=e.MAs(29);e.xp6(11),e.Oqu(o.consumption_info.consumed_by),e.xp6(5),e.Oqu(o.consumption_info.code),e.xp6(6),e.hij(" ",e.xi3(23,26,o.consumption_info.created_at,"dd/mm/yyyy hh:mm a")," "),e.xp6(5),e.Q6J("formControl",o.searchInput)("matAutocomplete",i),e.xp6(1),e.Q6J("displayWith",o.inventoryDisplayWithFn),e.xp6(2),e.Q6J("infiniteScrollDistance",1)("infiniteScrollThrottle",0)("scrollWindow",!1)("fromRoot",!0)("immediateCheck",!1)("alwaysCallback",!1)("infiniteScrollContainer",o.selectanelContainer),e.xp6(1),e.Q6J("ngForOf",o.searchProductNameUseAutoComplete.data),e.xp6(2),e.Q6J("vertical",!0),e.xp6(3),e.Q6J("dataSource",o.dataSource),e.xp6(19),e.Q6J("matHeaderRowDef",o.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns),e.xp6(1),e.Q6J("length",o.tableLength||0)("pageIndex",(o.clientsPagination.page||1)-1)("pageSize",o.clientsPagination.perPage)("pageSizeOptions",o.clientsPagination.paginationSizes)("showFirstLastButtons",!0),e.xp6(12),e.Q6J("icon","appVendorFile"),e.xp6(4),e.Q6J("ngForOf",o.attachmentFiles),e.xp6(1),e.Q6J("ngIf",!o.attachmentFiles.length)}},dependencies:[p.sg,p.O5,R.R,v.Hw,s._Y,s.Fj,s.JJ,s.JL,s.F,s.oH,N.XC,N.ZL,D.ey,O.IC,g.KE,g.R9,k.Nt,Y.d,J.gD,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,x.lW,x.zs,T.NW,E.O,p.uU,W.Q],styles:["app-phlebo-consumption .phlebo-consumption{padding:2.6em}  app-phlebo-consumption .phlebo-consumption_header{margin-top:4rem}  app-phlebo-consumption .phlebo-consumption_header .consumption{display:flex;justify-content:space-around}  app-phlebo-consumption .phlebo-consumption_header .consumption .consumption-detail{display:flex}  app-phlebo-consumption .phlebo-consumption_header .consumption .consumption-detail .label-name{margin-right:1rem;font-size:1.25rem}  app-phlebo-consumption .phlebo-consumption_header .consumption .consumption-detail .label-value{margin-top:.1rem}  app-phlebo-consumption .phlebo-consumption_header--input{margin-top:3rem;width:60%}  app-phlebo-consumption .phlebo-consumption_textarea{margin-top:2rem}  app-phlebo-consumption .phlebo-consumption_textarea .mat-form-field-appearance-outline .mat-form-field-outline{background-color:#e6ebee;border-radius:5px}  app-phlebo-consumption .phlebo-consumption_table .agm-table--container{margin-top:30px}  app-phlebo-consumption .phlebo-consumption_table .agm-table--container .mat-select-arrow-wrapper{display:none}  app-phlebo-consumption .phlebo-consumption_table .agm-table--container .mat-icon{-webkit-transform:scale(.5);transform:scale(.5)}  app-phlebo-consumption .phlebo-consumption_table .agm-table--container .mat-form-field{text-align:center}  app-phlebo-consumption .phlebo-consumption_table .agm-table--container .table-input{width:70%}  app-phlebo-consumption .phlebo-consumption_table .vendorField{width:5%!important}  app-phlebo-consumption .phlebo-consumption_textarea .form-textArea{width:100%}  app-phlebo-consumption .phlebo-consumption_textarea .mat-form-field-appearance-outline .mat-form-field-flex{background-color:#0003}  app-phlebo-consumption .phlebo-consumption_textarea .mat-form-field-appearance-outline .mat-form-field-outline{top:0em}  app-phlebo-consumption .phlebo-consumption_attachment .attachment{display:flex;margin:.5rem 1rem}  app-phlebo-consumption .phlebo-consumption_attachment .attachment .mat-icon{-webkit-transform:scale(2.3);transform:scale(2.3)}  app-phlebo-consumption .phlebo-consumption_attachment .attachment .attachemnt-label{padding-top:.3rem;padding-left:1rem}  app-phlebo-consumption .phlebo-consumption_attachment .attachment .attachemnt-label p{margin:0}  app-phlebo-consumption .phlebo-consumption_attachment .attachment .file-attachment{display:flex}  app-phlebo-consumption .phlebo-consumption_attachment .attachment .file-attachment .delete-icon{margin-left:.5rem;-webkit-transform:scale(1);transform:scale(1)}  app-phlebo-consumption .phlebo-consumption_footer .action-btn{display:flex;justify-content:space-between}  app-phlebo-consumption .phlebo-consumption_footer .action-btn .mat-button{width:45%;padding:.5em 0!important}@media (min-width: 1025px){  app-phlebo-consumption .phlebo-consumption__header{flex-direction:row}}@media only screen and (min-width: 769px) and (max-width: 1024px){  app-phlebo-consumption .phlebo-consumption_header{margin-top:4rem}  app-phlebo-consumption .phlebo-consumption_header .consumption{display:flex;justify-content:space-around}  app-phlebo-consumption .phlebo-consumption_header .consumption .consumption-detail{display:flex}  app-phlebo-consumption .phlebo-consumption_header--input{margin-top:3rem;width:80%}}@media only screen and (min-width: 481px) and (max-width: 768px){  app-phlebo-consumption .phlebo-consumption_header{margin-top:2rem}  app-phlebo-consumption .phlebo-consumption_header .consumption{display:flex;justify-content:space-between}  app-phlebo-consumption .phlebo-consumption_header .consumption .consumption-detail{display:flex}  app-phlebo-consumption .phlebo-consumption_header--input{margin-top:3rem;width:80%}}"],changeDetection:0}),n})();function qc(n,a){1&n&&(e.TgZ(0,"th",31),e._uU(1,"Vendor Name"),e.qZA())}function vc(n,a){if(1&n&&(e.TgZ(0,"td",32),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function Zc(n,a){1&n&&(e.TgZ(0,"th",31),e._uU(1,"Email Address"),e.qZA())}function xc(n,a){if(1&n&&(e.TgZ(0,"td",32),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(t.email)}}function yc(n,a){1&n&&(e.TgZ(0,"th",31),e._uU(1,"Mobile Number"),e.qZA())}function Tc(n,a){if(1&n&&(e.TgZ(0,"td",32),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.mobile_number," ")}}function wc(n,a){1&n&&(e.TgZ(0,"th",31),e._uU(1,"Status"),e.qZA())}function Ac(n,a){1&n&&(e.TgZ(0,"p",35),e._uU(1," Active "),e.qZA())}function kc(n,a){1&n&&(e.TgZ(0,"p",36),e._uU(1," Inactive "),e.qZA())}function Pc(n,a){if(1&n&&(e.TgZ(0,"td",32),e.YNc(1,Ac,2,0,"p",33),e.YNc(2,kc,2,0,"p",34),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",1==t.is_active),e.xp6(1),e.Q6J("ngIf",0==t.is_active)}}function Nc(n,a){1&n&&(e.TgZ(0,"th",31),e._uU(1,"Action"),e.qZA())}function Uc(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"td",32),e._UZ(1,"mat-icon",37),e.TgZ(2,"mat-icon",38),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.deletVendor(r.id))}),e._uU(3,"delete"),e.qZA()()}if(2&n){const t=a.$implicit;e.xp6(1),e.Q6J("routerLink","./"+t.id+"/edit")}}function Sc(n,a){1&n&&e._UZ(0,"tr",39)}function Dc(n,a){1&n&&e._UZ(0,"tr",40)}function Ic(n,a){1&n&&(e.TgZ(0,"div",41),e._uU(1,"No Data Available!"),e.qZA())}function Fc(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-paginator",42),e.NdJ("page",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.getPageEvent(i))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("length",t.vendorLength)("pageIndex",(t.VendorPagination.page||1)-1)("pageSize",t.VendorPagination.perPage)("pageSizeOptions",t.VendorPagination.paginationSizes)("showFirstLastButtons",!0)}}function Yc(n,a){1&n&&(e.TgZ(0,"div",43),e._UZ(1,"mat-spinner"),e.qZA())}let Rc=(()=>{class n{constructor(t,o,i,r){this.inventoryService=t,this.cdr=o,this.dialog=i,this.snackBbar=r,this.displayedColumns=["VendorName","EmailAddress","MobileNumber","Status","Action"],this.vendorList=[],this.dataSource=new c.by(this.vendorList),this.isEmpty=!1,this.spinner=!1,this.vendorSearch=new s.NI(""),this.payload={},this.VendorPagination=new y.p({page:1,perPage:5,total:this.vendorLength}),this.unsubscribe$=new S.x,this.searchVendor()}ngOnInit(){this.getVendorList()}getVendorList(){this.spinner=!0,this.cdr.markForCheck(),this.inventoryService.getVendorsbypagniation(this.VendorPagination.perPage,this.VendorPagination.page,this.payload).subscribe(t=>{this.dataSource=t?.data?.results,this.vendorLength=t?.data?.pagination?.total,this.isEmpty=0==this.vendorLength,this.spinner=!1,this.cdr.markForCheck()},t=>{let o=t?.error?.error;this.spinner=!1,this.snackBbar.open(o,"close"),this.cdr.markForCheck()})}getPageEvent(t){this.VendorPagination.doPagination(t)}searchVendor(){this.vendorSearch.valueChanges.pipe((0,V.b)(400),(0,$.R)(this.unsubscribe$),(0,j.w)(t=>(this.spinner=!0,this.cdr.markForCheck(),this.payload={filter:{search:t,search_by:"name,mobile_number"}},t||(this.payload={}),this.inventoryService.getVendorsbypagniation(this.VendorPagination.perPage,this.VendorPagination.page,this.payload)))).subscribe(t=>{this.dataSource=t?.data?.results,this.vendorLength=t?.data?.pagination?.total,this.isEmpty=0==this.vendorLength,this.spinner=!1,this.cdr.markForCheck()},t=>{this.spinner=!1,this.cdr.markForCheck()})}deletVendor(t){this.confirmConsDialog=this.dialog.open(F.$,{width:"40%",height:"auto",disableClose:!1,data:{message:"Are you sure want to Delete?",buttonText:{ok:"Delete",cancel:"Cancel"}}}),this.confirmConsDialog.afterClosed().subscribe(o=>{o&&(this.spinner=!0,this.cdr.markForCheck(),this.inventoryService.deleteVendor(t).subscribe(i=>{"success"===i.status&&(this.snackBbar.open(i.message,""),this.spinner=!1,this.getVendorList(),this.cdr.markForCheck())},i=>{let r="Something went wrong";i?.error?.error&&(r=i?.error?.error),this.snackBbar.open(r,"close"),this.spinner=!1,this.cdr.markForCheck()}))})}bulkUpload(t){this.spinner=!0;for(var o=0;o<t.target.files.length;o++){const i=new FormData;i.append("file",t.target.files[o]),i.append("upload_type","bulkUpload"),this.inventoryService.bulkUploadOrganisation(i).subscribe(r=>{"success"===r.status&&(this.spinner=!1,"success"===r.status&&this.snackBbar.open(r.message,""),this.cdr.markForCheck())},r=>{this.snackBbar.open("Please upload valid file",""),this.cdr.markForCheck()})}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Z),e.Y36(e.sBO),e.Y36(C.uw),e.Y36(A.c))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-vendor-list"]],decls:51,vars:8,consts:[[1,"vendor-list"],[1,"title","primary"],[1,""],[1,"row"],[1,"col-xxl-8","col-xl-7","col-lg-7","col-sm-12"],["appearance","outline",1,"agm-search_box","primary"],["matInput","","placeholder","Search By Name, Phone Number",3,"formControl"],["matSuffix","","svgIcon","appSearch"],["matSuffix","",3,"vertical"],[1,"col-xl-5","col-lg-5","col-sm-12","col-xs-12"],[1,"action-buttons"],[1,"btn"],["routerLink","/inventory/vendor/create",1,"btn-icons"],["svgIcon","appAddvendor"],[1,"btn-icons",3,"click"],["svgIcon","appBulkUpload"],["type","file","accept",".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel  .xlt, .xltm,.xltx,.xlsm,.xls,.xlsx",1,"uploadfile",3,"change"],["bulkupload",""],["mat-table","",1,"agm-table",3,"dataSource"],["matColumnDef","VendorName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","EmailAddress"],["matColumnDef","MobileNumber"],["matColumnDef","Status"],["matColumnDef","Action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","empty-row",4,"ngIf"],[3,"length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page",4,"ngIf"],["class","spinner",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["class","agm-table--status active",4,"ngIf"],["class","agm-table--status inactive",4,"ngIf"],[1,"agm-table--status","active"],[1,"agm-table--status","inactive"],["svgIcon","appEdit",3,"routerLink"],["svgIcon","appDelete",3,"click"],["mat-header-row",""],["mat-row",""],[1,"empty-row"],[3,"length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page"],[1,"spinner"]],template:function(t,o){if(1&t){const i=e.EpF();e.TgZ(0,"section",0)(1,"div")(2,"h3",1),e._uU(3,"Vendor"),e.qZA()(),e.TgZ(4,"section",2)(5,"div",3)(6,"div",4)(7,"mat-form-field",5),e._UZ(8,"input",6)(9,"mat-icon",7)(10,"mat-divider",8),e.qZA()(),e.TgZ(11,"div",9)(12,"div",10)(13,"div",11)(14,"button",12)(15,"span")(16,"b"),e._uU(17," Add New "),e.qZA()(),e.TgZ(18,"div"),e._UZ(19,"mat-icon",13),e.qZA()()(),e.TgZ(20,"div",11)(21,"button",14),e.NdJ("click",function(){e.CHM(i);const l=e.MAs(28);return e.KtG(l.click())}),e.TgZ(22,"span")(23,"b"),e._uU(24," Bulk Upload "),e.qZA()(),e.TgZ(25,"div"),e._UZ(26,"mat-icon",15),e.qZA()()(),e.TgZ(27,"input",16,17),e.NdJ("change",function(l){return o.bulkUpload(l)}),e.qZA()()()()(),e.TgZ(29,"section")(30,"table",18),e.ynx(31,19),e.YNc(32,qc,2,0,"th",20),e.YNc(33,vc,2,1,"td",21),e.BQk(),e.ynx(34,22),e.YNc(35,Zc,2,0,"th",20),e.YNc(36,xc,2,1,"td",21),e.BQk(),e.ynx(37,23),e.YNc(38,yc,2,0,"th",20),e.YNc(39,Tc,2,1,"td",21),e.BQk(),e.ynx(40,24),e.YNc(41,wc,2,0,"th",20),e.YNc(42,Pc,3,2,"td",21),e.BQk(),e.ynx(43,25),e.YNc(44,Nc,2,0,"th",20),e.YNc(45,Uc,4,1,"td",21),e.BQk(),e.YNc(46,Sc,1,0,"tr",26),e.YNc(47,Dc,1,0,"tr",27),e.qZA(),e.YNc(48,Ic,2,0,"div",28),e.YNc(49,Fc,1,5,"mat-paginator",29),e.qZA()(),e.YNc(50,Yc,2,0,"div",30)}2&t&&(e.xp6(8),e.Q6J("formControl",o.vendorSearch),e.xp6(2),e.Q6J("vertical",!0),e.xp6(20),e.Q6J("dataSource",o.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",o.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns),e.xp6(1),e.Q6J("ngIf",o.isEmpty),e.xp6(1),e.Q6J("ngIf",!o.isEmpty),e.xp6(1),e.Q6J("ngIf",o.spinner))},dependencies:[p.O5,v.Hw,s.Fj,s.JJ,s.oH,g.KE,g.R9,k.Nt,Y.d,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,w.Ou,T.NW,m.rH],styles:["app-vendor-list .vendor-list{margin:2.6em}  app-vendor-list .btn{margin:0 10px}  app-vendor-list .uploadfile{display:none}"],changeDetection:0}),n})();function Qc(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Name is Required "),e.qZA())}function Jc(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Mobile Number is Required "),e.qZA())}function Oc(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Email is Required "),e.qZA())}function Mc(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Enter valid Email "),e.qZA())}function Bc(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Address is Required "),e.qZA())}function Lc(n,a){if(1&n&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.s9C("value",t.key),e.xp6(1),e.hij(" ",t.value," ")}}function Ec(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Select City from list "),e.qZA())}function Vc(n,a){if(1&n&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.s9C("value",t.key),e.xp6(1),e.hij(" ",t.value," ")}}function $c(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Select District from list "),e.qZA())}function jc(n,a){if(1&n&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.s9C("value",t.key),e.xp6(1),e.hij(" ",t.value," ")}}function zc(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Select State from list "),e.qZA())}function Hc(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Pincode is Required "),e.qZA())}function Gc(n,a){if(1&n&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.s9C("value",t.key),e.xp6(1),e.hij(" ",t.value," ")}}function Kc(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Select Country from list "),e.qZA())}let Wc=(()=>{class n{constructor(t,o,i){this.inventoryService=t,this.router=o,this.snackBar=i,this.cities=[{key:"chennai",value:"Chennai"},{key:"trichy",value:"Trichy"}],this.districts=[{key:"chennai",value:"Chennai"},{key:"trichy",value:"Trichy"}],this.countries=[{key:"india",value:"India"}],this.state=[{key:"tamilnadu",value:"Tamilnadu"},{key:"kerala",value:"Kerala"},{key:"karnataka",value:"Karnataka"},{key:"andhrapradesh",value:"Andhra Pradesh"}],this.vendorForm=new s.cw({name:new s.NI(null,[s.kI.required]),mobile_number:new s.NI(null,[s.kI.required]),email:new s.NI(null,[s.kI.required,s.kI.pattern(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)]),alt_number:new s.NI(null),address:new s.NI(null,[s.kI.required]),city:new s.NI(null,[s.kI.required]),district:new s.NI(null,[s.kI.required]),state:new s.NI(null,[s.kI.required]),pincode:new s.NI(null,[s.kI.required]),country:new s.NI(null,[s.kI.required])})}ngOnInit(){}onSubmit(t){if(this.vendorForm.valid){let o={...this.vendorForm.value},i=("0000"+Math.random()).slice(-2),r=("0000"+Math.random()).slice(-2),l=("0000"+Math.random()).slice(-2),u=("0000"+Math.random()).slice(-2),_=("00000"+Math.random()).slice(-1),b=Number(i+r+l+u+_);o.vendor_code=b.toString(),o.pincode=Number(o.pincode),o.alt_number=null===o.alt_number?o.mobile_number:o.alt_number,console.log(o),this.inventoryService.createVendors(o).subscribe(f=>{this.router.navigateByUrl("/inventory/vendor"),this.snackBar.open(f.message,"close")},f=>{let q=f?.error?.message;this.snackBar.open(q,"close")})}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Z),e.Y36(m.F0),e.Y36(A.c))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-vendor-create"]],decls:84,vars:15,consts:[[1,"vendor-create"],[1,"primary"],[1,"vendor-form",3,"formGroup","ngSubmit"],[1,"data-container-common"],[1,"data-container-common__inputField"],[1,"row","topRow"],[1,"col-lg-4","col-sm-6","col-xs-12","inputRow"],[1,"primary","required"],["appearance","outline",1,"input-mat-all"],["type","text","matInput","","formControlName","name","placeholder","Name","autocomplete","off"],[4,"ngIf"],["type","text","matInput","","formControlName","mobile_number","minlength","10","length","10","placeholder","Mobile Number","autocomplete","off","appNumbersOnly",""],["type","text","matInput","","formControlName","email","placeholder","Email","autocomplete","off"],[1,"row"],["matInput","","type","text","formControlName","alt_number","placeholder","Alternate Number","minlength","10","length","10","autocomplete","off","appNumbersOnly",""],["formControlName","address","matInput","","placeholder","Address"],["appearance","outline",1,"dropdown-mat-all"],["formControlName","city","placeholder","Select city"],[3,"value",4,"ngFor","ngForOf"],["svgIcon","appDownArrow","matSuffix",""],["formControlName","district","placeholder","District"],["svgIcon","appDownArrow","matSuffix","",1,"mat-icon"],["formControlName","state","placeholder","State"],["formControlName","pincode","matInput","","placeholder","Pincode","minlength","6","length","6","autocomplete","off","appNumbersOnly",""],["formControlName","country","placeholder","Select Country"],[1,"form-action_btn"],["type","button","routerLink","/inventory/vendor","mat-button","",1,"button-mat-all-cancel"],["type","submit","mat-button","",1,"button-mat-all"],[3,"value"]],template:function(t,o){if(1&t&&(e.TgZ(0,"section",0)(1,"div")(2,"p",1),e._uU(3,"Create New Vendor"),e.qZA()(),e.TgZ(4,"form",2),e.NdJ("ngSubmit",function(r){return o.onSubmit(r)}),e.TgZ(5,"div",3)(6,"section",4)(7,"div",5)(8,"div",6)(9,"span",7),e._uU(10,"Name"),e.qZA(),e.TgZ(11,"mat-form-field",8),e._UZ(12,"input",9),e.YNc(13,Qc,2,0,"mat-error",10),e.qZA()(),e.TgZ(14,"div",6)(15,"span",7),e._uU(16,"Mobile Number"),e.qZA(),e.TgZ(17,"mat-form-field",8),e._UZ(18,"input",11),e.YNc(19,Jc,2,0,"mat-error",10),e.qZA()(),e.TgZ(20,"div",6)(21,"span",7),e._uU(22,"Email"),e.qZA(),e.TgZ(23,"mat-form-field",8),e._UZ(24,"input",12),e.YNc(25,Oc,2,0,"mat-error",10),e.YNc(26,Mc,2,0,"mat-error",10),e.qZA()()(),e.TgZ(27,"div",13)(28,"div",6)(29,"span",1),e._uU(30,"Alternate Number"),e.qZA(),e.TgZ(31,"mat-form-field",8),e._UZ(32,"input",14),e.qZA()(),e.TgZ(33,"div",6)(34,"span",7),e._uU(35,"Address"),e.qZA(),e.TgZ(36,"mat-form-field",8),e._UZ(37,"input",15),e.YNc(38,Bc,2,0,"mat-error",10),e.qZA()(),e.TgZ(39,"div",6)(40,"span",7),e._uU(41,"City"),e.qZA(),e.TgZ(42,"mat-form-field",16)(43,"mat-select",17),e.YNc(44,Lc,2,2,"mat-option",18),e.qZA(),e._UZ(45,"mat-icon",19),e.YNc(46,Ec,2,0,"mat-error",10),e.qZA()()(),e.TgZ(47,"div",13)(48,"div",6)(49,"span",7),e._uU(50,"District"),e.qZA(),e.TgZ(51,"mat-form-field",16)(52,"mat-select",20),e.YNc(53,Vc,2,2,"mat-option",18),e.qZA(),e._UZ(54,"mat-icon",21),e.YNc(55,$c,2,0,"mat-error",10),e.qZA()(),e.TgZ(56,"div",6)(57,"span",7),e._uU(58,"State"),e.qZA(),e.TgZ(59,"mat-form-field",16)(60,"mat-select",22),e.YNc(61,jc,2,2,"mat-option",18),e.qZA(),e._UZ(62,"mat-icon",19),e.YNc(63,zc,2,0,"mat-error",10),e.qZA()(),e.TgZ(64,"div",6)(65,"span",7),e._uU(66,"Pincode"),e.qZA(),e.TgZ(67,"mat-form-field",8),e._UZ(68,"input",23),e.YNc(69,Hc,2,0,"mat-error",10),e.qZA()()(),e.TgZ(70,"div",13)(71,"div",6)(72,"span",7),e._uU(73,"Country"),e.qZA(),e.TgZ(74,"mat-form-field",16)(75,"mat-select",24),e.YNc(76,Gc,2,2,"mat-option",18),e.qZA(),e._UZ(77,"mat-icon",19),e.YNc(78,Kc,2,0,"mat-error",10),e.qZA()()()()(),e.TgZ(79,"div",25)(80,"button",26),e._uU(81," Cancel "),e.qZA(),e.TgZ(82,"button",27),e._uU(83,"Register"),e.qZA()()()()),2&t){let i,r,l,u,_,b,f,q,I,U;e.xp6(4),e.Q6J("formGroup",o.vendorForm),e.xp6(9),e.Q6J("ngIf",null==(i=o.vendorForm.get("name"))||null==i.errors?null:i.errors.required),e.xp6(6),e.Q6J("ngIf",null==(r=o.vendorForm.get("mobile_number"))||null==r.errors?null:r.errors.required),e.xp6(6),e.Q6J("ngIf",null==(l=o.vendorForm.get("email"))||null==l.errors?null:l.errors.required),e.xp6(1),e.Q6J("ngIf",null==(u=o.vendorForm.get("email"))||null==u.errors?null:u.errors.patten),e.xp6(12),e.Q6J("ngIf",null==(_=o.vendorForm.get("address"))||null==_.errors?null:_.errors.required),e.xp6(6),e.Q6J("ngForOf",o.cities),e.xp6(2),e.Q6J("ngIf",null==(b=o.vendorForm.get("city"))||null==b.errors?null:b.errors.required),e.xp6(7),e.Q6J("ngForOf",o.districts),e.xp6(2),e.Q6J("ngIf",null==(f=o.vendorForm.get("district"))||null==f.errors?null:f.errors.required),e.xp6(6),e.Q6J("ngForOf",o.state),e.xp6(2),e.Q6J("ngIf",null==(q=o.vendorForm.get("state"))||null==q.errors?null:q.errors.required),e.xp6(6),e.Q6J("ngIf",null==(I=o.vendorForm.get("pincode"))||null==I.errors?null:I.errors.required),e.xp6(7),e.Q6J("ngForOf",o.countries),e.xp6(2),e.Q6J("ngIf",null==(U=o.vendorForm.get("country"))||null==U.errors?null:U.errors.required)}},dependencies:[p.sg,p.O5,v.Hw,s._Y,s.Fj,s.JJ,s.JL,s.wO,s.sg,s.u,D.ey,g.TO,g.KE,g.R9,k.Nt,J.gD,x.lW,L.X,m.rH],styles:["app-vendor-create .vendor-create{margin:2.6rem}  app-vendor-create .inputRow{display:flex;flex-direction:column}  app-vendor-create .vendor-form{display:flex;justify-content:center;align-items:center;flex-direction:column}  app-vendor-create .data-container-common{width:60%}  app-vendor-create .form-action_btn{width:60%;display:flex;margin-top:50px;justify-content:end}  app-vendor-create .button-mat-all-cancel{margin-right:20px}  app-vendor-create .mat-form-field-appearance-outline .mat-form-field-infix{padding:5px!important}  app-vendor-create .dropdown-mat-all mat-icon{-webkit-transform:scale(.7);transform:scale(.7)}"],changeDetection:0}),n})();function Xc(n,a){if(1&n&&(e.TgZ(0,"a",9,10),e._uU(2),e.qZA()),2&n){const t=a.$implicit,o=e.oxw();e.Q6J("routerLink",t.link)("active",t.index===o.selectedIndexValue),e.xp6(2),e.hij(" ",t.label," ")}}function el(n,a){if(1&n&&(e.TgZ(0,"button",11)(1,"span")(2,"b"),e._uU(3," Add New "),e.qZA()(),e.TgZ(4,"div"),e._UZ(5,"mat-icon",12),e.qZA()()),2&n){const t=e.oxw();e.Q6J("routerLink","/inventory/vendor/"+t.vendorId+"/map-to-product")}}let tl=(()=>{class n{constructor(t,o){this.actRoute=t,this.router=o,this.navLinks=[],this.selectedIndexValue=0,this.vendorId=this.actRoute.snapshot.paramMap.get("id"),this.navLinks=[{label:"Details",link:`/inventory/vendor/${this.vendorId}/edit`,index:0},{label:"Map Product",link:`/inventory/vendor/${this.vendorId}/edit/productlist`,index:1}]}ngOnInit(){this.selectedIndexValue=0,this.selectedIndexValue=this.navLinks.indexOf(this.navLinks.find(t=>t.link===this.router.url)),this.router.events.subscribe(t=>{this.selectedIndexValue=this.navLinks.indexOf(this.navLinks.find(o=>o.link===this.router.url))})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.gz),e.Y36(m.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-vendor-edit"]],decls:10,vars:2,consts:[[1,"tabs"],[1,"agm-tab"],["mat-tab-nav-bar","",1,""],["mat-tab-link","","routerLinkActive","",3,"routerLink","active",4,"ngFor","ngForOf"],[1,"col-xl-5","col-lg-5","col-sm-12","col-xs-12"],[1,"action-buttons"],[1,"btn"],["class","btn-icons",3,"routerLink",4,"ngIf"],[1,"children"],["mat-tab-link","","routerLinkActive","",3,"routerLink","active"],["rla","routerLinkActive"],[1,"btn-icons",3,"routerLink"],["svgIcon","appEditWhite"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"nav",2),e.YNc(3,Xc,3,3,"a",3),e.qZA()(),e.TgZ(4,"div",4)(5,"div",5)(6,"div",6),e.YNc(7,el,6,1,"button",7),e.qZA()()()(),e.TgZ(8,"div",8),e._UZ(9,"router-outlet"),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngForOf",o.navLinks),e.xp6(4),e.Q6J("ngIf",1==o.selectedIndexValue))},dependencies:[p.sg,p.O5,v.Hw,ae.BU,ae.Nj,m.lC,m.rH,m.yS,m.Od],styles:["app-vendor-edit{padding:1rem}.agm-tab[_ngcontent-%COMP%]{width:100%;margin-top:1.3rem}.tabs[_ngcontent-%COMP%]{display:flex;flex-direction:row;border-bottom:1px solid rgba(6,70,98,.15);padding-left:1rem}.col-xs-12[_ngcontent-%COMP%]{border-bottom:1px solid rgba(6,70,98,.15)}.children[_ngcontent-%COMP%]{margin-left:1rem}.agm-tab[_ngcontent-%COMP%]   .mat-tab-label-active[_ngcontent-%COMP%]{text-decoration:none}a[_ngcontent-%COMP%]:hover, a[_ngcontent-%COMP%]:focus{text-decoration:none}"],changeDetection:0}),n})();function nl(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.onSaveProductMapping(i))}),e.TgZ(1,"span"),e._uU(2,"Save Products"),e.qZA(),e.TgZ(3,"div"),e._UZ(4,"mat-icon",15),e.qZA()()}}function ol(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij("(",t.selTBDataSource.data.length,")")}}function al(n,a){1&n&&(e.TgZ(0,"th",34),e._uU(1,"Product Id"),e.qZA())}function il(n,a){if(1&n&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(t.code)}}function rl(n,a){1&n&&(e.TgZ(0,"th",34),e._uU(1,"Product Name"),e.qZA())}function sl(n,a){if(1&n&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(t.name)}}function cl(n,a){1&n&&(e.TgZ(0,"th",34),e._uU(1,"Type"),e.qZA())}function ll(n,a){if(1&n&&(e.TgZ(0,"td",35),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.type)," ")}}function pl(n,a){1&n&&(e.TgZ(0,"th",34),e._uU(1,"Department"),e.qZA())}function dl(n,a){if(1&n&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",null==t.departments[0]?null:t.departments[0].name," ")}}function ul(n,a){1&n&&(e.TgZ(0,"th",34),e._uU(1,"Price"),e.qZA())}function ml(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"td",35)(1,"mat-form-field",36)(2,"span",37),e._uU(3,"\u20b9"),e.qZA(),e.TgZ(4,"input",38),e.NdJ("keyup",function(i){const l=e.CHM(t).$implicit,u=e.oxw(2);return e.KtG(u.onChangeProductPrice(i,l))}),e.qZA(),e.TgZ(5,"span",39),e._uU(6),e.qZA()()()}if(2&n){const t=a.$implicit;let o;e.xp6(4),e.Q6J("value",null!==(o=t.price)&&void 0!==o?o:0),e.xp6(2),e.hij("/",null==t.unit?null:t.unit.name,"")}}function hl(n,a){1&n&&(e.TgZ(0,"th",34),e._uU(1,"Action"),e.qZA())}function _l(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"td",35)(1,"mat-icon",40),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.onDeleteProduct(r))}),e._uU(2,"delete"),e.qZA()()}}function fl(n,a){1&n&&e._UZ(0,"tr",41)}function gl(n,a){1&n&&e._UZ(0,"tr",42)}function bl(n,a){1&n&&(e.TgZ(0,"div",43),e._uU(1," No Data Available! "),e.qZA())}function Cl(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"section",16)(1,"div",1)(2,"div",2)(3,"button",17),e.NdJ("click",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.onShowProductSelection(i))}),e.TgZ(4,"mat-icon"),e._uU(5,"add_circle"),e.qZA(),e._uU(6," Add More Products "),e.qZA(),e.TgZ(7,"h3",18)(8,"div",19),e._uU(9," Product Selected "),e.YNc(10,ol,2,1,"span",20),e._uU(11,": "),e.qZA()()()(),e.TgZ(12,"div",21)(13,"table",22),e.ynx(14,23),e.YNc(15,al,2,0,"th",24),e.YNc(16,il,2,1,"td",25),e.BQk(),e.ynx(17,26),e.YNc(18,rl,2,0,"th",24),e.YNc(19,sl,2,1,"td",25),e.BQk(),e.ynx(20,27),e.YNc(21,cl,2,0,"th",24),e.YNc(22,ll,3,3,"td",25),e.BQk(),e.ynx(23,28),e.YNc(24,pl,2,0,"th",24),e.YNc(25,dl,2,1,"td",25),e.BQk(),e.ynx(26,29),e.YNc(27,ul,2,0,"th",24),e.YNc(28,ml,7,2,"td",25),e.BQk(),e.ynx(29,30),e.YNc(30,hl,2,0,"th",24),e.YNc(31,_l,3,0,"td",25),e.BQk(),e.YNc(32,fl,1,0,"tr",31),e.YNc(33,gl,1,0,"tr",32),e.qZA(),e.YNc(34,bl,2,0,"div",33),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(10),e.Q6J("ngIf",t.selTBDataSource.data.length),e.xp6(3),e.Q6J("dataSource",t.selTBDataSource),e.xp6(19),e.Q6J("matHeaderRowDef",t.selectedProDisplayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.selectedProDisplayedColumns),e.xp6(1),e.Q6J("ngIf",!t.selTBDataSource.data.length)}}function ql(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onShowProductSelection(i))}),e.TgZ(1,"div",48)(2,"span"),e._uU(3),e.qZA()(),e.TgZ(4,"mat-icon"),e._uU(5,"visibility"),e.qZA(),e._uU(6," View Selected Products "),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(3),e.Oqu(t.selTBDataSource.data.length)}}function vl(n,a){1&n&&(e.TgZ(0,"th",34),e._uU(1,"Product Id"),e.qZA())}function Zl(n,a){if(1&n&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(t.code)}}function xl(n,a){1&n&&(e.TgZ(0,"th",34),e._uU(1,"Product Name"),e.qZA())}function yl(n,a){if(1&n&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(t.name)}}function Tl(n,a){1&n&&(e.TgZ(0,"th",34),e._uU(1,"Department"),e.qZA())}function wl(n,a){if(1&n&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",null==t.departments[0]?null:t.departments[0].name," ")}}function Al(n,a){1&n&&(e.TgZ(0,"th",34),e._uU(1,"Department"),e.qZA())}function kl(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"td",35)(1,"button",49),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.onProductSelection(r))}),e.TgZ(2,"mat-icon"),e._uU(3,"check"),e.qZA(),e.TgZ(4,"span"),e._uU(5,"Select"),e.qZA()()()}if(2&n){const t=a.$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("disabled",o.isProductMapped(t))}}function Pl(n,a){1&n&&e._UZ(0,"tr",41)}function Nl(n,a){1&n&&e._UZ(0,"tr",42)}function Ul(n,a){1&n&&(e.TgZ(0,"div",43),e._uU(1,"No Data Available!"),e.qZA())}function Sl(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"section",44)(1,"div",1)(2,"div",2),e.YNc(3,ql,7,1,"button",45),e.TgZ(4,"h3",18),e._uU(5,"Choose Products:"),e.qZA()()(),e.TgZ(6,"div",21)(7,"table",22),e.ynx(8,23),e.YNc(9,vl,2,0,"th",24),e.YNc(10,Zl,2,1,"td",25),e.BQk(),e.ynx(11,26),e.YNc(12,xl,2,0,"th",24),e.YNc(13,yl,2,1,"td",25),e.BQk(),e.ynx(14,28),e.YNc(15,Tl,2,0,"th",24),e.YNc(16,wl,2,1,"td",25),e.BQk(),e.ynx(17,30),e.YNc(18,Al,2,0,"th",24),e.YNc(19,kl,6,1,"td",25),e.BQk(),e.YNc(20,Pl,1,0,"tr",31),e.YNc(21,Nl,1,0,"tr",32),e.qZA(),e.YNc(22,Ul,2,0,"div",33),e.TgZ(23,"mat-paginator",46),e.NdJ("page",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.getPageEvent(i))}),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("ngIf",t.selTBDataSource.data.length),e.xp6(4),e.Q6J("dataSource",t.dataSource),e.xp6(13),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(1),e.Q6J("ngIf",t.isEmpty),e.xp6(1),e.Q6J("length",t.totalLength)("pageIndex",(t.productPagination.page||1)-1)("pageSize",t.productPagination.perPage)("pageSizeOptions",t.productPagination.paginationSizes)("showFirstLastButtons",!0)}}function Dl(n,a){1&n&&(e.TgZ(0,"div",50),e._UZ(1,"mat-spinner"),e.qZA())}let Il=(()=>{class n{constructor(t,o,i,r,l,u,_){this.cdr=t,this.dialog=o,this.snackBbar=i,this.invService=r,this.router=l,this.actRoute=u,this.cdRef=_,this.agamFilters=[],this.spinner=!1,this.searchStr=new s.NI(""),this.seachPayload={},this.searchBy=[],this.unsubscribe$=new S.x,this.isEmpty=!1,this.showSelected=!1,this.selDataSource=[],this.existingProducts=[],this.displayedColumns=["code","name","department","action"],this.selectedProDisplayedColumns=["code","name","type","department","price","action"],this.dataSource=new c.by,this.selTBDataSource=new c.by,this.totalLength=0,this.payload={},this.productPagination=new y.p({page:0,perPage:10,total:this.totalLength}),this.vendor_id="",this.save_zeroprice_product=!0,this.redirectUrl="",this.vendor_id=this.actRoute.snapshot.paramMap.get("id"),this.redirectUrl="inventory/vendor/"+this.vendor_id+"/edit/productlist"}ngOnInit(){this.loadFilters(),this.getProducts(),this.searchListener()}searchListener(){this.searchStr.valueChanges.pipe((0,V.b)(400),(0,$.R)(this.unsubscribe$),(0,j.w)(t=>(this.spinner=!0,this.productPagination.page=1,this.seachPayload={filter:{search:t,search_by:"name",departments:{name:this.departmentName}}},this.cdr.markForCheck(),""==this.seachPayload.filter.search&&(delete this.seachPayload.filter.search,delete this.seachPayload.filter.search_by),(null==this.departmentName||""==this.departmentName)&&delete this.seachPayload.filter.department,this.invService.getproductpagination(this.productPagination.perPage,this.productPagination.page,this.seachPayload)))).subscribe(t=>{this.dataSource.data=t.data.results,this.totalLength=t.data.pagination.total,this.isEmpty=!1,0==this.totalLength&&(this.isEmpty=!0),this.spinner=!1,this.cdr.markForCheck()},t=>{let o=t?.error?.message;t?.error?.message||(o="Something went wrong"),this.isEmpty=!0,this.snackBbar.open(o,"close"),this.spinner=!1,this.cdr.markForCheck()})}loadFilters(){this.spinner=!1,this.agamFilters=[{type:"department",name:"Department",data:[{id:"Chennai",name:"chennai"},{id:"Permablur",name:"permablur"},{id:"Trichy",name:"trichy"},{id:"Kanchipuram",name:"kanchipuram"}],lableKey:"name"}]}filter(){this.spinner=!0,this.cdr.markForCheck();let o="",i=!1;0!=Object.keys(this.seachPayload).length?(o=this.seachPayload.filter.search,(""!=o||null!=o)&&(i=!0)):i=!1,this.seachPayload=i?{filter:{search:this.seachPayload.filter.search,search_by:"name",department:{name:this.departmentName}}}:{filter:{department:{city:this.departmentName}}},""==this.seachPayload.filter.search&&(delete this.seachPayload.filter.search,delete this.seachPayload.filter.search_by),(null==this.departmentName||""==this.departmentName)&&delete this.seachPayload.filter.department,this.invService.getproductpagination(this.productPagination.page,this.productPagination.perPage,this.seachPayload).subscribe({next:r=>{this.totalLength=r.data.pagination.total,this.dataSource.data=r.data.results,this.isEmpty=!1,0==this.dataSource.data.length&&(this.isEmpty=!0),this.spinner=!1,this.cdr.markForCheck()},error:r=>{let l="Something went wrong";r?.error?.message?l=r?.error?.message:r?.error?.error&&(l=r?.error?.error),this.snackBbar.open(l,"close"),this.isEmpty=!0,this.spinner=!1,this.cdr.markForCheck()}})}handleFilter(t){"department"===t.type&&(this.departmentName=t.selected?.option?.value?.name)}handleSearch(){this.filter()}resetFilter(){this.searchStr.setValue(""),this.departmentName="",this.getProducts()}getProducts(){this.spinner=!0,this.cdr.markForCheck(),this.invService.getproductpagination(this.productPagination.perPage,this.productPagination.page,this.seachPayload).subscribe({next:t=>{this.totalLength=t.data.pagination.total,this.dataSource.data=t.data.results,this.isEmpty=!1,0==this.dataSource.data.length&&(this.isEmpty=!0),this.spinner=!1,this.cdr.markForCheck()},error:t=>{let o="Something went wrong";t?.error?.message?o=t?.error?.message:t?.error?.error&&(o=t?.error?.error),this.isEmpty=!0,this.snackBbar.open(o,"close"),this.spinner=!1,this.cdr.markForCheck()}})}onChangeProductPrice(t,o){let i=this.selTBDataSource.data.findIndex(r=>r.id===o.id);this.selTBDataSource.data[i].price=Number(t.target.value)}onSaveProductMapping(t){if(this.selTBDataSource.data.length>0){let o={product_details:[]};this.selTBDataSource.data.forEach((i,r)=>{let l={product:i.id,price:i.price.toString(),price_unit:i.unit.id};0==i.price&&(this.save_zeroprice_product=!1),o.product_details.push(l)}),this.save_zeroprice_product?this.save_zeroprice_product&&this.saveProductMapping(o):this.dialog.open(F.$,{width:"40%",height:"auto",disableClose:!1,data:{message:"Some product price are ZERO. Still you want to continue?",buttonText:{ok:"Confirm",cancel:"Cancel"}}}).afterClosed().subscribe(r=>{r?(this.saveProductMapping(o),this.cdRef.markForCheck()):this.showSelected=!0})}}saveProductMapping(t){t.product_details.length>0&&(this.spinner=!0,this.invService.saveVendorProductMapping(this.vendor_id,t).subscribe({next:o=>{this.spinner=!1,this.snackBbar.open(o.message,""),"success"==o.status&&(this.selTBDataSource.data=[],this.router.navigateByUrl(this.redirectUrl)),this.cdRef.markForCheck()},error:o=>{this.spinner=!1;let i="Something went wrong";o?.error?.error?i=o.error.error:o?.error?.message&&(i=o.error.message),this.snackBbar.open(i,""),this.cdRef.markForCheck()}}))}onDeleteProduct(t){this.dialog.open(F.$,{width:"40%",height:"auto",disableClose:!1,data:{message:"Are you sure want to Delete - "+t.name+"?",buttonText:{ok:"Delete",cancel:"Cancel"}}}).afterClosed().subscribe(i=>{i&&(this.selTBDataSource.data=this.selTBDataSource.data.filter(r=>r.id!=t.id),this.cdRef.markForCheck())})}getPageEvent(t){this.productPagination.doPagination(t),this.getProducts()}onShowProductSelection(t){this.showSelected=1!=this.showSelected}isProductMapped(t){let o=this.selTBDataSource.data.filter(r=>r.id==t.id),i=this.existingProducts.filter(r=>r.id==t.id);return o.length>0||i.length>0}onProductSelection(t){let o=this.selTBDataSource.data.filter(r=>r.id==t.id),i=this.existingProducts.filter(r=>r.id==t.id);0==o.length&&0==i.length&&(t.price=0,this.selTBDataSource.data.push(t)),this.cdr.detectChanges()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(C.uw),e.Y36(A.c),e.Y36(Z),e.Y36(m.F0),e.Y36(m.gz),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-vendor-map-product"]],decls:17,vars:6,consts:[[1,"vendor-product-mapping"],[1,"row"],[1,"col-lg-12"],[1,"primary"],[1,"product_search"],[1,"col-lg-6"],[1,"searchBox"],["placholder","Search Product Name",3,"formControl","filters","filter","search","reset"],[1,"action-buttons"],[1,"btn","sample-btn"],["class","btn-icons",3,"click",4,"ngIf"],["class","",4,"ngIf"],["class","productList",4,"ngIf"],["class","spinner",4,"ngIf"],[1,"btn-icons",3,"click"],["svgIcon","appSaveWhite"],[1,""],["type","button","mat-raised-button","","color","primary",2,"float","right",3,"click"],[1,"status_class"],[1,"status_class--primary"],[4,"ngIf"],[1,"agm-table--container"],["mat-table","",1,"agm-table",3,"dataSource"],["matColumnDef","code"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","type"],["matColumnDef","department"],["matColumnDef","price"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","empty-row",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["floatLabel","never","appearance","outline","tableInput","true",1,"agm-input-lg","discount-input"],["matTextPrefix","",1,"matTextPrefix"],["type","number","matInput","","appNumbersOnly","",3,"value","keyup"],["matTextSuffix","",1,"matTextSuffix"],["svgIcon","appDelete",3,"click"],["mat-header-row",""],["mat-row",""],[1,"empty-row"],[1,"productList"],["type","button","mat-raised-button","","color","primary","style","float: right","matBadge","selTBDataSource.data.length","matBadgePosition","before","matBadgeColor","accent",3,"click",4,"ngIf"],[3,"length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page"],["type","button","mat-raised-button","","color","primary","matBadge","selTBDataSource.data.length","matBadgePosition","before","matBadgeColor","accent",2,"float","right",3,"click"],[1,"mat-badge"],["type","button","mat-raised-button","",1,"btn-selected",3,"disabled","click"],[1,"spinner"]],template:function(t,o){1&t&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"h3",3),e._uU(4,"Vendor Product Mapping"),e.qZA()()(),e.TgZ(5,"section",4)(6,"div",1)(7,"div",5)(8,"div",6)(9,"app-agam-search-filter",7),e.NdJ("filter",function(r){return o.handleFilter(r)})("search",function(){return o.handleSearch()})("reset",function(){return o.resetFilter()}),e.qZA()()(),e.TgZ(10,"div",5)(11,"div",8)(12,"div",9),e.YNc(13,nl,5,0,"button",10),e.qZA()()()()(),e.YNc(14,Cl,35,5,"section",11),e.YNc(15,Sl,24,10,"section",12),e.qZA(),e.YNc(16,Dl,2,0,"div",13)),2&t&&(e.xp6(9),e.Q6J("formControl",o.searchStr)("filters",o.agamFilters),e.xp6(4),e.Q6J("ngIf",o.selTBDataSource.data.length),e.xp6(1),e.Q6J("ngIf",o.showSelected),e.xp6(1),e.Q6J("ngIf",!o.showSelected),e.xp6(1),e.Q6J("ngIf",o.spinner))},dependencies:[p.O5,v.Hw,s.JJ,s.oH,g.KE,k.Nt,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,x.lW,w.Ou,T.NW,B.N,L.X,p.rS],styles:["app-vendor-map-product .product_search{margin-bottom:20px}  app-vendor-map-product .product_search .agm-search_box{height:auto}  app-vendor-map-product .vendor-product-mapping{margin:2.6em}  app-vendor-map-product .status_class{padding-top:15px}  app-vendor-map-product .matTextPrefix{padding-right:10px}  app-vendor-map-product .matTextSuffix{padding-left:10px}  app-vendor-map-product .action-buttons .sample-btn{margin-right:0}  app-vendor-map-product h3{display:flex;place-content:space-between;align-items:center}  app-vendor-map-product h3 div{display:inline-block}  app-vendor-map-product .agm-table{margin-top:20px}  app-vendor-map-product .agm-table .mat-raised-button{background:var(--secondary-color-500)}  app-vendor-map-product .agm-table .mat-raised-button .mat-icon{width:2rem!important}  app-vendor-map-product .agm-table td.mat-cell{padding:.7rem 1.3rem}  app-vendor-map-product .agm-table td.mat-cell .mat-icon.rupee{width:1.2rem!important;height:1.5rem!important}  app-vendor-map-product .agm-table td.mat-cell .mat-icon.units{width:1.2rem!important;height:1.3rem!important;font-size:120%!important}  app-vendor-map-product .agm-table td.mat-cell .mat-form-field{height:1.5rem}  app-vendor-map-product .agm-table td.mat-cell .mat-form-field-infix{display:flex;padding:.4em 0 .7em!important}"],changeDetection:0}),n})();function Fl(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Name is Required "),e.qZA())}function Yl(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Mobile Number is Required "),e.qZA())}function Rl(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Email is Required "),e.qZA())}function Ql(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Enter valid Email "),e.qZA())}function Jl(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Address is Required "),e.qZA())}function Ol(n,a){if(1&n&&(e.TgZ(0,"mat-option",34),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.s9C("value",t.key),e.xp6(1),e.hij(" ",t.value," ")}}function Ml(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Select City from list "),e.qZA())}function Bl(n,a){if(1&n&&(e.TgZ(0,"mat-option",34),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.s9C("value",t.key),e.xp6(1),e.hij(" ",t.value," ")}}function Ll(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Select District from list "),e.qZA())}function El(n,a){if(1&n&&(e.TgZ(0,"mat-option",34),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.s9C("value",t.key),e.xp6(1),e.hij(" ",t.value," ")}}function Vl(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Select State from list "),e.qZA())}function $l(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Pincode is Required "),e.qZA())}function jl(n,a){if(1&n&&(e.TgZ(0,"mat-option",34),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.s9C("value",t.key),e.xp6(1),e.hij(" ",t.value," ")}}function zl(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Select Country from list "),e.qZA())}function Hl(n,a){1&n&&(e.TgZ(0,"div",35),e._UZ(1,"mat-spinner"),e.qZA())}let Gl=(()=>{class n{constructor(t,o,i,r){this.actRoute=t,this.inventoryService=o,this.cdr=i,this.snackBar=r,this.spinner=!1,this.cities=[{key:"chennai",value:"Chennai"},{key:"trichy",value:"Trichy"}],this.districts=[{key:"chennai",value:"Chennai"},{key:"trichy",value:"Trichy"}],this.countries=[{key:"india",value:"India"}],this.state=[{key:"tamilnadu",value:"Tamilnadu"},{key:"kerala",value:"Kerala"},{key:"karnataka",value:"Karnataka"},{key:"andhrapradesh",value:"Andhra Pradesh"}],this.vendorForm=new s.cw({name:new s.NI(null,[s.kI.required]),mobile_number:new s.NI(null,[s.kI.required]),email:new s.NI(null,[s.kI.required,s.kI.pattern(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)]),alt_number:new s.NI(null),address:new s.NI(null,[s.kI.required]),city:new s.NI(null,[s.kI.required]),district:new s.NI(null,[s.kI.required]),state:new s.NI(null,[s.kI.required]),pincode:new s.NI(null,[s.kI.required]),country:new s.NI(null,[s.kI.required])}),this.vendorId=this.actRoute.snapshot.paramMap.get("id")}ngOnInit(){this.getvendor()}getvendor(){this.spinner=!0,this.cdr.markForCheck(),this.inventoryService.getVendorById(this.vendorId).subscribe(t=>{this.vendorDetails=t.data,this.spinner=!1,this.vendorForm.patchValue({...this.vendorDetails}),this.vendorForm.patchValue({...this.vendorDetails.location}),console.log(this.vendorForm.value),this.cdr.markForCheck()},t=>{this.snackBar.open(t?.error?.error,"close"),this.cdr.markForCheck()})}onSubmit(){if(this.vendorForm.valid){this.spinner=!0,this.cdr.markForCheck();let t={...this.vendorForm.value};t.pincode=Number(t.pincode),this.inventoryService.updateVendor(this.vendorId,t).subscribe(o=>{this.snackBar.open(o?.message,"close"),this.spinner=!1,this.cdr.markForCheck()},o=>{let i=o?.error?.message;this.snackBar.open(i,"close")})}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.gz),e.Y36(Z),e.Y36(e.sBO),e.Y36(A.c))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-vendor-details"]],decls:149,vars:24,consts:[[1,"vendor-details"],[1,"vendor-form",3,"formGroup","ngSubmit"],[1,"details-container"],[1,"profile-details"],[1,"row"],[1,"col-lg-5","col-sm-4","col-xs-6"],[1,"col-lg-7","col-sm-8","col-xs-6"],[1,"primary","line-break"],[1,"form-details"],[1,"data-container-common__inputField"],[1,"row","topRow"],[1,"col-lg-4","col-sm-4","col-xs-6","inputRow"],[1,"primary","required"],["appearance","outline",1,"agm-input-lg"],["type","text","matInput","","formControlName","name","placeholder","Name","autocomplete","off"],[4,"ngIf"],["type","text","matInput","","formControlName","mobile_number","minlength","10","length","10","placeholder","Mobile Number","autocomplete","off","appNumbersOnly",""],["type","text","matInput","","formControlName","email","placeholder","Email","autocomplete","off"],[1,"primary"],["matInput","","type","text","formControlName","alt_number","placeholder","Alternate Number","minlength","10","length","10","autocomplete","off","appNumbersOnly",""],["formControlName","address","matInput","","placeholder","Address"],["appearance","outline",1,"dropdown-mat-all"],["formControlName","city","placeholder","Select city"],[3,"value",4,"ngFor","ngForOf"],["svgIcon","appDownArrow","matSuffix",""],["formControlName","district","placeholder","District"],["formControlName","state","placeholder","State"],["formControlName","pincode","matInput","","placeholder","Pincode","minlength","6","length","6","autocomplete","off","appNumbersOnly",""],["formControlName","country","placeholder","Select city"],[1,"row","form-action_btn"],[1,"col-lg-12","text-right"],["type","button","routerLink","/inventory/vendor","mat-button","",1,"button-mat-all-cancel"],["type","submit","mat-button","",1,"button-mat-all"],["class","spinner",4,"ngIf"],[3,"value"],[1,"spinner"]],template:function(t,o){if(1&t&&(e.TgZ(0,"section",0)(1,"form",1),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(2,"div",2)(3,"div",3)(4,"div")(5,"div",4)(6,"div",5)(7,"p"),e._uU(8,"Vendor ID"),e.qZA()(),e.TgZ(9,"div",6)(10,"p",7),e._uU(11),e.qZA()()()(),e.TgZ(12,"div")(13,"div",4)(14,"div",5)(15,"p"),e._uU(16,"Vendor Name"),e.qZA()(),e.TgZ(17,"div",6)(18,"p",7),e._uU(19),e.qZA()()()(),e.TgZ(20,"div")(21,"div",4)(22,"div",5)(23,"p"),e._uU(24,"Email Address"),e.qZA()(),e.TgZ(25,"div",6)(26,"p",7),e._uU(27),e.qZA()()()(),e.TgZ(28,"div")(29,"div",4)(30,"div",5)(31,"p"),e._uU(32,"Mobile Number"),e.qZA()(),e.TgZ(33,"div",6)(34,"p",7),e._uU(35),e.qZA()()()(),e.TgZ(36,"div")(37,"div",4)(38,"div",5)(39,"p"),e._uU(40,"City"),e.qZA()(),e.TgZ(41,"div",6)(42,"p",7),e._uU(43),e.qZA()()()(),e.TgZ(44,"div")(45,"div",4)(46,"div",5)(47,"p"),e._uU(48,"State"),e.qZA()(),e.TgZ(49,"div",6)(50,"p",7),e._uU(51),e.qZA()()()(),e.TgZ(52,"div")(53,"div",4)(54,"div",5)(55,"p"),e._uU(56,"Country"),e.qZA()(),e.TgZ(57,"div",6)(58,"p",7),e._uU(59),e.qZA()()()(),e.TgZ(60,"div")(61,"div",4)(62,"div",5)(63,"p"),e._uU(64,"Alternate Number"),e.qZA()(),e.TgZ(65,"div",6)(66,"p",7),e._uU(67),e.qZA()()()()(),e.TgZ(68,"div",8)(69,"section",9)(70,"div",10)(71,"div",11)(72,"span",12),e._uU(73,"Name"),e.qZA(),e.TgZ(74,"mat-form-field",13),e._UZ(75,"input",14),e.YNc(76,Fl,2,0,"mat-error",15),e.qZA()(),e.TgZ(77,"div",11)(78,"span",12),e._uU(79,"Mobile Number"),e.qZA(),e.TgZ(80,"mat-form-field",13),e._UZ(81,"input",16),e.YNc(82,Yl,2,0,"mat-error",15),e.qZA()(),e.TgZ(83,"div",11)(84,"span",12),e._uU(85,"Email"),e.qZA(),e.TgZ(86,"mat-form-field",13),e._UZ(87,"input",17),e.YNc(88,Rl,2,0,"mat-error",15),e.YNc(89,Ql,2,0,"mat-error",15),e.qZA()()(),e.TgZ(90,"div",4)(91,"div",11)(92,"span",18),e._uU(93,"Alternate Number"),e.qZA(),e.TgZ(94,"mat-form-field",13),e._UZ(95,"input",19),e.qZA()(),e.TgZ(96,"div",11)(97,"span",12),e._uU(98,"Address"),e.qZA(),e.TgZ(99,"mat-form-field",13),e._UZ(100,"input",20),e.YNc(101,Jl,2,0,"mat-error",15),e.qZA()(),e.TgZ(102,"div",11)(103,"span",12),e._uU(104,"City"),e.qZA(),e.TgZ(105,"mat-form-field",21)(106,"mat-select",22),e.YNc(107,Ol,2,2,"mat-option",23),e.qZA(),e._UZ(108,"mat-icon",24),e.YNc(109,Ml,2,0,"mat-error",15),e.qZA()()(),e.TgZ(110,"div",4)(111,"div",11)(112,"span",12),e._uU(113,"District"),e.qZA(),e.TgZ(114,"mat-form-field",21)(115,"mat-select",25),e.YNc(116,Bl,2,2,"mat-option",23),e.qZA(),e._UZ(117,"mat-icon",24),e.YNc(118,Ll,2,0,"mat-error",15),e.qZA()(),e.TgZ(119,"div",11)(120,"span",12),e._uU(121,"State"),e.qZA(),e.TgZ(122,"mat-form-field",21)(123,"mat-select",26),e.YNc(124,El,2,2,"mat-option",23),e.qZA(),e._UZ(125,"mat-icon",24),e.YNc(126,Vl,2,0,"mat-error",15),e.qZA()(),e.TgZ(127,"div",11)(128,"span",12),e._uU(129,"Pincode"),e.qZA(),e.TgZ(130,"mat-form-field",13),e._UZ(131,"input",27),e.YNc(132,$l,2,0,"mat-error",15),e.qZA()()(),e.TgZ(133,"div",4)(134,"div",11)(135,"span",12),e._uU(136,"Country"),e.qZA(),e.TgZ(137,"mat-form-field",21)(138,"mat-select",28),e.YNc(139,jl,2,2,"mat-option",23),e.qZA(),e._UZ(140,"mat-icon",24),e.YNc(141,zl,2,0,"mat-error",15),e.qZA()()()()()(),e.TgZ(142,"div",29)(143,"div",30)(144,"button",31),e._uU(145," Cancel "),e.qZA(),e.TgZ(146,"button",32),e._uU(147,"Update"),e.qZA()()()()(),e.YNc(148,Hl,2,0,"div",33)),2&t){let i,r,l,u,_,b,f,q,I,U,H,de,ue,me,he,_e,fe,ge;e.xp6(1),e.Q6J("formGroup",o.vendorForm),e.xp6(10),e.hij(" ",null!==(i=null==o.vendorDetails?null:o.vendorDetails.code)&&void 0!==i?i:"N/A"," "),e.xp6(8),e.hij(" ",null!==(r=null==o.vendorDetails?null:o.vendorDetails.name)&&void 0!==r?r:"N/A"," "),e.xp6(8),e.hij(" ",null!==(l=null==o.vendorDetails?null:o.vendorDetails.email)&&void 0!==l?l:"N/A"," "),e.xp6(8),e.hij(" ",null!==(u=null==o.vendorDetails?null:o.vendorDetails.mobile_number)&&void 0!==u?u:"N/A"," "),e.xp6(8),e.hij(" ",null!==(_=null==o.vendorDetails||null==o.vendorDetails.location?null:o.vendorDetails.location.city)&&void 0!==_?_:"N/A"," "),e.xp6(8),e.hij(" ",null!==(b=null==o.vendorDetails||null==o.vendorDetails.location?null:o.vendorDetails.location.state)&&void 0!==b?b:"N/A"," "),e.xp6(8),e.hij(" ",null!==(f=null==o.vendorDetails||null==o.vendorDetails.location?null:o.vendorDetails.location.country)&&void 0!==f?f:"N/A"," "),e.xp6(8),e.hij(" ",null!==(q=null==o.vendorDetails?null:o.vendorDetails.alt_number)&&void 0!==q?q:"N/A"," "),e.xp6(9),e.Q6J("ngIf",null==(I=o.vendorForm.get("name"))||null==I.errors?null:I.errors.required),e.xp6(6),e.Q6J("ngIf",null==(U=o.vendorForm.get("mobile_number"))||null==U.errors?null:U.errors.required),e.xp6(6),e.Q6J("ngIf",null==(H=o.vendorForm.get("email"))||null==H.errors?null:H.errors.required),e.xp6(1),e.Q6J("ngIf",null==(de=o.vendorForm.get("email"))||null==de.errors?null:de.errors.patten),e.xp6(12),e.Q6J("ngIf",null==(ue=o.vendorForm.get("address"))||null==ue.errors?null:ue.errors.required),e.xp6(6),e.Q6J("ngForOf",o.cities),e.xp6(2),e.Q6J("ngIf",null==(me=o.vendorForm.get("city"))||null==me.errors?null:me.errors.required),e.xp6(7),e.Q6J("ngForOf",o.cities),e.xp6(2),e.Q6J("ngIf",null==(he=o.vendorForm.get("district"))||null==he.errors?null:he.errors.required),e.xp6(6),e.Q6J("ngForOf",o.state),e.xp6(2),e.Q6J("ngIf",null==(_e=o.vendorForm.get("state"))||null==_e.errors?null:_e.errors.required),e.xp6(6),e.Q6J("ngIf",null==(fe=o.vendorForm.get("pincode"))||null==fe.errors?null:fe.errors.required),e.xp6(7),e.Q6J("ngForOf",o.countries),e.xp6(2),e.Q6J("ngIf",null==(ge=o.vendorForm.get("country"))||null==ge.errors?null:ge.errors.required),e.xp6(7),e.Q6J("ngIf",o.spinner)}},dependencies:[p.sg,p.O5,v.Hw,s._Y,s.Fj,s.JJ,s.JL,s.wO,s.sg,s.u,D.ey,g.TO,g.KE,g.R9,k.Nt,J.gD,x.lW,w.Ou,L.X,m.rH],styles:[".vendor-details[_ngcontent-%COMP%]{margin:1rem}.inputRow[_ngcontent-%COMP%]{display:flex;flex-direction:column}.vendor-form[_ngcontent-%COMP%]{padding:2rem}.data-container[_ngcontent-%COMP%]{width:100%}.form-action_btn[_ngcontent-%COMP%]{margin-top:50px}.button-mat-all-cancel[_ngcontent-%COMP%]{margin-right:20px}.details-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;box-shadow:0 4px 25px #0003}.data-container-common[_ngcontent-%COMP%]{width:100%}.profile-details[_ngcontent-%COMP%]{width:35%;box-shadow:0 4px 25px #0003;display:flex;flex-direction:column;padding:2rem}.form-details[_ngcontent-%COMP%]{padding:2rem}  .mat-form-field-appearance-outline .mat-form-field-infix{padding:5px!important}.dropdown-mat-all[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{-webkit-transform:scale(.7);transform:scale(.7)}@media only screen and (max-width: 1200px){.details-container[_ngcontent-%COMP%]{display:block}.details-container[_ngcontent-%COMP%]   .profile-details[_ngcontent-%COMP%]{width:100%}}"],changeDetection:0}),n})();function Kl(n,a){if(1&n&&(e.TgZ(0,"mat-option",10),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",null==t?null:t.name," ")}}function Wl(n,a){1&n&&(e.TgZ(0,"mat-option",11),e._uU(1,"No Records Found"),e.qZA())}let Xl=(()=>{class n{constructor(t,o,i){this.cdr=o,this.inventoryService=i,this.unsubscribe$=new S.x,this.searchInput=new s.NI(""),this.searchProductUseAutoComplete=new Q.d,this.data=[],this.spinner=!1,this.productForm=new s.cw({searchInput:new s.NI(null,[s.kI.required])}),this.productSearchAutocompleteSetup()}ngOnInit(){}productSearchAutocompleteSetup(){let t=this.productForm.searchInput?.valueChanges;this.spinner=!0,this.cdr.markForCheck(),t&&(this.searchProductUseAutoComplete.loadDependency(this.cdr,this.unsubscribe$,t),this.searchProductUseAutoComplete.pagination.perPage=6,this.searchProductUseAutoComplete.apiEndpointMethod=()=>this.inventoryService.searchProduct(this.searchProductUseAutoComplete.searchStr,this.searchProductUseAutoComplete.pagination).pipe((0,P.U)(o=>o.data)),this.searchProductUseAutoComplete.listenForAutoCompleteSearchFormControl(this.productForm.searchInput,()=>{},o=>{}),this.searchProductUseAutoComplete.loadData(()=>{},()=>{}))}updateSelectContainer(){this.selectanelContainer=".patient-autocomplete"}onPatientSelection(t){let o={id:t.option.value.id,code:t.option.value.code,name:t.option.value.name,product:t.option.value.id,price:null!=t.option.value.price?t.option.value.price:"-",batch_no:null!=t.option.value.batch_no?t.option.value.batch_no:"-"};0==this.data.filter(r=>r.id==o.id).length&&this.data.push(o),this.cdr.markForCheck()}loadMoreProducts(){this.searchProductUseAutoComplete.loadMoreData(()=>{},()=>{})}inventoryDisplayWithFn(t){return t?.name??""}onSubmit(){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(C.WI),e.Y36(e.sBO),e.Y36(Z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-product-edit"]],decls:13,vars:12,consts:[[1,"prdouct-edit"],["mat-dialog-title",""],["mat-dialog-close","",1,"close-icon"],[3,"formGroup","ngSubmit"],["matInput","","placeholder","Search by Product Name","formControlName","searchInput",3,"matAutocomplete"],["autoActiveFirstOption","",1,"autocomplete-scroll",3,"displayWith","opened","optionSelected"],["auto","matAutocomplete"],["infiniteScroll","",1,"patient-autocomplete",3,"infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","fromRoot","immediateCheck","alwaysCallback","infiniteScrollContainer","scrolled"],[3,"value",4,"ngFor","ngForOf"],["disabled","true",4,"ngIf"],[3,"value"],["disabled","true"]],template:function(t,o){if(1&t&&(e.TgZ(0,"section",0)(1,"div",1)(2,"mat-icon",2),e._uU(3,"close"),e.qZA()(),e.TgZ(4,"mat-dialog-content")(5,"form",3),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(6,"mat-form-field"),e._UZ(7,"input",4),e.TgZ(8,"mat-autocomplete",5,6),e.NdJ("opened",function(){return o.updateSelectContainer()})("optionSelected",function(r){return o.onPatientSelection(r)}),e.TgZ(10,"div",7),e.NdJ("scrolled",function(){return o.loadMoreProducts()}),e.YNc(11,Kl,2,2,"mat-option",8),e.YNc(12,Wl,2,0,"mat-option",9),e.qZA()()()()()()),2&t){const i=e.MAs(9);e.xp6(5),e.Q6J("formGroup",o.productForm),e.xp6(2),e.Q6J("matAutocomplete",i),e.xp6(1),e.Q6J("displayWith",o.inventoryDisplayWithFn),e.xp6(2),e.Q6J("infiniteScrollDistance",1)("infiniteScrollThrottle",0)("scrollWindow",!1)("fromRoot",!0)("immediateCheck",!1)("alwaysCallback",!1)("infiniteScrollContainer",o.selectanelContainer),e.xp6(1),e.Q6J("ngForOf",o.searchProductUseAutoComplete.data),e.xp6(1),e.Q6J("ngIf",!o.searchProductUseAutoComplete.data||!!o.searchProductUseAutoComplete.data&&0===o.searchProductUseAutoComplete.data.length)}},dependencies:[p.sg,p.O5,R.R,v.Hw,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,N.XC,N.ZL,D.ey,g.KE,k.Nt,C.ZT,C.uh,C.xY],styles:["app-product-edit .mat-dialog-title{color:#fff;background:var(--primary-color-900);padding:1rem;margin:-24px -24px 25px;position:relative}  app-product-edit .mat-dialog-title .close-button{position:absolute;top:12px;right:12px}  app-product-edit .mat-dialog-title .close-icon{color:#fff}"],changeDetection:0}),n})();function ep(n,a){1&n&&(e.TgZ(0,"th",16),e._uU(1,"Product Code"),e.qZA())}function tp(n,a){if(1&n&&(e.TgZ(0,"td",17),e._uU(1),e.qZA()),2&n){const t=a.$implicit;let o;e.xp6(1),e.hij(" ",null!==(o=null==t||null==t.product?null:t.product.code)&&void 0!==o?o:"N/A"," ")}}function np(n,a){1&n&&(e.TgZ(0,"th",16),e._uU(1,"Product Name"),e.qZA())}function op(n,a){if(1&n&&(e.TgZ(0,"td",17),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(null==t||null==t.product?null:t.product.name)}}function ap(n,a){1&n&&(e.TgZ(0,"th",16),e._uU(1,"Type"),e.qZA())}function ip(n,a){if(1&n&&(e.TgZ(0,"td",17),e._uU(1),e.qZA()),2&n){const t=a.$implicit;let o;e.xp6(1),e.hij(" ",null!==(o=null==t||null==t.product?null:t.product.type)&&void 0!==o?o:"N/A"," ")}}function rp(n,a){1&n&&(e.TgZ(0,"th",16),e._uU(1,"Department"),e.qZA())}function sp(n,a){if(1&n&&(e.TgZ(0,"td",17),e._uU(1),e.qZA()),2&n){const t=a.$implicit;let o;e.xp6(1),e.hij(" ",null!==(o=null==t||null==t.product?null:t.product.departmant)&&void 0!==o?o:"N/A"," ")}}function cp(n,a){1&n&&(e.TgZ(0,"th",16),e._uU(1,"Price"),e.qZA())}function lp(n,a){if(1&n&&(e.TgZ(0,"td",17),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&n){const t=a.$implicit;let o;e.xp6(1),e.AsE(" ",null!==(o=e.lcZ(2,2,null==t?null:t.price))&&void 0!==o?o:"N/A"," / ",null!==(o=null==t||null==t.price_unit?null:t.price_unit.name)&&void 0!==o?o:"N/A"," ")}}function pp(n,a){1&n&&(e.TgZ(0,"th",16),e._uU(1,"Action"),e.qZA())}function dp(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"td",17)(1,"mat-icon",18),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.VendorEdit(r))}),e.qZA(),e.TgZ(2,"mat-icon",19),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.deletVendorProduct(r))}),e._uU(3,"delete"),e.qZA()()}}function up(n,a){1&n&&e._UZ(0,"tr",20)}function mp(n,a){1&n&&e._UZ(0,"tr",21)}function hp(n,a){1&n&&(e.TgZ(0,"div",22),e._uU(1,"No Data Available!"),e.qZA())}function _p(n,a){1&n&&(e.TgZ(0,"div",23),e._UZ(1,"mat-spinner"),e.qZA())}let fp=(()=>{class n{constructor(t,o,i,r,l){this.cdr=t,this.inventoryService=o,this.actRoute=i,this.snackBar=r,this.dialog=l,this.vendorList=[],this.dataSource=new c.by(this.vendorList),this.isEmpty=!1,this.spinner=!1,this.displayedColumns=["productcode","productname","type","department","price","action"],this.VendorPagination=new y.p({page:1,perPage:5,total:this.totalProduct}),this.actRoute.parent?.params.subscribe(u=>{this.vendorId=u.id})}ngOnInit(){this.getVendorProduct()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.cdr.detectChanges()}getVendorProduct(){this.spinner=!0,this.cdr.markForCheck(),this.inventoryService.getVendorPrdoduct(this.vendorId).subscribe(t=>{this.dataSource=t?.data,0==t?.data.length&&(this.isEmpty=!1),this.spinner=!1,this.totalProduct=t?.data.length,this.cdr.markForCheck()},t=>{this.snackBar.open(t?.error?.error,"close")})}getPageEvent(t){this.VendorPagination.doPagination(t)}deletVendorProduct(t){console.log(t),this.confirmConsDialog=this.dialog.open(F.$,{width:"40%",height:"auto",disableClose:!1,data:{message:"Are you sure want to Delete - "+t.product?.name+"?",buttonText:{ok:"Delete",cancel:"Cancel"}}}),this.confirmConsDialog.afterClosed().subscribe(o=>{o&&(this.spinner=!0,this.cdr.markForCheck(),this.inventoryService.deleteVendorProduct(t.id).subscribe({next:i=>{"success"===i.status&&(this.snackBar.open(i.message,""),this.spinner=!1,this.getVendorProduct(),this.cdr.markForCheck())},error:i=>{let r="Something went wrong";i?.error?.error&&(r=i?.error?.error),this.snackBar.open(r,"close"),this.spinner=!1,this.cdr.markForCheck()}}))})}VendorEdit(t){console.log(t),this.vendorEditDialog=this.dialog.open(Xl,{width:"40%",height:"auto",disableClose:!1,data:t})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(Z),e.Y36(m.gz),e.Y36(A.c),e.Y36(C.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-vendor-prdoucts-list"]],viewQuery:function(t,o){if(1&t&&e.Gf(T.NW,5,!0),2&t){let i;e.iGM(i=e.CRH())&&(o.paginator=i.first)}},decls:26,vars:10,consts:[[1,"vendorprdouct"],["mat-table","",1,"agm-table",3,"dataSource"],["matColumnDef","productcode"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","productname"],["matColumnDef","type"],["matColumnDef","department"],["matColumnDef","price"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","empty-row",4,"ngIf"],[3,"length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page"],["paginator",""],["class","spinner",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["svgIcon","appEdit",3,"click"],["svgIcon","appDelete",3,"click"],["mat-header-row",""],["mat-row",""],[1,"empty-row"],[1,"spinner"]],template:function(t,o){1&t&&(e.TgZ(0,"section",0)(1,"table",1),e.ynx(2,2),e.YNc(3,ep,2,0,"th",3),e.YNc(4,tp,2,1,"td",4),e.BQk(),e.ynx(5,5),e.YNc(6,np,2,0,"th",3),e.YNc(7,op,2,1,"td",4),e.BQk(),e.ynx(8,6),e.YNc(9,ap,2,0,"th",3),e.YNc(10,ip,2,1,"td",4),e.BQk(),e.ynx(11,7),e.YNc(12,rp,2,0,"th",3),e.YNc(13,sp,2,1,"td",4),e.BQk(),e.ynx(14,8),e.YNc(15,cp,2,0,"th",3),e.YNc(16,lp,3,4,"td",4),e.BQk(),e.ynx(17,9),e.YNc(18,pp,2,0,"th",3),e.YNc(19,dp,4,0,"td",4),e.BQk(),e.YNc(20,up,1,0,"tr",10),e.YNc(21,mp,1,0,"tr",11),e.qZA(),e.YNc(22,hp,2,0,"div",12),e.TgZ(23,"mat-paginator",13,14),e.NdJ("page",function(r){return o.getPageEvent(r)}),e.qZA()(),e.YNc(25,_p,2,0,"div",15)),2&t&&(e.xp6(1),e.Q6J("dataSource",o.dataSource),e.xp6(19),e.Q6J("matHeaderRowDef",o.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns),e.xp6(1),e.Q6J("ngIf",o.isEmpty),e.xp6(1),e.Q6J("length",o.totalProduct)("pageIndex",(o.VendorPagination.page||1)-1)("pageSize",o.VendorPagination.perPage)("pageSizeOptions",o.VendorPagination.paginationSizes)("showFirstLastButtons",!0),e.xp6(2),e.Q6J("ngIf",o.spinner))},dependencies:[p.O5,v.Hw,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,w.Ou,T.NW,W.Q],styles:["app-vendor-prdoucts-list .vendorprdouct{margin:2rem}"],changeDetection:0}),n})();var gp=h(77115);let bp=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-phlebo-request"]],decls:1,vars:0,template:function(t,o){1&t&&e._UZ(0,"router-outlet")},dependencies:[m.lC],changeDetection:0}),n})();function Cp(n,a){1&n&&(e.TgZ(0,"th",32),e._uU(1,"Request ID"),e.qZA())}function qp(n,a){if(1&n&&(e.TgZ(0,"td",33),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(t.request_id)}}function vp(n,a){1&n&&(e.TgZ(0,"th",32),e._uU(1,"Requested By"),e.qZA())}function Zp(n,a){if(1&n&&(e.TgZ(0,"td",33),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(t.phlebo.name)}}function xp(n,a){1&n&&(e.TgZ(0,"th",32),e._uU(1,"Requested On"),e.qZA())}function yp(n,a){if(1&n&&(e.TgZ(0,"td",33),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.created_at,"dd/MM/yyyy")," ")}}function Tp(n,a){1&n&&(e.TgZ(0,"th",32),e._uU(1,"Requested Center"),e.qZA())}function wp(n,a){if(1&n&&(e.TgZ(0,"td",33),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.collection_center.name," ")}}function Ap(n,a){1&n&&(e.TgZ(0,"th",32),e._uU(1,"Picked Up On"),e.qZA())}function kp(n,a){if(1&n&&(e.TgZ(0,"td",33),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",(null==t?null:t.pickedupon)||"N/A"," ")}}function Pp(n,a){1&n&&(e.TgZ(0,"th",32),e._uU(1,"Status"),e.qZA())}const Np=function(n,a,t,o){return{"status-dark":n,"status-cancel":a,"status-info":t,"status-success":o}};function Up(n,a){if(1&n&&(e.TgZ(0,"td",34)(1,"span",35),e._uU(2),e.ALo(3,"titlecase"),e.qZA()()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngClass",e.l5B(4,Np,"f28878f9-9257-4d61-a604-795f3ba0a6a0"==t.status.id,"6a75b397-52c4-4d60-ad97-fec0f4a1ccdb"==t.status.id,"2ff55100-24cd-4ae8-9e12-f34565018074"==t.status.id,"f16cedf6-5f28-4f2f-97fd-02fafaf1f6b4"==t.status.id)),e.xp6(1),e.Oqu(e.lcZ(3,2,t.status.name))}}function Sp(n,a){1&n&&(e.TgZ(0,"th",32),e._uU(1,"Action"),e.qZA())}function Dp(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"td",33)(1,"mat-icon",36),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.editrequest(r))}),e.qZA(),e.TgZ(2,"mat-icon",37),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.deletRequest(r.id))}),e._uU(3,"delete"),e.qZA()()}}function Ip(n,a){1&n&&(e.TgZ(0,"th",32),e._uU(1,"Details"),e.qZA())}function Fp(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"td",33)(1,"button",38),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.acknowledge(r))}),e._uU(2),e.qZA()()}if(2&n){const t=a.$implicit;e.xp6(2),e.hij(" ","2ff55100-24cd-4ae8-9e12-f34565018074"==t.status.id?"Ready To Pickup":"f16cedf6-5f28-4f2f-97fd-02fafaf1f6b4"==t.status.id?"Acknowledge":"6a75b397-52c4-4d60-ad97-fec0f4a1ccdb"==t.status.id?"Denied":"f28878f9-9257-4d61-a604-795f3ba0a6a0"==t.status.id?"Delivered":""," ")}}function Yp(n,a){1&n&&e._UZ(0,"tr",39)}function Rp(n,a){1&n&&e._UZ(0,"tr",40)}function Qp(n,a){1&n&&(e.TgZ(0,"div",41),e._UZ(1,"mat-spinner",42),e.qZA())}function Jp(n,a){1&n&&(e.TgZ(0,"div",43),e._uU(1,"No Data Available!"),e.qZA())}function Op(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-paginator",44),e.NdJ("page",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.getPageEvent(i))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("length",t.tableLength)("pageIndex",(t.phleborRequestPagination.page||1)-1)("pageSize",t.phleborRequestPagination.perPage)("pageSizeOptions",t.phleborRequestPagination.paginationSizes)("showFirstLastButtons",!0)}}function Mp(n,a){1&n&&(e.TgZ(0,"div",45),e._UZ(1,"mat-spinner"),e.qZA())}let Bp=(()=>{class n{constructor(t,o,i,r,l){this.cdr=t,this.dialog=o,this.router=i,this.inventoryService=r,this.snackBar=l,this.unsubscribe$=new S.x,this.searchStr=new s.NI(""),this.agamFilters=[],this.searchBy=[],this.centers=[],this.payload={},this.seachPayload={},this.spinner=!1,this.dataSource=new c.by,this.isLoading=!1,this.isEmpty=!1,this.displayedColumns=["Request ID","Requested By","Requested On","Requested Center","Picked Up On","Status","Action","Details"],this.phleborRequestPagination=new y.p({page:1,perPage:5,total:this.tableLength})}ngOnInit(){this.loadFilters(),this.searchListener(),this.getRequest()}getPageEvent(t){this.phleborRequestPagination.doPagination(t),this.getRequest()}loadFilters(){this.agamFilters=[{type:"date",name:"Date",lableKey:"name"},{type:"status",name:"Status",data:[{id:"Request Submitted",name:"Request Submitted"},{id:"Request Approved",name:"Request Approved"},{id:"Request Delivered",name:"Request Delivered"},{id:"Request Denied",name:"Request Denied"}],lableKey:"name"}]}searchListener(){this.searchStr.valueChanges.pipe((0,V.b)(400),(0,$.R)(this.unsubscribe$),(0,j.w)(t=>(this.spinner=!0,this.seachPayload={filter:{search:t,search_by:"phlebo.name",status:{name:this.statusName},created_at:this.timeStamp}},null==this.statusName&&delete this.seachPayload.filter.status,null==this.timeStamp&&delete this.seachPayload.filter.created_at,this.cdr.markForCheck(),t||(this.seachPayload={}),this.inventoryService.getAllPhleboRequest(this.phleborRequestPagination.perPage,this.phleborRequestPagination.page,this.seachPayload)))).subscribe(t=>{this.dataSource.data=t.data.results,this.spinner=!1,this.tableLength=t.data.pagination.total,this.spinner=!1,this.isEmpty=0==this.dataSource.data.length,this.cdr.markForCheck()},t=>{let o=t?.error?.message;t?.error?.message||(o="Something went wrong"),this.spinner=!1,this.snackBar.open(o,"close"),this.cdr.markForCheck()})}filter(){this.spinner=!0;let o="",i=!1;0!=Object.keys(this.seachPayload).length?(o=this.seachPayload.filter.search,(""!=o||null!=o)&&(i=!0)):i=!1,this.seachPayload=i?{filter:{search:this.seachPayload.filter.search,search_by:"phlebo.name",status:{name:this.statusName},created_at:this.timeStamp}}:{filter:{status:{name:this.statusName},created_at:this.timeStamp}},null==this.statusName&&delete this.seachPayload.filter.status,null==this.centerName&&delete this.seachPayload.filter.center,null==this.timeStamp&&delete this.seachPayload.filter.created_at,this.inventoryService.getAllPhleboRequest(this.phleborRequestPagination.perPage,this.phleborRequestPagination.page,this.seachPayload).subscribe({next:r=>{this.dataSource.data=r.data.results,this.tableLength=r.data.pagination.total,this.spinner=!1,this.isEmpty=!1,0==this.dataSource.data.length&&(this.isEmpty=!0),this.cdr.markForCheck()}})}getRequest(){this.spinner=!0,this.cdr.markForCheck(),this.inventoryService.getAllPhleboRequest(this.phleborRequestPagination.perPage,this.phleborRequestPagination.page,this.seachPayload).subscribe(t=>{this.dataSource.data=t.data.results,this.isLoading=!1,this.tableLength=t.data.pagination.total,this.spinner=!1,this.isEmpty=0==this.dataSource.data.length,this.cdr.markForCheck()},t=>{let o=t?.error?.message;t?.error?.message||(o="Something went wrong"),this.spinner=!1,this.snackBar.open(o,"close"),this.cdr.markForCheck()})}deletRequest(t){this.spinner=!0,this.cdr.markForCheck(),this.inventoryService.deletePhleboRequest(t).subscribe(o=>{this.snackBar.open(o?.message,"close"),this.getRequest(),this.spinner=!1,this.cdr.markForCheck()},o=>{let i=o?.error?.message;o?.error?.message||(i="Something went wrong"),this.spinner=!1,this.snackBar.open(i,"close"),this.cdr.markForCheck()})}handleFilter(t){"status"===t.type?this.statusName=t.selected?.option?.value?.name:this.timeStamp=t.selected}handleSearch(){this.filter()}resetFilter(){this.statusName=void 0,this.timeStamp=void 0,delete this.seachPayload.filter.created_at,delete this.seachPayload.filter.status,this.searchStr.reset(),this.getRequest()}editrequest(t){this.router.navigateByUrl("inventory/phleborequest/"+t.phlebo.id+"/request/"+t.id)}acknowledge(t){"f16cedf6-5f28-4f2f-97fd-02fafaf1f6b4"==t.status.id&&this.router.navigateByUrl("inventory/phleborequest/acknowledge/"+t.phlebo.id+"/request/"+t.id),"2ff55100-24cd-4ae8-9e12-f34565018074"==t.status.id&&this.router.navigateByUrl("inventory/phleborequest/ready-to-pickup/"+t.phlebo.id+"/request/"+t.id)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(C.uw),e.Y36(m.F0),e.Y36(Z),e.Y36(A.c))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-phlebo-request-list"]],decls:50,vars:9,consts:[[1,"phlebo-request"],[1,"title","primary"],[1,"phlebo-request__header"],[1,"phlebo-request__header-input"],[1,"phlebo-request__header-input_form"],[1,"row"],[1,"col-xxl-8","col-xl-7","col-lg-7","col-sm-12"],["placholder","Search by Requested By",3,"formControl","filters","filter","search","reset"],[1,"col-xl-5","col-lg-5","col-md-12","col-sm-12","col-xs-12"],[1,"action-buttons","btn-container","createBtn"],[1,"btn"],["routerLink","/inventory/phleborequest/create-phlebo-request",1,"btn-icons"],["svgIcon","appCreateTest"],[1,"agm-table--container"],["mat-table","",1,"agm-table",3,"dataSource"],["matColumnDef","Request ID"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Requested By"],["matColumnDef","Requested On"],["matColumnDef","Requested Center"],["matColumnDef","Picked Up On"],["matColumnDef","Status"],["mat-cell","","class","statusColumn",4,"matCellDef"],["matColumnDef","Action"],["matColumnDef","Details"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","spinner-container",4,"ngIf"],["class","empty-row",4,"ngIf"],[3,"length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page",4,"ngIf"],["class","spinner",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",1,"statusColumn"],[3,"ngClass"],["svgIcon","appEdit",3,"click"],["svgIcon","appDelete",3,"click"],["mat-raised-button","",1,"detail-btn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"spinner-container"],["diameter","70",1,"spinner"],[1,"empty-row"],[3,"length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page"],[1,"spinner"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div")(2,"h3",1),e._uU(3,"Phlebo Request"),e.qZA()(),e.TgZ(4,"section",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"app-agam-search-filter",7),e.NdJ("filter",function(r){return o.handleFilter(r)})("search",function(){return o.handleSearch()})("reset",function(){return o.resetFilter()}),e.qZA()(),e.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"button",11)(14,"span")(15,"b"),e._uU(16," Create Request "),e.qZA()(),e._UZ(17,"mat-icon",12),e.qZA()()()()()()()(),e.TgZ(18,"section",13)(19,"table",14),e.ynx(20,15),e.YNc(21,Cp,2,0,"th",16),e.YNc(22,qp,2,1,"td",17),e.BQk(),e.ynx(23,18),e.YNc(24,vp,2,0,"th",16),e.YNc(25,Zp,2,1,"td",17),e.BQk(),e.ynx(26,19),e.YNc(27,xp,2,0,"th",16),e.YNc(28,yp,3,4,"td",17),e.BQk(),e.ynx(29,20),e.YNc(30,Tp,2,0,"th",16),e.YNc(31,wp,2,1,"td",17),e.BQk(),e.ynx(32,21),e.YNc(33,Ap,2,0,"th",16),e.YNc(34,kp,2,1,"td",17),e.BQk(),e.ynx(35,22),e.YNc(36,Pp,2,0,"th",16),e.YNc(37,Up,4,9,"td",23),e.BQk(),e.ynx(38,24),e.YNc(39,Sp,2,0,"th",16),e.YNc(40,Dp,4,0,"td",17),e.BQk(),e.ynx(41,25),e.YNc(42,Ip,2,0,"th",16),e.YNc(43,Fp,3,1,"td",17),e.BQk(),e.YNc(44,Yp,1,0,"tr",26),e.YNc(45,Rp,1,0,"tr",27),e.qZA(),e.YNc(46,Qp,2,0,"div",28),e.YNc(47,Jp,2,0,"div",29),e.YNc(48,Op,1,5,"mat-paginator",30),e.qZA()(),e.YNc(49,Mp,2,0,"div",31)),2&t&&(e.xp6(9),e.Q6J("formControl",o.searchStr)("filters",o.agamFilters),e.xp6(10),e.Q6J("dataSource",o.dataSource),e.xp6(25),e.Q6J("matHeaderRowDef",o.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns),e.xp6(1),e.Q6J("ngIf",o.isLoading),e.xp6(1),e.Q6J("ngIf",o.isEmpty),e.xp6(1),e.Q6J("ngIf",!o.isLoading&&!o.isEmpty),e.xp6(1),e.Q6J("ngIf",o.spinner))},dependencies:[p.mk,p.O5,v.Hw,s.JJ,s.oH,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,G.oO,x.lW,w.Ou,T.NW,B.N,m.rH,p.rS,p.uU],styles:["app-phlebo-request-list{overflow:auto!important}  app-phlebo-request-list .phlebo-request{padding:2.6em}  app-phlebo-request-list .phlebo-request__header{display:flex;flex-direction:column;margin-top:2rem}  app-phlebo-request-list .phlebo-request__header-input{width:100%}  app-phlebo-request-list .phlebo-request .mat-tab-body-wrapper{margin-top:26px}  app-phlebo-request-list .phlebo-request .mat-tab-body-wrapper .primary{margin-bottom:0}  app-phlebo-request-list .phlebo-request .agm-table{margin-top:2em}  app-phlebo-request-list .phlebo-request .statusColumn .status-success{color:#146300}  app-phlebo-request-list .phlebo-request .statusColumn .status-info{color:#004990}  app-phlebo-request-list .phlebo-request .statusColumn .status-cancel{color:#ff4155}  app-phlebo-request-list .phlebo-request .statusColumn .status-dark{color:#012b3e}  app-phlebo-request-list .phlebo-request .btn-container{display:flex;justify-content:flex-end}  app-phlebo-request-list .phlebo-request .btn-container .buttons{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:0 1em}  app-phlebo-request-list .agm-table{margin-top:10vh;max-width:100%}  app-phlebo-request-list .agm-table .detail-btn{width:167px;background:#cdd7dc;border-radius:6px}  app-phlebo-request-list .mat-select-value{text-align:center}@media (min-width: 1025px){  app-phlebo-request-list .center-request__header{flex-direction:row}}@media only screen and (min-width: 769px) and (max-width: 1024px){  app-phlebo-request-list .phlebo-request .btn-container{justify-content:flex-end}  app-phlebo-request-list .phlebo-request__header{flex-direction:column}  app-phlebo-request-list .phlebo-request__header--input{width:100%}  app-phlebo-request-list .phlebo-request__header--tab{width:100%}  app-phlebo-request-list .phlebo-management__header--tab{width:100%}}@media only screen and (min-width: 481px) and (max-width: 768px){  app-phlebo-request-list .phlebo-request{margin-left:1rem;margin-top:.5rem;margin-right:1rem}  app-phlebo-request-list .phlebo-request .btn-container{justify-content:flex-end}  app-phlebo-request-list .phlebo-request__header{flex-direction:column}  app-phlebo-request-list .phlebo-request__header--input{width:100%}  app-phlebo-request-list .phlebo-request__header--tab{width:100%}}@media (min-width: 1025px){  app-phlebo-request-list .agm-filter{width:100%!important}}@media only screen and (min-width: 769px) and (max-width: 1024px){  app-phlebo-request-list .btn-container{justify-content:end}}@media (max-width: 480px){  app-phlebo-request-list .phlebo-request{margin-left:1rem;margin-top:.5rem;margin-right:1rem}  app-phlebo-request-list .phlebo-request .btn-container{justify-content:center}  app-phlebo-request-list .phlebo-request__header{flex-direction:column}  app-phlebo-request-list .phlebo-request__header--input{width:100%}  app-phlebo-request-list .phlebo-request__header--tab{width:100%}  app-phlebo-request-list .phlebo-request .agm-filter{width:100%!important}  app-phlebo-request-list .phlebo-request .btn-container{margin-top:2em}}.create-icon[_ngcontent-%COMP%]{width:30px;height:30px;font-size:30px!important}"],changeDetection:0}),n})();const Lp=["table"];function Ep(n,a){1&n&&(e.TgZ(0,"th",45),e._uU(1,"Product Code"),e.qZA())}function Vp(n,a){if(1&n&&(e.TgZ(0,"td",46),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(t.code)}}function $p(n,a){1&n&&(e.TgZ(0,"th",45),e._uU(1,"Product Name"),e.qZA())}function jp(n,a){if(1&n&&(e.TgZ(0,"td",46),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(t.name)}}function zp(n,a){1&n&&(e.TgZ(0,"th",45),e._uU(1,"Center"),e.qZA())}function Hp(n,a){if(1&n&&(e.TgZ(0,"td",46),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",(null==t||null==t.collection_center?null:t.collection_center.name)||"N/A"," ")}}function Gp(n,a){1&n&&(e.TgZ(0,"th",45),e._uU(1,"Request Quantity"),e.qZA())}function Kp(n,a){if(1&n&&(e.TgZ(0,"div",49)(1,"mat-form-field",50),e._UZ(2,"input",51),e.TgZ(3,"mat-hint"),e._uU(4,"Ready Only"),e.qZA()()()),2&n){const t=e.oxw(2).index;e.Q6J("formGroupName",t)}}function Wp(n,a){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,Kp,5,1,"div",48),e.qZA()),2&n){const t=a.index,o=e.oxw().index;e.xp6(1),e.Q6J("ngIf",o===t)}}function Xp(n,a){if(1&n&&(e.TgZ(0,"td",46),e.YNc(1,Wp,2,1,"div",47),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.phlebo_product_details.controls)}}function ed(n,a){1&n&&e._UZ(0,"tr",52)}function td(n,a){1&n&&e._UZ(0,"tr",53)}function nd(n,a){1&n&&(e.TgZ(0,"div",54),e._UZ(1,"mat-spinner",55),e.qZA())}function od(n,a){1&n&&(e.TgZ(0,"div",56),e._uU(1,"No Data Available!"),e.qZA())}function ad(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-paginator",57),e.NdJ("page",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.getPageEvent(i))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("length",t.tableLength)("pageIndex",(t.phleboPagination.page||1)-1)("pageSize",t.phleboPagination.perPage)("pageSizeOptions",t.phleboPagination.paginationSizes)("showFirstLastButtons",!0)}}function id(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"a",58),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.viewAttachment())}),e._uU(1),e.qZA()}if(2&n){const t=e.oxw();e.xp6(1),e.hij(" Uploaded (",t.attachmentFiles.length,") ")}}function rd(n,a){1&n&&(e.TgZ(0,"div",59),e._uU(1," Choose a file "),e.qZA())}function sd(n,a){1&n&&(e.TgZ(0,"div",60),e._UZ(1,"mat-spinner"),e.qZA())}const cd=function(n,a,t,o){return{dark:n,cancel:a,success:t,primary:o}};let ld=(()=>{class n{constructor(t,o,i,r,l,u,_,b){this.cdr=t,this.snackBar=o,this.dialog=i,this.router=r,this.activeRouter=l,this.inventoryService=u,this.fb=_,this.userService=b,this.data=[],this.unsubscribe$=new S.x,this.searchStr=new s.NI(""),this.agamFilters=[],this.searchBy=[],this.payload={},this.dataSource=new c.by(this.data),this.spinner=!1,this.phleboData={},this.request_info={},this.productList=[],this.datasource=new c.by,this.isEmpty=!1,this.isLoading=!1,this.attachmentFiles=[],this.attachmentPreviewVisible=!1,this.attachmentLength=0,this.dialogFile=[],this.phleboPagination=new y.p({page:1,perPage:5,total:this.tableLength}),this.displayedColumns=["Product Code","ProductName","center","RequestQuantity"]}ngOnInit(){this.initProductForm(),this.getRouterParams()}getRouterParams(){this.requestId=this.activeRouter.snapshot.paramMap.get("requestId"),this.phleboId=this.activeRouter.snapshot.paramMap.get("phleboId"),this.getPhleboRequest(this.phleboId,this.requestId)}productGroup(t,o){return this.productDetails=this.fb.group({product_id:[t,[s.kI.required]],quantity:[o,[s.kI.required]]}),this.productDetails}get phlebo_product_details(){return this.phleboForm.get("phlebo_product_details")}initProductForm(){this.phleboForm=this.fb.group({request_id:[null,[s.kI.required]],collection_center:[null,[s.kI.required]],comments:[""],attachments:[[]],phlebo_product_details:this.fb.array([],[s.kI.required])})}patchForm(t){t.phlebo_product_details.forEach(o=>{this.productList.push(o.id),o.code=o.product.code,o.name=o.product.name,o.collection_center=t?.collection_center,this.datasource.data.push(o),this.phlebo_product_details.push(this.productGroup(o.id,o.quantity))}),this.phleboForm.patchValue({request_id:t.id,collection_center:t.collection_center,comments:t.comments}),this.request_info={requestId:t.request_id,requestBy:t?.request_by,phleboName:t.phlebo.name,requestOn:t.created_at,status:t.status},this.attachmentFiles=t?.attachments,this.attachmentFiles&&(this.attachmentPreviewVisible=!0,this.cdr.markForCheck()),this.attachmentLength=this.attachmentFiles.length+1,this.table.renderRows(),this.tableLength=this.datasource.data.length,this.isEmpty=!0,0!=this.tableLength&&(this.isEmpty=!1),this.cdr.markForCheck()}receivedFileName(t){let o;this.spinner=!0;const i=new FormData;i.append("file",t),i.append("upload_type","attachement"),this.userService.uploadImage(i).subscribe({next:r=>{o=r.message,this.attachmentFiles.push(r?.data?.uploadedFilePath)},error:r=>{this.snackBar.open(r.error.error,"close"),this.spinner=!1},complete:()=>{this.attachmentPreviewVisible=!0,this.spinner=!1,this.snackBar.open(t.name+" "+o,""),this.cdr.markForCheck()}}),this.attachmentFiles&&(this.attachmentPreviewVisible=!0,this.cdr.markForCheck()),this.attachmentLength=this.attachmentFiles.length+1}uploadAttachments(){var t=this;return(0,X.Z)(function*(){t.dialogFile=[];let o={};for(let i of t.attachmentFiles)o={name:i},t.dialogFile.push(o)})()}viewAttachment(){this.uploadAttachments().then(()=>{this.openPreviewDialog()})}openPreviewDialog(){this.attachmentPreviewDialog=this.dialog.open(re.a,{width:"50%",height:"auto",disableClose:!1,data:{file:this.dialogFile}}),this.attachmentPreviewDialog.afterClosed().subscribe(t=>{if(0!=t.length)for(let o of t)this.attachmentFiles.splice(t,1);this.attachmentLength=this.attachmentFiles.length,this.cdr.markForCheck(),0==this.attachmentFiles.length&&(this.attachmentPreviewVisible=!1,this.cdr.markForCheck())})}getPhleboRequest(t,o){this.spinner=!0,this.cdr.markForCheck(),this.inventoryService.getPhleboRequest(t,o).subscribe({next:i=>{this.phleboData=i.data,this.patchForm(this.phleboData),this.spinner=!1,this.cdr.markForCheck()},error:i=>{let r=i?.error?.message;i?.error?.message||(r="Something went wrong"),this.spinner=!1,this.snackBar.open(r,"close"),this.cdr.markForCheck()}})}phleboRequestApproval(){}getPageEvent(t){this.phleboPagination.doPagination(t)}approve(){this.spinner=!0,this.cdr.markForCheck(),this.inventoryService.phleboApproval(this.phleboId,this.requestId,this.payload).subscribe({next:t=>{this.spinner=!1,this.cdr.markForCheck(),this.snackBar.open("Successfully Approved","close"),this.router.navigate(["/inventory/phleborequest"])},error:t=>{let o=t?.error?.message;t?.error?.message||(o="Something went wrong"),this.spinner=!1,this.snackBar.open(o,"close"),this.cdr.markForCheck()}})}cancel(){this.router.navigate(["/inventory/phleborequest"])}deny(){this.spinner=!0,this.cdr.markForCheck(),this.inventoryService.phleboDenied(this.phleboId,this.requestId,this.payload).subscribe({next:t=>{this.spinner=!1,this.cdr.markForCheck(),this.snackBar.open("Successfully Denied","close"),this.router.navigate(["/inventory/phleborequest"])},error:t=>{let o=t?.error?.message;t?.error?.message||(o="Something went wrong"),this.spinner=!1,this.snackBar.open(o,"close"),this.cdr.markForCheck()}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(z.ux),e.Y36(C.uw),e.Y36(m.F0),e.Y36(m.gz),e.Y36(Z),e.Y36(s.qu),e.Y36(oe.x))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-phlebo-request-acknowledge"]],viewQuery:function(t,o){if(1&t&&e.Gf(Lp,5),2&t){let i;e.iGM(i=e.CRH())&&(o.table=i.first)}},decls:76,vars:26,consts:[[1,"phleboRequest-acknowledge"],[3,"formGroup"],[1,"phleboRequest-acknowledge__title"],[1,"primary"],[1,"row","phleboRequest-acknowledge__search"],[1,"col-lg-12","phleboRequest-acknowledge__search--phleboData"],[1,"phleboName"],[1,"label"],[1,"status"],[3,"ngClass"],[1,"requestId"],[1,"row"],[1,"phleboRequest-acknowledge__detailsTable"],["mat-table","",1,"agm-table",3,"dataSource"],["table",""],["matColumnDef","Product Code"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","ProductName"],["matColumnDef","center"],["matColumnDef","RequestQuantity","formArrayName","phlebo_product_details"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","spinner-container",4,"ngIf"],["class","empty-row",4,"ngIf"],[3,"length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page",4,"ngIf"],[1,"phleboRequest-acknowledge__comment","row"],[1,"col-sm-12","label"],[1,""],[1,"col-sm-12"],["appearance","outline",1,"primary","text-area"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","4","cdkAutosizeMaxRows","200","placeholder","Type here","formControlName","comments","readonly",""],["autosize","cdkTextareaAutosize"],[1,"attachment","col-sm-12"],[1,"attachment"],[1,"attach-tag",3,"icon","fileName"],[1,"attachemnt-label"],["class","attachment-hint pointer",3,"click",4,"ngIf"],["class","file-attachment",4,"ngIf"],[1,"phleboRequest-acknowledge__actionBtns"],[1,"form-action-btn"],["type","button","mat-button","",1,"button-mat-all-cancel",3,"click"],["type","button","mat-button","",1,"button-mat-all",3,"click"],["type","submit","mat-button","",1,"button-mat-all",3,"click"],["class","spinner",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[4,"ngFor","ngForOf"],[3,"formGroupName",4,"ngIf"],[3,"formGroupName"],["appearance","outline",1,"agm-select","quentity"],["type","number","matInput","","readonly","","appNumbersOnly","","formControlName","quantity"],["mat-header-row",""],["mat-row",""],[1,"spinner-container"],["diameter","70",1,"spinner"],[1,"empty-row"],[3,"length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page"],[1,"attachment-hint","pointer",3,"click"],[1,"file-attachment"],[1,"spinner"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"h3",3),e._uU(4,"Phlebo Request Acknowledge"),e.qZA()(),e.TgZ(5,"section",4)(6,"div",5)(7,"div",6)(8,"label",7),e._uU(9,"Request By"),e.qZA(),e.TgZ(10,"span",3),e._uU(11),e.qZA()(),e.TgZ(12,"div",8)(13,"label",7),e._uU(14,"Request Status"),e.qZA(),e.TgZ(15,"span",9),e._uU(16),e.ALo(17,"titlecase"),e.qZA()(),e.TgZ(18,"div",10)(19,"label",7),e._uU(20,"Request ID"),e.qZA(),e.TgZ(21,"span",3),e._uU(22),e.qZA()(),e.TgZ(23,"div",11)(24,"label",7),e._uU(25,"Request On"),e.qZA(),e.TgZ(26,"span",3),e._uU(27),e.ALo(28,"date"),e.qZA()()()(),e.TgZ(29,"section",12)(30,"table",13,14),e.ynx(32,15),e.YNc(33,Ep,2,0,"th",16),e.YNc(34,Vp,2,1,"td",17),e.BQk(),e.ynx(35,18),e.YNc(36,$p,2,0,"th",16),e.YNc(37,jp,2,1,"td",17),e.BQk(),e.ynx(38,19),e.YNc(39,zp,2,0,"th",16),e.YNc(40,Hp,2,1,"td",17),e.BQk(),e.ynx(41,20),e.YNc(42,Gp,2,0,"th",16),e.YNc(43,Xp,2,1,"td",17),e.BQk(),e.YNc(44,ed,1,0,"tr",21),e.YNc(45,td,1,0,"tr",22),e.qZA(),e.YNc(46,nd,2,0,"div",23),e.YNc(47,od,2,0,"div",24),e.YNc(48,ad,1,5,"mat-paginator",25),e.qZA(),e.TgZ(49,"section",26)(50,"div",27)(51,"h4",28),e._uU(52,"Comments"),e.qZA()(),e.TgZ(53,"div",29)(54,"mat-form-field",30),e._UZ(55,"textarea",31,32),e.TgZ(57,"mat-hint"),e._uU(58,"Ready Only"),e.qZA()()(),e.TgZ(59,"div",33)(60,"div",34)(61,"app-agm-add-attachment",35),e.NdJ("fileName",function(r){return o.receivedFileName(r)}),e.qZA(),e.TgZ(62,"div",36)(63,"p",3),e._uU(64,"Attachments"),e.qZA(),e.YNc(65,id,2,1,"a",37),e.YNc(66,rd,2,0,"div",38),e.qZA()()()(),e.TgZ(67,"section",39)(68,"div",40)(69,"button",41),e.NdJ("click",function(){return o.cancel()}),e._uU(70," Cancel "),e.qZA(),e.TgZ(71,"button",42),e.NdJ("click",function(){return o.deny()}),e._uU(72," Deny "),e.qZA(),e.TgZ(73,"button",43),e.NdJ("click",function(){return o.approve()}),e._uU(74," Approve "),e.qZA()()()()(),e.YNc(75,sd,2,0,"div",44)),2&t&&(e.xp6(1),e.Q6J("formGroup",o.phleboForm),e.xp6(10),e.Oqu((null==o.request_info?null:o.request_info.requestBy)||"N/A"),e.xp6(4),e.Q6J("ngClass",e.l5B(21,cd,"f28878f9-9257-4d61-a604-795f3ba0a6a0"==(null==o.request_info||null==o.request_info.status?null:o.request_info.status.id),"6a75b397-52c4-4d60-ad97-fec0f4a1ccdb"==(null==o.request_info||null==o.request_info.status?null:o.request_info.status.id),"f16cedf6-5f28-4f2f-97fd-02fafaf1f6b4"==(null==o.request_info||null==o.request_info.status?null:o.request_info.status.id),"2ff55100-24cd-4ae8-9e12-f34565018074"==(null==o.request_info||null==o.request_info.status?null:o.request_info.status.id))),e.xp6(1),e.Oqu(e.lcZ(17,16,null==o.request_info||null==o.request_info.status?null:o.request_info.status.name)),e.xp6(6),e.Oqu(o.request_info.requestId),e.xp6(5),e.Oqu(e.xi3(28,18,o.request_info.requestOn,"dd-mm-YYYY hh:mm:ss a")),e.xp6(3),e.Q6J("dataSource",o.datasource),e.xp6(14),e.Q6J("matHeaderRowDef",o.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns),e.xp6(1),e.Q6J("ngIf",o.isLoading),e.xp6(1),e.Q6J("ngIf",o.isEmpty),e.xp6(1),e.Q6J("ngIf",!o.isLoading&&!o.isEmpty),e.xp6(13),e.Q6J("icon","appVendorFile"),e.xp6(4),e.Q6J("ngIf",o.attachmentPreviewVisible),e.xp6(1),e.Q6J("ngIf",!o.attachmentFiles.length),e.xp6(9),e.Q6J("ngIf",o.spinner))},dependencies:[p.mk,p.sg,p.O5,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.sg,s.u,s.x0,s.CE,O.IC,g.KE,g.bx,k.Nt,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,G.oO,x.lW,w.Ou,T.NW,E.O,L.X,p.rS,p.uU],styles:["app-phlebo-request-acknowledge .phleboRequest-acknowledge{margin:2.6em}  app-phlebo-request-acknowledge .phleboRequest-acknowledge__search{margin-top:2em}  app-phlebo-request-acknowledge .phleboRequest-acknowledge__search--phleboData{margin-top:1em;display:flex;justify-content:space-between}  app-phlebo-request-acknowledge .phleboRequest-acknowledge__search--phleboData .label{margin-right:1rem}  app-phlebo-request-acknowledge .phleboRequest-acknowledge__search--phleboData .success{color:#146300}  app-phlebo-request-acknowledge .phleboRequest-acknowledge__search--phleboData .cancel{color:#ff4155}  app-phlebo-request-acknowledge .phleboRequest-acknowledge__search--phleboData .dark{color:#012b3e}  app-phlebo-request-acknowledge .phleboRequest-acknowledge__data .requestOn{margin-top:2em}  app-phlebo-request-acknowledge .phleboRequest-acknowledge__detailsTable{margin-top:3em}  app-phlebo-request-acknowledge .phleboRequest-acknowledge__detailsTable .del-btn{background-color:#e6ebee;padding:.8em 0;border-radius:5px}  app-phlebo-request-acknowledge .phleboRequest-acknowledge__detailsTable .quentity{text-align:center;width:50%}  app-phlebo-request-acknowledge .phleboRequest-acknowledge__detailsTable .mat-select-arrow{opacity:0}  app-phlebo-request-acknowledge .phleboRequest-acknowledge__detailsTable .mat-form-field-appearance-outline .mat-form-field-outline{background-color:var(--secondary-color-300);color:transparent;border-radius:5px}  app-phlebo-request-acknowledge .phleboRequest-acknowledge__detailsTable .mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{width:1em!important}  app-phlebo-request-acknowledge .phleboRequest-acknowledge__detailsTable .mat-select-value{text-align:center}  app-phlebo-request-acknowledge .phleboRequest-acknowledge__comment{margin-top:2em}  app-phlebo-request-acknowledge .phleboRequest-acknowledge__comment .text-area{width:100%}  app-phlebo-request-acknowledge .phleboRequest-acknowledge__comment .mat-form-field-appearance-outline .mat-form-field-outline{background-color:var(--secondary-color-300);border-radius:5px}  app-phlebo-request-acknowledge .phleboRequest-acknowledge__comment .attachment .attachment{margin:1rem!important;border-radius:5rem;padding:10px 30px 10px 10px;border:1px solid var(--secondary-color-400);display:flex;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;background:var(--secondary-color-300)}  app-phlebo-request-acknowledge .phleboRequest-acknowledge__comment .attachment .attachment .mat-icon{-webkit-transform:scale(2.3);transform:scale(2.3)}  app-phlebo-request-acknowledge .phleboRequest-acknowledge__comment .attachment .attachment .attachemnt-label{padding-top:.3rem;padding-left:1rem}  app-phlebo-request-acknowledge .phleboRequest-acknowledge__comment .attachment .attachment .attachemnt-label p{margin:0}  app-phlebo-request-acknowledge .phleboRequest-acknowledge__comment .attachment .attachment .attachment-hint{color:var(--status-success)}  app-phlebo-request-acknowledge .phleboRequest-acknowledge__comment .attachment .attachment .file-attachment{display:flex}  app-phlebo-request-acknowledge .phleboRequest-acknowledge__comment .attachment .attachment .file-attachment .delete-icon{margin-left:.5rem;-webkit-transform:scale(1);transform:scale(1);cursor:pointer}  app-phlebo-request-acknowledge .phleboRequest-acknowledge__actionBtns .button-mat-all-cancel{border:1px solid var(--primary-color-500);margin-right:30px}  app-phlebo-request-acknowledge .phleboRequest-acknowledge__actionBtns .form-action-btn{width:100%;display:flex;margin-top:50px;justify-content:end}"],changeDetection:0}),n})();function pd(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Plese enter the Batch No"),e.qZA())}function dd(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Plese enter the Expiry Date"),e.qZA())}function ud(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Plese enter the Request Quantity"),e.qZA())}function md(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",12)(1,"div",13)(2,"label",14),e._uU(3,"Batch No"),e.qZA(),e.TgZ(4,"mat-form-field",15),e._UZ(5,"input",16),e.YNc(6,pd,2,0,"mat-error",7),e.qZA()(),e._UZ(7,"mat-divider",17),e.TgZ(8,"div",13)(9,"label",14),e._uU(10,"Vendor"),e.qZA(),e.TgZ(11,"mat-form-field",18)(12,"mat-select"),e._UZ(13,"mat-option"),e.qZA(),e._UZ(14,"mat-icon",19),e.qZA()(),e._UZ(15,"mat-divider",17),e.TgZ(16,"div",13)(17,"label",14),e._uU(18,"Expiry Date"),e.qZA(),e.TgZ(19,"mat-form-field",15),e._UZ(20,"input",20),e.YNc(21,dd,2,0,"mat-error",7),e.qZA()(),e._UZ(22,"mat-divider",17),e.TgZ(23,"div",13)(24,"label",14),e._uU(25,"Request Quantity"),e.qZA(),e.TgZ(26,"mat-form-field",15)(27,"input",21),e.NdJ("input",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.quantityChange())}),e.qZA(),e.YNc(28,ud,2,0,"mat-error",7),e.qZA()(),e._UZ(29,"mat-divider",17),e.TgZ(30,"div",22)(31,"mat-icon",23),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().index,r=e.oxw();return e.KtG(r.deleteReceipt(i))}),e.qZA()()()}if(2&n){const t=e.oxw().index,o=e.oxw();let i,r,l;e.Q6J("formGroupName",t),e.xp6(6),e.Q6J("ngIf",null==(i=o.productDetails.get("requests_quantity"))||null==i.errors?null:i.errors.required),e.xp6(1),e.Q6J("vertical",!0),e.xp6(8),e.Q6J("vertical",!0),e.xp6(6),e.Q6J("ngIf",null==(r=o.productDetails.get("expiry_date"))||null==r.errors?null:r.errors.required),e.xp6(1),e.Q6J("vertical",!0),e.xp6(6),e.Q6J("ngIf",null==(l=o.productDetails.get("requests_quantity"))||null==l.errors?null:l.errors.required),e.xp6(1),e.Q6J("vertical",!0)}}function hd(n,a){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,md,32,8,"div",11),e.qZA()),2&n){const t=a.index;e.xp6(1),e.Q6J("ngIf",t>=0)}}function _d(n,a){1&n&&(e.TgZ(0,"div")(1,"p"),e._uU(2,"Request quantity more then you entered"),e.qZA()())}let fd=(()=>{class n{constructor(t,o,i,r){this.data=t,this.dialogRef=o,this.fb=i,this.cdr=r,this.productInput={},this.quantityErrorMsg=!1}ngOnInit(){this.initReceiptForm(),this.data.receiptDetails?this.patchForm(this.data):this.receiptDetails.push(this.productGroup(null,null,null,null)),this.productInput={name:this.data.name,code:this.data.code,quantity:this.data.quantity}}initReceiptForm(){this.receiptForm=this.fb.group({code:[""],name:[""],receiptDetails:this.fb.array([],[s.kI.required])})}productGroup(t,o,i,r){return this.productDetails=this.fb.group({batch_no:[t,[s.kI.required]],vendor:[o],expiry_date:[i,[s.kI.required]],requests_quantity:[r,[s.kI.required]]}),this.productDetails}patchForm(t){t.receiptDetails.forEach(o=>{this.receiptDetails.push(this.productGroup(o.batch_no,o.vendor,o.expiry_date,o.requests_quantity))})}get receiptDetails(){return this.receiptForm.get("receiptDetails")}onConfirmClick(t){t.code=this.productInput.code,t.name=this.productInput.name,t.quantity=this.productInput.quantity,this.dialogRef.close(t)}addform(){this.receiptDetails.push(this.productGroup(null,null,null,null))}quantityChange(){let t=0;this.receiptForm.value.receiptDetails.forEach(o=>{t+=+o.requests_quantity}),this.quantityErrorMsg=t>this.productInput.quantity,this.cdr.markForCheck()}deleteReceipt(t){this.receiptDetails.removeAt(t),this.cdr.markForCheck()}submit(){this.onConfirmClick(this.receiptForm.value)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(C.WI),e.Y36(C.so),e.Y36(s.qu),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-open-dialog"]],decls:21,vars:6,consts:[[1,"add-receipt"],[3,"formGroup","submit"],[1,"header"],[1,"title","label-name"],[1,"primary","label-value"],["formArrayName","receiptDetails",1,"row","add-receipt_details"],[4,"ngFor","ngForOf"],[4,"ngIf"],["svgIcon","appAdd",1,"addicon",2,"margin-top","1.7em",3,"click"],[1,"submit"],["type","submit",1,"button-mat-all",3,"disabled"],["class","receipt-row",3,"formGroupName",4,"ngIf"],[1,"receipt-row",3,"formGroupName"],[1,"input"],[1,"primary","input-label"],["appearance","outline"],["type","text","matInput","","appNumbersOnly","","formControlName","batch_no"],[3,"vertical"],["appearance","outline",2,"width","13em"],["matSuffix","","svgIcon","appDownArrow"],["type","text","matInput","","formControlName","expiry_date"],["type","text","matInput","","appNumbersOnly","","formControlName","requests_quantity",3,"input"],[1,"addbtn"],["svgIcon","appDelete",1,"addicon","del",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("submit",function(){return o.submit()}),e.TgZ(2,"section",2)(3,"div")(4,"label",3),e._uU(5,"Product Code"),e.qZA(),e.TgZ(6,"label",4),e._uU(7),e.qZA()(),e.TgZ(8,"div")(9,"label",3),e._uU(10,"Product Name"),e.qZA(),e.TgZ(11,"label",4),e._uU(12),e.qZA()()(),e.TgZ(13,"section",5),e.YNc(14,hd,2,1,"div",6),e.qZA(),e.YNc(15,_d,3,0,"div",7),e.TgZ(16,"mat-icon",8),e.NdJ("click",function(){return o.addform()}),e.qZA(),e.TgZ(17,"section")(18,"div",9)(19,"button",10),e._uU(20," Submit "),e.qZA()()()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",o.receiptForm),e.xp6(6),e.Oqu(o.productInput.code),e.xp6(5),e.Oqu(o.productInput.name),e.xp6(2),e.Q6J("ngForOf",o.receiptDetails.controls),e.xp6(1),e.Q6J("ngIf",o.quantityErrorMsg),e.xp6(4),e.Q6J("disabled",o.quantityErrorMsg||o.receiptForm.invalid))},dependencies:[p.sg,p.O5,v.Hw,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,s.x0,s.CE,D.ey,g.TO,g.KE,g.R9,k.Nt,Y.d,J.gD,L.X],styles:["app-open-dialog .add-receipt .mat-form-field-appearance-outline .mat-form-field-outline{background-color:#e6ebee;border-radius:5px}  app-open-dialog .add-receipt .mat-form-field-infix{width:60%;text-align:center;padding:.5em 0 .8em}  app-open-dialog .add-receipt .mat-form-field-wrapper{padding-bottom:0}  app-open-dialog .add-receipt .header{display:flex;align-items:baseline;justify-content:space-between}  app-open-dialog .add-receipt .header .label-name{margin-right:1rem}  app-open-dialog .add-receipt .header mat-icon{cursor:pointer}  app-open-dialog .add-receipt_details{margin-top:1em;display:flex;flex-direction:column;justify-content:space-evenly}  app-open-dialog .add-receipt_details .receipt-row{display:flex}  app-open-dialog .add-receipt_details .receipt-row .input{display:flex;flex-direction:column;text-align:center;padding:0 1rem;max-width:90%}  app-open-dialog .add-receipt_details .receipt-row .input .input-label{margin:1rem 0}  app-open-dialog .add-receipt_details .receipt-row .addbtn{display:flex;align-items:center;font-size:32px;background-color:#e6ebee;padding:.5em 1em;border-radius:5px;height:1.5em;margin-top:1.5em;margin-left:.8em}  app-open-dialog .add-receipt_details .receipt-row .addbtn .addicon{cursor:pointer}  app-open-dialog .add-receipt_details .receipt-row .mat-select-arrow-wrapper{display:none}  app-open-dialog .add-receipt .submit{display:flex;justify-content:center;padding-top:3rem}  app-open-dialog .add-receipt .submit .submitbtn{padding:.5em 3em!important;background-color:#053353;color:#fff;font-size:20px;border-radius:10px!important;width:284px;height:59px}"],changeDetection:0}),n})();const gd=["table"];function bd(n,a){1&n&&(e.TgZ(0,"th",39),e._uU(1,"Product Code"),e.qZA())}function Cd(n,a){if(1&n&&(e.TgZ(0,"td",40),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(null==t?null:t.code)}}function qd(n,a){1&n&&(e.TgZ(0,"th",39),e._uU(1,"Product Name"),e.qZA())}function vd(n,a){if(1&n&&(e.TgZ(0,"td",40),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(null==t?null:t.name)}}function Zd(n,a){1&n&&(e.TgZ(0,"th",39),e._uU(1,"Request Quantity"),e.qZA())}function xd(n,a){if(1&n&&(e.TgZ(0,"div",43)(1,"mat-form-field",44),e._UZ(2,"input",45),e.qZA()()),2&n){const t=e.oxw(2).index;e.Q6J("formGroupName",t)}}function yd(n,a){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,xd,3,1,"div",42),e.qZA()),2&n){const t=a.index,o=e.oxw().index;e.xp6(1),e.Q6J("ngIf",o===t)}}function Td(n,a){if(1&n&&(e.TgZ(0,"td",40),e.YNc(1,yd,2,1,"div",41),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.phlebo_product_details.controls)}}function wd(n,a){1&n&&(e.TgZ(0,"th",39),e._uU(1,"Received Quantity"),e.qZA())}function Ad(n,a){1&n&&(e.TgZ(0,"td",46)(1,"mat-form-field",47),e._UZ(2,"input",48),e.qZA()())}function kd(n,a){1&n&&(e.TgZ(0,"th",39),e._uU(1,"Action"),e.qZA())}function Pd(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"td",40)(1,"div",49),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.openDialog(r))}),e._UZ(2,"mat-icon",50),e.qZA()()}}function Nd(n,a){1&n&&e._UZ(0,"tr",51)}function Ud(n,a){1&n&&e._UZ(0,"tr",52)}function Sd(n,a){1&n&&(e.TgZ(0,"div",53),e._UZ(1,"mat-spinner",54),e.qZA())}function Dd(n,a){1&n&&(e.TgZ(0,"div",55),e._uU(1,"No Data Available!"),e.qZA())}function Id(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-paginator",56),e.NdJ("page",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.getPageEvent(i))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("length",t.tableLength)("pageIndex",(t.phleboPagination.page||1)-1)("pageSize",t.phleboPagination.perPage)("pageSizeOptions",t.phleboPagination.paginationSizes)("showFirstLastButtons",!0)}}function Fd(n,a){1&n&&(e.TgZ(0,"div",57),e._UZ(1,"mat-spinner"),e.qZA())}const Yd=function(n,a,t,o){return{dark:n,cancel:a,success:t,primary:o}};let Rd=(()=>{class n{constructor(t,o,i,r,l,u,_){this.cdr=t,this.snackBar=o,this.dialog=i,this.activeRouter=r,this.router=l,this.fb=u,this.inventoryService=_,this.isLoading=!1,this.isEmpty=!1,this.dataSource=new c.by,this.productList=[],this.datasource=new c.by,this.request_info={},this.phleboData={},this.spinner=!1,this.vendorProductDetails=[],this.displayedColumns=["Product Code","ProductName","RequestQuantity","Received Quantity","Action"],this.phleboPagination=new y.p({page:1,perPage:5,total:this.tableLength})}ngOnInit(){this.getRouterParams(),this.initProductForm()}getPageEvent(t){this.phleboPagination.doPagination(t)}getRouterParams(){this.requestId=this.activeRouter.snapshot.paramMap.get("requestId"),this.phleboId=this.activeRouter.snapshot.paramMap.get("phleboId"),this.getPhleboRequest(this.phleboId,this.requestId)}productGroup(t,o){return this.productDetails=this.fb.group({product_id:[t,[s.kI.required]],quantity:[o,[s.kI.required]]}),this.productDetails}get phlebo_product_details(){return this.phleboForm.get("phlebo_product_details")}initProductForm(){this.phleboForm=this.fb.group({request_id:[null,[s.kI.required]],collection_center:[null,[s.kI.required]],comments:[""],attachments:[[]],phlebo_product_details:this.fb.array([],[s.kI.required])})}patchForm(t){t.phlebo_product_details.forEach(o=>{this.productList.push(o.id),o.code=o.product.code,o.name=o.product.name,this.datasource.data.push(o),this.phlebo_product_details.push(this.productGroup(o.id,o.quantity))}),this.phleboForm.patchValue({request_id:t.id,collection_center:t.collection_center,comments:t.comments}),this.request_info={requestId:t.request_id,requestBy:t?.request_by,phleboName:t.phlebo.name,requestOn:t.created_at,status:t.status},this.table.renderRows(),this.tableLength=this.datasource.data.length,this.isEmpty=!0,this.spinner=!1,0!=this.tableLength&&(this.isEmpty=!1),this.cdr.markForCheck()}getPhleboRequest(t,o){this.spinner=!0,this.cdr.markForCheck(),this.inventoryService.getPhleboRequest(t,o).subscribe({next:i=>{this.phleboData=i.data,this.patchForm(this.phleboData),this.spinner=!1,this.cdr.markForCheck()},error:i=>{let r=i?.error?.message;i?.error?.message||(r="Something went wrong"),this.spinner=!1,this.snackBar.open(r,"close"),this.cdr.markForCheck()}})}openDialog(t){let o={};0!=this.vendorProductDetails.length?this.vendorProductDetails.forEach(r=>{o=r.code==t.code?r:t}):o=t,this.dialog.open(fd,{width:"65%",height:"50%",disableClose:!1,data:o}).afterClosed().subscribe(r=>{this.vendorProductDetails.push(r)})}cancel(){this.router.navigate(["/inventory/phleborequest"])}submit(){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(z.ux),e.Y36(C.uw),e.Y36(m.gz),e.Y36(m.F0),e.Y36(s.qu),e.Y36(Z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-phlebo-request-pickup"]],viewQuery:function(t,o){if(1&t&&e.Gf(gd,5),2&t){let i;e.iGM(i=e.CRH())&&(o.table=i.first)}},decls:73,vars:24,consts:[[1,"phlebo-request-pickup"],[3,"formGroup","submit"],[1,"phlebo-request-pickup__btn"],["mat-button","",1,"backBtn","primary",3,"click"],["svgIcon","appLeftArrow"],[1,"phlebo-request-pickup__basicData"],[1,"phlebo-request-pickup__basicData--details","row"],[1,"col-sm-6"],[1,"col-sm-6","innerData"],[1,"primary"],[3,"ngClass"],[1,"phlebo-request-pickup__detailsTable","agm-table--container"],["mat-table","",1,"agm-table",3,"dataSource"],["table",""],["matColumnDef","Product Code"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","ProductName"],["matColumnDef","RequestQuantity","formArrayName","phlebo_product_details"],["matColumnDef","Received Quantity"],["mat-cell","","class","statusColumn",4,"matCellDef"],["matColumnDef","Action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","spinner-container",4,"ngIf"],["class","empty-row",4,"ngIf"],[3,"length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page",4,"ngIf"],[1,"phlebo-request-pickup__comments"],["appearance","outline",1,"primary","text-area"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","4","cdkAutosizeMaxRows","200","placeholder","Type here","formControlName","comments"],["autosize","cdkTextareaAutosize"],[1,"attachment"],[1,"attach-tag",3,"icon"],[1,"attachemnt-label"],[1,"phlebo-request-pickup__actionBtns"],[1,"form-action-btn"],["disabled","","type","submit","mat-button","",1,"button-mat-all","save-btn"],["type","submit","mat-button","",1,"button-mat-all"],["class","spinner",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[4,"ngFor","ngForOf"],[3,"formGroupName",4,"ngIf"],[3,"formGroupName"],["appearance","outline",1,"agm-select","quentity"],["type","number","matInput","","readonly","","appNumbersOnly","","formControlName","quantity"],["mat-cell","",1,"statusColumn"],["floatLabel","never","appearance","outline","tableInput","true",1,"agm-input-lg","quentity"],["matInput",""],[1,"add-btn",3,"click"],["svgIcon","appAdd"],["mat-header-row",""],["mat-row",""],[1,"spinner-container"],["diameter","70",1,"spinner"],[1,"empty-row"],[3,"length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page"],[1,"spinner"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("submit",function(){return o.submit()}),e.TgZ(2,"div",2)(3,"button",3),e.NdJ("click",function(){return o.cancel()}),e._UZ(4,"mat-icon",4),e._uU(5," Back "),e.qZA()(),e.TgZ(6,"section",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"h4"),e._uU(11,"Request ID"),e.qZA(),e.TgZ(12,"span",9),e._uU(13),e.qZA()(),e.TgZ(14,"div",8)(15,"h4"),e._uU(16,"Request On"),e.qZA(),e.TgZ(17,"span",9),e._uU(18),e.ALo(19,"date"),e.qZA()()(),e.TgZ(20,"div",7)(21,"div",8)(22,"h4"),e._uU(23,"Request By"),e.qZA(),e.TgZ(24,"span",9),e._uU(25),e.qZA()(),e.TgZ(26,"div",8)(27,"h4"),e._uU(28,"Request"),e.qZA(),e.TgZ(29,"span",10),e._uU(30),e.ALo(31,"titlecase"),e.qZA()()()()(),e.TgZ(32,"section",11)(33,"table",12,13),e.ynx(35,14),e.YNc(36,bd,2,0,"th",15),e.YNc(37,Cd,2,1,"td",16),e.BQk(),e.ynx(38,17),e.YNc(39,qd,2,0,"th",15),e.YNc(40,vd,2,1,"td",16),e.BQk(),e.ynx(41,18),e.YNc(42,Zd,2,0,"th",15),e.YNc(43,Td,2,1,"td",16),e.BQk(),e.ynx(44,19),e.YNc(45,wd,2,0,"th",15),e.YNc(46,Ad,3,0,"td",20),e.BQk(),e.ynx(47,21),e.YNc(48,kd,2,0,"th",15),e.YNc(49,Pd,3,0,"td",16),e.BQk(),e.YNc(50,Nd,1,0,"tr",22),e.YNc(51,Ud,1,0,"tr",23),e.qZA(),e.YNc(52,Sd,2,0,"div",24),e.YNc(53,Dd,2,0,"div",25),e.YNc(54,Id,1,5,"mat-paginator",26),e.qZA(),e.TgZ(55,"section",27)(56,"h4"),e._uU(57,"Comments"),e.qZA(),e.TgZ(58,"mat-form-field",28),e._UZ(59,"textarea",29,30),e.qZA(),e.TgZ(61,"div",31),e._UZ(62,"app-agm-add-attachment",32),e.TgZ(63,"div",33)(64,"p",9),e._uU(65,"Attachments"),e.qZA()()()(),e.TgZ(66,"section",34)(67,"div",35)(68,"button",36),e._uU(69," Save "),e.qZA(),e.TgZ(70,"button",37),e._uU(71," Save & Close "),e.qZA()()()()(),e.YNc(72,Fd,2,0,"div",38)),2&t&&(e.xp6(1),e.Q6J("formGroup",o.phleboForm),e.xp6(12),e.Oqu(null==o.request_info?null:o.request_info.requestId),e.xp6(5),e.hij("1",e.xi3(19,14,o.request_info.requestOn,"dd-mm-YYYY hh:mm:ss a"),""),e.xp6(7),e.Oqu((null==o.request_info?null:o.request_info.requestBy)||"N/A"),e.xp6(4),e.Q6J("ngClass",e.l5B(19,Yd,"f28878f9-9257-4d61-a604-795f3ba0a6a0"==(null==o.request_info||null==o.request_info.status?null:o.request_info.status.id),"6a75b397-52c4-4d60-ad97-fec0f4a1ccdb"==(null==o.request_info||null==o.request_info.status?null:o.request_info.status.id),"f16cedf6-5f28-4f2f-97fd-02fafaf1f6b4"==(null==o.request_info||null==o.request_info.status?null:o.request_info.status.id),"2ff55100-24cd-4ae8-9e12-f34565018074"==(null==o.request_info||null==o.request_info.status?null:o.request_info.status.id))),e.xp6(1),e.Oqu(e.lcZ(31,17,null==o.request_info||null==o.request_info.status?null:o.request_info.status.name)),e.xp6(3),e.Q6J("dataSource",o.datasource),e.xp6(17),e.Q6J("matHeaderRowDef",o.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns),e.xp6(1),e.Q6J("ngIf",o.isLoading),e.xp6(1),e.Q6J("ngIf",o.isEmpty),e.xp6(1),e.Q6J("ngIf",!o.isLoading&&!o.isEmpty),e.xp6(8),e.Q6J("icon","appVendorFile"),e.xp6(10),e.Q6J("ngIf",o.spinner))},dependencies:[p.mk,p.sg,p.O5,v.Hw,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.sg,s.u,s.x0,s.CE,O.IC,g.KE,k.Nt,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,G.oO,x.lW,w.Ou,T.NW,E.O,L.X,p.rS,p.uU],styles:["app-phlebo-request-pickup .phlebo-request-pickup{margin:2.6em}  app-phlebo-request-pickup .phlebo-request-pickup__basicData{margin-top:2em}  app-phlebo-request-pickup .phlebo-request-pickup__basicData--details .innerData{display:flex}  app-phlebo-request-pickup .phlebo-request-pickup__basicData--details .innerData .success{color:#146300}  app-phlebo-request-pickup .phlebo-request-pickup__basicData--details .innerData .cancel{color:#ff4155}  app-phlebo-request-pickup .phlebo-request-pickup__basicData--details .innerData .dark{color:#012b3e}  app-phlebo-request-pickup .phlebo-request-pickup__basicData--details .innerData span{padding-left:.5rem}  app-phlebo-request-pickup .phlebo-request-pickup__detailsTable{margin-top:2em}  app-phlebo-request-pickup .phlebo-request-pickup__detailsTable .mat-form-field-appearance-outline .mat-form-field-outline{color:transparent;background-color:var(--secondary-color-300);border-radius:5px}  app-phlebo-request-pickup .phlebo-request-pickup__detailsTable .add-btn{background-color:#e6ebee;padding:.8em 0;border-radius:5px}  app-phlebo-request-pickup .phlebo-request-pickup__detailsTable .quentity{text-align:center;width:50%}  app-phlebo-request-pickup .phlebo-request-pickup__comments{margin-top:2em}  app-phlebo-request-pickup .phlebo-request-pickup__comments .text-area{width:100%}  app-phlebo-request-pickup .phlebo-request-pickup__comments .mat-form-field-appearance-outline .mat-form-field-outline{background-color:var(--secondary-color-300);border-radius:5px}  app-phlebo-request-pickup .phlebo-request-pickup__comments .attachment{display:flex;margin:.5rem 1rem}  app-phlebo-request-pickup .phlebo-request-pickup__comments .attachment .mat-icon{-webkit-transform:scale(2.3);transform:scale(2.3)}  app-phlebo-request-pickup .phlebo-request-pickup__comments .attachment .attachemnt-label{padding-top:1.5rem;padding-left:1rem}  app-phlebo-request-pickup .phlebo-request-pickup__comments .attachment .file-attachment{display:flex}  app-phlebo-request-pickup .phlebo-request-pickup__comments .attachment .file-attachment .delete-icon{margin-left:.5rem;-webkit-transform:scale(1);transform:scale(1)}  app-phlebo-request-pickup .phlebo-request-pickup__actionBtns .form-action-btn{width:100%;display:flex;margin-top:50px;justify-content:end}  app-phlebo-request-pickup .phlebo-request-pickup__actionBtns .form-action-btn .button-mat-all-cancel{margin-right:50px}  app-phlebo-request-pickup .phlebo-request-pickup__actionBtns .form-action-btn .save-btn{margin-right:50px}  app-phlebo-request-pickup .phlebo-request-pickup .mat-select-value{text-align:center}"],changeDetection:0}),n})();var Qd=h(49808);const Jd=["table"],Od=function(n,a,t,o){return{dark:n,cancel:a,success:t,primary:o}};function Md(n,a){if(1&n&&(e.TgZ(0,"div",44)(1,"div",45)(2,"div",46)(3,"p",47),e._uU(4,"Request ID :"),e.qZA(),e.TgZ(5,"p",48),e._uU(6),e.qZA()()(),e.TgZ(7,"div",49)(8,"div",46)(9,"p",47),e._uU(10,"Request By :"),e.qZA(),e.TgZ(11,"p",48),e._uU(12),e.qZA()()(),e.TgZ(13,"div",50)(14,"div",46)(15,"p",47),e._uU(16,"Request :"),e.qZA(),e.TgZ(17,"p",51)(18,"span",52),e._uU(19),e.ALo(20,"titlecase"),e.qZA()()()()()),2&n){const t=e.oxw();e.xp6(6),e.Oqu(t.request_info.requestId),e.xp6(6),e.hij(" ",(null==t.request_info?null:t.request_info.requestBy)||"N/A"," "),e.xp6(6),e.Q6J("ngClass",e.l5B(6,Od,"f28878f9-9257-4d61-a604-795f3ba0a6a0"==(null==t.request_info||null==t.request_info.status?null:t.request_info.status.id),"6a75b397-52c4-4d60-ad97-fec0f4a1ccdb"==(null==t.request_info||null==t.request_info.status?null:t.request_info.status.id),"f16cedf6-5f28-4f2f-97fd-02fafaf1f6b4"==(null==t.request_info||null==t.request_info.status?null:t.request_info.status.id),"2ff55100-24cd-4ae8-9e12-f34565018074"==(null==t.request_info||null==t.request_info.status?null:t.request_info.status.id))),e.xp6(1),e.hij(" ",e.lcZ(20,4,null==t.request_info||null==t.request_info.status?null:t.request_info.status.name),"")}}function Bd(n,a){if(1&n&&(e.TgZ(0,"div",55)(1,"div",56)(2,"p",47),e._uU(3,"Request On :"),e.qZA(),e.TgZ(4,"p",48),e._uU(5),e.ALo(6,"date"),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(5),e.hij(" ",e.xi3(6,1,t.request_info.requestOn,"dd-mm-YYYY hh:mm:ss a")," ")}}function Ld(n,a){if(1&n&&(e.TgZ(0,"div",55)(1,"div",57)(2,"p",47),e._uU(3,"Phlebo Name:"),e.qZA(),e.TgZ(4,"p",48),e._uU(5),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(5),e.hij(" ",(null==t.request_info?null:t.request_info.phleboName)||"N/A"," ")}}function Ed(n,a){if(1&n&&(e.TgZ(0,"div",53),e.YNc(1,Bd,7,4,"div",54),e.YNc(2,Ld,6,1,"div",54),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.request_id),e.xp6(1),e.Q6J("ngIf",t.request_id)}}function Vd(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",28)(1,"div",58)(2,"div",59)(3,"div",60)(4,"button",61),e.NdJ("click",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.onOpenPhleboSelect(i))}),e.TgZ(5,"span"),e._uU(6,"Select Phlebo"),e.qZA(),e.TgZ(7,"div"),e._UZ(8,"mat-icon",62),e.qZA()()()()()()}}function $d(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",64),e.NdJ("click",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onOpenPhleboSelect(i))}),e._UZ(1,"mat-icon",62),e.qZA()}}function jd(n,a){if(1&n&&(e.TgZ(0,"div",28)(1,"div",56)(2,"p",47),e._uU(3,"Phlebo Name:"),e.qZA(),e.TgZ(4,"p",48),e._uU(5),e.qZA(),e.YNc(6,$d,2,0,"div",63),e.qZA()()),2&n){const t=e.oxw();e.xp6(5),e.Oqu((null==t.phlebo_info?null:t.phlebo_info.name)||"N/A"),e.xp6(1),e.Q6J("ngIf",t.request_id)}}function zd(n,a){if(1&n&&(e.TgZ(0,"mat-option",73),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function Hd(n,a){1&n&&(e.TgZ(0,"mat-option")(1,"div"),e._uU(2,"No results found!"),e.qZA()())}function Gd(n,a){1&n&&(e.TgZ(0,"mat-hint"),e._uU(1,"Please select phlebo"),e.qZA())}function Kd(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Center is required"),e.qZA())}function Wd(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",46)(1,"div",65)(2,"label",66),e._uU(3,"Center"),e.qZA()(),e.TgZ(4,"div")(5,"mat-form-field",67)(6,"input",68),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.centerChecking())}),e.qZA(),e.TgZ(7,"mat-autocomplete",69,70),e.NdJ("optionSelected",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.centerValue(i.option.value.id))}),e.YNc(9,zd,2,2,"mat-option",71),e.ALo(10,"async"),e.YNc(11,Hd,3,0,"mat-option",72),e.ALo(12,"async"),e.qZA(),e.YNc(13,Gd,2,0,"mat-hint",72),e.YNc(14,Kd,2,0,"mat-error",72),e.qZA()()()}if(2&n){const t=e.MAs(8),o=e.oxw();let i;e.xp6(6),e.s9C("readonly",o.phleboFlowCenter),e.Q6J("matAutocomplete",t),e.xp6(1),e.Q6J("displayWith",o.getOptionText),e.xp6(2),e.Q6J("ngForOf",e.lcZ(10,7,o.filteredOptionCenters$)),e.xp6(2),e.Q6J("ngIf",0==e.lcZ(12,9,o.filteredOptionCenters$)),e.xp6(2),e.Q6J("ngIf",o.phleboFlowCenter),e.xp6(1),e.Q6J("ngIf",null==(i=o.phleboForm.get("collection_center"))||null==i.errors?null:i.errors.required)}}function Xd(n,a){1&n&&(e.TgZ(0,"mat-hint"),e._uU(1," Please select center "),e.qZA())}function eu(n,a){if(1&n&&(e.TgZ(0,"mat-option",73),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",null==t?null:t.name," ")}}function tu(n,a){1&n&&(e.TgZ(0,"mat-option",85),e._uU(1,"No Records Found"),e.qZA())}function nu(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",74)(1,"div",75),e.YNc(2,Xd,2,0,"mat-hint",72),e.TgZ(3,"form",76)(4,"mat-form-field",77)(5,"input",78),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.productChecking())}),e.qZA(),e.TgZ(6,"mat-autocomplete",79,80),e.NdJ("opened",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.updateSelectContainer())})("optionSelected",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.onProductSelection(i))}),e.TgZ(8,"div",81),e.NdJ("scrolled",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.loadMorePatients())}),e.YNc(9,eu,2,2,"mat-option",71),e.YNc(10,tu,2,0,"mat-option",82),e.qZA()(),e._UZ(11,"mat-icon",83)(12,"mat-divider",84),e.qZA()()()()}if(2&n){const t=e.MAs(7),o=e.oxw();e.xp6(2),e.Q6J("ngIf",o.phleboFlowProduct),e.xp6(3),e.s9C("readonly",o.phleboFlowProduct),e.Q6J("formControl",o.searchInput)("matAutocomplete",t),e.xp6(1),e.Q6J("displayWith",o.inventoryDisplayWithFn),e.xp6(2),e.Q6J("infiniteScrollDistance",1)("infiniteScrollThrottle",0)("scrollWindow",!1)("fromRoot",!0)("immediateCheck",!1)("alwaysCallback",!1)("infiniteScrollContainer",o.selectcanelContainer),e.xp6(1),e.Q6J("ngForOf",o.searchPatientsUseAutoComplete.data),e.xp6(1),e.Q6J("ngIf",!o.searchPatientsUseAutoComplete.data||!!o.searchPatientsUseAutoComplete.data&&0===o.searchPatientsUseAutoComplete.data.length),e.xp6(2),e.Q6J("vertical",!0)}}function ou(n,a){1&n&&(e.TgZ(0,"th",86),e._uU(1,"Product Code"),e.qZA())}function au(n,a){if(1&n&&(e.TgZ(0,"td",87),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(t.code)}}function iu(n,a){1&n&&(e.TgZ(0,"th",86),e._uU(1,"Product Name"),e.qZA())}function ru(n,a){if(1&n&&(e.TgZ(0,"td",87),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(t.name)}}function su(n,a){1&n&&(e.TgZ(0,"th",86),e._uU(1,"Request Quantity"),e.qZA())}function cu(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Please Enter Quantity "),e.qZA())}function lu(n,a){if(1&n&&(e.TgZ(0,"div",90)(1,"mat-form-field",91),e._UZ(2,"input",92),e.YNc(3,cu,2,0,"mat-error",72),e.qZA()()),2&n){const t=e.oxw(2).index,o=e.oxw();let i;e.Q6J("formGroupName",t),e.xp6(3),e.Q6J("ngIf",null==(i=o.productDetails.get("quantity"))||null==i.errors?null:i.errors.required)}}function pu(n,a){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,lu,4,2,"div",89),e.qZA()),2&n){const t=a.index,o=e.oxw().index;e.xp6(1),e.Q6J("ngIf",o===t)}}function du(n,a){if(1&n&&(e.TgZ(0,"td",87),e.YNc(1,pu,2,1,"div",88),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.phlebo_product_details.controls)}}function uu(n,a){1&n&&(e.TgZ(0,"th",86),e._uU(1,"Action"),e.qZA())}function mu(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"td",87)(1,"div",93),e.NdJ("click",function(){const r=e.CHM(t).index,l=e.oxw();return e.KtG(l.deleteProduct(r))}),e.TgZ(2,"mat-icon",94),e._uU(3,"delete"),e.qZA()()()}}function hu(n,a){1&n&&e._UZ(0,"tr",95)}function _u(n,a){1&n&&e._UZ(0,"tr",96)}function fu(n,a){1&n&&(e.TgZ(0,"div",97),e._UZ(1,"mat-spinner",98),e.qZA())}function gu(n,a){1&n&&(e.TgZ(0,"div",99),e._uU(1,"No Data Available!"),e.qZA())}function bu(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-paginator",100),e.NdJ("page",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.getPageEvent(i))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("length",t.tableLength)("pageIndex",(t.phleboPagination.page||1)-1)("pageSize",t.phleboPagination.perPage)("pageSizeOptions",t.phleboPagination.paginationSizes)("showFirstLastButtons",!0)}}function Cu(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"a",101),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.viewAttachment())}),e._uU(1),e.qZA()}if(2&n){const t=e.oxw();e.xp6(1),e.hij(" Uploaded (",t.attachmentFiles.length,") ")}}function qu(n,a){1&n&&(e.TgZ(0,"div",102),e._uU(1," Choose a file "),e.qZA())}function vu(n,a){1&n&&(e.TgZ(0,"div",103),e._UZ(1,"mat-spinner"),e.qZA())}let we=(()=>{class n{constructor(t,o,i,r,l,u,_,b,f){this.fb=t,this.activeRouter=o,this.cdr=i,this.inventoryService=r,this.router=l,this.sharedService=u,this.dialog=_,this.snackBar=b,this.userService=f,this.type=null,this.datasource=new c.by,this.searchInput=new s.NI(""),this.searchPatientsUseAutoComplete=new Q.d,this.filteredOptionCenters$=new ve.y,this.options=["One","Two","Three"],this.unsubscribe$=new S.x,this.isEmpty=!0,this.isLoading=!1,this.request_id=null,this.spinner=!1,this.centers=[],this.vendorList=[],this.productList=[],this.searchFilter={},this.phleboFlowCenter=!1,this.phleboFlowProduct=!1,this.phleboIdValue=!1,this.phleboData={},this.attachmentFiles=[],this.attachmentPreviewVisible=!1,this.attachmentLength=0,this.dialogFile=[],this.displayedColumns=["Product Code","ProductName","RequestQuantity","Action"],this.request_info={},this.phleboPagination=new y.p({page:1,perPage:5,total:this.tableLength}),this.filteredOptions=this.searchInput.valueChanges.pipe((0,se.O)(""),(0,P.U)(q=>this.filter(q||"")))}ngOnInit(){this.initProductForm(),this.getRouterParams()}getRouterParams(){this.requestId=this.activeRouter.snapshot.paramMap.get("requestId"),this.phleboId=this.activeRouter.snapshot.paramMap.get("phleboId"),this.phleboId?(this.type="edit",this.request_id=!0,this.getPhleboRequest(this.phleboId,this.requestId)):(this.type="create",this.request_id=!1),this.cdr.markForCheck()}getPageEvent(t){this.phleboPagination.doPagination(t)}productGroup(t,o){return this.productDetails=this.fb.group({product_id:[t,[s.kI.required]],quantity:[o,[s.kI.required]]}),this.productDetails}get phlebo_product_details(){return this.phleboForm.get("phlebo_product_details")}initProductForm(){this.phleboForm=this.fb.group({request_id:[null,[s.kI.required]],collection_center:[null,[s.kI.required]],comments:[""],attachments:[[]],phlebo_product_details:this.fb.array([],[s.kI.required])})}updateSelectContainer(){this.selectcanelContainer=".patient-autocomplete"}inventoryDisplayWithFn(t){return t?.name??""}getOptionText(t){return t?.name}loadMorePatients(){this.searchPatientsUseAutoComplete.loadMoreData(()=>{},()=>{})}centerChecking(){this.phleboIdValue||(this.phleboFlowCenter=!0,this.cdr.markForCheck())}productChecking(){this.phleboIdValue||(this.phleboFlowProduct=!0,this.cdr.markForCheck())}centerValue(t){this.searchFilter={search:"",search_by:"name",centers:{id:null}},this.phleboFlowProduct=!1,this.customerSearchAutocompleteSetup(t),this.cdr.markForCheck()}customerSearchAutocompleteSetup(t){this.spinner=!0,this.cdr.markForCheck();let o=this.searchInput?.valueChanges;o&&(this.searchPatientsUseAutoComplete.loadDependency(this.cdr,this.unsubscribe$,o),this.searchFilter={filter:{search:"",search_by:"name",centers:{id:t}}},this.searchPatientsUseAutoComplete.pagination.perPage=25,this.searchPatientsUseAutoComplete.apiEndpointMethod=()=>{let i=this.searchPatientsUseAutoComplete.searchStr;return i&&""!==i?(this.searchFilter.search=i,this.searchFilter.search_by="name"):(delete this.searchFilter.filter.search,delete this.searchFilter.filter.search_by),this.inventoryService.searchProduct(null,this.searchPatientsUseAutoComplete.pagination,this.searchFilter).pipe((0,P.U)(r=>(this.spinner=!1,this.cdr.markForCheck(),r.data)))},this.searchPatientsUseAutoComplete.listenForAutoCompleteSearchFormControl(this.searchInput,()=>{},i=>{}),this.searchPatientsUseAutoComplete.loadData(()=>{},()=>{}))}patchForm(t){t.phlebo_product_details.forEach(o=>{this.productList.push(o.id),o.code=o.product.code,o.name=o.product.name,this.datasource.data.push(o),this.phlebo_product_details.push(this.productGroup(o.id,o.quantity))}),this.phleboForm.patchValue({request_id:t.id,collection_center:t.collection_center,comments:t.comments}),this.request_info={requestId:t.request_id,requestBy:"",phleboName:t.phlebo.name,requestOn:t.created_at,status:t.status},this.attachmentFiles=t?.attachments,this.attachmentFiles&&(this.attachmentPreviewVisible=!0,this.cdr.markForCheck()),this.attachmentLength=this.attachmentFiles.length+1,this.table.renderRows(),this.tableLength=this.datasource.data.length,this.isEmpty=!0,this.searchInput.setValue(""),0!=this.tableLength&&(this.isEmpty=!1),this.cdr.markForCheck()}getPhleboRequest(t,o){this.spinner=!0,this.cdr.markForCheck(),this.inventoryService.getPhleboRequest(t,o).subscribe({next:i=>{this.phleboData=i.data,this.patchForm(this.phleboData),this.spinner=!1,this.cdr.markForCheck()},error:i=>{let r=i?.error?.message;i?.error?.message||(r="Something went wrong"),this.spinner=!1,this.snackBar.open(r,"close"),this.cdr.markForCheck()}})}onOpenPhleboSelect(t){this.dialog.open(le,{width:"80%",height:"70%",disableClose:!1}).afterClosed().subscribe(i=>{this.phlebo_info=i,this.centers=i.centers,this.phlebo_info.id&&(this.phleboIdValue=!0,this.phleboFlowCenter=!1),this.getFilteredOptionCenters(),this.cdr.markForCheck()})}getFilteredOptionCenters(){this.filteredOptionCenters$=this.phleboForm?.get("collection_center")?.valueChanges?.pipe?.((0,se.O)(""),(0,P.U)(t=>this.filterCenter(t||"")))}filterCenter(t){"string"!=typeof t&&(t="");const o=t.toLowerCase();return this.centers.filter(r=>r.name?.toLowerCase().includes(o))}filter(t){const o=t.toLowerCase();return this.options.filter(i=>i.toLowerCase().includes(o))}onProductSelection(t){var o=this;return(0,X.Z)(function*(){o.product_id=t.option.value.id,yield o.getAllVendorList();const i={...t.option.value};0==o.datasource.data.length?(o.productList.push(o.product_id),o.datasource.data.push(i),o.phlebo_product_details.push(o.productGroup(o.product_id,null))):o.productList.some(l=>l==o.product_id)?o.snackBar.open("Same Product already added","close"):(o.productList.push(o.product_id),o.datasource.data.push(i),o.phlebo_product_details.push(o.productGroup(o.product_id,null))),o.table.renderRows(),o.tableLength=o.datasource.data.length,o.isEmpty=!0,o.searchInput.setValue(""),0!=o.tableLength&&(o.isEmpty=!1),o.cdr.markForCheck()})()}getAllVendorList(){var t=this;return(0,X.Z)(function*(){t.isLoading=!0;try{const o=yield(0,Qd.n)(t.inventoryService.getAllVendorsByProductId(t.product_id));t.isLoading=!1,t.vendorList=o.data,t.cdr.detectChanges()}catch{t.isLoading=!1,t.cdr.detectChanges()}})()}receivedFileName(t){let o;this.spinner=!0;const i=new FormData;i.append("file",t),i.append("upload_type","attachement"),this.userService.uploadImage(i).subscribe({next:r=>{o=r.message,this.attachmentFiles.push(r?.data?.uploadedFilePath)},error:r=>{this.snackBar.open(r.error.error,"close"),this.spinner=!1},complete:()=>{this.attachmentPreviewVisible=!0,this.spinner=!1,this.snackBar.open(t.name+" "+o,""),this.cdr.markForCheck()}}),this.attachmentFiles&&(this.attachmentPreviewVisible=!0,this.cdr.markForCheck()),this.attachmentLength=this.attachmentFiles.length+1}uploadAttachments(){var t=this;return(0,X.Z)(function*(){t.dialogFile=[];let o={};for(let i of t.attachmentFiles)o={name:i},t.dialogFile.push(o)})()}viewAttachment(){this.uploadAttachments().then(()=>{this.openPreviewDialog()})}openPreviewDialog(){this.attachmentPreviewDialog=this.dialog.open(re.a,{width:"50%",height:"auto",disableClose:!1,data:{file:this.dialogFile}}),this.attachmentPreviewDialog.afterClosed().subscribe(t=>{if(0!=t.length)for(let o of t)this.attachmentFiles.splice(t,1);this.attachmentLength=this.attachmentFiles.length,this.cdr.markForCheck(),0==this.attachmentFiles.length&&(this.attachmentPreviewVisible=!1,this.cdr.markForCheck())})}submit(){"create"==this.type?this.createProduct():this.updateProduct(this.phleboId,this.requestId)}updateProduct(t,o){if(this.phleboForm.valid){this.spinner=!0,this.cdr.markForCheck();let i={...this.phleboForm.value};i.products=i.phlebo_product_details,delete i.phlebo_product_details,this.inventoryService.updatePhleboRequest(t,o,i).subscribe({next:r=>{this.snackBar.open(r.message,"close"),this.router.navigate(["/inventory/phleborequest"]),this.spinner=!1,this.cdr.markForCheck()},error:r=>{let l=r?.error?.message;r?.error?.message||(l="Something went wrong"),this.spinner=!1,this.snackBar.open(l,"close"),this.cdr.markForCheck()}})}}createProduct(){this.phleboForm.patchValue({request_id:this.phlebo_info.id,attachments:this.attachmentFiles});let t={...this.phleboForm.value};t.collection_center=t.collection_center.id,console.log(this.phleboForm.valid),console.log(this.phleboForm.valid),this.phleboForm.valid&&(this.spinner=!0,this.inventoryService.createPhleboRequest(this.phlebo_info.id,t).subscribe({next:o=>{this.snackBar.open(o.message,"close"),this.router.navigate(["/inventory/phleborequest"]),this.spinner=!1,this.cdr.markForCheck()},error:o=>{let i=o?.error?.message;o?.error?.message||(i="Something went wrong"),this.spinner=!1,this.snackBar.open(i,"close"),this.cdr.markForCheck()}}))}deleteProduct(t){this.datasource.data.splice(t,1),this.table.renderRows(),this.phlebo_product_details.removeAt(t),this.tableLength=this.datasource.data.length,0===this.datasource.data.length&&(this.isEmpty=!0),this.cdr.markForCheck()}cancel(){this.router.navigate(["/inventory/phleborequest"])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(s.qu),e.Y36(m.gz),e.Y36(e.sBO),e.Y36(Z),e.Y36(m.F0),e.Y36(K.F),e.Y36(C.uw),e.Y36(A.c),e.Y36(oe.x))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-phlebo-create"]],viewQuery:function(t,o){if(1&t&&e.Gf(Jd,5),2&t){let i;e.iGM(i=e.CRH())&&(o.table=i.first)}},decls:60,vars:19,consts:[[1,"create-phlebo"],[3,"formGroup","ngSubmit"],[1,"title","primary"],[1,"ackheader"],["class","row acknowledge",4,"ngIf"],["class","row acknowledge acknowledge-bottom ack-second col-lg-8",4,"ngIf"],[1,"acknowledge","acknowledge-bottom","col-lg-12"],["class","",4,"ngIf"],["class","acknowledge-details",4,"ngIf"],["class","row create-phlebo__header",4,"ngIf"],[1,"agm-table--container"],["mat-table","",1,"agm-table",3,"dataSource"],["table",""],["matColumnDef","Product Code"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","ProductName"],["matColumnDef","RequestQuantity","formArrayName","phlebo_product_details"],["matColumnDef","Action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","spinner-container",4,"ngIf"],["class","empty-row",4,"ngIf"],[3,"length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page",4,"ngIf"],[1,"create-phlebo__footer"],[1,"class-phlebo__footer-input"],[1,"row"],[1,"col-xs-12","label"],[1,""],[1,"col-xs-12","textarea"],["appearance","outline",1,"primary","text-area"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","4","cdkAutosizeMaxRows","200","placeholder","Type here","formControlName","comments"],["autosize","cdkTextareaAutosize"],[1,"row","btns","create-phlebo_attachment"],[1,"attachment"],[1,"attach-tag",3,"icon","fileName"],[1,"attachemnt-label"],[1,"primary"],["class","attachment-hint pointer",3,"click",4,"ngIf"],["class","file-attachment",4,"ngIf"],[1,"form-action-btn"],["type","button","mat-button","",1,"button-mat-all-cancel",3,"click"],["type","submit","mat-button","",1,"button-mat-all"],["class","spinner",4,"ngIf"],[1,"row","acknowledge"],[1,"col-md-12","col-lg-4","between"],[1,"acknowledge-details"],[1,"title","label-name"],[1,"primary","label-value"],[1,"col-md-12","col-lg-4","between","request_by"],[1,"col-lg-4","request"],[1,"label-value"],[3,"ngClass"],[1,"row","acknowledge","acknowledge-bottom","ack-second","col-lg-8"],["class","col-lg-6 col-md-6",4,"ngIf"],[1,"col-lg-6","col-md-6"],[1,"acknowledge-details","label-margin"],[1,"acknowledge-details","label-margin","request_by"],[1,"button-common"],[1,"action-buttons"],[1,"btn","sample-btn"],["type","button",1,"btn-icons",3,"click"],["svgIcon","appEditAction"],["class","phlebo-edit",3,"click",4,"ngIf"],[1,"phlebo-edit",3,"click"],[1,"text-right","inner-row"],[1,"required","title"],["floatLabel","never","appearance","outline",1,"agm-input-lg"],["matInput","","type","text","placeholder","Enter Lab ","autocomplete","off","formControlName","collection_center",3,"matAutocomplete","readonly","click"],["autoActiveFirstOption","",3,"displayWith","optionSelected"],["autoCenter","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"],[1,"row","create-phlebo__header"],[1,"col-lg-6","col-md-8","col-sm-12","col-xs-12","create-phlebo__header-input__filter"],[1,"center-consumption_header--input_form"],["appearance","outline",1,"agm-search_box"],["matInput","","placeholder","Search by Product Name",3,"formControl","matAutocomplete","readonly","click"],["autoActiveFirstOption","",1,"autocomplete-scroll",3,"displayWith","opened","optionSelected"],["auto","matAutocomplete"],["infiniteScroll","",1,"patient-autocomplete",3,"infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","fromRoot","immediateCheck","alwaysCallback","infiniteScrollContainer","scrolled"],["disabled","true",4,"ngIf"],["matSuffix","","svgIcon","appSearch"],["matSuffix","",3,"vertical"],["disabled","true"],["mat-header-cell",""],["mat-cell",""],[4,"ngFor","ngForOf"],[3,"formGroupName",4,"ngIf"],[3,"formGroupName"],["appearance","outline",1,"agm-select"],["type","number","matInput","","appNumbersOnly","","formControlName","quantity"],[1,"del-btn",3,"click"],["svgIcon","appDelete"],["mat-header-row",""],["mat-row",""],[1,"spinner-container"],["diameter","70",1,"spinner"],[1,"empty-row"],[3,"length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page"],[1,"attachment-hint","pointer",3,"click"],[1,"file-attachment"],[1,"spinner"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return o.submit()}),e.TgZ(2,"div")(3,"h3",2),e._uU(4),e.qZA()(),e.TgZ(5,"section",3),e.YNc(6,Md,21,11,"div",4),e.YNc(7,Ed,3,2,"div",5),e.TgZ(8,"div",6),e.YNc(9,Vd,9,0,"div",7),e.YNc(10,jd,7,2,"div",7),e.YNc(11,Wd,15,11,"div",8),e.qZA(),e.YNc(12,nu,13,15,"div",9),e.qZA(),e.TgZ(13,"section",10)(14,"table",11,12),e.ynx(16,13),e.YNc(17,ou,2,0,"th",14),e.YNc(18,au,2,1,"td",15),e.BQk(),e.ynx(19,16),e.YNc(20,iu,2,0,"th",14),e.YNc(21,ru,2,1,"td",15),e.BQk(),e.ynx(22,17),e.YNc(23,su,2,0,"th",14),e.YNc(24,du,2,1,"td",15),e.BQk(),e.ynx(25,18),e.YNc(26,uu,2,0,"th",14),e.YNc(27,mu,4,0,"td",15),e.BQk(),e.YNc(28,hu,1,0,"tr",19),e.YNc(29,_u,1,0,"tr",20),e.qZA(),e.YNc(30,fu,2,0,"div",21),e.YNc(31,gu,2,0,"div",22),e.YNc(32,bu,1,5,"mat-paginator",23),e.qZA(),e.TgZ(33,"section",24)(34,"div",25)(35,"div",26)(36,"div",27)(37,"h4",28),e._uU(38,"Comments"),e.qZA()(),e.TgZ(39,"div",29)(40,"mat-form-field",30),e._UZ(41,"textarea",31,32),e.TgZ(43,"mat-hint"),e._uU(44,"Maximum allowed characters 200"),e.qZA()()()(),e.TgZ(45,"div",33)(46,"div",34)(47,"app-agm-add-attachment",35),e.NdJ("fileName",function(r){return o.receivedFileName(r)}),e.qZA(),e.TgZ(48,"div",36)(49,"p",37),e._uU(50,"Attachments"),e.qZA(),e.YNc(51,Cu,2,1,"a",38),e.YNc(52,qu,2,0,"div",39),e.qZA()(),e.TgZ(53,"div",28)(54,"div",40)(55,"button",41),e.NdJ("click",function(){return o.cancel()}),e._uU(56," Cancel "),e.qZA(),e.TgZ(57,"button",42),e._uU(58),e.qZA()()()()()()()(),e.YNc(59,vu,2,0,"div",43)),2&t&&(e.xp6(1),e.Q6J("formGroup",o.phleboForm),e.xp6(3),e.hij(" ","create"===o.type?"Create":"edit"===o.type?"Edit":""," Phlebo Request "),e.xp6(2),e.Q6J("ngIf",o.request_id),e.xp6(1),e.Q6J("ngIf",o.request_id),e.xp6(2),e.Q6J("ngIf",!o.request_id),e.xp6(1),e.Q6J("ngIf",!o.request_id),e.xp6(1),e.Q6J("ngIf",!o.request_id),e.xp6(1),e.Q6J("ngIf",!o.request_id),e.xp6(2),e.Q6J("dataSource",o.datasource),e.xp6(14),e.Q6J("matHeaderRowDef",o.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns),e.xp6(1),e.Q6J("ngIf",o.isLoading),e.xp6(1),e.Q6J("ngIf",o.isEmpty),e.xp6(1),e.Q6J("ngIf",!o.isLoading&&!o.isEmpty),e.xp6(15),e.Q6J("icon","appVendorFile"),e.xp6(4),e.Q6J("ngIf",o.attachmentPreviewVisible),e.xp6(1),e.Q6J("ngIf",!o.attachmentFiles.length),e.xp6(6),e.hij(" ","create"==o.type?"Create":"edit"==o.type?"Update":""," "),e.xp6(1),e.Q6J("ngIf",o.spinner))},dependencies:[p.mk,p.sg,p.O5,R.R,v.Hw,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.F,s.oH,s.sg,s.u,s.x0,s.CE,N.XC,N.ZL,D.ey,O.IC,g.TO,g.KE,g.bx,g.R9,k.Nt,Y.d,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,G.oO,x.lW,w.Ou,T.NW,E.O,L.X,p.Ov,p.rS,p.uU],styles:["app-phlebo-create .create-phlebo{padding:2.6em}  app-phlebo-create .create-phlebo .ackheader{margin:2.5rem 0}  app-phlebo-create .create-phlebo .ackheader .acknowledge-bottom{margin-bottom:2rem}  app-phlebo-create .create-phlebo .ackheader .acknowledge{display:flex;justify-content:space-between}  app-phlebo-create .create-phlebo .ackheader .acknowledge .request_by{display:flex;justify-content:center}  app-phlebo-create .create-phlebo .ackheader .acknowledge .request{display:flex;justify-content:flex-end}  app-phlebo-create .create-phlebo .ackheader .acknowledge .label-margin{margin-top:1.5rem}  app-phlebo-create .create-phlebo .ackheader .acknowledge .acknowledge-details{display:flex}  app-phlebo-create .create-phlebo .ackheader .acknowledge .acknowledge-details .label-name{margin-right:1rem;font-size:1.25rem}  app-phlebo-create .create-phlebo .ackheader .acknowledge .acknowledge-details .label-value{margin-top:.1rem}  app-phlebo-create .create-phlebo .ackheader .acknowledge .acknowledge-details .label-value .success{color:#146300}  app-phlebo-create .create-phlebo .ackheader .acknowledge .acknowledge-details .label-value .cancel{color:#ff4155}  app-phlebo-create .create-phlebo .ackheader .acknowledge .acknowledge-details .label-value .dark{color:#012b3e}  app-phlebo-create .create-phlebo .ackheader .acknowledge .acknowledge-details .phlebo-edit{margin-left:2rem}  app-phlebo-create .create-phlebo .ackheader .inner-row{display:flex;flex-direction:row;align-items:center;justify-content:end}  app-phlebo-create .create-phlebo .ackheader .text-right{padding-bottom:.8em;padding-right:1em}  app-phlebo-create .create-phlebo .ackheader .product-detail{display:flex;justify-content:center}  app-phlebo-create .create-phlebo .ackheader .product-detail .label-value{margin-left:1rem}  app-phlebo-create .create-phlebo .ackheader .ack-second{margin-top:2rem}  app-phlebo-create .create-phlebo_requestid{display:flex;flex-direction:row;justify-content:flex-start;margin-top:2.5rem;align-items:baseline}  app-phlebo-create .create-phlebo_requestid .label-value{padding-left:3em}  app-phlebo-create .create-phlebo .mat-form-field-appearance-outline .mat-form-field-outline{background-color:#e6ebee;border-radius:5px}  app-phlebo-create .create-phlebo__header{display:flex;flex-direction:row;margin-top:3rem}  app-phlebo-create .create-phlebo__header-input{width:100%}  app-phlebo-create .create-phlebo__header-input__filter{margin-bottom:-1rem}  app-phlebo-create .create-phlebo__header-input__filter .mat-form-field-appearance-outline .mat-form-field-outline{background-color:#04375233;border-radius:5px}  app-phlebo-create .create-phlebo__action{margin:2.5rem 2.5rem 1rem;justify-content:space-between}  app-phlebo-create .create-phlebo__action   .mat-form-field-appearance-outline .mat-form-field-outline{background-color:#04375233;border-radius:5px}  app-phlebo-create .create-phlebo__action   .mat-select-arrow{opacity:0}  app-phlebo-create .create-phlebo__action   .mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{width:1rem}  app-phlebo-create .create-phlebo__action p{color:#043752e6}  app-phlebo-create .create-phlebo .agm-table{margin-top:3vh;max-width:100%}  app-phlebo-create .create-phlebo .agm-table .mat-form-field-appearance-outline .mat-form-field-outline{color:transparent}  app-phlebo-create .create-phlebo .agm-table .mat-column-ProductName{min-width:150px}  app-phlebo-create .create-phlebo .agm-table .mat-column-Price{min-width:150px}  app-phlebo-create .create-phlebo .agm-table .mat-column-ExpiryDate{min-width:150px}  app-phlebo-create .create-phlebo .agm-table .mat-column-BillBatchNo .mat-form-field{max-width:100px}  app-phlebo-create .create-phlebo .agm-table .mat-column-BillRequestQuantity .mat-form-field{max-width:100px}  app-phlebo-create .create-phlebo .agm-table   .mat-select-arrow{opacity:0}  app-phlebo-create .create-phlebo .agm-table   .classformfield .mat-form-field-appearance-outline .mat-form-field-outline{background-color:#a7bdca}  app-phlebo-create .create-phlebo .agm-table   .mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{width:1rem}  app-phlebo-create .create-phlebo .agm-table .mat-form-field{text-align:center}  app-phlebo-create .create-phlebo .agm-table .detail-btn{width:167px;background:#cdd7dc;border-radius:6px}  app-phlebo-create .create-phlebo .agm-table .agm-select mat-icon{width:1rem!important}  app-phlebo-create .create-phlebo .agm-table .mat-form-field-wrapper{padding-bottom:0}  app-phlebo-create .create-phlebo .mat-select-value{text-align:center}  app-phlebo-create .create-phlebo .text-area{width:100%!important}  app-phlebo-create .create-phlebo_attachment .attachment{margin:1rem!important;border-radius:5rem;padding:10px 30px 10px 10px;border:1px solid var(--secondary-color-400);display:flex;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;background:var(--secondary-color-300)}  app-phlebo-create .create-phlebo_attachment .attachment .mat-icon{-webkit-transform:scale(2.3);transform:scale(2.3)}  app-phlebo-create .create-phlebo_attachment .attachment .attachemnt-label{padding-top:.3rem;padding-left:1rem}  app-phlebo-create .create-phlebo_attachment .attachment .attachemnt-label p{margin:0}  app-phlebo-create .create-phlebo_attachment .attachment .attachment-hint{color:var(--status-success)}  app-phlebo-create .create-phlebo_attachment .attachment .file-attachment{display:flex}  app-phlebo-create .create-phlebo_attachment .attachment .file-attachment .delete-icon{margin-left:.5rem;-webkit-transform:scale(1);transform:scale(1);cursor:pointer}  app-phlebo-create .create-phlebo__footer{margin-top:3vh}  app-phlebo-create .create-phlebo__footer .label{margin:2em 0 0!important}  app-phlebo-create .create-phlebo__footer .textarea{margin-top:1vh}  app-phlebo-create .create-phlebo .align{display:flex;flex-direction:row;align-items:center;justify-content:start}  app-phlebo-create .create-phlebo .padding{padding:0 10px}  app-phlebo-create .create-phlebo .btns{margin-bottom:50px}  app-phlebo-create .create-phlebo .form-action-btn{width:99%;display:flex;justify-content:end}  app-phlebo-create .create-phlebo .form-action-btn .button-mat-all-cancel{margin-right:50px}  app-phlebo-create .create-phlebo .form-action-btn .save{margin-right:50px}  app-phlebo-create .create-phlebo .form-action-btn .save-close{padding:.5em 3em!important;background-color:#053353;color:#fff;font-size:1em;border-radius:10px!important;max-width:284px}  app-phlebo-create .create-phlebo .agm-table tr.mat-row{vertical-align:middle}  app-phlebo-create .create-phlebo .del-btn{background-color:#e6ebee;padding:.8em 0;border-radius:5px}  app-phlebo-create .agm-table--container .empty-row{background-color:#fff;text-align:center;padding:40px}@media screen and (min-width: 769px) and (max-width: 1024px){  app-phlebo-create .agm-table--container div .between{display:flex;flex-direction:row;justify-content:space-between}  app-phlebo-create .agm-table--container .between{display:flex;flex-direction:row;justify-content:space-between}}@media only screen and (min-width: 481px) and (max-width: 768px){  app-phlebo-create .agm-table--container{width:100%;overflow-x:auto;margin-left:0}  app-phlebo-create .agm-table--container .between{display:flex;flex-direction:row;justify-content:space-between}  app-phlebo-create .agm-table--container .mat-column-Price{min-width:100px!important}}@media (max-width: 480px){  app-phlebo-create .agm-table--container{width:100%;overflow-x:auto;margin-left:0}}.autocomplete-scroll[_ngcontent-%COMP%]   .patient-autocomplete[_ngcontent-%COMP%]{max-height:14.375rem;overflow-y:auto}@media screen and (min-width: 769px) and (max-width: 1024px){div[_ngcontent-%COMP%]   .between[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}}@media screen and (min-width: 481px) and (max-width: 768px){div[_ngcontent-%COMP%]   .between[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}}"],changeDetection:0}),n})();const Zu=[{path:"",component:Ae,children:[{path:"",redirectTo:"alltests",pathMatch:"full"},{path:"alltests",component:xt},{path:"alltests/equipment",component:ce,children:[{path:"",redirectTo:"basic",pathMatch:"full"},{path:"basic",component:ie},{path:"product",component:te}]},{path:"alltests/equipment/:id",component:ce,children:[{path:"",redirectTo:"basic",pathMatch:"full"},{path:"basic",component:ie},{path:"product",component:te}]},{path:"centerrequest",component:Ce},{path:"centerrequest/createproduct",component:Ze},{path:"centerrequest/:type/:center/request/:id",component:Ze},{path:"centerconsumption",component:yt,children:[{path:"",component:ss},{path:"create",component:ye},{path:"acknowledge",component:$r},{path:":id",component:ye}]},{path:"vendor",component:Rc},{path:"vendor/:id/edit",component:tl,children:[{path:"",component:Gl},{path:"productlist",component:fp}]},{path:"vendor/create",component:Wc},{path:"vendor/:id/map-to-product",component:Il},{path:"phleboconsumption",component:cs,children:[{path:"",component:ec},{path:"create",component:pe},{path:"acknowledge",component:Cc},{path:"phleboassign",component:le},{path:":id",component:pe},{path:":id/:action",component:pe}]},{path:"equipment",component:ce,children:[{path:"basic",component:ie},{path:"basic/:id",component:ie},{path:"product",component:te,children:[{path:"",component:te,children:[]},{path:":id",component:te,children:[]}]}]},{path:"phleborequest",component:bp,children:[{path:"",component:Bp},{path:"acknowledge/:phleboId/request/:requestId",component:ld},{path:"create-phlebo-request",component:we},{path:":phleboId/request/:requestId",component:we},{path:"ready-to-pickup/:phleboId/request/:requestId",component:Rd}]},{path:"product",component:Ce},{path:"products",component:Qo},{path:"add-new-product",component:xe},{path:"products/:id",component:xe}]}];let xu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.ez,R.X,We.m,gp.g3,m.Bz.forChild(Zu)]}),n})()}}]);