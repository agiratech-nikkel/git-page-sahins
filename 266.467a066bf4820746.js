"use strict";(self.webpackChunksahins=self.webpackChunksahins||[]).push([[266],{75578:(Dt,M,m)=>{m.d(M,{W:()=>y});class y{static generateUniqueId(p="",_="-",u=!0){const x=Date.now().toString(36)+Math.random().toString(36).substr(2);return u?`${p}${_}${x}`:`${x}${_}${p}`}static removeDuplicate(p,_=""){return p&&p.filter(_?(u,x)=>p.findIndex(D=>D[_]==u[_])===x:(u,x)=>p.indexOf(u)===x)}static shallowClone(p){if(p)return Array.isArray(p)?[...p]:{...p}}static deepClone(p){if(p)return JSON.parse(JSON.stringify(p))}static removeHTMLElementById(p){const _=document.getElementById(p);return!!_&&(_.remove(),!0)}static isArrayEqual(p,_){if(p===_)return!0;if(null==p||null==_||p.length!==_.length)return!1;p=p.sort(),_=_.sort();for(let u=0;u<p.length;++u)if(p[u]!==_[u])return!1;return!0}static formatUrlWithParams(p,_){return p&&_&&Object.keys(_).forEach((u,x)=>{if(_[u]&&null!==_[u]){let D="&";0===x&&(D="?"),p+=`${D}${u}=${_[u]}`}}),p}static makeString(p,_="and"){if(1===p.length)return p[0];const u=p.slice(0,p.length-1),x=p[p.length-1];let D=u.join(", ");return x&&p.length>1&&(D=D+" "+_+" "+x),D}static removeEmptyOrNull(p){return Object.keys(p).map(_=>{(""==p[_]||null===p[_]||"string"==typeof p[_]&&""==p[_].trim())&&delete p[_]}),p}static removeEmptyOrNullRecursive(p){return Object.entries(p).forEach(([_,u])=>u&&"object"==typeof u&&this.removeEmptyOrNullRecursive(u)||(null===u||""===u||void 0===u)&&delete p[_]),p}static removeEmptyArrayAndEmptyObject(p){return p&&(Object.keys(p).forEach(_=>{const u=p[_];(Array.isArray(u)&&0===u.length||u&&!Array.isArray(u)&&"object"==typeof u&&0===Object.keys(u).length)&&delete p[_]}),p)}static isObjectNotEmpty(p){return!!p&&"object"==typeof p&&Object.keys(p).length>0}static isFunction(p){return"function"==typeof p}static constrain(p,_=-1/0,u=1/0){return Math.min(u,Math.max(p,_))}disallowSpecialChar(p){var _;return(_=p.charCode)>64&&_<91||_>96&&_<123||8==_||32==_||_>=48&&_<=57}}},53117:(Dt,M,m)=>{m.d(M,{X:()=>A});var y=m(94650);let A=(()=>{class p{constructor(u,x){this.el=u,this.renderer=x,this.regex=new RegExp(/^-?[0-9]+(\.[0-9]*){0,1}$/g),this.specialKeys=["Enter","Backspace","Delete","Tab","End","Home","ArrowLeft","ArrowRight","ArrowUp","ArrowDown"],this.canAllowMinus=!1}ngOnInit(){this.MAX_NO_OF_DIGITS&&this.el.nativeElement&&this.renderer.setAttribute(this.el.nativeElement,"maxLength",this.MAX_NO_OF_DIGITS),this.canAllowMinus&&this.specialKeys.push("-")}onKeyDown(u){if(!(-1!==this.specialKeys.indexOf(u.key)||"v"===u.key&&u.ctrlKey||"v"===u.key&&u.metaKey||"x"===u.key&&u.ctrlKey||"x"===u.key&&u.metaKey||"c"===u.key&&u.ctrlKey||"a"===u.key&&u.ctrlKey)){if(!this.MIN&&!this.MAX){let D=this.el.nativeElement.value.concat(u.key);D&&!String(D).match(this.regex)&&u.preventDefault()}if(void 0!==this.MIN&&void 0!==this.MAX){let D=this.el.nativeElement.value.concat(u.key);Number(D)<=Number(this.MAX)&&Number(D)>=Number(this.MIN)?D&&!String(D).match(this.regex)&&u.preventDefault():u.preventDefault()}}}blockPaste(u){u.clipboardData.getData("Text").match(/[^\d\.?\d]/)&&!u.clipboardData.getData("Text").match(this.regex)&&u.preventDefault()}}return p.\u0275fac=function(u){return new(u||p)(y.Y36(y.SBq),y.Y36(y.Qsj))},p.\u0275dir=y.lG2({type:p,selectors:[["","appNumbersOnly",""]],hostBindings:function(u,x){1&u&&y.NdJ("keydown",function(t){return x.onKeyDown(t)})("paste",function(t){return x.blockPaste(t)})},inputs:{regex:"regex",MIN:["min","MIN"],MAX:["max","MAX"],MAX_NO_OF_DIGITS:["length","MAX_NO_OF_DIGITS"],canAllowMinus:"canAllowMinus"}}),p})()},51266:(Dt,M,m)=>{m.r(M),m.d(M,{TestManagementModule:()=>Pa});var y=m(36895),A=m(81390),p=m(15861),_=m(97685),u=m(74902),x=m(15671),D=m(43144),t=m(94650),st=m(67376),O=m(83353),w=m(21281),Ct=m(12687),b=m(77579),J=m(50727),de=m(34986),pe=m(5963),me=m(66406),bt=m(69751),Zt=m(56451),I=m(82722),N=m(68675),j=m(54004),wt=m(95698),ue=m(18505),E=m(63900),kt=m(40445);function rt(a,s,e){for(var i in s)if(s.hasOwnProperty(i)){var n=s[i];n?a.setProperty(i,n,null!=e&&e.has(i)?"important":""):a.removeProperty(i)}return a}function L(a,s){var e=s?"":"none";rt(a.style,{"touch-action":s?"":"none","-webkit-user-drag":s?"":"none","-webkit-tap-highlight-color":s?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function St(a,s,e){rt(a.style,{position:s?"":"fixed",top:s?"":"0",opacity:s?"":"0",left:s?"":"-999em"},e)}function z(a,s){return s&&"none"!=s?a+" "+s:a}function At(a){var s=a.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(a)*s}function ot(a,s){return a.getPropertyValue(s).split(",").map(function(i){return i.trim()})}function lt(a){var s=a.getBoundingClientRect();return{top:s.top,right:s.right,bottom:s.bottom,left:s.left,width:s.width,height:s.height,x:s.x,y:s.y}}function ct(a,s,e){return e>=a.top&&e<=a.bottom&&s>=a.left&&s<=a.right}function Y(a,s,e){a.top+=s,a.bottom=a.top+a.height,a.left+=e,a.right=a.left+a.width}function Pt(a,s,e,i){var h=a.width*s,f=a.height*s;return i>a.top-f&&i<a.bottom+f&&e>a.left-h&&e<a.right+h}var It=function(){function a(s){(0,x.Z)(this,a),this._document=s,this.positions=new Map}return(0,D.Z)(a,[{key:"clear",value:function(){this.positions.clear()}},{key:"cache",value:function(e){var i=this;this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(function(n){i.positions.set(n,{scrollPosition:{top:n.scrollTop,left:n.scrollLeft},clientRect:lt(n)})})}},{key:"handleScroll",value:function(e){var i=(0,O.sA)(e),n=this.positions.get(i);if(!n)return null;var o,l,r=n.scrollPosition;if(i===this._document){var c=this.getViewportScrollPosition();o=c.top,l=c.left}else o=i.scrollTop,l=i.scrollLeft;var d=r.top-o,h=r.left-l;return this.positions.forEach(function(f,T){f.clientRect&&i!==T&&i.contains(T)&&Y(f.clientRect,d,h)}),r.top=o,r.left=l,{top:d,left:h}}},{key:"getViewportScrollPosition",value:function(){return{top:window.scrollY,left:window.scrollX}}}]),a}();function Ot(a){var s=a.cloneNode(!0),e=s.querySelectorAll("[id]"),i=a.nodeName.toLowerCase();s.removeAttribute("id");for(var n=0;n<e.length;n++)e[n].removeAttribute("id");return"canvas"===i?Rt(a,s):("input"===i||"select"===i||"textarea"===i)&&qt(a,s),Ft("canvas",a,s,Rt),Ft("input, textarea, select",a,s,qt),s}function Ft(a,s,e,i){var n=s.querySelectorAll(a);if(n.length)for(var r=e.querySelectorAll(a),o=0;o<n.length;o++)i(n[o],r[o])}var _e=0;function qt(a,s){"file"!==s.type&&(s.value=a.value),"radio"===s.type&&s.name&&(s.name="mat-clone-".concat(s.name,"-").concat(_e++))}function Rt(a,s){var e=s.getContext("2d");if(e)try{e.drawImage(a,0,0)}catch{}}var Mt=(0,O.i$)({passive:!0}),K=(0,O.i$)({passive:!1}),dt=new Set(["position"]),ve=function(){function a(s,e,i,n,r,o){var l=this;(0,x.Z)(this,a),this._config=e,this._document=i,this._ngZone=n,this._viewportRuler=r,this._dragDropRegistry=o,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new b.x,this._pointerMoveSubscription=J.w0.EMPTY,this._pointerUpSubscription=J.w0.EMPTY,this._scrollSubscription=J.w0.EMPTY,this._resizeSubscription=J.w0.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new b.x,this.started=new b.x,this.released=new b.x,this.ended=new b.x,this.entered=new b.x,this.exited=new b.x,this.dropped=new b.x,this.moved=this._moveEvents,this._pointerDown=function(c){if(l.beforeStarted.next(),l._handles.length){var d=l._getTargetHandle(c);d&&!l._disabledHandles.has(d)&&!l.disabled&&l._initializeDragSequence(d,c)}else l.disabled||l._initializeDragSequence(l._rootElement,c)},this._pointerMove=function(c){var d=l._getPointerPositionOnPage(c);if(l._hasStartedDragging){c.preventDefault();var k=l._getConstrainedPointerPosition(d);if(l._hasMoved=!0,l._lastKnownPointerPosition=d,l._updatePointerDirectionDelta(k),l._dropContainer)l._updateActiveDropContainer(k,d);else{var P=l.constrainPosition?l._initialClientRect:l._pickupPositionOnPage,Z=l._activeTransform;Z.x=k.x-P.x+l._passiveTransform.x,Z.y=k.y-P.y+l._passiveTransform.y,l._applyRootElementTransform(Z.x,Z.y)}l._moveEvents.observers.length&&l._ngZone.run(function(){l._moveEvents.next({source:l,pointerPosition:k,event:c,distance:l._getDragDistance(k),delta:l._pointerDirectionDelta})})}else if(Math.abs(d.x-l._pickupPositionOnPage.x)+Math.abs(d.y-l._pickupPositionOnPage.y)>=l._config.dragStartThreshold){var C=Date.now()>=l._dragStartTime+l._getDragStartDelay(c),S=l._dropContainer;if(!C)return void l._endDragSequence(c);(!S||!S.isDragging()&&!S.isReceiving())&&(c.preventDefault(),l._hasStartedDragging=!0,l._ngZone.run(function(){return l._startDragSequence(c)}))}},this._pointerUp=function(c){l._endDragSequence(c)},this._nativeDragStart=function(c){if(l._handles.length){var d=l._getTargetHandle(c);d&&!l._disabledHandles.has(d)&&!l.disabled&&c.preventDefault()}else l.disabled||c.preventDefault()},this.withRootElement(s).withParent(e.parentDragRef||null),this._parentPositions=new It(i),o.registerDragItem(this)}return(0,D.Z)(a,[{key:"disabled",get:function(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)},set:function(e){var i=(0,w.Ig)(e);i!==this._disabled&&(this._disabled=i,this._toggleNativeDragInteractions(),this._handles.forEach(function(n){return L(n,i)}))}},{key:"getPlaceholderElement",value:function(){return this._placeholder}},{key:"getRootElement",value:function(){return this._rootElement}},{key:"getVisibleElement",value:function(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}},{key:"withHandles",value:function(e){var i=this;this._handles=e.map(function(r){return(0,w.fI)(r)}),this._handles.forEach(function(r){return L(r,i.disabled)}),this._toggleNativeDragInteractions();var n=new Set;return this._disabledHandles.forEach(function(r){i._handles.indexOf(r)>-1&&n.add(r)}),this._disabledHandles=n,this}},{key:"withPreviewTemplate",value:function(e){return this._previewTemplate=e,this}},{key:"withPlaceholderTemplate",value:function(e){return this._placeholderTemplate=e,this}},{key:"withRootElement",value:function(e){var i=this,n=(0,w.fI)(e);return n!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(function(){n.addEventListener("mousedown",i._pointerDown,K),n.addEventListener("touchstart",i._pointerDown,Mt),n.addEventListener("dragstart",i._nativeDragStart,K)}),this._initialTransform=void 0,this._rootElement=n),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}},{key:"withBoundaryElement",value:function(e){var i=this;return this._boundaryElement=e?(0,w.fI)(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(function(){return i._containInsideBoundaryOnResize()})),this}},{key:"withParent",value:function(e){return this._parentDragRef=e,this}},{key:"dispose",value:function(){var e,i;this._removeRootElementListeners(this._rootElement),this.isDragging()&&(null===(i=this._rootElement)||void 0===i||i.remove()),null===(e=this._anchor)||void 0===e||e.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}},{key:"isDragging",value:function(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}},{key:"reset",value:function(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}},{key:"disableHandle",value:function(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),L(e,!0))}},{key:"enableHandle",value:function(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),L(e,this.disabled))}},{key:"withDirection",value:function(e){return this._direction=e,this}},{key:"_withDropContainer",value:function(e){this._dropContainer=e}},{key:"getFreeDragPosition",value:function(){var e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}},{key:"setFreeDragPosition",value:function(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}},{key:"withPreviewContainer",value:function(e){return this._previewContainer=e,this}},{key:"_sortFromLastPointerPosition",value:function(){var e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}},{key:"_removeSubscriptions",value:function(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}},{key:"_destroyPreview",value:function(){var e,i;null===(e=this._preview)||void 0===e||e.remove(),null===(i=this._previewRef)||void 0===i||i.destroy(),this._preview=this._previewRef=null}},{key:"_destroyPlaceholder",value:function(){var e,i;null===(e=this._placeholder)||void 0===e||e.remove(),null===(i=this._placeholderRef)||void 0===i||i.destroy(),this._placeholder=this._placeholderRef=null}},{key:"_endDragSequence",value:function(e){var i=this;if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(function(){i._cleanupDragArtifacts(e),i._cleanupCachedDimensions(),i._dragDropRegistry.stopDragging(i)});else{this._passiveTransform.x=this._activeTransform.x;var n=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(function(){i.ended.next({source:i,distance:i._getDragDistance(n),dropPoint:n,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}},{key:"_startDragSequence",value:function(e){Q(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();var i=this._dropContainer;if(i){var n=this._rootElement,r=n.parentNode,o=this._placeholder=this._createPlaceholderElement(),l=this._anchor=this._anchor||this._document.createComment(""),c=this._getShadowRoot();r.insertBefore(l,n),this._initialTransform=n.style.transform||"",this._preview=this._createPreviewElement(),St(n,!1,dt),this._document.body.appendChild(r.replaceChild(o,n)),this._getPreviewInsertionPoint(r,c).appendChild(this._preview),this.started.next({source:this,event:e}),i.start(),this._initialContainer=i,this._initialIndex=i.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(i?i.getScrollableParents():[])}},{key:"_initializeDragSequence",value:function(e,i){var n=this;this._parentDragRef&&i.stopPropagation();var r=this.isDragging(),o=Q(i),l=!o&&0!==i.button,c=this._rootElement,d=(0,O.sA)(i),h=!o&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),f=o?(0,Ct.yG)(i):(0,Ct.X6)(i);if(d&&d.draggable&&"mousedown"===i.type&&i.preventDefault(),!(r||l||h||f)){if(this._handles.length){var T=c.style;this._rootElementTapHighlight=T.webkitTapHighlightColor||"",T.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(function(k){return n._updateOnScroll(k)}),this._boundaryElement&&(this._boundaryRect=lt(this._boundaryElement));var C=this._previewTemplate;this._pickupPositionInElement=C&&C.template&&!C.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,e,i);var S=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(i);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:S.x,y:S.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,i)}}},{key:"_cleanupDragArtifacts",value:function(e){var i=this;St(this._rootElement,!0,dt),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(function(){var n=i._dropContainer,r=n.getItemIndex(i),o=i._getPointerPositionOnPage(e),l=i._getDragDistance(o),c=n._isOverContainer(o.x,o.y);i.ended.next({source:i,distance:l,dropPoint:o,event:e}),i.dropped.next({item:i,currentIndex:r,previousIndex:i._initialIndex,container:n,previousContainer:i._initialContainer,isPointerOverContainer:c,distance:l,dropPoint:o,event:e}),n.drop(i,r,i._initialIndex,i._initialContainer,c,l,o,e),i._dropContainer=i._initialContainer})}},{key:"_updateActiveDropContainer",value:function(e,i){var n=this,r=e.x,o=e.y,l=i.x,c=i.y,d=this._initialContainer._getSiblingContainerFromPosition(this,r,o);!d&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(r,o)&&(d=this._initialContainer),d&&d!==this._dropContainer&&this._ngZone.run(function(){n.exited.next({item:n,container:n._dropContainer}),n._dropContainer.exit(n),n._dropContainer=d,n._dropContainer.enter(n,r,o,d===n._initialContainer&&d.sortingDisabled?n._initialIndex:void 0),n.entered.next({item:n,container:d,currentIndex:d.getItemIndex(n)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(l,c),this._dropContainer._sortItem(this,r,o,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(r,o):this._applyPreviewTransform(r-this._pickupPositionInElement.x,o-this._pickupPositionInElement.y))}},{key:"_createPreviewElement",value:function(){var r,e=this._previewTemplate,i=this.previewClass,n=e?e.template:null;if(n&&e){var o=e.matchSize?this._initialClientRect:null,l=e.viewContainer.createEmbeddedView(n,e.context);l.detectChanges(),r=Et(l,this._document),this._previewRef=l,e.matchSize?Lt(r,o):r.style.transform=W(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else Lt(r=Ot(this._rootElement),this._initialClientRect),this._initialTransform&&(r.style.transform=this._initialTransform);return rt(r.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":"".concat(this._config.zIndex||1e3)},dt),L(r,!1),r.classList.add("cdk-drag-preview"),r.setAttribute("dir",this._direction),i&&(Array.isArray(i)?i.forEach(function(c){return r.classList.add(c)}):r.classList.add(i)),r}},{key:"_animatePreviewToPlaceholder",value:function(){var e=this;if(!this._hasMoved)return Promise.resolve();var i=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(i.left,i.top);var n=function ge(a){var s=getComputedStyle(a),e=ot(s,"transition-property"),i=e.find(function(l){return"transform"===l||"all"===l});if(!i)return 0;var n=e.indexOf(i),r=ot(s,"transition-duration"),o=ot(s,"transition-delay");return At(r[n])+At(o[n])}(this._preview);return 0===n?Promise.resolve():this._ngZone.runOutsideAngular(function(){return new Promise(function(r){var o=function c(d){var h;(!d||(0,O.sA)(d)===e._preview&&"transform"===d.propertyName)&&(null===(h=e._preview)||void 0===h||h.removeEventListener("transitionend",c),r(),clearTimeout(l))},l=setTimeout(o,1.5*n);e._preview.addEventListener("transitionend",o)})})}},{key:"_createPlaceholderElement",value:function(){var n,e=this._placeholderTemplate,i=e?e.template:null;return i?(this._placeholderRef=e.viewContainer.createEmbeddedView(i,e.context),this._placeholderRef.detectChanges(),n=Et(this._placeholderRef,this._document)):n=Ot(this._rootElement),n.style.pointerEvents="none",n.classList.add("cdk-drag-placeholder"),n}},{key:"_getPointerPositionInElement",value:function(e,i,n){var r=i===this._rootElement?null:i,o=r?r.getBoundingClientRect():e,l=Q(n)?n.targetTouches[0]:n,c=this._getViewportScrollPosition();return{x:o.left-e.left+(l.pageX-o.left-c.left),y:o.top-e.top+(l.pageY-o.top-c.top)}}},{key:"_getPointerPositionOnPage",value:function(e){var i=this._getViewportScrollPosition(),n=Q(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,r=n.pageX-i.left,o=n.pageY-i.top;if(this._ownerSVGElement){var l=this._ownerSVGElement.getScreenCTM();if(l){var c=this._ownerSVGElement.createSVGPoint();return c.x=r,c.y=o,c.matrixTransform(l.inverse())}}return{x:r,y:o}}},{key:"_getConstrainedPointerPosition",value:function(e){var i=this._dropContainer?this._dropContainer.lockAxis:null,n=this.constrainPosition?this.constrainPosition(e,this,this._initialClientRect,this._pickupPositionInElement):e,r=n.x,o=n.y;if("x"===this.lockAxis||"x"===i?o=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===i)&&(r=this._pickupPositionOnPage.x),this._boundaryRect){var l=this._pickupPositionInElement,c=l.x,d=l.y,h=this._boundaryRect,f=this._getPreviewRect(),S=h.top+d,k=h.bottom-(f.height-d);r=Nt(r,h.left+c,h.right-(f.width-c)),o=Nt(o,S,k)}return{x:r,y:o}}},{key:"_updatePointerDirectionDelta",value:function(e){var i=e.x,n=e.y,r=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,l=Math.abs(i-o.x),c=Math.abs(n-o.y);return l>this._config.pointerDirectionChangeThreshold&&(r.x=i>o.x?1:-1,o.x=i),c>this._config.pointerDirectionChangeThreshold&&(r.y=n>o.y?1:-1,o.y=n),r}},{key:"_toggleNativeDragInteractions",value:function(){if(this._rootElement&&this._handles){var e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,L(this._rootElement,e))}}},{key:"_removeRootElementListeners",value:function(e){e.removeEventListener("mousedown",this._pointerDown,K),e.removeEventListener("touchstart",this._pointerDown,Mt),e.removeEventListener("dragstart",this._nativeDragStart,K)}},{key:"_applyRootElementTransform",value:function(e,i){var n=W(e,i),r=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=r.transform&&"none"!=r.transform?r.transform:""),r.transform=z(n,this._initialTransform)}},{key:"_applyPreviewTransform",value:function(e,i){var n,r=null!==(n=this._previewTemplate)&&void 0!==n&&n.template?void 0:this._initialTransform,o=W(e,i);this._preview.style.transform=z(o,r)}},{key:"_getDragDistance",value:function(e){var i=this._pickupPositionOnPage;return i?{x:e.x-i.x,y:e.y-i.y}:{x:0,y:0}}},{key:"_cleanupCachedDimensions",value:function(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}},{key:"_containInsideBoundaryOnResize",value:function(){var e=this._passiveTransform,i=e.x,n=e.y;if(!(0===i&&0===n||this.isDragging())&&this._boundaryElement){var r=this._rootElement.getBoundingClientRect(),o=this._boundaryElement.getBoundingClientRect();if(!(0===o.width&&0===o.height||0===r.width&&0===r.height)){var l=o.left-r.left,c=r.right-o.right,d=o.top-r.top,h=r.bottom-o.bottom;o.width>r.width?(l>0&&(i+=l),c>0&&(i-=c)):i=0,o.height>r.height?(d>0&&(n+=d),h>0&&(n-=h)):n=0,(i!==this._passiveTransform.x||n!==this._passiveTransform.y)&&this.setFreeDragPosition({y:n,x:i})}}}},{key:"_getDragStartDelay",value:function(e){var i=this.dragStartDelay;return"number"==typeof i?i:Q(e)?i.touch:i?i.mouse:0}},{key:"_updateOnScroll",value:function(e){var i=this._parentPositions.handleScroll(e);if(i){var n=(0,O.sA)(e);this._boundaryRect&&n!==this._boundaryElement&&n.contains(this._boundaryElement)&&Y(this._boundaryRect,i.top,i.left),this._pickupPositionOnPage.x+=i.left,this._pickupPositionOnPage.y+=i.top,this._dropContainer||(this._activeTransform.x-=i.left,this._activeTransform.y-=i.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}},{key:"_getViewportScrollPosition",value:function(){var e;return(null===(e=this._parentPositions.positions.get(this._document))||void 0===e?void 0:e.scrollPosition)||this._parentPositions.getViewportScrollPosition()}},{key:"_getShadowRoot",value:function(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=(0,O.kV)(this._rootElement)),this._cachedShadowRoot}},{key:"_getPreviewInsertionPoint",value:function(e,i){var n=this._previewContainer||"global";if("parent"===n)return e;if("global"===n){var r=this._document;return i||r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement||r.body}return(0,w.fI)(n)}},{key:"_getPreviewRect",value:function(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}},{key:"_getTargetHandle",value:function(e){return this._handles.find(function(i){return e.target&&(e.target===i||i.contains(e.target))})}}]),a}();function W(a,s){return"translate3d(".concat(Math.round(a),"px, ").concat(Math.round(s),"px, 0)")}function Nt(a,s,e){return Math.max(s,Math.min(e,a))}function Q(a){return"t"===a.type[0]}function Et(a,s){var e=a.rootNodes;if(1===e.length&&e[0].nodeType===s.ELEMENT_NODE)return e[0];var i=s.createElement("div");return e.forEach(function(n){return i.appendChild(n)}),i}function Lt(a,s){a.style.width="".concat(s.width,"px"),a.style.height="".concat(s.height,"px"),a.style.transform=W(s.left,s.top)}function pt(a,s,e){var i=G(s,a.length-1),n=G(e,a.length-1);if(i!==n){for(var r=a[i],o=n<i?-1:1,l=i;l!==n;l+=o)a[l]=a[l+o];a[n]=r}}function G(a,s){return Math.max(0,Math.min(s,a))}var ye=function(){function a(s,e){(0,x.Z)(this,a),this._element=s,this._dragDropRegistry=e,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}return(0,D.Z)(a,[{key:"start",value:function(e){this.withItems(e)}},{key:"sort",value:function(e,i,n,r){var o=this._itemPositions,l=this._getItemIndexFromPointerPosition(e,i,n,r);if(-1===l&&o.length>0)return null;var c="horizontal"===this.orientation,d=o.findIndex(function(Z){return Z.drag===e}),h=o[l],T=h.clientRect,C=d>l?1:-1,S=this._getItemOffsetPx(o[d].clientRect,T,C),k=this._getSiblingOffsetPx(d,o,C),P=o.slice();return pt(o,d,l),o.forEach(function(Z,R){if(P[R]!==Z){var le=Z.drag===e,xt=le?S:k,ce=le?e.getPlaceholderElement():Z.drag.getRootElement();Z.offset+=xt,c?(ce.style.transform=z("translate3d(".concat(Math.round(Z.offset),"px, 0, 0)"),Z.initialTransform),Y(Z.clientRect,0,xt)):(ce.style.transform=z("translate3d(0, ".concat(Math.round(Z.offset),"px, 0)"),Z.initialTransform),Y(Z.clientRect,xt,0))}}),this._previousSwap.overlaps=ct(T,i,n),this._previousSwap.drag=h.drag,this._previousSwap.delta=c?r.x:r.y,{previousIndex:d,currentIndex:l}}},{key:"enter",value:function(e,i,n,r){var o=null==r||r<0?this._getItemIndexFromPointerPosition(e,i,n):r,l=this._activeDraggables,c=l.indexOf(e),d=e.getPlaceholderElement(),h=l[o];if(h===e&&(h=l[o+1]),!h&&(null==o||-1===o||o<l.length-1)&&this._shouldEnterAsFirstChild(i,n)&&(h=l[0]),c>-1&&l.splice(c,1),h&&!this._dragDropRegistry.isDragging(h)){var f=h.getRootElement();f.parentElement.insertBefore(d,f),l.splice(o,0,e)}else(0,w.fI)(this._element).appendChild(d),l.push(e);d.style.transform="",this._cacheItemPositions()}},{key:"withItems",value:function(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}},{key:"withSortPredicate",value:function(e){this._sortPredicate=e}},{key:"reset",value:function(){var e=this;this._activeDraggables.forEach(function(i){var n=i.getRootElement();if(n){var r,o=null===(r=e._itemPositions.find(function(l){return l.drag===i}))||void 0===r?void 0:r.initialTransform;n.style.transform=o||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}},{key:"getActiveItemsSnapshot",value:function(){return this._activeDraggables}},{key:"getItemIndex",value:function(e){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(function(n){return n.drag===e})}},{key:"updateOnScroll",value:function(e,i){var n=this;this._itemPositions.forEach(function(r){Y(r.clientRect,e,i)}),this._itemPositions.forEach(function(r){var o=r.drag;n._dragDropRegistry.isDragging(o)&&o._sortFromLastPointerPosition()})}},{key:"_cacheItemPositions",value:function(){var e="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(function(i){var n=i.getVisibleElement();return{drag:i,offset:0,initialTransform:n.style.transform||"",clientRect:lt(n)}}).sort(function(i,n){return e?i.clientRect.left-n.clientRect.left:i.clientRect.top-n.clientRect.top})}},{key:"_getItemOffsetPx",value:function(e,i,n){var r="horizontal"===this.orientation,o=r?i.left-e.left:i.top-e.top;return-1===n&&(o+=r?i.width-e.width:i.height-e.height),o}},{key:"_getSiblingOffsetPx",value:function(e,i,n){var r="horizontal"===this.orientation,o=i[e].clientRect,l=i[e+-1*n],c=o[r?"width":"height"]*n;if(l){var d=r?"left":"top",h=r?"right":"bottom";-1===n?c-=l.clientRect[d]-o[h]:c+=o[d]-l.clientRect[h]}return c}},{key:"_shouldEnterAsFirstChild",value:function(e,i){if(!this._activeDraggables.length)return!1;var n=this._itemPositions,r="horizontal"===this.orientation;if(n[0].drag!==this._activeDraggables[0]){var l=n[n.length-1].clientRect;return r?e>=l.right:i>=l.bottom}var c=n[0].clientRect;return r?e<=c.left:i<=c.top}},{key:"_getItemIndexFromPointerPosition",value:function(e,i,n,r){var o=this,l="horizontal"===this.orientation,c=this._itemPositions.findIndex(function(d){var h=d.drag,f=d.clientRect;return h!==e&&((!r||h!==o._previousSwap.drag||!o._previousSwap.overlaps||(l?r.x:r.y)!==o._previousSwap.delta)&&(l?i>=Math.floor(f.left)&&i<Math.floor(f.right):n>=Math.floor(f.top)&&n<Math.floor(f.bottom)))});return-1!==c&&this._sortPredicate(c,e)?c:-1}}]),a}(),xe=function(){function a(s,e,i,n,r){var o=this;(0,x.Z)(this,a),this._dragDropRegistry=e,this._ngZone=n,this._viewportRuler=r,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=function(){return!0},this.sortPredicate=function(){return!0},this.beforeStarted=new b.x,this.entered=new b.x,this.exited=new b.x,this.dropped=new b.x,this.sorted=new b.x,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=J.w0.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new b.x,this._cachedShadowRoot=null,this._startScrollInterval=function(){o._stopScrolling(),function he(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return a<0&&(a=0),(0,pe.H)(a,a,arguments.length>1&&void 0!==arguments[1]?arguments[1]:de.z)}(0,me.Z).pipe((0,I.R)(o._stopScrollTimers)).subscribe(function(){var l=o._scrollNode,c=o.autoScrollStep;1===o._verticalScrollDirection?l.scrollBy(0,-c):2===o._verticalScrollDirection&&l.scrollBy(0,c),1===o._horizontalScrollDirection?l.scrollBy(-c,0):2===o._horizontalScrollDirection&&l.scrollBy(c,0)})},this.element=(0,w.fI)(s),this._document=i,this.withScrollableParents([this.element]),e.registerDropContainer(this),this._parentPositions=new It(i),this._sortStrategy=new ye(this.element,e),this._sortStrategy.withSortPredicate(function(l,c){return o.sortPredicate(l,c,o)})}return(0,D.Z)(a,[{key:"dispose",value:function(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}},{key:"isDragging",value:function(){return this._isDragging}},{key:"start",value:function(){this._draggingStarted(),this._notifyReceivingSiblings()}},{key:"enter",value:function(e,i,n,r){this._draggingStarted(),null==r&&this.sortingDisabled&&(r=this._draggables.indexOf(e)),this._sortStrategy.enter(e,i,n,r),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}},{key:"exit",value:function(e){this._reset(),this.exited.next({item:e,container:this})}},{key:"drop",value:function(e,i,n,r,o,l,c){var d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{};this._reset(),this.dropped.next({item:e,currentIndex:i,previousIndex:n,container:this,previousContainer:r,isPointerOverContainer:o,distance:l,dropPoint:c,event:d})}},{key:"withItems",value:function(e){var i=this,n=this._draggables;return this._draggables=e,e.forEach(function(o){return o._withDropContainer(i)}),this.isDragging()&&(n.filter(function(o){return o.isDragging()}).every(function(o){return-1===e.indexOf(o)})?this._reset():this._sortStrategy.withItems(this._draggables)),this}},{key:"withDirection",value:function(e){return this._sortStrategy.direction=e,this}},{key:"connectedTo",value:function(e){return this._siblings=e.slice(),this}},{key:"withOrientation",value:function(e){return this._sortStrategy.orientation=e,this}},{key:"withScrollableParents",value:function(e){var i=(0,w.fI)(this.element);return this._scrollableElements=-1===e.indexOf(i)?[i].concat((0,u.Z)(e)):e.slice(),this}},{key:"getScrollableParents",value:function(){return this._scrollableElements}},{key:"getItemIndex",value:function(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}},{key:"isReceiving",value:function(){return this._activeSiblings.size>0}},{key:"_sortItem",value:function(e,i,n,r){if(!this.sortingDisabled&&this._clientRect&&Pt(this._clientRect,.05,i,n)){var o=this._sortStrategy.sort(e,i,n,r);o&&this.sorted.next({previousIndex:o.previousIndex,currentIndex:o.currentIndex,container:this,item:e})}}},{key:"_startScrollingIfNecessary",value:function(e,i){var n=this;if(!this.autoScrollDisabled){var r,o=0,l=0;if(this._parentPositions.positions.forEach(function(T,C){if(C!==n._document&&T.clientRect&&!r&&Pt(T.clientRect,.05,e,i)){var S=function De(a,s,e,i){var n=Yt(s,i),r=Qt(s,e),o=0,l=0;if(n){var c=a.scrollTop;1===n?c>0&&(o=1):a.scrollHeight-c>a.clientHeight&&(o=2)}if(r){var d=a.scrollLeft;1===r?d>0&&(l=1):a.scrollWidth-d>a.clientWidth&&(l=2)}return[o,l]}(C,T.clientRect,e,i),k=(0,_.Z)(S,2);l=k[1],((o=k[0])||l)&&(r=C)}}),!o&&!l){var c=this._viewportRuler.getViewportSize(),d=c.width,h=c.height,f={width:d,height:h,top:0,right:d,bottom:h,left:0};o=Yt(f,i),l=Qt(f,e),r=window}r&&(o!==this._verticalScrollDirection||l!==this._horizontalScrollDirection||r!==this._scrollNode)&&(this._verticalScrollDirection=o,this._horizontalScrollDirection=l,this._scrollNode=r,(o||l)&&r?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}}},{key:"_stopScrolling",value:function(){this._stopScrollTimers.next()}},{key:"_draggingStarted",value:function(){var e=(0,w.fI)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}},{key:"_cacheParentPositions",value:function(){var e=(0,w.fI)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(e).clientRect}},{key:"_reset",value:function(){var e=this;this._isDragging=!1;var i=(0,w.fI)(this.element).style;i.scrollSnapType=i.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(function(n){return n._stopReceiving(e)}),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}},{key:"_isOverContainer",value:function(e,i){return null!=this._clientRect&&ct(this._clientRect,e,i)}},{key:"_getSiblingContainerFromPosition",value:function(e,i,n){return this._siblings.find(function(r){return r._canReceive(e,i,n)})}},{key:"_canReceive",value:function(e,i,n){if(!this._clientRect||!ct(this._clientRect,i,n)||!this.enterPredicate(e,this))return!1;var r=this._getShadowRoot().elementFromPoint(i,n);if(!r)return!1;var o=(0,w.fI)(this.element);return r===o||o.contains(r)}},{key:"_startReceiving",value:function(e,i){var n=this,r=this._activeSiblings;!r.has(e)&&i.every(function(o){return n.enterPredicate(o,n)||n._draggables.indexOf(o)>-1})&&(r.add(e),this._cacheParentPositions(),this._listenToScrollEvents())}},{key:"_stopReceiving",value:function(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe()}},{key:"_listenToScrollEvents",value:function(){var e=this;this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(function(i){if(e.isDragging()){var n=e._parentPositions.handleScroll(i);n&&e._sortStrategy.updateOnScroll(n.top,n.left)}else e.isReceiving()&&e._cacheParentPositions()})}},{key:"_getShadowRoot",value:function(){if(!this._cachedShadowRoot){var e=(0,O.kV)((0,w.fI)(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}},{key:"_notifyReceivingSiblings",value:function(){var e=this,i=this._sortStrategy.getActiveItemsSnapshot().filter(function(n){return n.isDragging()});this._siblings.forEach(function(n){return n._startReceiving(e,i)})}}]),a}();function Yt(a,s){var e=a.top,i=a.bottom,r=.05*a.height;return s>=e-r&&s<=e+r?1:s>=i-r&&s<=i+r?2:0}function Qt(a,s){var e=a.left,i=a.right,r=.05*a.width;return s>=e-r&&s<=e+r?1:s>=i-r&&s<=i+r?2:0}var X=(0,O.i$)({passive:!1,capture:!0}),Ce=function(){var a=function(){function s(e,i){var n=this;(0,x.Z)(this,s),this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=function(r){return r.isDragging()},this.pointerMove=new b.x,this.pointerUp=new b.x,this.scroll=new b.x,this._preventDefaultWhileDragging=function(r){n._activeDragInstances.length>0&&r.preventDefault()},this._persistentTouchmoveListener=function(r){n._activeDragInstances.length>0&&(n._activeDragInstances.some(n._draggingPredicate)&&r.preventDefault(),n.pointerMove.next(r))},this._document=i}return(0,D.Z)(s,[{key:"registerDropContainer",value:function(i){this._dropInstances.has(i)||this._dropInstances.add(i)}},{key:"registerDragItem",value:function(i){var n=this;this._dragInstances.add(i),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(function(){n._document.addEventListener("touchmove",n._persistentTouchmoveListener,X)})}},{key:"removeDropContainer",value:function(i){this._dropInstances.delete(i)}},{key:"removeDragItem",value:function(i){this._dragInstances.delete(i),this.stopDragging(i),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,X)}},{key:"startDragging",value:function(i,n){var r=this;if(!(this._activeDragInstances.indexOf(i)>-1)&&(this._activeDragInstances.push(i),1===this._activeDragInstances.length)){var o=n.type.startsWith("touch");this._globalListeners.set(o?"touchend":"mouseup",{handler:function(c){return r.pointerUp.next(c)},options:!0}).set("scroll",{handler:function(c){return r.scroll.next(c)},options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:X}),o||this._globalListeners.set("mousemove",{handler:function(c){return r.pointerMove.next(c)},options:X}),this._ngZone.runOutsideAngular(function(){r._globalListeners.forEach(function(l,c){r._document.addEventListener(c,l.handler,l.options)})})}}},{key:"stopDragging",value:function(i){var n=this._activeDragInstances.indexOf(i);n>-1&&(this._activeDragInstances.splice(n,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}},{key:"isDragging",value:function(i){return this._activeDragInstances.indexOf(i)>-1}},{key:"scrolled",value:function(i){var n=this,r=[this.scroll];return i&&i!==this._document&&r.push(new bt.y(function(o){return n._ngZone.runOutsideAngular(function(){var c=function(h){n._activeDragInstances.length&&o.next(h)};return i.addEventListener("scroll",c,!0),function(){i.removeEventListener("scroll",c,!0)}})})),Zt.T.apply(void 0,r)}},{key:"ngOnDestroy",value:function(){var i=this;this._dragInstances.forEach(function(n){return i.removeDragItem(n)}),this._dropInstances.forEach(function(n){return i.removeDropContainer(n)}),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}},{key:"_clearGlobalListeners",value:function(){var i=this;this._globalListeners.forEach(function(n,r){i._document.removeEventListener(r,n.handler,n.options)}),this._globalListeners.clear()}}]),s}();return a.\u0275fac=function(e){return new(e||a)(t.LFG(t.R0b),t.LFG(y.K0))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),be={dragStartThreshold:5,pointerDirectionChangeThreshold:5},ht=function(){var a=function(){function s(e,i,n,r){(0,x.Z)(this,s),this._document=e,this._ngZone=i,this._viewportRuler=n,this._dragDropRegistry=r}return(0,D.Z)(s,[{key:"createDrag",value:function(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:be;return new ve(i,n,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}},{key:"createDropList",value:function(i){return new xe(i,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}]),s}();return a.\u0275fac=function(e){return new(e||a)(t.LFG(y.K0),t.LFG(t.R0b),t.LFG(st.rL),t.LFG(Ce))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),mt=new t.OlP("CDK_DRAG_PARENT"),Gt=new t.OlP("CdkDropListGroup"),Ht=new t.OlP("CDK_DRAG_CONFIG"),Ze=0,Bt=new t.OlP("CdkDropList"),Vt=function(){var a=function(){function s(e,i,n,r,o,l,c){var d=this;(0,x.Z)(this,s),this.element=e,this._changeDetectorRef=n,this._scrollDispatcher=r,this._dir=o,this._group=l,this._destroyed=new b.x,this.connectedTo=[],this.id="cdk-drop-list-".concat(Ze++),this.enterPredicate=function(){return!0},this.sortPredicate=function(){return!0},this.dropped=new t.vpe,this.entered=new t.vpe,this.exited=new t.vpe,this.sorted=new t.vpe,this._unsortedItems=new Set,this._dropListRef=i.createDropList(e),this._dropListRef.data=this,c&&this._assignDefaults(c),this._dropListRef.enterPredicate=function(h,f){return d.enterPredicate(h.data,f.data)},this._dropListRef.sortPredicate=function(h,f,T){return d.sortPredicate(h,f.data,T.data)},this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),s._dropLists.push(this),l&&l._items.add(this)}return(0,D.Z)(s,[{key:"disabled",get:function(){return this._disabled||!!this._group&&this._group.disabled},set:function(i){this._dropListRef.disabled=this._disabled=(0,w.Ig)(i)}},{key:"addItem",value:function(i){this._unsortedItems.add(i),this._dropListRef.isDragging()&&this._syncItemsWithRef()}},{key:"removeItem",value:function(i){this._unsortedItems.delete(i),this._dropListRef.isDragging()&&this._syncItemsWithRef()}},{key:"getSortedItems",value:function(){return Array.from(this._unsortedItems).sort(function(i,n){return i._dragRef.getVisibleElement().compareDocumentPosition(n._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1})}},{key:"ngOnDestroy",value:function(){var i=s._dropLists.indexOf(this);i>-1&&s._dropLists.splice(i,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}},{key:"_setupInputSyncSubscription",value:function(i){var n=this;this._dir&&this._dir.change.pipe((0,N.O)(this._dir.value),(0,I.R)(this._destroyed)).subscribe(function(r){return i.withDirection(r)}),i.beforeStarted.subscribe(function(){var r=(0,w.Eq)(n.connectedTo).map(function(l){return"string"==typeof l?s._dropLists.find(function(d){return d.id===l}):l});if(n._group&&n._group._items.forEach(function(l){-1===r.indexOf(l)&&r.push(l)}),!n._scrollableParentsResolved){var o=n._scrollDispatcher.getAncestorScrollContainers(n.element).map(function(l){return l.getElementRef().nativeElement});n._dropListRef.withScrollableParents(o),n._scrollableParentsResolved=!0}i.disabled=n.disabled,i.lockAxis=n.lockAxis,i.sortingDisabled=(0,w.Ig)(n.sortingDisabled),i.autoScrollDisabled=(0,w.Ig)(n.autoScrollDisabled),i.autoScrollStep=(0,w.su)(n.autoScrollStep,2),i.connectedTo(r.filter(function(l){return l&&l!==n}).map(function(l){return l._dropListRef})).withOrientation(n.orientation)})}},{key:"_handleEvents",value:function(i){var n=this;i.beforeStarted.subscribe(function(){n._syncItemsWithRef(),n._changeDetectorRef.markForCheck()}),i.entered.subscribe(function(r){n.entered.emit({container:n,item:r.item.data,currentIndex:r.currentIndex})}),i.exited.subscribe(function(r){n.exited.emit({container:n,item:r.item.data}),n._changeDetectorRef.markForCheck()}),i.sorted.subscribe(function(r){n.sorted.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,container:n,item:r.item.data})}),i.dropped.subscribe(function(r){n.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,item:r.item.data,isPointerOverContainer:r.isPointerOverContainer,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),n._changeDetectorRef.markForCheck()})}},{key:"_assignDefaults",value:function(i){var n=i.lockAxis,o=i.sortingDisabled,l=i.listAutoScrollDisabled,c=i.listOrientation;this.disabled=i.draggingDisabled??!1,this.sortingDisabled=o??!1,this.autoScrollDisabled=l??!1,this.orientation=c||"vertical",n&&(this.lockAxis=n)}},{key:"_syncItemsWithRef",value:function(){this._dropListRef.withItems(this.getSortedItems().map(function(i){return i._dragRef}))}}]),s}();return a._dropLists=[],a.\u0275fac=function(e){return new(e||a)(t.Y36(t.SBq),t.Y36(ht),t.Y36(t.sBO),t.Y36(st.mF),t.Y36(kt.Is,8),t.Y36(Gt,12),t.Y36(Ht,8))},a.\u0275dir=t.lG2({type:a,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(e,i){2&e&&(t.uIk("id",i.id),t.ekj("cdk-drop-list-disabled",i.disabled)("cdk-drop-list-dragging",i._dropListRef.isDragging())("cdk-drop-list-receiving",i._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],data:["cdkDropListData","data"],orientation:["cdkDropListOrientation","orientation"],id:"id",lockAxis:["cdkDropListLockAxis","lockAxis"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[t._Bn([{provide:Gt,useValue:void 0},{provide:Bt,useExisting:a}])]}),a}(),ut=new t.OlP("CdkDragHandle"),we=function(){var a=function(){function s(e,i){(0,x.Z)(this,s),this.element=e,this._stateChanges=new b.x,this._disabled=!1,this._parentDrag=i}return(0,D.Z)(s,[{key:"disabled",get:function(){return this._disabled},set:function(i){this._disabled=(0,w.Ig)(i),this._stateChanges.next(this)}},{key:"ngOnDestroy",value:function(){this._stateChanges.complete()}}]),s}();return a.\u0275fac=function(e){return new(e||a)(t.Y36(t.SBq),t.Y36(mt,12))},a.\u0275dir=t.lG2({type:a,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:["cdkDragHandleDisabled","disabled"]},features:[t._Bn([{provide:ut,useExisting:a}])]}),a}(),ke=new t.OlP("CdkDragPlaceholder"),Se=new t.OlP("CdkDragPreview"),$t=function(){var a=function(){function s(e,i,n,r,o,l,c,d,h,f,T){var C=this;(0,x.Z)(this,s),this.element=e,this.dropContainer=i,this._ngZone=r,this._viewContainerRef=o,this._dir=c,this._changeDetectorRef=h,this._selfHandle=f,this._parentDrag=T,this._destroyed=new b.x,this.started=new t.vpe,this.released=new t.vpe,this.ended=new t.vpe,this.entered=new t.vpe,this.exited=new t.vpe,this.dropped=new t.vpe,this.moved=new bt.y(function(S){var k=C._dragRef.moved.pipe((0,j.U)(function(P){return{source:C,pointerPosition:P.pointerPosition,event:P.event,delta:P.delta,distance:P.distance}})).subscribe(S);return function(){k.unsubscribe()}}),this._dragRef=d.createDrag(e,{dragStartThreshold:l&&null!=l.dragStartThreshold?l.dragStartThreshold:5,pointerDirectionChangeThreshold:l&&null!=l.pointerDirectionChangeThreshold?l.pointerDirectionChangeThreshold:5,zIndex:l?.zIndex}),this._dragRef.data=this,s._dragInstances.push(this),l&&this._assignDefaults(l),i&&(this._dragRef._withDropContainer(i._dropListRef),i.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}return(0,D.Z)(s,[{key:"disabled",get:function(){return this._disabled||this.dropContainer&&this.dropContainer.disabled},set:function(i){this._disabled=(0,w.Ig)(i),this._dragRef.disabled=this._disabled}},{key:"getPlaceholderElement",value:function(){return this._dragRef.getPlaceholderElement()}},{key:"getRootElement",value:function(){return this._dragRef.getRootElement()}},{key:"reset",value:function(){this._dragRef.reset()}},{key:"getFreeDragPosition",value:function(){return this._dragRef.getFreeDragPosition()}},{key:"setFreeDragPosition",value:function(i){this._dragRef.setFreeDragPosition(i)}},{key:"ngAfterViewInit",value:function(){var i=this;this._ngZone.runOutsideAngular(function(){i._ngZone.onStable.pipe((0,wt.q)(1),(0,I.R)(i._destroyed)).subscribe(function(){i._updateRootElement(),i._setupHandlesListener(),i.freeDragPosition&&i._dragRef.setFreeDragPosition(i.freeDragPosition)})})}},{key:"ngOnChanges",value:function(i){var n=i.rootElementSelector,r=i.freeDragPosition;n&&!n.firstChange&&this._updateRootElement(),r&&!r.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}},{key:"ngOnDestroy",value:function(){var i=this;this.dropContainer&&this.dropContainer.removeItem(this);var n=s._dragInstances.indexOf(this);n>-1&&s._dragInstances.splice(n,1),this._ngZone.runOutsideAngular(function(){i._destroyed.next(),i._destroyed.complete(),i._dragRef.dispose()})}},{key:"_updateRootElement",value:function(){var r,i=this.element.nativeElement,n=i;this.rootElementSelector&&(n=void 0!==i.closest?i.closest(this.rootElementSelector):null===(r=i.parentElement)||void 0===r?void 0:r.closest(this.rootElementSelector)),this._dragRef.withRootElement(n||i)}},{key:"_getBoundaryElement",value:function(){var i=this.boundaryElement;return i?"string"==typeof i?this.element.nativeElement.closest(i):(0,w.fI)(i):null}},{key:"_syncInputs",value:function(i){var n=this;i.beforeStarted.subscribe(function(){if(!i.isDragging()){var r=n._dir,o=n.dragStartDelay,l=n._placeholderTemplate?{template:n._placeholderTemplate.templateRef,context:n._placeholderTemplate.data,viewContainer:n._viewContainerRef}:null,c=n._previewTemplate?{template:n._previewTemplate.templateRef,context:n._previewTemplate.data,matchSize:n._previewTemplate.matchSize,viewContainer:n._viewContainerRef}:null;i.disabled=n.disabled,i.lockAxis=n.lockAxis,i.dragStartDelay="object"==typeof o&&o?o:(0,w.su)(o),i.constrainPosition=n.constrainPosition,i.previewClass=n.previewClass,i.withBoundaryElement(n._getBoundaryElement()).withPlaceholderTemplate(l).withPreviewTemplate(c).withPreviewContainer(n.previewContainer||"global"),r&&i.withDirection(r.value)}}),i.beforeStarted.pipe((0,wt.q)(1)).subscribe(function(){if(n._parentDrag)i.withParent(n._parentDrag._dragRef);else for(var r=n.element.nativeElement.parentElement;r;){if(r.classList.contains("cdk-drag")){var o;i.withParent((null===(o=s._dragInstances.find(function(l){return l.element.nativeElement===r}))||void 0===o?void 0:o._dragRef)||null);break}r=r.parentElement}})}},{key:"_handleEvents",value:function(i){var n=this;i.started.subscribe(function(r){n.started.emit({source:n,event:r.event}),n._changeDetectorRef.markForCheck()}),i.released.subscribe(function(r){n.released.emit({source:n,event:r.event})}),i.ended.subscribe(function(r){n.ended.emit({source:n,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),n._changeDetectorRef.markForCheck()}),i.entered.subscribe(function(r){n.entered.emit({container:r.container.data,item:n,currentIndex:r.currentIndex})}),i.exited.subscribe(function(r){n.exited.emit({container:r.container.data,item:n})}),i.dropped.subscribe(function(r){n.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,isPointerOverContainer:r.isPointerOverContainer,item:n,distance:r.distance,dropPoint:r.dropPoint,event:r.event})})}},{key:"_assignDefaults",value:function(i){var n=i.lockAxis,r=i.dragStartDelay,o=i.constrainPosition,l=i.previewClass,c=i.boundaryElement,h=i.rootElementSelector,f=i.previewContainer;this.disabled=i.draggingDisabled??!1,this.dragStartDelay=r||0,n&&(this.lockAxis=n),o&&(this.constrainPosition=o),l&&(this.previewClass=l),c&&(this.boundaryElement=c),h&&(this.rootElementSelector=h),f&&(this.previewContainer=f)}},{key:"_setupHandlesListener",value:function(){var i=this;this._handles.changes.pipe((0,N.O)(this._handles),(0,ue.b)(function(n){var r=n.filter(function(o){return o._parentDrag===i}).map(function(o){return o.element});i._selfHandle&&i.rootElementSelector&&r.push(i.element),i._dragRef.withHandles(r)}),(0,E.w)(function(n){return Zt.T.apply(void 0,(0,u.Z)(n.map(function(r){return r._stateChanges.pipe((0,N.O)(r))})))}),(0,I.R)(this._destroyed)).subscribe(function(n){var r=i._dragRef,o=n.element.nativeElement;n.disabled?r.disableHandle(o):r.enableHandle(o)})}}]),s}();return a._dragInstances=[],a.\u0275fac=function(e){return new(e||a)(t.Y36(t.SBq),t.Y36(Bt,12),t.Y36(y.K0),t.Y36(t.R0b),t.Y36(t.s_b),t.Y36(Ht,8),t.Y36(kt.Is,8),t.Y36(ht),t.Y36(t.sBO),t.Y36(ut,10),t.Y36(mt,12))},a.\u0275dir=t.lG2({type:a,selectors:[["","cdkDrag",""]],contentQueries:function(e,i,n){var r;1&e&&(t.Suo(n,Se,5),t.Suo(n,ke,5),t.Suo(n,ut,5)),2&e&&(t.iGM(r=t.CRH())&&(i._previewTemplate=r.first),t.iGM(r=t.CRH())&&(i._placeholderTemplate=r.first),t.iGM(r=t.CRH())&&(i._handles=r))},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(e,i){2&e&&t.ekj("cdk-drag-disabled",i.disabled)("cdk-drag-dragging",i._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[t._Bn([{provide:mt,useExisting:a}]),t.TTD]}),a}(),Pe=function(){var a=(0,D.Z)(function s(){(0,x.Z)(this,s)});return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({providers:[ht],imports:[st.ZD]}),a}(),gt=m(59077),Ie=m(49808),jt=m(75578),zt=m(80529),Oe=m(92340),U=m(61135);let H=(()=>{class a{constructor(e){this._http=e,this.url=`${Oe.N.baseUrl}/test`,this.createTest$=new U.X(null),this.testDetails$=new U.X(null),this.testDetailsForm$=new U.X(null),this.profileImg$=new U.X(null),this.next$=new U.X(null),this.testList$=new U.X(null)}onCreate(e){this.createTest$.next(e)}onTestDetails(e){this.testDetails$.next(e)}onTestDetailsForm(e){this.testDetailsForm$.next(e)}onProfileImg(e){this.profileImg$.next(e)}onNext(e){this.next$.next(e)}onTestList(e){this.testList$.next(e)}setTestDetailsForm(e){this.testDetailsForm=e}listenCreate(){return this.createTest$.asObservable()}listenTestDetails(){return this.testDetails$.asObservable()}listenTestDetailsForm(){return this.testDetailsForm$.asObservable()}listenProfileImg(){return this.profileImg$.asObservable()}listenNext(){return this.next$.asObservable()}listenTestList(){return this.testList$.asObservable()}getTestDetailsForm(){return this.testDetailsForm}createTest(e,i){return this._http.post(`${this.url}/${e}`,i)}updateTest(e,i,n){return this._http.put(`${this.url}/${e}/${i}`,n)}searchTest(e,i,n,r={}){if(i&&n){const o=(new zt.LE).set("per_page",i).set("page",n).set("sort_order","desc").set("sort_by","created_at");return this._http.post(`${this.url}/${e}/search`,r,{params:o})}return this._http.post(`${this.url}/${e}/search`,r)}getTestDetails(e,i){return this._http.get(`${this.url}/${e}/${i}`)}getTestList(e){return this._http.get(`${this.url}/${e}`)}deleteTest(e,i){return this._http.delete(`${this.url}/${e}/${i}`)}}return a.\u0275fac=function(e){return new(e||a)(t.LFG(zt.eN))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var g=m(24006),tt=m(37536),q=m(65412),B=m(97392),et=m(47957),_t=m(3238),F=m(59549),it=m(284),v=m(7155),nt=m(51572);const Fe=["table"];function qe(a,s){if(1&a&&(t.TgZ(0,"mat-option",25),t._uU(1),t.qZA()),2&a){const e=s.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.name," ")}}function Re(a,s){1&a&&(t.TgZ(0,"mat-option"),t._uU(1,"No data found"),t.qZA())}function Me(a,s){1&a&&(t.TgZ(0,"th",26),t._uU(1,"Test Name"),t.qZA())}function Ne(a,s){if(1&a&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&a){const e=s.$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function Ee(a,s){1&a&&(t.TgZ(0,"span"),t._uU(1,"/"),t.qZA())}function Le(a,s){if(1&a&&(t.TgZ(0,"span"),t._uU(1),t.YNc(2,Ee,2,0,"span",8),t.qZA()),2&a){const e=s.$implicit,i=s.last;t.xp6(1),t.Oqu(e),t.xp6(1),t.Q6J("ngIf",!i)}}function Ue(a,s){if(1&a&&(t.TgZ(0,"th",28),t._uU(1," Sample Type: \xa0\xa0\xa0 "),t.YNc(2,Le,3,2,"span",29),t.qZA()),2&a){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.sampleType)}}function Je(a,s){1&a&&t._UZ(0,"td",30)}function Ye(a,s){1&a&&t._UZ(0,"th",28)}function Qe(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"td",31)(1,"mat-icon",32),t.NdJ("click",function(){const r=t.CHM(e).index,o=t.oxw();return t.KtG(o.deleteTest(r))}),t.qZA()()}}function Ge(a,s){1&a&&t._UZ(0,"tr",33)}function He(a,s){1&a&&t._UZ(0,"tr",34),2&a&&t.Q6J("cdkDragData",s.$implicit)}function Be(a,s){1&a&&(t.TgZ(0,"div",35),t._UZ(1,"mat-spinner"),t.qZA())}let Kt=(()=>{class a{constructor(e,i,n,r,o,l){this.testService=e,this.cdr=i,this.fb=n,this.sharedService=r,this.route=o,this.dialog=l,this.dataSource=[],this.displayedColumns=["name","sample_type","action"],this.spinner=!1,this.testList=[],this.sampleTypes=[],this.destroyed$=new b.x}ngOnInit(){var e=this;return(0,p.Z)(function*(){e.getPath(),e.initForm(),e.getTestDetailsForm(),"create"==e.action&&(yield e.getSingleTestList()),e.listenTestDetails(),e.listenTestDetailsForm()})()}getPath(){this.action=this.route.parent?.snapshot.paramMap.get("action")}initForm(){this.addTestForm=this.fb.group({name:[null]})}getTestDetailsForm(){this.testDetailsForm=this.testService.getTestDetailsForm()?.value}patchTestData(){if(this.testDetails&&this.testDetails.test_list.length>0&&this.testList.length>0){const e=[];this.cdr.detectChanges(),this.testDetails?.test_list.forEach(i=>{this.testList.forEach(n=>{n.id===i.id&&e.push(n)})}),this.dataSource=e,this.table.renderRows(),this.cdr.detectChanges()}}getSingleTestList(){var e=this;return(0,p.Z)(function*(){e.spinner=!0,e.cdr.detectChanges();const i={filter:{centers:e.testDetailsForm?.centers,sample_type:e.testDetailsForm?.sample_type,departments:[e.testDetailsForm?.departments],gender:e.testDetailsForm?.gender}};console.log(e.testService.searchTest("single",null,null,i));try{const n=yield(0,Ie.n)(e.testService.searchTest("single",null,null,i));e.spinner=!1,e.testList=n.data.results,e.sampleType=e.testList[0].sample_type.map(r=>r.name),e.patchTestData(),e.getFilteredOptions(),e.cdr.detectChanges()}catch(n){e.spinner=!1,e.cdr.detectChanges(),console.log(n)}})()}getFilteredOptions(){this.filteredOptions=this.addTestForm.get("name")?.valueChanges.pipe((0,N.O)(""),(0,j.U)(e=>this._filter(e||"")))}_filter(e){"string"!=typeof e&&(e="");const i=e.toLowerCase();return this.testList.filter(r=>r.name.toLowerCase().includes(i))}getOptionText(e){return e?.name}dropTable(e){const i=this.dataSource.findIndex(n=>n===e.item.data);pt(this.dataSource,i,e.currentIndex),this.table.renderRows(),this.emitTestList()}add(){const e=this.addTestForm.get("name")?.value;e&&"object"==typeof e&&(this.sampleTypes?.forEach(i=>{i.id===e.sample_type&&(e.type=i.name)}),this.dataSource.push(e),this.dataSource.forEach(i=>{this.dataSource=jt.W.removeDuplicate(this.dataSource)}),jt.W.removeDuplicate(this.dataSource,this.sampleTypes),this.table.renderRows(),this.addTestForm.patchValue({name:null}),this.cdr.detectChanges(),this.emitTestList())}deleteTest(e){this.confirmConsDialog=this.dialog.open(gt.$,{width:"40%",height:"auto",disableClose:!1,data:{message:"Are you sure want to Delete?",buttonText:{ok:"Delete",cancel:"Cancel"}}}),this.confirmConsDialog.afterClosed().subscribe(i=>{i&&(this.dataSource.splice(e,1),this.table.renderRows(),this.emitTestList())})}listenTestDetails(){var e=this;this.testService.listenTestDetails().pipe((0,I.R)(this.destroyed$)).subscribe(function(){var i=(0,p.Z)(function*(n){n&&(e.testDetails=n,yield e.getSingleTestList(),e.patchTestData())});return function(n){return i.apply(this,arguments)}}())}listenTestDetailsForm(){this.testService.listenTestDetailsForm().pipe((0,I.R)(this.destroyed$)).subscribe(e=>{e&&(this.testDetailsForm=e.value,this.testService.onTestDetailsForm(null))})}emitTestList(){const e=this.dataSource.map(i=>i.id);this.testService.onTestList(e)}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(H),t.Y36(t.sBO),t.Y36(g.qu),t.Y36(tt.F),t.Y36(A.gz),t.Y36(q.uw))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-add-test"]],viewQuery:function(e,i){if(1&e&&t.Gf(Fe,5),2&e){let n;t.iGM(n=t.CRH())&&(i.table=n.first)}},decls:30,vars:12,consts:[[1,"add-test-container"],[1,"row","search-container"],[1,"col-lg-6","search",3,"formGroup"],["appearance","outline",1,"input-mat-all"],["matInput","","placeholder","Test Name","formControlName","name",3,"matAutocomplete"],["autoActiveFirstOption","",3,"displayWith"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["mat-btn","",1,"mat-button","button-mat-all",3,"click"],[1,"row"],[1,"col-lg-9"],["cdkDropList","",3,"dataSource","cdkDropListData","cdkDropListDropped"],["table",""],["matColumnDef","name"],["mat-header-cell","","class","first",4,"matHeaderCellDef"],["mat-cell","","cdkDragHandle","","class","first primary",4,"matCellDef"],["matColumnDef","sample_type"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","cdkDragHandle","","class","primary",4,"matCellDef"],["matColumnDef","action"],["mat-cell","","cdkDragHandle","","class","last",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","cdkDrag","","previewClass","drag-preview",3,"cdkDragData",4,"matRowDef","matRowDefColumns"],["class","spinner",4,"ngIf"],[3,"value"],["mat-header-cell","",1,"first"],["mat-cell","","cdkDragHandle","",1,"first","primary"],["mat-header-cell",""],[4,"ngFor","ngForOf"],["mat-cell","","cdkDragHandle","",1,"primary"],["mat-cell","","cdkDragHandle","",1,"last"],["svgIcon","appDelete",1,"delete-icon",3,"click"],["mat-header-row",""],["mat-row","","cdkDrag","","previewClass","drag-preview",3,"cdkDragData"],[1,"spinner"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form",2)(3,"label"),t._uU(4,"Test Name"),t.qZA(),t.TgZ(5,"mat-form-field",3),t._UZ(6,"input",4),t.TgZ(7,"mat-autocomplete",5,6),t.YNc(9,qe,2,2,"mat-option",7),t.ALo(10,"async"),t.YNc(11,Re,2,0,"mat-option",8),t.qZA()(),t.TgZ(12,"button",9),t.NdJ("click",function(){return i.add()}),t._uU(13," Add "),t.qZA()()(),t.TgZ(14,"div",10)(15,"div",11)(16,"mat-table",12,13),t.NdJ("cdkDropListDropped",function(r){return i.dropTable(r)}),t.ynx(18,14),t.YNc(19,Me,2,0,"th",15),t.YNc(20,Ne,2,1,"td",16),t.BQk(),t.ynx(21,17),t.YNc(22,Ue,3,1,"th",18),t.YNc(23,Je,1,0,"td",19),t.BQk(),t.ynx(24,20),t.YNc(25,Ye,1,0,"th",18),t.YNc(26,Qe,2,0,"td",21),t.BQk(),t.YNc(27,Ge,1,0,"tr",22),t.YNc(28,He,1,1,"tr",23),t.qZA()()()(),t.YNc(29,Be,2,0,"div",24)),2&e){const n=t.MAs(8);t.xp6(2),t.Q6J("formGroup",i.addTestForm),t.xp6(4),t.Q6J("matAutocomplete",n),t.xp6(1),t.Q6J("displayWith",i.getOptionText),t.xp6(2),t.Q6J("ngForOf",t.lcZ(10,10,i.filteredOptions)),t.xp6(2),t.Q6J("ngIf",!i.filteredOptions||!!i.filteredOptions&&0===i.filteredOptions.length),t.xp6(5),t.Q6J("dataSource",i.dataSource)("cdkDropListData",i.dataSource),t.xp6(11),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("ngIf",i.spinner)}},dependencies:[y.sg,y.O5,B.Hw,g._Y,g.Fj,g.JJ,g.JL,g.sg,g.u,et.XC,et.ZL,_t.ey,F.KE,it.Nt,v.BZ,v.fO,v.as,v.w1,v.Dz,v.nj,v.ge,v.ev,v.XQ,v.Gk,nt.Ou,Vt,$t,we,y.Ov],styles:[".add-test-container{width:100%;padding:30px}  .add-test-container .search-container{display:flex;flex-direction:row;justify-content:center}  .add-test-container .search-container .search{display:flex;flex-direction:row;align-items:flex-start}  .add-test-container .search-container .search .mat-form-field{width:70%}  .add-test-container .search-container .search .mat-form-field-flex{height:3em;background:#e6ebee;border-radius:6px}  .add-test-container .search-container .search .mat-form-field-appearance-outline .mat-form-field-infix{padding:.3em}  .add-test-container .search-container .search .mat-form-field-outline-start,   .add-test-container .search-container .search .mat-form-field-outline-end{border:none}  .add-test-container .search-container .search label{font-size:16px;margin-right:16px;height:3em;display:flex;flex-direction:row;align-items:center}  .add-test-container .search-container .search .button-mat-all{padding:.2em 2em!important;border-radius:6px!important;height:3em!important;margin-left:-20px}  .add-test-container .mat-table{display:table;width:100%!important;background:transparent}  .add-test-container .mat-table th{vertical-align:middle;font-size:14px;color:#000}  .add-test-container .mat-table td{vertical-align:middle}  .add-test-container .mat-table td .cols{width:100%;height:40px;display:flex;flex-direction:row;align-items:center}  .add-test-container .mat-table .first{width:300px;max-width:300px!important}  .add-test-container .mat-table .last{text-align:right}  .add-test-container .mat-table .mat-icon{cursor:pointer}.cdk-drag-preview[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.cdk-drag-preview[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:none!important}.cdk-drag-preview[_ngcontent-%COMP%]   .delete-icon[_ngcontent-%COMP%]{display:none!important}"],changeDetection:0}),a})();var ft=m(446),at=m(3848),Ve=m(14215);function $e(a,s){1&a&&(t.TgZ(0,"h3",16),t._uU(1,"Create Test"),t.qZA())}function je(a,s){1&a&&(t.TgZ(0,"h3",16),t._uU(1,"Update Test"),t.qZA())}function ze(a,s){1&a&&(t.TgZ(0,"div"),t._UZ(1,"br")(2,"br")(3,"br")(4,"br")(5,"br"),t.qZA())}function Ke(a,s){1&a&&t._UZ(0,"mat-tab",17),2&a&&t.Q6J("label",s.$implicit.label)}function We(a,s){if(1&a&&(t.TgZ(0,"div",18)(1,"form",19),t._UZ(2,"app-image-upload",20),t.qZA()()),2&a){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.profileImageForm),t.xp6(1),t.Q6J("imgUrl",e.imageUrl)}}function Xe(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.next())}),t._uU(1," Next "),t.qZA()}}function ti(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.save())}),t._uU(1),t.qZA()}if(2&a){const e=t.oxw();t.xp6(1),t.hij(" ","create"===e.action?"Create":"edit"===e.action?"Update":""," ")}}function ei(a,s){1&a&&(t.TgZ(0,"div",22),t._UZ(1,"mat-spinner"),t.qZA())}let Wt=(()=>{class a{constructor(e,i,n,r,o,l,c){this.router=e,this.route=i,this.cdr=n,this.testService=r,this.fb=o,this.snackBar=l,this.sharedService=c,this.navLinks=[{label:"Details",link:"details"},{label:"Add Values & Interpretation",link:"values"}],this.selectedIndex=0,this.childPath="details",this.type="single",this.action="create",this.testLink={label:"Add Test",link:"test"},this.spinner=!1,this.destroyed$=new b.x}ngOnInit(){this.getParams(),this.getPath(),this.getChildPath(),"edit"===this.action&&this.getTestDetails(),this.initProfileImageForm(),this.listenImageChange(),this.listenProfileImage(),this.listenTestDetailsForm(),this.listenTestList()}getParams(){this.route.params.subscribe(e=>{this.testTypeChecking=e.type})}initProfileImageForm(){this.profileImageForm=this.fb.group({profile_image:[null]})}getPath(){this.type=this.route.snapshot.paramMap.get("type"),this.action=this.route.snapshot.paramMap.get("action"),this.childPath=this.route.snapshot.firstChild?.routeConfig?.path,this.addNav(),this.setActiveTab()}getChildPath(){this.router.events.subscribe(e=>{e instanceof A.m2&&(this.childPath=this.route.snapshot.firstChild?.routeConfig?.path,this.setActiveTab())})}addNav(){"group"===this.type&&this.navLinks.splice(1,0,this.testLink)}setActiveTab(){this.selectedIndex=this.navLinks.findIndex(e=>e.link===this.childPath),this.cdr.markForCheck()}getTestDetails(){this.id=this.route.snapshot.paramMap.get("id"),this.testService.getTestDetails(this.type,this.id).subscribe({next:e=>{this.spinner=!1,this.cdr.detectChanges(),this.testService.onTestDetails(e.data)},error:e=>{this.spinner=!1,this.cdr.detectChanges(),console.log(e)}})}tabChanged(e){return this.navLinks.forEach((i,n)=>{i.label===e.tab.textLabel&&(1===n&&"test"===i.link?this.testDetailsForm?.valid?this.router.navigate([`./${i.link}`],{relativeTo:this.route}):(this.testService.onNext(!0),this.setActiveTab()):this.router.navigate([`./${i.link}`],{relativeTo:this.route}))}),e}cancel(){"create"===this.action?this.router.navigate(["./../"],{relativeTo:this.route}):"edit"===this.action&&this.router.navigate(["./../../"],{relativeTo:this.route})}next(){this.testDetailsForm?.valid?(this.selectedIndex++,this.router.navigate([`./${this.navLinks[this.selectedIndex].link}`],{relativeTo:this.route})):this.testService.onNext(!0)}uploadImage(e,i){const n=new FormData;n.append("file",i.value),n.append("upload_type","profile"),this.sharedService.uploadImage(n).subscribe({next:r=>{const o=r?.data?.uploadedFilePath;this.testDetailsForm.patchValue({image_url:o}),"create"===this.action?this.createTest(this.type):"edit"===this.action&&this.updateTest(this.type)},error:r=>{this.spinner=!1,this.cdr.detectChanges()}})}save(){if("group"===this.type){const e=this.profileImageForm.get("profile_image");e?.value&&"object"==typeof e?.value?this.uploadImage(this.type,e):"create"===this.action?this.createTest(this.type):"edit"===this.action&&this.updateTest(this.type)}else this.testService.onCreate(this.type);this.sharedService.settestFormData(null)}createTest(e){const i=this.testDetailsForm.value;i.price=i.price.toString(),!!i.MRP&&""!==i.MRP&&(i.MRP="string"==typeof i.MRP?parseInt(i.MRP).toString():i.MRP.toString()),i.map_to_role=[],i.map_to_department=[],i.test_list=this.testList,i.sample_quantity=Number(i.sample_quantity),i.departments=i.departments?[i.departments]:[];let n=i.category.indexOf(0);-1!==n&&i.category.splice(n,1);let r=i.centers.indexOf(0);-1!==r&&i.centers.splice(r,1),this.spinner=!0,this.cdr.detectChanges(),this.testService.createTest(e,i).subscribe({next:o=>{this.spinner=!1,this.cdr.detectChanges(),this.snackBar.open(o.message,"close"),this.router.navigate(["./../"],{relativeTo:this.route})},error:o=>{this.spinner=!1,this.cdr.detectChanges(),this.snackBar.open(o&&0!==o.status?"object"==typeof o.error.message?o.error.message[0]:o.error.message:"Something went wrong","close")}})}updateTest(e){const i=this.testDetailsForm.value;i.price="string"==typeof i.price?parseInt(i.price)?.toString():i.price?.toString(),!!i.MRP&&""!==i.MRP&&(i.MRP="string"==typeof i.MRP?parseInt(i.MRP).toString():i.MRP.toString()),i.map_to_role=[],i.map_to_department=[],i.proccess_time="string"==typeof i.proccess_time?parseInt(i.proccess_time):i.proccess_time,i.approval_time="string"==typeof i.approval_time?parseInt(i.approval_time):i.approval_time,i.test_list=this.testList,i.sun=void 0,i.mon=void 0,i.tue=void 0,i.wed=void 0,i.thu=void 0,i.fri=void 0,i.sat=void 0,i.departments=i.departments?[i.departments]:[],i.sample_quantity=Number(i.sample_quantity);let n=i.category.indexOf(0);-1!==n&&i.category.splice(n,1);let r=i.centers.indexOf(0);-1!==r&&i.centers.splice(r,1),this.spinner=!0,this.cdr.detectChanges(),this.testService.updateTest(e,this.id,i).subscribe({next:o=>{this.spinner=!1,this.cdr.detectChanges(),this.snackBar.open(o.message,"close"),this.router.navigate(["./../../"],{relativeTo:this.route})},error:o=>{this.spinner=!1,this.cdr.detectChanges(),this.snackBar.open(o&&0!==o.status?"object"==typeof o.error.message?o.error.message[0]:o.error.message:"Something went wrong","close")}})}listenImageChange(){const e=this.profileImageForm.get("profile_image");e?.valueChanges.subscribe(()=>{this.testService.onProfileImg(e.value)})}listenProfileImage(){this.testService.listenProfileImg().pipe((0,I.R)(this.destroyed$)).subscribe(e=>{e&&(this.profileImageForm.get("profile_image")?.setValue(e,{emitEvent:!1}),this.imageUrl=e,this.testService.onProfileImg(null))})}listenTestDetailsForm(){this.testService.listenTestDetailsForm().pipe((0,I.R)(this.destroyed$)).subscribe(e=>{e&&(this.testDetailsForm=e,this.testService.onTestDetailsForm(null))})}listenTestList(){this.testService.listenTestList().pipe((0,I.R)(this.destroyed$)).subscribe(e=>{e&&(this.testService.onTestList(null),this.testList=e)})}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete(),this.testService.setTestDetailsForm(null),"edit"===this.action&&this.testService.onTestDetails(null)}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(A.F0),t.Y36(A.gz),t.Y36(t.sBO),t.Y36(H),t.Y36(g.qu),t.Y36(ft.c),t.Y36(tt.F))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-create-edit-test"]],decls:26,vars:9,consts:[[1,"create-edit-container"],[1,"row"],[1,"col-lg-12"],["class","primary",4,"ngIf"],[4,"ngIf"],[1,"row",2,"margin-top","-5em"],[1,"col-lg-7"],["mat-stretch-tabs","",1,"agm-tab",3,"selectedIndex","selectedIndexChange","selectedTabChange"],["tabGroup",""],[3,"label",4,"ngFor","ngForOf"],["class","col-lg-5 upload-container",4,"ngIf"],[1,"active-tab"],[1,"action"],["mat-btn","",1,"mat-button","button-mat-all-cancel",3,"click"],["mat-btn","","class","mat-button button-mat-all",3,"click",4,"ngIf"],["class","spinner",4,"ngIf"],[1,"primary"],[3,"label"],[1,"col-lg-5","upload-container"],[1,"upload-img",3,"formGroup"],["formControlName","profile_image",3,"imgUrl"],["mat-btn","",1,"mat-button","button-mat-all",3,"click"],[1,"spinner"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t.YNc(3,$e,2,0,"h3",3),t.YNc(4,je,2,0,"h3",3),t.qZA()(),t._UZ(5,"br")(6,"br")(7,"br"),t.YNc(8,ze,6,0,"div",4),t.TgZ(9,"div",5)(10,"div",6)(11,"mat-tab-group",7,8),t.NdJ("selectedIndexChange",function(r){return i.selectedIndex=r})("selectedTabChange",function(r){return i.tabChanged(r)}),t.YNc(13,Ke,1,1,"mat-tab",9),t.qZA()(),t.YNc(14,We,3,2,"div",10),t.qZA(),t._UZ(15,"br"),t.TgZ(16,"div",1)(17,"div",2)(18,"section",11),t._UZ(19,"router-outlet"),t.qZA()()(),t.TgZ(20,"div",12)(21,"button",13),t.NdJ("click",function(){return i.cancel()}),t._uU(22," Cancel "),t.qZA(),t.YNc(23,Xe,2,0,"button",14),t.YNc(24,ti,2,1,"button",14),t.qZA()(),t.YNc(25,ei,2,0,"div",15)),2&e&&(t.xp6(3),t.Q6J("ngIf","create"==i.action),t.xp6(1),t.Q6J("ngIf","edit"==i.action),t.xp6(4),t.Q6J("ngIf","details"===i.childPath),t.xp6(3),t.Q6J("selectedIndex",i.selectedIndex),t.xp6(2),t.Q6J("ngForOf",i.navLinks),t.xp6(1),t.Q6J("ngIf","details"===i.childPath),t.xp6(9),t.Q6J("ngIf","group"===i.type&&"details"===i.childPath&&"create"===i.action),t.xp6(1),t.Q6J("ngIf","single"===i.type||"group"===i.type&&"edit"===i.action||"group"===i.type&&"create"===i.action&&"test"===i.childPath||"package"===i.type),t.xp6(1),t.Q6J("ngIf",i.spinner))},dependencies:[y.sg,y.O5,A.lC,g._Y,g.JJ,g.JL,g.sg,g.u,at.SP,at.uX,nt.Ou,Ve.J],styles:[".create-edit-container[_ngcontent-%COMP%]{width:100%;padding:30px}.create-edit-container[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]{position:relative}.create-edit-container[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]   .upload-img[_ngcontent-%COMP%]{position:absolute;bottom:-30px;right:30px;width:230px}.create-edit-container[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{margin-top:30px;display:flex;flex-direction:row;justify-content:flex-end}.create-edit-container[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:30px}@media only screen and (min-width: 992px) and (max-width: 1200px){.upload-container[_ngcontent-%COMP%]{height:170px!important}.upload-container[_ngcontent-%COMP%]   .upload-img[_ngcontent-%COMP%]{position:relative!important;right:auto!important;right:initial!important;width:100%!important}}@media only screen and (min-width: 768px) and (max-width: 992px){.upload-container[_ngcontent-%COMP%]{height:170px!important}.upload-container[_ngcontent-%COMP%]   .upload-img[_ngcontent-%COMP%]{position:relative!important;right:auto!important;right:initial!important;width:100%!important}}@media only screen and (min-width: 576px) and (max-width: 768px){.upload-container[_ngcontent-%COMP%]{height:170px!important}.upload-container[_ngcontent-%COMP%]   .upload-img[_ngcontent-%COMP%]{position:relative!important;right:auto!important;right:initial!important;width:100%!important}}  app-image-upload .image-upload img{width:11%!important}  app-image-upload .image-upload .image{width:40%!important}  app-image-upload .uploadButton{width:10em!important}@media only screen and (min-width: 768px) and (max-width: 992px){  app-image-upload .image-upload .image{width:10%!important}}@media only screen and (min-width: 576px) and (max-width: 768px){  app-image-upload .image-upload .image{width:10%!important}}@media only screen and (min-width: 992px) and (max-width: 1200px){  app-image-upload .image-upload .image{width:10%!important}}"],changeDetection:0}),a})();var V=m(78372),ii=m(4859),vt=m(56709);function ni(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",5)(1,"mat-checkbox",6),t.NdJ("ngModelChange",function(n){const o=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.values[null==o?null:o.name]=n)}),t._uU(2),t.ALo(3,"titlecase"),t.qZA()()}if(2&a){const e=s.$implicit,i=t.oxw();t.xp6(1),t.Q6J("checked",i.values[null==e?null:e.name])("ngModel",i.values[null==e?null:e.name]),t.xp6(1),t.hij(" ",t.lcZ(3,3,e.name)," ")}}let ai=(()=>{class a{constructor(e,i){this.dialogRef=e,this.data=i,this.values={}}ngOnInit(){this.initValues()}initValues(){this.values={};const e=this.data.form.get(this.data.type).value;this.data.value.forEach(i=>{let n=!1;e.forEach(r=>{i.id===r&&(n=!0)}),this.values[i.name]=n})}add(){const e=[];this.data.selected=[],Object.keys(this.values).forEach(n=>{if(this.values[n]){const r=this.data.value.filter(o=>o.name===n)[0];e.push(r.id),this.data.selected.push(r)}}),this.data.form.get(this.data.type).setValue(e),this.dialogRef.close(this.data)}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(q.so),t.Y36(q.WI))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-add-dialog"]],decls:7,vars:2,consts:[[1,"add-dialog-container"],[1,"primary"],["class","values",4,"ngFor","ngForOf"],[1,"action"],["mat-button","",1,"button-mat-all",3,"click"],[1,"values"],[1,"primary",3,"checked","ngModel","ngModelChange"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2),t.qZA(),t.YNc(3,ni,4,5,"div",2),t.TgZ(4,"div",3)(5,"button",4),t.NdJ("click",function(){return i.add()}),t._uU(6,"Add"),t.qZA()()()),2&e&&(t.xp6(2),t.Oqu(i.data.title),t.xp6(1),t.Q6J("ngForOf",i.data.value))},dependencies:[y.sg,g.JJ,g.On,ii.lW,vt.oG,y.rS],styles:[".add-dialog-container{width:600px}  .add-dialog-container .values .mat-checkbox{margin-bottom:20px}  .add-dialog-container .values .mat-checkbox-ripple .mat-ripple-element,   .add-dialog-container .values .mat-checkbox-checked.mat-accent .mat-checkbox-background{background-color:#043752!important}  .add-dialog-container .values .mat-checkbox-inner-container{width:28px!important;height:28px!important;background-color:#c4ced4}  .add-dialog-container .values .mat-checkbox-frame{border:none}  .add-dialog-container .values .mat-checkbox-label{height:28px;display:flex;flex-direction:row;align-items:center}  .add-dialog-container h2{font-weight:600;margin-bottom:30px}  .add-dialog-container .action{width:100%;display:flex;flex-direction:row;justify-content:flex-end}  .add-dialog-container .action button{height:40px!important;padding:.1em 4em!important}"],changeDetection:0}),a})();var Xt=m(29521),Tt=m(17009),yt=m(84385),si=m(55829),te=m(71948),ee=m(33300),$=m(77331),ri=m(53117);const oi=["allSelectedCategory"],li=["allSelectedCenters"],ci=["chipList"];function di(a,s){if(1&a&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.hij(" ","single"===e.type?"Test":e.toTitleCase(e.type)," Name is Required ")}}function pi(a,s){if(1&a&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.hij(" ","single"===e.type?"Test":e.toTitleCase(e.type)," Name already exists ")}}function hi(a,s){if(1&a&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&a){const e=s.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij("",e.name," ")}}function mi(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Department is Required "),t.qZA())}function ui(a,s){if(1&a&&(t.TgZ(0,"div",3)(1,"span",4),t._uU(2,"Department"),t.qZA(),t.TgZ(3,"mat-form-field",9)(4,"mat-select",38),t.YNc(5,hi,2,2,"mat-option",11),t.qZA(),t._UZ(6,"mat-icon",12),t.YNc(7,mi,2,0,"mat-error",7),t.qZA()()),2&a){const e=t.oxw();let i;t.xp6(5),t.Q6J("ngForOf",e.departments),t.xp6(2),t.Q6J("ngIf",null==(i=e.testDetailsForm.get("departments"))||null==i.errors?null:i.errors.required)}}function gi(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"mat-option",25),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.tosslePerOne("category"))}),t._uU(1),t.qZA()}if(2&a){const e=s.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij("",e.name," ")}}function _i(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Category is Required "),t.qZA())}function fi(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",3)(1,"span",4),t._uU(2,"Category"),t.qZA(),t.TgZ(3,"mat-form-field",9)(4,"mat-select",40)(5,"mat-select-trigger"),t._uU(6),t.qZA(),t.TgZ(7,"mat-option",25,41),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.toggleAllSelection("category"))}),t._uU(9,"Select All"),t.qZA(),t.YNc(10,gi,2,2,"mat-option",27),t.qZA(),t._UZ(11,"mat-icon",12),t.YNc(12,_i,2,0,"mat-error",7),t.qZA()()}if(2&a){const e=t.oxw();let i;t.xp6(6),t.Oqu(e.categoryOptions),t.xp6(1),t.Q6J("value",0),t.xp6(3),t.Q6J("ngForOf",e.categories),t.xp6(2),t.Q6J("ngIf",null==(i=e.testDetailsForm.get("category"))||null==i.errors?null:i.errors.required)}}function vi(a,s){if(1&a&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&a){const e=s.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij("",e.key," ")}}function Ti(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Gender is Required "),t.qZA())}function yi(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"mat-icon",42),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.scrollChipLeft())}),t._uU(1,"chevron_left"),t.qZA()}}function xi(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"mat-chip",43),t.NdJ("removed",function(){const r=t.CHM(e).$implicit,o=t.oxw();return t.KtG(o.removeChip(r))}),t._uU(1),t.TgZ(2,"button",44)(3,"mat-icon"),t._uU(4,"cancel"),t.qZA()()()}if(2&a){const e=s.$implicit;t.xp6(1),t.hij(" ",e," ")}}function Di(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"mat-icon",45),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.scrollChipRight())}),t._uU(1,"chevron_right"),t.qZA()}}function Ci(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"mat-option",25),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.tosslePerOne("category"))}),t._uU(1),t.qZA()}if(2&a){const e=s.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij("",e.name," ")}}function bi(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Category is Required "),t.qZA())}function Zi(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",3)(1,"span",4),t._uU(2,"Category"),t.qZA(),t.TgZ(3,"mat-form-field",9)(4,"mat-select",40)(5,"mat-select-trigger"),t._uU(6),t.qZA(),t.TgZ(7,"mat-option",25,41),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.toggleAllSelection("category"))}),t._uU(9,"Select All"),t.qZA(),t.YNc(10,Ci,2,2,"mat-option",27),t.qZA(),t._UZ(11,"mat-icon",12),t.YNc(12,bi,2,0,"mat-error",7),t.qZA()()}if(2&a){const e=t.oxw();let i;t.xp6(6),t.Oqu(e.categoryOptions),t.xp6(1),t.Q6J("value",0),t.xp6(3),t.Q6J("ngForOf",e.categories),t.xp6(2),t.Q6J("ngIf",null==(i=e.testDetailsForm.get("category"))||null==i.errors?null:i.errors.required)}}function wi(a,s){if(1&a&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&a){const e=s.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij("",e.key," ")}}function ki(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Two Way Trip is Required "),t.qZA())}function Si(a,s){if(1&a&&(t.TgZ(0,"div",3)(1,"div",1)(2,"div",21)(3,"span",14),t._uU(4,"Two Way Trip"),t.qZA(),t.TgZ(5,"mat-form-field",9)(6,"mat-select",46),t.YNc(7,wi,2,2,"mat-option",11),t.qZA(),t._UZ(8,"mat-icon",12),t.YNc(9,ki,2,0,"mat-error",7),t.qZA()(),t.TgZ(10,"div",21)(11,"span",14),t._uU(12,"Set Time"),t.qZA(),t.TgZ(13,"mat-form-field",47),t._UZ(14,"input",48),t.TgZ(15,"span",49),t._uU(16,"hrs"),t.qZA()()()()()),2&a){const e=t.oxw();let i;t.xp6(7),t.Q6J("ngForOf",e.twoWayTrip),t.xp6(2),t.Q6J("ngIf",null==(i=e.testDetailsForm.get("is_two_way_trip"))||null==i.errors?null:i.errors.required)}}function Ai(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Report Timing is Required "),t.qZA())}function Pi(a,s){if(1&a&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&a){const e=s.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij("",e.name," ")}}function Ii(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Report Unit is Required "),t.qZA())}function Oi(a,s){if(1&a&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&a){const e=s.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij("",e.key," ")}}function Fi(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Test Type is Required "),t.qZA())}function qi(a,s){if(1&a&&(t.TgZ(0,"div",3)(1,"span",4),t._uU(2,"Test Type"),t.qZA(),t.TgZ(3,"mat-form-field",9)(4,"mat-select",50),t.YNc(5,Oi,2,2,"mat-option",11),t.qZA(),t._UZ(6,"mat-icon",12),t.YNc(7,Fi,2,0,"mat-error",7),t.qZA()()),2&a){const e=t.oxw();let i;t.xp6(5),t.Q6J("ngForOf",e.testTypes),t.xp6(2),t.Q6J("ngIf",null==(i=e.testDetailsForm.get("test_type"))||null==i.errors?null:i.errors.required)}}function Ri(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"mat-option",25),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.tosslePerOne("centers"))}),t._uU(1),t.qZA()}if(2&a){const e=s.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij("",e.name," ")}}function Mi(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Center Name is Required "),t.qZA())}function Ni(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Price is Required "),t.qZA())}function Ei(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",3)(1,"span",4),t._uU(2,"Price"),t.qZA(),t.TgZ(3,"mat-form-field",5)(4,"input",51),t.NdJ("keypress",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.restrictDecimal(n))}),t.qZA(),t.TgZ(5,"mat-icon",52),t._uU(6,"\u20b9"),t.qZA(),t.YNc(7,Ni,2,0,"mat-error",7),t.qZA()()}if(2&a){const e=t.oxw();let i;t.xp6(4),t.Q6J("length",7),t.xp6(3),t.Q6J("ngIf",null==(i=e.testDetailsForm.get("price"))||null==i.errors?null:i.errors.required)}}function Li(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Sample Quantity is Required "),t.qZA())}function Ui(a,s){if(1&a&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&a){const e=s.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij("",e.name," ")}}function Ji(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Unit is Required "),t.qZA())}function Yi(a,s){if(1&a&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&a){const e=s.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij("",e.name," ")}}const Qi=function(){return["/master/add-consent-form"]},Gi=function(a){return{type:a}};function Hi(a,s){if(1&a&&(t.TgZ(0,"div",1)(1,"div",3)(2,"span",14),t._uU(3,"Short Name"),t.qZA(),t.TgZ(4,"mat-form-field",5),t._UZ(5,"input",53),t.qZA()(),t.TgZ(6,"div",3)(7,"span",4),t._uU(8,"Sample Quantity"),t.qZA(),t.TgZ(9,"div",1)(10,"div",54)(11,"mat-form-field",5),t._UZ(12,"input",55),t.YNc(13,Li,2,0,"mat-error",7),t.qZA()(),t.TgZ(14,"div",54)(15,"mat-form-field",9)(16,"mat-select",56),t.YNc(17,Ui,2,2,"mat-option",11),t.qZA(),t._UZ(18,"mat-icon",12),t.YNc(19,Ji,2,0,"mat-error",7),t.qZA()()()(),t.TgZ(20,"div",3)(21,"span",14),t._uU(22,"Consent Form"),t.qZA(),t.TgZ(23,"a",57),t._uU(24,"Create"),t.qZA(),t.TgZ(25,"mat-form-field",9)(26,"mat-select",58),t.YNc(27,Yi,2,2,"mat-option",11),t.qZA(),t._UZ(28,"mat-icon",12),t.qZA()()()),2&a){const e=t.oxw();let i,n;t.xp6(13),t.Q6J("ngIf",null==(i=e.testDetailsForm.get("sample_quantity"))||null==i.errors?null:i.errors.required),t.xp6(4),t.Q6J("ngForOf",e.test_units),t.xp6(2),t.Q6J("ngIf",null==(n=e.testDetailsForm.get("unit"))||null==n.errors?null:n.errors.required),t.xp6(4),t.Q6J("routerLink",t.DdM(6,Qi))("queryParams",t.VKq(7,Gi,e.type)),t.xp6(4),t.Q6J("ngForOf",e.consentForms)}}function Bi(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Price is Required "),t.qZA())}function Vi(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",3)(2,"span",4),t._uU(3,"Price"),t.qZA(),t.TgZ(4,"mat-form-field",5)(5,"input",51),t.NdJ("keypress",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.restrictDecimal(n))}),t.qZA(),t.TgZ(6,"mat-icon",52),t._uU(7,"\u20b9"),t.qZA(),t.YNc(8,Bi,2,0,"mat-error",7),t.qZA()()()}if(2&a){const e=t.oxw();let i;t.xp6(5),t.Q6J("length",7),t.xp6(3),t.Q6J("ngIf",null==(i=e.testDetailsForm.get("price"))||null==i.errors?null:i.errors.required)}}function $i(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Description is Required "),t.qZA())}function ji(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Only upto 200 characters are allowed "),t.qZA())}function zi(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Only upto 200 characters are allowed "),t.qZA())}function Ki(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",67)(1,"a",68),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(4);return t.KtG(n.addSample())}),t._uU(2," Add Another Sample Type "),t.qZA()()}}function Wi(a,s){if(1&a&&(t.TgZ(0,"div",62)(1,"div",3)(2,"span",14),t._uU(3,"Sample Type"),t.qZA(),t.TgZ(4,"mat-form-field",5),t._UZ(5,"input",63),t.qZA()(),t.TgZ(6,"div",64)(7,"span",14),t._uU(8," Container "),t.qZA(),t.TgZ(9,"div",65),t._uU(10),t.qZA()(),t.YNc(11,Ki,3,0,"div",66),t.qZA()),2&a){const e=s.$implicit,i=s.last;t.xp6(5),t.Q6J("value",null==e?null:e.name),t.xp6(5),t.hij(" ",null==e.product?null:e.product.name," "),t.xp6(1),t.Q6J("ngIf",i)}}function Xi(a,s){if(1&a&&(t.ynx(0),t.YNc(1,Wi,12,3,"div",61),t.BQk()),2&a){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.selectedSamples)}}function tn(a,s){1&a&&(t.TgZ(0,"mat-error",71),t._uU(1," Sample Type is Required "),t.qZA())}function en(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",62)(1,"div",67)(2,"a",69),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.addSample())}),t._uU(3," Add New Sample Type "),t.qZA(),t.YNc(4,tn,2,0,"mat-error",70),t.qZA()()}if(2&a){const e=t.oxw(2);let i;t.xp6(4),t.Q6J("ngIf",(null==(i=e.testDetailsForm.get("sample_type"))?null:i.touched)&&(null==(i=e.testDetailsForm.get("sample_type"))||null==i.errors?null:i.errors.required))}}function nn(a,s){if(1&a&&(t.ynx(0),t.YNc(1,Xi,2,1,"ng-container",59),t.YNc(2,en,5,1,"ng-template",null,60,t.W1O),t.BQk()),2&a){const e=t.MAs(3),i=t.oxw();t.xp6(1),t.Q6J("ngIf",i.selectedSamples.length>0)("ngIfElse",e)}}function an(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",74)(1,"span",14),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"mat-icon",75),t.NdJ("click",function(){const r=t.CHM(e).index,o=t.oxw(2);return t.KtG(o.deleteDocs(r))}),t._uU(5,"delete"),t.qZA()()}if(2&a){const e=s.$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,1,e.name)," ")}}function sn(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",30)(2,"a",72),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.addDocs())}),t._uU(3," Add Needed Inputs "),t.qZA(),t.YNc(4,an,6,3,"div",73),t.qZA()()}if(2&a){const e=t.oxw();t.xp6(4),t.Q6J("ngForOf",e.selectedDocs)}}function rn(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Process Time is Required "),t.qZA())}function on(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Approval Time is Required "),t.qZA())}function ln(a,s){if(1&a&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&a){const e=s.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij("",e.key," ")}}function cn(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," TAT Type is Required "),t.qZA())}function dn(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Start is Required "),t.qZA())}function pn(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," End is Required "),t.qZA())}function hn(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Start is Required "),t.qZA())}function mn(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," End is Required "),t.qZA())}function un(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1,"Days are required"),t.qZA())}function gn(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",76)(1,"div",30)(2,"span",14),t._uU(3,"TAT Time"),t.qZA(),t.TgZ(4,"div",77)(5,"div",1)(6,"div",3)(7,"div",1)(8,"div",54)(9,"span",4),t._uU(10,"Process Time"),t.qZA(),t.TgZ(11,"mat-form-field",5),t._UZ(12,"input",78),t.YNc(13,rn,2,0,"mat-error",7),t.qZA()(),t.TgZ(14,"div",54)(15,"span",4),t._uU(16,"Approval Time"),t.qZA(),t.TgZ(17,"mat-form-field",5),t._UZ(18,"input",79),t.YNc(19,on,2,0,"mat-error",7),t.qZA()()()(),t.TgZ(20,"div",13)(21,"div",1)(22,"div",3)(23,"span",4),t._uU(24,"TAT Type"),t.qZA(),t.TgZ(25,"mat-form-field",9)(26,"mat-select",80),t.YNc(27,ln,2,2,"mat-option",11),t.qZA(),t._UZ(28,"mat-icon",12),t.YNc(29,cn,2,0,"mat-error",7),t.qZA()(),t.TgZ(30,"div",3)(31,"span",4),t._uU(32,"Cut Off (Mon - Sat)"),t.qZA(),t.TgZ(33,"div",81)(34,"mat-form-field",82),t._UZ(35,"input",83),t.TgZ(36,"ngx-material-timepicker",84,85),t.NdJ("timeSet",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.timeSetMonStart(n))}),t.qZA(),t.TgZ(38,"input",86),t.NdJ("click",function(){t.CHM(e);const n=t.MAs(37);return t.KtG(n.open())}),t.qZA(),t.YNc(39,dn,2,0,"mat-error",7),t.qZA(),t.TgZ(40,"mat-form-field",82),t._UZ(41,"input",83),t.TgZ(42,"ngx-material-timepicker",84,87),t.NdJ("timeSet",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.timesetSatEnd(n))}),t.qZA(),t.TgZ(44,"input",88),t.NdJ("click",function(){t.CHM(e);const n=t.MAs(43);return t.KtG(n.open())}),t.qZA(),t.YNc(45,pn,2,0,"mat-error",7),t.qZA()()(),t.TgZ(46,"div",3)(47,"span",89),t._uU(48,"Cut Off Time (Sun)"),t.qZA(),t.TgZ(49,"div",81)(50,"mat-form-field",82),t._UZ(51,"input",90),t.TgZ(52,"ngx-material-timepicker",91,92),t.NdJ("timeSet",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.timeSetSunStart(n))}),t.qZA(),t.TgZ(54,"input",93),t.NdJ("click",function(){t.CHM(e);const n=t.MAs(53);return t.KtG(n.open())}),t.qZA(),t.YNc(55,hn,2,0,"mat-error",7),t.qZA(),t.TgZ(56,"mat-form-field",82),t._UZ(57,"input",90),t.TgZ(58,"ngx-material-timepicker",91,94),t.NdJ("timeSet",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.timeSetSunEnd(n))}),t.qZA(),t.TgZ(60,"input",95),t.NdJ("click",function(){t.CHM(e);const n=t.MAs(59);return t.KtG(n.open())}),t.qZA(),t.YNc(61,mn,2,0,"mat-error",7),t.qZA()(),t._UZ(62,"ngx-material-timepicker",null,92)(64,"ngx-material-timepicker",null,94),t.qZA()()()(),t.TgZ(66,"div",96)(67,"div",97)(68,"mat-hint",98),t._uU(69,"Days are required"),t.qZA(),t.TgZ(70,"mat-checkbox",99),t.NdJ("ngModelChange",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.selectAllDays=n)})("change",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.toggleSelectAll())}),t._uU(71,"Select All"),t.qZA()(),t.TgZ(72,"mat-checkbox",100),t.NdJ("ngModelChange",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.days.sun=n)})("change",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.changeDays())}),t._uU(73," Sun "),t.qZA(),t.TgZ(74,"mat-checkbox",101),t.NdJ("ngModelChange",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.days.mon=n)})("change",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.changeDays())}),t._uU(75," Mon "),t.qZA(),t.TgZ(76,"mat-checkbox",102),t.NdJ("ngModelChange",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.days.tue=n)})("change",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.changeDays())}),t._uU(77," Tue "),t.qZA(),t.TgZ(78,"mat-checkbox",103),t.NdJ("ngModelChange",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.days.wed=n)})("change",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.changeDays())}),t._uU(79," Wed "),t.qZA(),t.TgZ(80,"mat-checkbox",104),t.NdJ("ngModelChange",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.days.thu=n)})("change",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.changeDays())}),t._uU(81," Thu "),t.qZA(),t.TgZ(82,"mat-checkbox",105),t.NdJ("ngModelChange",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.days.fri=n)})("change",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.changeDays())}),t._uU(83," Fri "),t.qZA(),t.TgZ(84,"mat-checkbox",106),t.NdJ("ngModelChange",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.days.sat=n)})("change",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.changeDays())}),t._uU(85," Sat "),t.qZA()(),t.TgZ(86,"div"),t.YNc(87,un,2,0,"mat-error",7),t.qZA()()()()}if(2&a){const e=t.MAs(37),i=t.MAs(43),n=t.MAs(53),r=t.MAs(59),o=t.oxw();let l,c,d,h,f,T,C,S,k,P,Z,R;t.xp6(13),t.Q6J("ngIf",null==(l=o.testDetailsForm.get("proccess_time"))||null==l.errors?null:l.errors.required),t.xp6(6),t.Q6J("ngIf",null==(c=o.testDetailsForm.get("approval_time"))||null==c.errors?null:c.errors.required),t.xp6(8),t.Q6J("ngForOf",o.tat_type),t.xp6(2),t.Q6J("ngIf",null==(d=o.testDetailsForm.get("tat_type"))||null==d.errors?null:d.errors.required),t.xp6(6),t.Q6J("ngxTimepicker",e)("format",12)("min","12:00 am")("max",null!==(h=null==(h=o.testDetailsForm.get("cut_off_mon_sat_end"))?null:h.value)&&void 0!==h?h:"11:59 pm"),t.xp6(1),t.Q6J("defaultTime",o.onlyTimeString),t.xp6(3),t.Q6J("ngIf",null==(f=o.testDetailsForm.get("cut_off_mon_sat_start"))||null==f.errors?null:f.errors.required),t.xp6(2),t.Q6J("ngxTimepicker",i)("format",12)("min",null!==(T=null==(T=o.testDetailsForm.get("cut_off_mon_sat_start"))?null:T.value)&&void 0!==T?T:"12:00 AM")("max","11:59 PM"),t.xp6(1),t.Q6J("defaultTime",o.onlyTimeString),t.xp6(3),t.Q6J("ngIf",null==(C=o.testDetailsForm.get("cut_off_mon_sat_end"))||null==C.errors?null:C.errors.required),t.xp6(2),t.Q6J("ngClass",null!=o.sun&&o.sun.value?"required":""),t.xp6(4),t.Q6J("disabled",null==o.sun?null:o.sun.value)("ngxTimepicker",n)("format",12)("min","12:00 AM")("max",null!==(S=null==(S=o.testDetailsForm.get("cut_off_sun_end"))?null:S.value)&&void 0!==S?S:"11:59 PM"),t.xp6(3),t.Q6J("disabled",!(null!=o.sun&&o.sun.value)),t.xp6(1),t.Q6J("ngIf",null==(k=o.testDetailsForm.get("cut_off_sun_start"))||null==k.errors?null:k.errors.required),t.xp6(2),t.Q6J("disabled",null==o.sun?null:o.sun.value)("ngxTimepicker",r)("format",12)("min",null!==(P=null==(P=o.testDetailsForm.get("cut_off_sun_start"))?null:P.value)&&void 0!==P?P:" 12:00 AM")("max","11:59 PM"),t.xp6(3),t.Q6J("disabled",!(null!=o.sun&&o.sun.value)),t.xp6(1),t.Q6J("ngIf",null==(Z=o.testDetailsForm.get("cut_off_sun_end"))||null==Z.errors?null:Z.errors.required),t.xp6(9),t.Q6J("ngModel",o.selectAllDays),t.xp6(2),t.Q6J("ngModel",o.days.sun),t.xp6(2),t.Q6J("ngModel",o.days.mon),t.xp6(2),t.Q6J("ngModel",o.days.tue),t.xp6(2),t.Q6J("ngModel",o.days.wed),t.xp6(2),t.Q6J("ngModel",o.days.thu),t.xp6(2),t.Q6J("ngModel",o.days.fri),t.xp6(2),t.Q6J("ngModel",o.days.sat),t.xp6(3),t.Q6J("ngIf",(null==(R=o.testDetailsForm.get("available_days"))?null:R.touched)&&(null==(R=o.testDetailsForm.get("available_days"))||null==R.errors?null:R.errors.required))}}function _n(a,s){if(1&a&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&a){const e=s.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.name," ")}}function fn(a,s){if(1&a&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&a){const e=s.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.name," ")}}function vn(a,s){1&a&&t._UZ(0,"div",3)}function Tn(a,s){if(1&a&&(t.ynx(0,132),t.TgZ(1,"mat-radio-group",133)(2,"mat-radio-button",134),t._uU(3,"Trip 1"),t.qZA(),t.TgZ(4,"mat-radio-button",134),t._uU(5,"Trip 2"),t.qZA()(),t.BQk()),2&a){const e=t.oxw().index;t.Q6J("formGroupName",e),t.xp6(2),t.Q6J("value",1),t.xp6(2),t.Q6J("value",2)}}function yn(a,s){if(1&a&&(t.TgZ(0,"div",130),t.YNc(1,Tn,6,3,"ng-container",131),t.qZA()),2&a){const e=s.$implicit,i=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf",e.value.packageId===i.id)}}function xn(a,s){if(1&a&&(t.TgZ(0,"div",3),t.YNc(1,yn,2,1,"div",129),t.qZA()),2&a){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",e.selectedTrip.controls)}}function Dn(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",122)(1,"div",123)(2,"div",124)(3,"div",125),t._UZ(4,"div",126),t._uU(5),t.qZA(),t.TgZ(6,"div",127),t._uU(7),t.qZA()()(),t.YNc(8,vn,1,0,"div",8),t.YNc(9,xn,2,1,"div",8),t.TgZ(10,"div",115)(11,"mat-icon",128),t.NdJ("click",function(){const r=t.CHM(e).index,o=t.oxw(2);return t.KtG(o.deleteTest(r))}),t.qZA()()()}if(2&a){const e=s.$implicit;t.xp6(5),t.hij(" ",e.name," "),t.xp6(2),t.hij(" ",e.type," "),t.xp6(1),t.Q6J("ngIf",!e.is_two_way_trip),t.xp6(1),t.Q6J("ngIf",e.is_two_way_trip)}}function Cn(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",107)(1,"h2"),t._uU(2,"Add test"),t.qZA(),t.TgZ(3,"div",1)(4,"div",67)(5,"div",108)(6,"label")(7,"h2"),t._uU(8,"Select Group/Tests"),t.qZA()(),t.TgZ(9,"mat-form-field",5),t._UZ(10,"input",109),t.TgZ(11,"mat-autocomplete",110,111),t.YNc(13,_n,2,2,"mat-option",11),t.ALo(14,"async"),t.qZA()(),t.TgZ(15,"div",112)(16,"button",113),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.addTest())}),t._uU(17," Add "),t.qZA()()()(),t._UZ(18,"div",114)(19,"div",115),t.TgZ(20,"div",67)(21,"div",108)(22,"label")(23,"h2"),t._uU(24,"Select Package"),t.qZA()(),t.TgZ(25,"mat-form-field",5),t._UZ(26,"input",116),t.TgZ(27,"mat-autocomplete",110,117),t.YNc(29,fn,2,2,"mat-option",11),t.ALo(30,"async"),t.qZA()(),t.TgZ(31,"div",112)(32,"button",113),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.addPackage())}),t._uU(33," Add "),t.qZA()()()()(),t.TgZ(34,"div",118,119),t.NdJ("cdkDropListDropped",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.drop(n))}),t.TgZ(36,"div",120),t.YNc(37,Dn,12,4,"div",121),t.qZA()()()}if(2&a){const e=t.MAs(12),i=t.MAs(28),n=t.oxw();t.xp6(10),t.Q6J("matAutocomplete",e),t.xp6(1),t.Q6J("displayWith",n.getOptionText),t.xp6(2),t.Q6J("ngForOf",t.lcZ(14,8,n.filteredOptionsTest$)),t.xp6(13),t.Q6J("matAutocomplete",i),t.xp6(1),t.Q6J("displayWith",n.getOptionText),t.xp6(2),t.Q6J("ngForOf",t.lcZ(30,10,n.filteredOptionsPackage$)),t.xp6(5),t.Q6J("cdkDropListData",n.addedTest),t.xp6(3),t.Q6J("ngForOf",n.addedTest)}}function bn(a,s){1&a&&(t.TgZ(0,"div",135),t._UZ(1,"mat-spinner"),t.qZA())}let ie=(()=>{class a{constructor(e,i,n,r,o,l,c,d,h,f){this.fb=e,this.matDialog=i,this.cdr=n,this.sharedService=r,this.testService=o,this.route=l,this.dialog=c,this.snackbar=d,this.router=h,this.snackBbar=f,this.addOnBlur=!0,this.separatorKeysCodes=[Xt.K5,Xt.OC],this.tags=[],this.departments=[],this.categories=[],this.gender=[{key:"Male",value:"male"},{key:"Female",value:"female"},{key:"Both",value:"other"}],this.testTypes=[{key:"Normal",value:"normal"},{key:"Critical",value:"critical"}],this.tat_type=[{key:"Minutes",value:"minutes"},{key:"Seconds",value:"seconds"},{key:"Days",value:"days"}],this.centers=[],this.consentForms=[],this.days={sun:!1,mon:!1,tue:!1,wed:!1,thu:!1,fri:!1,sat:!1},this.sampleTypes=[],this.selectedSamples=[],this.docs=[],this.selectedDocs=[],this.spinner=!1,this.destroyed$=new b.x,this.action="create",this.type=null,this.testDetails=null,this.twoWayTrip=[{key:"Yes",value:!0},{key:"No",value:!1}],this.testList=[],this.packageList=[],this.addedTest=[],this.test_units=[],this.selectAllDays=!1,this.tat_types=[{key:"Seconds",value:"seconds"},{key:"Minutes",value:"minutes"},{key:"Days",value:"days"}],this.keywords=[],this.payload={filter:{search:"",search_by:"name"}},this.minTime="11:40 am",this.maxTime="11:40 pm",this.format=24,this.name=""}get sun(){return this.testDetailsForm.get("sun")}get selectedTrip(){return this.testDetailsForm.get("selectedTrip")}get categoryOptions(){const e=this.testDetailsForm.get("category")?.value;if(e&&e.length>0){const n=e?.indexOf(0);-1!==n&&e.splice(n,1)}return this.categories.map(n=>{if(e.includes(n.id))return n.name}).filter(n=>!!n)}get centersOptions(){const e=this.testDetailsForm.get("centers")?.value;if(e&&e.length>0){const n=e?.indexOf(0);-1!==n&&e.splice(n,1)}return this.centers.map(n=>{if(e.includes(n.id))return n.name}).filter(n=>!!n)}ngOnInit(){this.getPath(),this.initForm(),"single"===this.type||"group"===this.type?(this.getDepartmentList(),this.getConsentFormList(),this.getProofTypeList()):"package"===this.type&&(this.setPackageFields(),this.getSingleTestList(),this.getGroupTestList(),this.getPackageTestList()),this.getReportUnitList(),this.getTestUnitList(),this.getCategoryList(),this.getCenterList(),this.getSampleTypeList(),this.listenCreate(),this.listenNext(),this.listenTestDetails(),this.listenProfileImage(),this.testDataForm()}getPath(){this.type=this.route.parent?.snapshot.paramMap.get("type")}initForm(){this.testDetailsForm=this.fb.group({image_url:[null],code:[null],name:["",[g.kI.required]],departments:[[],[g.kI.required]],tag:[""],category:[[],[g.kI.required]],report_duration:[null,[g.kI.required]],report_unit:[null,[g.kI.required]],gender:["",[g.kI.required]],test_type:["",[g.kI.required]],centers:[[],[g.kI.required]],short_name:[""],sample_quantity:["",[g.kI.required]],unit:[null,[g.kI.required]],consent_form:[""],price:["",[g.kI.required]],proccess_time:["",[g.kI.required]],approval_time:["",[g.kI.required]],tat_type:["",[g.kI.required]],cut_off_mon_sat:["",[g.kI.required]],cut_off_mon_sat_start:[null,[g.kI.required]],cut_off_mon_sat_end:[null,[g.kI.required]],cut_off_sun:[""],cut_off_sun_start:[null],cut_off_sun_end:[null],available_days:[[],[g.kI.required]],is_phlebo_entry:[!1],description:["",[g.kI.required,g.kI.maxLength(200)]],pre_requirement:["",[g.kI.maxLength(200)]],sample_type:[[],[g.kI.required]],required_documents:[[]],is_partial_payment:[!1],sun:[!1],mon:[!1],tue:[!1],wed:[!1],thu:[!1],fri:[!1],sat:[!1],selectAllDays:[!1]}),this.cutOffChanges(),this.retainFormValues(),this.formValueChanges(),this.nameChanges()}testDataForm(){let e=this.sharedService.gettestFormData();null!=e&&(this.testDetailsForm=e,this.tags=e.value?.tag&&""!==e.value?.tag?e.value?.tag:[],this.selectedSamples=e?.value?.sample_type)}retainFormValues(){const e=this.testService.getTestDetailsForm();if(e){this.testDetailsForm.patchValue(e.value),this.patchSelectedSamples(this.testDetailsForm.get("sample_type")?.value),this.patchRequiredDocs(this.testDetailsForm.get("required_documents")?.value),this.patchCutOff();const i={};this.testDetailsForm.get("available_days")?.value?.forEach(n=>{i[n.toLowerCase()]=!0}),this.testDetailsForm.patchValue(i),this.tags=this.testDetailsForm.get("tag")?.value??[],this.cdr.detectChanges()}}formValueChanges(){this.testDetailsForm.valueChanges.pipe((0,I.R)(this.destroyed$)).subscribe(()=>{this.testService.setTestDetailsForm(this.testDetailsForm),this.testService.onTestDetailsForm(this.testDetailsForm),this.sharedService.settestFormData(this.testDetailsForm)})}cutOffChanges(){const e={cut_off_mon_sat_start:null,cut_off_mon_sat_end:null,cut_off_sun_start:null,cut_off_sun_end:null},i=Object.keys(e);i.forEach(n=>{e[n]=this.testDetailsForm.get(n)}),i.forEach(n=>{e[n].valueChanges.subscribe(r=>{this.setCutOff(n,r)})})}setCutOff(e,i){const n={start:null,end:null},r=Object.keys(n),o=e.split("_"),l=o[o.length-1];let c="";o.forEach((h,f)=>{f<o.length-1&&(c=f===o.length-2?c+h:c+h+"_")}),r.forEach(h=>{n[h]=h===l?i:this.testDetailsForm.get(c+"_"+h)?.value});const d=`${n.start} - ${n.end}`;this.testDetailsForm.get(c)?.setValue(d)}setPackageFields(){this.testDetailsForm.addControl("is_two_way_trip",this.fb.control(!1)),this.testDetailsForm.addControl("two_way_trip_time",this.fb.control("")),this.testDetailsForm.addControl("testName",this.fb.control("")),this.testDetailsForm.addControl("packageName",this.fb.control("")),this.testDetailsForm.addControl("selectedTrip",this.fb.array([])),this.testDetailsForm.addControl("is_trip_two",this.fb.control([])),this.testDetailsForm.addControl("test_list",this.fb.control([])),this.testDetailsForm.get("proccess_time")?.clearValidators(),this.testDetailsForm.get("approval_time")?.clearValidators(),this.testDetailsForm.get("tat_type")?.clearValidators(),this.testDetailsForm.get("cut_off_mon_sat")?.clearValidators(),this.testDetailsForm.get("cut_off_mon_sat_start")?.clearValidators(),this.testDetailsForm.get("cut_off_mon_sat_end")?.clearValidators(),this.testDetailsForm.get("available_days")?.clearValidators(),this.testDetailsForm.get("consent_form")?.clearValidators(),this.testDetailsForm.get("departments")?.clearValidators(),this.testDetailsForm.get("sample_quantity")?.clearValidators(),this.testDetailsForm.get("unit")?.clearValidators(),this.testDetailsForm.get("short_name")?.clearValidators(),this.testDetailsForm.get("test_type")?.clearValidators(),this.testDetailsForm.get("sample_type")?.clearValidators(),this.testDetailsForm.updateValueAndValidity()}selectedTripGroup(e){return this.fb.group({packageId:[e],trip:[1]})}patchForm(){this.tags=this.testDetails.tag??[],this.testDetailsForm.patchValue(this.testDetails),this.testDetailsForm.patchValue(this.testDetails.tat);const e=this.testDetails.departments.map(({id:d})=>d),i=this.testDetails.centers.map(({id:d})=>d),n=this.testDetails.category.map(({id:d})=>d),r=this.testDetails.consent_form?.id,o=this.testDetails.unit?.id,l=this.testDetails.report_unit?.id;this.testDetailsForm.patchValue({departments:e[0],centers:i,category:n,consent_form:r,unit:o,report_unit:l,tag:null});const c={};this.testDetails.tat?.available_days?.forEach(d=>{c[d.toLowerCase()]=!0}),this.testDetailsForm.patchValue(c),this.testService.onProfileImg(this.testDetails.image_url),"package"===this.type?this.patchTestList():(this.patchSelectedSamples(),this.patchRequiredDocs(),this.patchCutOff()),this.cdr.detectChanges()}patchSelectedSamples(e){if(this.selectedSamples=[],e)e?.forEach(i=>{this.sampleTypes.forEach(n=>{i===n.id&&this.selectedSamples.push(n)})}),this.cdr.detectChanges();else{this.testDetails?.sample_type?.forEach(n=>{this.sampleTypes.forEach(r=>{n.id===r.id&&this.selectedSamples.push(r)})});const i=this.selectedSamples.map(n=>n.id);this.testDetailsForm.patchValue({sample_type:i})}}patchRequiredDocs(e){if(e)this.selectedDocs=[],e?.forEach(i=>{this.docs?.forEach(n=>{i===n.id&&this.selectedDocs.push(n)})}),this.cdr.detectChanges();else{this.selectedDocs=this.testDetails.required_documents;const i=this.selectedDocs.map(n=>n.id);this.testDetailsForm.patchValue({required_documents:i})}}patchCutOff(){const e=this.testDetailsForm.get("cut_off_mon_sat")?.value,i=this.testDetailsForm.get("cut_off_sun")?.value,n=e.split("-"),r=i.split("-"),o=n?.length>0?n[0]?.trim():"",l=n?.length>0?n[1]?.trim():"",c=r?.length>0?r[0]?.trim():"",d=r?.length>0?r[1]?.trim():"";this.testDetailsForm.patchValue({cut_off_mon_sat_start:o,cut_off_mon_sat_end:l,cut_off_sun_start:c,cut_off_sun_end:d})}patchTestList(){const e=this.testDetailsForm.get("test_list");this.addedTest=e?.value;const i=e?.value?.map(r=>r.id);e?.setValue(i),this.addedTest.length>0&&this.addedTest.forEach(r=>{r.is_two_way_trip&&this.setSelectedTrip(r.id)});const n=this.testDetailsForm.get("selectedTrip")?.value;this.testDetails.is_trip_two&&this.testDetails.is_trip_two.length>0&&(this.testDetails.is_trip_two.forEach(r=>{n&&n.length>0&&n.forEach(o=>{o.packageId===r&&(o.trip=2)})}),this.testDetailsForm.patchValue({selectedTrip:n}))}getDepartmentList(){this.spinner=!0,this.sharedService.getDepartmentList().subscribe({next:e=>{this.spinner=!1,this.departments=e.data.departments,this.cdr.detectChanges()},error:e=>{this.spinner=!1,this.cdr.detectChanges(),console.log(e)}})}getCategoryList(){this.spinner=!0,this.sharedService.getTestCategoryList().subscribe({next:e=>{this.spinner=!1,this.categories=e.data.test_categories,this.cdr.detectChanges()},error:e=>{this.spinner=!1,this.cdr.detectChanges(),console.log(e)}})}getCenterList(){this.spinner=!0,this.sharedService.getCenterList().subscribe({next:e=>{this.spinner=!1,this.centers=e.data.centers,this.cdr.detectChanges()},error:e=>{this.spinner=!1,this.cdr.detectChanges(),console.log(e)}})}getConsentFormList(){this.spinner=!0,this.sharedService.getConsentFormList().subscribe({next:e=>{this.spinner=!1,this.consentForms=e.data.consentform,this.cdr.detectChanges()},error:e=>{this.spinner=!1,this.cdr.detectChanges(),console.log(e)}})}getSampleTypeList(){this.spinner=!0,this.sharedService.getSampleTypeList().subscribe({next:e=>{this.spinner=!1,this.sampleTypes=e.data.Sample_types,this.testService.getTestDetailsForm()&&this.testDetailsForm.get("sample_type")?.value&&this.testDetailsForm.get("sample_type")?.value.length>0?this.patchSelectedSamples(this.testDetailsForm.get("sample_type")?.value):this.patchSelectedSamples(),this.cdr.detectChanges()},error:e=>{this.spinner=!1,this.cdr.detectChanges(),console.log(e)}})}getProofTypeList(){this.spinner=!0,this.sharedService.getProofTypeList().subscribe({next:e=>{this.spinner=!1,this.docs=e.data.proof_type,this.testService.getTestDetailsForm()&&this.patchRequiredDocs(this.testDetailsForm.get("required_documents")?.value),this.cdr.detectChanges()},error:e=>{this.spinner=!1,this.cdr.detectChanges(),console.log(e)}})}getReportUnitList(){this.spinner=!0,this.sharedService.getReportUnitList().subscribe({next:e=>{this.spinner=!1,this.reportUnits=e.data.report_units,this.cdr.detectChanges()},error:e=>{this.spinner=!1,this.cdr.detectChanges(),console.log(e)}})}getSingleTestList(){this.spinner=!0,this.testService.getTestList("single").subscribe({next:e=>{this.spinner=!1,this.testList.length?(this.testList=[...this.testList,...e.data.tests],this.getFilteredOptionsTest()):this.testList=e.data.tests,this.cdr.detectChanges()},error:e=>{this.spinner=!1,this.cdr.detectChanges(),console.log(e)}})}getPackageTestList(){this.spinner=!0,this.testService.getTestList("package").subscribe({next:e=>{this.spinner=!1,this.packageList=this.packageList.length?[...this.packageList,...e.data.tests]:e.data.tests,this.getFilteredOptionsPackage(),this.cdr.detectChanges()},error:e=>{this.spinner=!1,this.cdr.detectChanges(),console.log(e)}})}getGroupTestList(){this.spinner=!0,this.testService.getTestList("group").subscribe({next:e=>{this.spinner=!1,this.testList.length?(this.testList=[...this.testList,...e.data.tests],this.getFilteredOptionsTest()):this.testList=e.data.tests,this.cdr.detectChanges()},error:e=>{this.spinner=!1,this.cdr.detectChanges(),console.log(e)}})}toggleSelectAll(){Object.keys(this.days).forEach(i=>{this.days[i]=this.selectAllDays}),this.changeDays()}changeDays(){this.selectAllDays=!0;const e=[];Object.keys(this.days).forEach(n=>{this.days[n]?e.push(n.toUpperCase()):this.selectAllDays=!1}),this.testDetailsForm?.patchValue({available_days:e}),this.sun?.value?this.cdr.detectChanges():this.sun?.value||this.resetSunCutOff()}resetSunCutOff(){this.testDetailsForm.get("cut_off_sun")?.reset(),this.testDetailsForm.get("cut_off_sun_start")?.reset(),this.testDetailsForm.get("cut_off_sun_end")?.reset(),this.testDetailsForm.updateValueAndValidity(),this.cdr.detectChanges()}addSample(){this.openAddDialog({title:"Sample Types",type:"sample_type",value:this.sampleTypes,selected:this.selectedSamples,form:this.testDetailsForm})}addDocs(){this.openAddDialog({title:"Add Needed Input",type:"required_documents",value:this.docs,selected:this.selectedDocs,form:this.testDetailsForm})}openAddDialog(e){this.matDialog.open(ai,{data:e}).afterClosed().subscribe(n=>{n&&("sample_type"===n.type?this.selectedSamples=n.selected:"required_documents"===n.type&&(this.selectedDocs=n.selected),this.cdr.detectChanges())})}deleteDocs(e){const i=this.testDetailsForm.get("required_documents")?.value;i.splice(e,1),this.testDetailsForm.patchValue({required_documents:i}),this.selectedDocs.splice(e,1),this.cdr.detectChanges()}listenCreate(){this.testService.listenCreate().pipe((0,I.R)(this.destroyed$)).subscribe(e=>{if(e){const i=this.testDetailsForm.get("image_url");i?.value&&"object"==typeof i?.value?this.uploadImage(e,i):this.save(e),this.testService.onCreate(null)}})}listenNext(){this.testService.listenNext().pipe((0,I.R)(this.destroyed$)).subscribe(e=>{e&&(this.testDetailsForm.markAllAsTouched(),this.cdr.detectChanges(),this.testService.onNext(!1))})}save(e){this.testDetailsForm.markAllAsTouched(),this.cdr.detectChanges(),this.testDetailsForm.valid&&(this.testDetailsForm.get("sample_type")?.value.length>0&&"package"!==e||"package"===e)&&(this.spinner=!0,"create"===this.action?this.createTest(e):"edit"===this.action&&("single"===e||"package"===e)&&this.updateTest(e))}listenTestDetails(){this.testService.listenTestDetails().pipe((0,I.R)(this.destroyed$)).subscribe(e=>{e&&(this.action="edit",this.testDetails=e,this.patchForm())})}listenProfileImage(){this.testService.listenProfileImg().pipe((0,I.R)(this.destroyed$)).subscribe(e=>{e&&(this.testDetailsForm.patchValue({image_url:e}),this.testService.onProfileImg(null))})}uploadImage(e,i){const n=new FormData;n.append("file",i.value),n.append("upload_type","profile"),this.sharedService.uploadImage(n).subscribe({next:r=>{const o=r?.data?.uploadedFilePath;i.setValue(o),this.save(e)},error:r=>{this.spinner=!1,this.cdr.detectChanges()}})}setTrip2(){const e=[],i=this.testDetailsForm.get("selectedTrip")?.value;return!!i&&i.length>0&&i.forEach(n=>{2===n.trip&&e.push(n.packageId)}),e}createTest(e){const i=this.testDetailsForm.value;!!i.price&&""!==i.price&&(i.price=i.price.toString()),i.two_way_trip_time=i.two_way_trip_time?.toString(),i.map_to_role=[],i.map_to_department=[],i.sample_quantity=Number(i.sample_quantity),i.departments=i.departments?[i.departments]:[];let n=i.category.indexOf(0);-1!==n&&i.category.splice(n,1);let r=i.centers.indexOf(0);-1!==r&&i.centers.splice(r,1),"package"===e&&(i.test_type="normal",i.is_trip_two=this.setTrip2(),i.code=i.code?.toString()),this.spinner=!0,this.cdr.detectChanges(),this.testService.createTest(e,i).subscribe({next:o=>{this.spinner=!1,this.cdr.detectChanges(),this.snackBbar.open(o.message,"close"),this.router.navigate(["./../../"],{relativeTo:this.route})},error:o=>{this.spinner=!1,this.cdr.detectChanges(),this.snackBbar.open(o&&0!==o.status?"object"==typeof o.error.message?o.error.message[0]:o.error.message:"Something went wrong","close")}})}updateTest(e){const i=this.testDetailsForm.value;!!i.price&&""!==i.price&&(i.price="string"==typeof i.price?parseInt(i.price).toString():i.price.toString()),i.two_way_trip_time=i.two_way_trip_time?.toString(),i.map_to_role=[],i.map_to_department=[],i.proccess_time="string"==typeof i.proccess_time?parseInt(i.proccess_time):i.proccess_time,i.approval_time="string"==typeof i.approval_time?parseInt(i.approval_time):i.approval_time,i.sun=void 0,i.mon=void 0,i.tue=void 0,i.wed=void 0,i.thu=void 0,i.fri=void 0,i.sat=void 0,i.departments=i.departments?[i.departments]:[],i.sample_quantity=Number(i.sample_quantity);let n=i.category.indexOf(0);-1!==n&&i.category.splice(n,1);let r=i.centers.indexOf(0);-1!==r&&i.centers.splice(r,1),"package"===e&&(i.test_type="normal",i.is_trip_two=this.setTrip2(),i.code=i.code.toString()),this.spinner=!0,this.cdr.detectChanges(),this.testService.updateTest(e,this.testDetails.id,i).subscribe({next:o=>{this.spinner=!1,this.cdr.detectChanges(),this.snackBbar.open(o.message,"close"),this.router.navigate(["./../../../"],{relativeTo:this.route})},error:o=>{this.spinner=!1,this.cdr.detectChanges(),console.log(o),this.snackBbar.open(o&&0!==o.status?"object"==typeof o.error.message?o.error.message[0]:o.error.message:"Something went wrong","close")}})}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete(),"group"===this.type&&(this.testService.onTestDetailsForm(this.testDetailsForm),"edit"===this.action&&this.testService.onTestDetails(this.testDetails))}toTitleCase(e){return e.replace(/\w\S*/g,function(i){return i.charAt(0).toUpperCase()+i.substring(1).toLowerCase()})}getOptionText(e){return e?.name}getFilteredOptionsTest(){this.filteredOptionsTest$=this.testDetailsForm.get("testName")?.valueChanges.pipe((0,N.O)(""),(0,j.U)(e=>this._filterTest(e||"")))}getFilteredOptionsPackage(){this.filteredOptionsPackage$=this.testDetailsForm.get("packageName")?.valueChanges.pipe((0,N.O)(""),(0,j.U)(e=>this._filterPackage(e||"")))}_filterTest(e){"string"!=typeof e&&(e="");const i=e.toLowerCase();return this.testList.filter(r=>r.name?.toLowerCase().includes(i))}_filterPackage(e){"string"!=typeof e&&(e="");const i=e.toLowerCase();return this.packageList.filter(r=>r.name?.toLowerCase().includes(i))}addTest(){const e=this.testDetailsForm.get("testName")?.value;if(e&&"object"==typeof e){this.sampleTypes?.forEach(n=>{n.id===e.sample_type&&(e.type=n?.name)}),this.addedTest.push(e);const i=this.addedTest.map(n=>n.id);this.testDetailsForm.patchValue({testName:"",test_list:i}),this.cdr.detectChanges()}}deleteTest(e){this.confirmConsDialog=this.dialog.open(gt.$,{width:"40%",height:"auto",disableClose:!1,data:{message:"Are you sure want to Delete?",buttonText:{ok:"Delete",cancel:"Cancel"}}}),this.confirmConsDialog.afterClosed().subscribe(i=>{if(i){const n=this.addedTest.splice(e,1);n[0].is_two_way_trip&&this.removeSelectedTrip(n[0].id),this.cdr.detectChanges()}})}addPackage(){const e=this.testDetailsForm.get("packageName")?.value;if(e&&"object"==typeof e){this.addedTest.push(e);const i=this.addedTest.map(n=>n.id);this.testDetailsForm.patchValue({packageName:"",test_list:i}),e.is_two_way_trip&&this.setSelectedTrip(e.id),this.cdr.detectChanges()}}setSelectedTrip(e){this.testDetailsForm.get("selectedTrip").push(this.selectedTripGroup(e))}removeSelectedTrip(e){const i=this.testDetailsForm.get("selectedTrip"),n=i.value.findIndex(r=>r.packageId===e);i.removeAt(n)}drop(e){e.previousContainer===e.container?pt(e.container.data,e.previousIndex,e.currentIndex):function Te(a,s,e,i){var n=G(e,a.length-1),r=G(i,s.length);a.length&&s.splice(r,0,a.splice(n,1)[0])}(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex)}getTestUnitList(){this.spinner=!0,this.sharedService.getTestUnitList().subscribe({next:e=>{this.spinner=!1,this.cdr.detectChanges(),this.test_units=e.data.test_units},error:e=>{this.spinner=!1,this.cdr.detectChanges(),console.log(e)}})}restrictDecimal(e){46===e.keyCode&&e.preventDefault()}addChip(e){this.chipListWrapper=this.chipElement._elementRef.nativeElement.children[0];const i=(e.value||"").trim();i&&(this.tags.push(i),this.testDetailsForm.patchValue({tag:this.tags})),e.chipInput.clear()}removeChip(e){this.chipListWrapper=this.chipElement._elementRef.nativeElement.children[0];const i=this.tags.indexOf(e);i>=0&&(this.tags.splice(i,1),this.testDetailsForm.patchValue({tag:this.tags}))}nameChanges(){this.testDetailsForm.get("name")?.valueChanges.pipe((0,V.b)(500),(0,I.R)(this.destroyed$),(0,E.w)(e=>(""!==e?this.payload.filter.search=e:this.payload.filter={},this.searchList()))).subscribe(e=>{this.spinner=!1,this.cdr.detectChanges(),this.validateTest(e.data.results)})}searchList(){return this.spinner=!0,this.cdr?.markForCheck(),this.testService.searchTest(this.type,10,1,this.payload)}validateTest(e){let i=!1;if(e&&e.length>0){const r=this.testDetailsForm.get("name")?.value;e.forEach(o=>{("create"===this.action&&o.name===r||"edit"===this.action&&o.name===r&&o.name!==this.testDetails.name)&&(i=!0)})}const n=this.testDetailsForm.get("name");i?n?.setErrors({duplicate:i}):delete n?.errors?.duplicate,this.testDetailsForm.updateValueAndValidity()}tosslePerOne(e){switch(e){case"category":return this.allSelectedCategory.selected?(this.allSelectedCategory.deselect(),!1):(this.testDetailsForm.get("category")?.value.length==this.categories.length&&this.allSelectedCategory.select(),!0);case"centers":return this.allSelectedCenters.selected?(this.allSelectedCenters.deselect(),!1):(this.testDetailsForm.get("centers")?.value.length==this.centers.length&&this.allSelectedCenters.select(),!0);default:return!0}}toggleAllSelection(e){switch(e){case"category":this.allSelectedCategory.selected?this.testDetailsForm.get("category")?.patchValue([...this.categories.map(i=>i.id),0]):this.testDetailsForm.get("category")?.patchValue([]);break;case"centers":this.allSelectedCenters.selected?this.testDetailsForm.get("centers")?.patchValue([...this.centers.map(i=>i.id),0]):this.testDetailsForm.get("centers")?.patchValue([])}}check(){console.log(this.testDetailsForm.controls.cut_off_mon_sat_start.value)}timeSetMonStart(e){this.testDetailsForm.patchValue({cut_off_mon_sat_start:e.replace(/\u202f/g," ")})}timesetSatEnd(e){this.testDetailsForm.patchValue({cut_off_mon_sat_end:e.replace(/\u202f/g," ")})}timeSetSunStart(e){this.testDetailsForm.patchValue({cut_off_sun_start:e.replace(/\u202f/g," ")})}timeSetSunEnd(e){this.testDetailsForm.patchValue({cut_off_sun_end:e.replace(/\u202f/g," ")})}checkOverflow(e){return e?.offsetHeight<e?.scrollHeight||e?.offsetWidth<e?.scrollWidth}scrollChipLeft(){this.chipListWrapper.scrollTo({left:0,behavior:"smooth"})}scrollChipRight(){this.chipListWrapper.scrollTo({left:this.chipListWrapper.scrollWidth,behavior:"smooth"})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(g.qu),t.Y36(q.uw),t.Y36(t.sBO),t.Y36(tt.F),t.Y36(H),t.Y36(A.gz),t.Y36(q.uw),t.Y36(Tt.ux),t.Y36(A.F0),t.Y36(ft.c))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-test-details"]],viewQuery:function(e,i){if(1&e&&(t.Gf(oi,5),t.Gf(li,5),t.Gf(ci,5)),2&e){let n;t.iGM(n=t.CRH())&&(i.allSelectedCategory=n.first),t.iGM(n=t.CRH())&&(i.allSelectedCenters=n.first),t.iGM(n=t.CRH())&&(i.chipElement=n.first)}},decls:98,vars:36,consts:[[1,"test-details-container",3,"formGroup"],[1,"row"],[1,"col-lg-7","test-left-container"],[1,"col-lg-4"],[1,"primary","required"],["appearance","outline",1,"input-mat-all"],["formControlName","name","matInput","",3,"placeholder"],[4,"ngIf"],["class","col-lg-4",4,"ngIf"],["appearance","outline",1,"dropdown-mat-all"],["formControlName","gender","placeholder","Gender"],[3,"value",4,"ngFor","ngForOf"],["svgIcon","appDownArrow","matSuffix",""],[1,"col-lg-8"],[1,"primary"],["class","left-icon","matPrefix","",3,"click",4,"ngIf"],["aria-label","tag selection"],["chipList","","chipElement",""],[3,"removed",4,"ngFor","ngForOf"],["matInput","","placeholder","New Tag...","autocomplete","off",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["class","right-icon","matSuffix","",3,"click",4,"ngIf"],[1,"col-lg-6","col-md-6"],["type","number","formControlName","report_duration","matInput","","placeholder","Report Timing"],["formControlName","report_unit","placeholder","Unit"],["formControlName","centers","placeholder","Center Name","multiple",""],[3,"value","click"],["allSelectedCenters",""],[3,"value","click",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],[1,"col-lg-5","test-right-container"],[1,"col-lg-12"],["appearance","outline",1,"input-mat-all","text-area"],["rows","3","formControlName","description","maxlength","200","matInput",""],["rows","3","formControlName","pre_requirement","maxlength","200","matInput",""],[1,"row","tat-bottom"],["class","row col-md-12 col-lg-10",4,"ngIf"],["class","add-test",4,"ngIf"],["class","spinner",4,"ngIf"],["formControlName","departments","placeholder","Department"],[3,"value"],["formControlName","category","placeholder","Category","multiple",""],["allSelectedCategory",""],["matPrefix","",1,"left-icon",3,"click"],[3,"removed"],["matChipRemove",""],["matSuffix","",1,"right-icon",3,"click"],["formControlName","is_two_way_trip","placeholder","Two Way Trip"],["appearance","outline",1,"input-mat-all","mat-time"],["type","number","formControlName","two_way_trip_time","matInput",""],["matSuffix",""],["formControlName","test_type","placeholder","Test Type"],["formControlName","price","matInput","","placeholder","Price","appNumbersOnly","",3,"length","keypress"],["matPrefix",""],["formControlName","short_name","matInput","","placeholder","Short Name","maxlength","10"],[1,"col-lg-6"],["formControlName","sample_quantity","matInput","","placeholder","Quantity","appNumbersOnly",""],["formControlName","unit","placeholder","Unit"],[1,"pull-right",3,"routerLink","queryParams"],["formControlName","consent_form","placeholder","Consent Form"],[4,"ngIf","ngIfElse"],["addNew",""],["class","row sample",4,"ngFor","ngForOf"],[1,"row","sample"],["matInput","","placeholder","Sample Type","readonly","true",3,"value"],[1,"col-lg-3"],[1,"sample-container","primary"],["class","col-lg-5",4,"ngIf"],[1,"col-lg-5"],[3,"click"],[1,"required",3,"click"],["class","sample-err",4,"ngIf"],[1,"sample-err"],[1,"add-btn","mb-20",3,"click"],["class","required-docs",4,"ngFor","ngForOf"],[1,"required-docs"],[1,"primary",3,"click"],[1,"row","col-md-12","col-lg-10"],[1,"tat-time"],["type","number","formControlName","proccess_time","matInput","","placeholder","0","autocomplete","off"],["type","number","formControlName","approval_time","matInput","","placeholder","0","autocomplete","off"],["formControlName","tat_type","placeholder","Test Type"],[1,"cut-off"],["appearance","outline",1,"input-mat-all","wd-45"],["hidden","",3,"ngxTimepicker","format","min","max"],[3,"defaultTime","timeSet"],["cutOffStart",""],["formControlName","cut_off_mon_sat_start","matInput","","placeholder","Start","readonly","","autocomplete","off",3,"click"],["cutOffEnd",""],["formControlName","cut_off_mon_sat_end","matInput","","placeholder","End","readonly","","autocomplete","off",3,"click"],[1,"primary",3,"ngClass"],["hidden","",3,"disabled","ngxTimepicker","format","min","max"],[3,"timeSet"],["cutOffTimeStart",""],["formControlName","cut_off_sun_start","matInput","","placeholder","Start","readonly","","autocomplete","off",3,"disabled","click"],["cutOffTimeEnd",""],["formControlName","cut_off_sun_end","matInput","","placeholder","End","readonly","","autocomplete","off",3,"disabled","click"],[1,"days"],[1,"text-left","days-hint"],[1,"required"],["formControlName","selectAllDays",1,"primary","select-all",3,"ngModel","ngModelChange","change"],["formControlName","sun",1,"primary",3,"ngModel","ngModelChange","change"],["formControlName","mon",1,"primary",3,"ngModel","ngModelChange","change"],["formControlName","tue",1,"primary",3,"ngModel","ngModelChange","change"],["formControlName","wed",1,"primary",3,"ngModel","ngModelChange","change"],["formControlName","thu",1,"primary",3,"ngModel","ngModelChange","change"],["formControlName","fri",1,"primary",3,"ngModel","ngModelChange","change"],["formControlName","sat",1,"primary",3,"ngModel","ngModelChange","change"],[1,"add-test"],[1,"search"],["matInput","","placeholder","Test Name","formControlName","testName",3,"matAutocomplete"],["autoActiveFirstOption","",3,"displayWith"],["auto","matAutocomplete"],[1,"action"],["mat-btn","",1,"mat-button","button-mat-all",3,"click"],[1,"col-lg-1","border-right"],[1,"col-lg-1"],["matInput","","placeholder","Package Name","formControlName","packageName",3,"matAutocomplete"],["autoPackage","matAutocomplete"],["cdkDropList","",1,"row","mt-10",3,"cdkDropListData","cdkDropListDropped"],["addedTestList","cdkDropList"],[1,"col-lg-9"],["class","row added-test","cdkDrag","",4,"ngFor","ngForOf"],["cdkDrag","",1,"row","added-test"],[1,"col-lg-7"],[1,"row","added-test"],[1,"col-lg-6","test-name"],[1,"drag"],[1,"col-lg-6","primary"],["svgIcon","appDelete",3,"click"],["formArrayName","selectedTrip",4,"ngFor","ngForOf"],["formArrayName","selectedTrip"],[3,"formGroupName",4,"ngIf"],[3,"formGroupName"],["aria-label","Select an option","formControlName","trip",1,"row"],[1,"primary","col-lg-6","col-md-6",3,"value"],[1,"spinner"]],template:function(e,i){if(1&e&&(t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",1)(4,"div",3)(5,"span",4),t._uU(6),t.qZA(),t.TgZ(7,"mat-form-field",5),t._UZ(8,"input",6),t.YNc(9,di,2,1,"mat-error",7),t.YNc(10,pi,2,1,"mat-error",7),t.qZA()(),t.YNc(11,ui,8,2,"div",8),t.YNc(12,fi,13,4,"div",8),t.TgZ(13,"div",3)(14,"span",4),t._uU(15,"Gender"),t.qZA(),t.TgZ(16,"mat-form-field",9)(17,"mat-select",10),t.YNc(18,vi,2,2,"mat-option",11),t.qZA(),t._UZ(19,"mat-icon",12),t.YNc(20,Ti,2,0,"mat-error",7),t.qZA()()(),t.TgZ(21,"div",1)(22,"div",13)(23,"span",14),t._uU(24,"Tags"),t.qZA(),t.TgZ(25,"mat-form-field",5),t.YNc(26,yi,2,0,"mat-icon",15),t.TgZ(27,"mat-chip-list",16,17),t.YNc(30,xi,5,1,"mat-chip",18),t.TgZ(31,"input",19),t.NdJ("matChipInputTokenEnd",function(r){return i.addChip(r)}),t.qZA()(),t.YNc(32,Di,2,0,"mat-icon",20),t.qZA()(),t.YNc(33,Zi,13,4,"div",8),t.YNc(34,Si,17,2,"div",8),t.qZA(),t.TgZ(35,"div",1)(36,"div",3)(37,"div",1)(38,"div",21)(39,"span",4),t._uU(40,"Report Timing"),t.qZA(),t.TgZ(41,"mat-form-field",5),t._UZ(42,"input",22),t.YNc(43,Ai,2,0,"mat-error",7),t.qZA()(),t.TgZ(44,"div",21)(45,"span",4),t._uU(46,"Report Unit"),t.qZA(),t.TgZ(47,"mat-form-field",9)(48,"mat-select",23),t.YNc(49,Pi,2,2,"mat-option",11),t.qZA(),t._UZ(50,"mat-icon",12),t.YNc(51,Ii,2,0,"mat-error",7),t.qZA()()()(),t.YNc(52,qi,8,2,"div",8),t.TgZ(53,"div",3)(54,"span",4),t._uU(55,"Center Name"),t.qZA(),t.TgZ(56,"mat-form-field",9)(57,"mat-select",24)(58,"mat-select-trigger"),t._uU(59),t.qZA(),t.TgZ(60,"mat-option",25,26),t.NdJ("click",function(){return i.toggleAllSelection("centers")}),t._uU(62,"Select All"),t.qZA(),t.YNc(63,Ri,2,2,"mat-option",27),t.qZA(),t._UZ(64,"mat-icon",12),t.YNc(65,Mi,2,0,"mat-error",7),t.qZA()(),t.YNc(66,Ei,8,2,"div",8),t.qZA(),t._UZ(67,"div",1),t.YNc(68,Hi,29,9,"div",28),t.YNc(69,Vi,9,2,"div",28),t.qZA(),t.TgZ(70,"div",29)(71,"div",1)(72,"div",30)(73,"span",4),t._uU(74,"Description"),t.qZA(),t.TgZ(75,"mat-form-field",31)(76,"textarea",32),t._uU(77,"            "),t.qZA(),t.TgZ(78,"mat-hint"),t._uU(79,"Maximum allowed characters 200"),t.qZA(),t.YNc(80,$i,2,0,"mat-error",7),t.YNc(81,ji,2,0,"mat-error",7),t.qZA()()(),t.TgZ(82,"div",1)(83,"div",30)(84,"span",14),t._uU(85,"Pre Requirements"),t.qZA(),t.TgZ(86,"mat-form-field",31)(87,"textarea",33),t._uU(88,"            "),t.qZA(),t.TgZ(89,"mat-hint"),t._uU(90,"Maximum allowed characters 200"),t.qZA(),t.YNc(91,zi,2,0,"mat-error",7),t.qZA()()(),t.YNc(92,nn,4,2,"ng-container",7),t.YNc(93,sn,5,1,"div",28),t.qZA(),t.TgZ(94,"div",34),t.YNc(95,gn,88,40,"div",35),t.qZA()(),t.YNc(96,Cn,38,12,"div",36),t.qZA(),t.YNc(97,bn,2,0,"div",37)),2&e){const n=t.MAs(28);let r,o,l,c,d,h,f,T,C;t.Q6J("formGroup",i.testDetailsForm),t.xp6(6),t.hij("","single"===i.type?"Test":i.toTitleCase(i.type)," Name"),t.xp6(2),t.Q6J("placeholder",("single"===i.type?"Test":i.toTitleCase(i.type))+" Name"),t.xp6(1),t.Q6J("ngIf",null==(r=i.testDetailsForm.get("name"))||null==r.errors?null:r.errors.required),t.xp6(1),t.Q6J("ngIf",null==(o=i.testDetailsForm.get("name"))||null==o.errors?null:o.errors.duplicate),t.xp6(1),t.Q6J("ngIf","single"===i.type||"group"===i.type),t.xp6(1),t.Q6J("ngIf","package"===i.type),t.xp6(6),t.Q6J("ngForOf",i.gender),t.xp6(2),t.Q6J("ngIf",null==(l=i.testDetailsForm.get("gender"))||null==l.errors?null:l.errors.required),t.xp6(6),t.Q6J("ngIf",i.checkOverflow(i.chipListWrapper)),t.xp6(4),t.Q6J("ngForOf",i.tags),t.xp6(1),t.Q6J("matChipInputFor",n)("matChipInputSeparatorKeyCodes",i.separatorKeysCodes)("matChipInputAddOnBlur",i.addOnBlur),t.xp6(1),t.Q6J("ngIf",i.checkOverflow(i.chipListWrapper)),t.xp6(1),t.Q6J("ngIf","single"===i.type||"group"===i.type),t.xp6(1),t.Q6J("ngIf","package"===i.type),t.xp6(9),t.Q6J("ngIf",null==(c=i.testDetailsForm.get("report_duration"))||null==c.errors?null:c.errors.required),t.xp6(6),t.Q6J("ngForOf",i.reportUnits),t.xp6(2),t.Q6J("ngIf",null==(d=i.testDetailsForm.get("report_unit"))||null==d.errors?null:d.errors.required),t.xp6(1),t.Q6J("ngIf","single"===i.type||"group"===i.type),t.xp6(7),t.Oqu(i.centersOptions),t.xp6(1),t.Q6J("value",0),t.xp6(3),t.Q6J("ngForOf",i.centers),t.xp6(2),t.Q6J("ngIf",null==(h=i.testDetailsForm.get("centers"))||null==h.errors?null:h.errors.required),t.xp6(1),t.Q6J("ngIf","package"===i.type),t.xp6(2),t.Q6J("ngIf","single"===i.type||"group"===i.type),t.xp6(1),t.Q6J("ngIf","single"===i.type||"group"===i.type),t.xp6(11),t.Q6J("ngIf",null==(f=i.testDetailsForm.get("description"))||null==f.errors?null:f.errors.required),t.xp6(1),t.Q6J("ngIf",null==(T=i.testDetailsForm.get("description"))||null==T.errors?null:T.errors.maxlength),t.xp6(10),t.Q6J("ngIf",null==(C=i.testDetailsForm.get("pre_requirement"))||null==C.errors?null:C.errors.maxlength),t.xp6(1),t.Q6J("ngIf","single"===i.type||"group"===i.type),t.xp6(1),t.Q6J("ngIf","single"===i.type||"group"===i.type),t.xp6(2),t.Q6J("ngIf","single"===i.type||"group"===i.type),t.xp6(1),t.Q6J("ngIf","package"===i.type),t.xp6(1),t.Q6J("ngIf",i.spinner)}},dependencies:[y.mk,y.sg,y.O5,A.yS,B.Hw,g._Y,g.Fj,g.wV,g.JJ,g.JL,g.nD,g.sg,g.u,g.x0,g.CE,et.XC,et.ZL,_t.ey,F.TO,F.KE,F.bx,F.qo,F.R9,it.Nt,yt.gD,yt.$L,si.oO,vt.oG,te.VQ,te.U0,ee.ro,ee.I2,nt.Ou,$.qn,$.HS,$.oH,$.qH,ri.X,Vt,$t,y.Ov,y.rS],styles:[".test-details-container{background:#f4f4f4;box-shadow:0 4px 23px 1px #0000002e;border-radius:3px;width:100%;padding:30px;position:relative}  .test-details-container .example-chip-list{width:100%}  .test-details-container .mat-chip-list-wrapper{margin:-5px}  .test-details-container .mat-chip-list-wrapper .mat-standard-chip{margin-top:-3px;margin-left:2px}  .test-details-container .mat-form-field{width:100%}  .test-details-container .mat-form-field-flex{height:3em}  .test-details-container .text-area .mat-form-field-flex{height:auto;height:initial}  .test-details-container .text-area textarea{resize:none}  .test-details-container .mat-form-field-appearance-outline .mat-form-field-infix{padding:.3em}  .test-details-container .mat-icon{width:.7em}  .test-details-container .mat-checkbox-ripple .mat-ripple-element,   .test-details-container .mat-checkbox-checked.mat-accent .mat-checkbox-background{background-color:#043752!important}  .test-details-container .mat-radio-ripple .mat-ripple-element,   .test-details-container .mat-radio-button.mat-accent .mat-radio-inner-circle{background-color:#043752!important}  .test-details-container .mat-radio-button.mat-accent.mat-radio-checked .mat-radio-outer-circle{border-color:#043752!important}  .test-details-container .mat-checkbox-frame{border:none}  .test-details-container .mat-checkbox:not(.select-all) .mat-checkbox-inner-container{width:28px!important;height:28px!important;background-color:#c4ced4}  .test-details-container .mat-checkbox:not(.select-all) .mat-checkbox-label{height:28px;display:flex;flex-direction:row;align-items:center}  .test-details-container .test-left-container{padding-right:30px}  .test-details-container .test-right-container{padding-left:30px;padding-bottom:20px}  .test-details-container .test-right-container .addneededinput{padding-right:2rem}  .test-details-container .mat-time .mat-form-field-suffix{top:0;color:#0000006b}  .test-details-container .tat-time{width:100%;background:#c4ced4;box-shadow:0 4px 23px 1px #0000002e;border-radius:3px;margin-top:5px;padding:15px;text-align:center}  .test-details-container .tat-time .row{margin-top:10px}  .test-details-container .tat-time .row .mat-form-field{margin-top:10px}  .test-details-container .tat-time .row .mat-form-field input{text-align:center}  .test-details-container .tat-time .row .mat-form-field-appearance-outline:not(.mat-form-field-invalid) .mat-form-field-outline{color:#04375240!important}  .test-details-container .tat-time .row .wd-45{width:45%}  .test-details-container .tat-time .row .wd-70{width:60%}  .test-details-container .tat-time .days{position:relative;margin-top:40px;display:flex;flex-direction:row;justify-content:space-between}  .test-details-container .tat-time .days mat-checkbox{margin-bottom:1rem}  .test-details-container .tat-time .days .mat-checkbox-inner-container{background-color:#e6ebee!important}  .test-details-container .tat-time .days .mat-checkbox-label{margin-left:10px}  .test-details-container .tat-time .days .days-hint{position:absolute;top:-35px;left:0}  .test-details-container .tat-time .days .days-hint .mat-hint{font-size:13px}  .test-details-container .tat-time .days .days-hint .select-all{margin-left:20px;font-size:13px!important}  .test-details-container .phlebo-result{position:absolute;right:15px;top:-15px}  .test-details-container .single-price{height:60px;display:flex;flex-direction:row;align-items:flex-end}  .test-details-container .sample{position:relative}  .test-details-container .sample-container{height:4em;display:flex;flex-direction:row;align-items:center;font-size:12px}  .test-details-container .sample a{color:var(--primary-color-500)!important;font-weight:600!important;text-decoration:underline!important;height:5em;display:flex;flex-direction:row;align-items:center;cursor:pointer}  .test-details-container .sample .sample-err{position:absolute;bottom:5px;left:25px}  .test-details-container .partial-payment{position:absolute;justify-content:end;bottom:60px;right:50px;padding-left:2rem}  .test-details-container .required-docs{width:200px;display:flex;flex-direction:row;justify-content:space-between;align-items:center;margin-top:10px}  .test-details-container .required-docs .mat-icon{cursor:pointer;width:auto}  .test-details-container .add-test{width:100%;background:#f4f4f4;box-shadow:0 4px 23px 1px #0000002e;border-radius:3px;margin:0!important;padding:20px}  .test-details-container .add-test .search{display:flex;flex-direction:row;justify-content:space-between}  .test-details-container .add-test .search label,   .test-details-container .add-test .search .action{height:45px;display:flex;flex-direction:row;align-items:center}  .test-details-container .add-test .search label h2,   .test-details-container .add-test .search .action h2{margin:0}  .test-details-container .add-test .search .action{width:25%}  .test-details-container .add-test .search .action .mat-button{height:35px;border-radius:3px!important;padding:0!important;width:100%}  .test-details-container .add-test .search .mat-form-field{width:40%!important}  .test-details-container .add-test .border-right{top:-10px;height:70px;border-right:1px solid rgba(4,55,82,.5)}  .test-details-container .add-test .added-test{height:60px;display:flex;flex-direction:row;align-items:center}  .test-details-container .add-test .added-test .test-name{display:flex;flex-direction:row;align-items:center}  .test-details-container .add-test .added-test .test-name .drag{width:28px!important;height:28px;margin-right:10px;background-color:#c4ced4;cursor:move}  .test-details-container .add-test .added-test .mat-icon{cursor:pointer!important;width:24px!important;height:24px!important}  .test-details-container .mt-10{margin-top:10px}  .test-details-container .cut-off{display:flex;flex-direction:row;justify-content:space-between;align-items:center}  .test-details-container .cut-off input{white-space:nowrap;overflow:hidden;text-overflow:initial!important}  .test-details-container .cut-off .mat-form-field-flex{padding:0 .25em}  .test-details-container .mat-chip-list-wrapper{flex-wrap:initial;height:33px;overflow-y:hidden;overflow-x:scroll}  .test-details-container .mat-chip{white-space:nowrap}  .test-details-container .mat-chip-list-wrapper::-webkit-scrollbar{display:none}span[_ngcontent-%COMP%]{white-space:nowrap}.add-btn[_ngcontent-%COMP%]{color:var(--primary-color-500)!important;font-weight:600!important;text-decoration:underline!important;display:flex;flex-direction:row;align-items:center;cursor:pointer}.auto-btn[_ngcontent-%COMP%]{padding:0!important;top:-5px;right:-15px;border-radius:3px!important;width:100px;height:40px}.mb-20[_ngcontent-%COMP%]{margin-bottom:20px}.mat-error[_ngcontent-%COMP%], .mat-hint[_ngcontent-%COMP%]{font-size:12px}@media only screen and (min-width: 992px) and (max-width: 1200px){.test-details-container[_ngcontent-%COMP%]{margin-top:6em}.test-details-container[_ngcontent-%COMP%]   .partial-payment[_ngcontent-%COMP%]{position:static;position:initial;display:flex;justify-content:end;margin-top:2rem;margin-right:2em}.mat-form-field[_ngcontent-%COMP%]{width:100%!important}.test-right-container[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px;margin-top:2em}.test-left-container[_ngcontent-%COMP%]{padding-right:15px}.phlebo-result[_ngcontent-%COMP%]{right:36px}.tat-bottom[_ngcontent-%COMP%]{padding-left:1em;margin-right:-2em}}@media only screen and (min-width: 768px) and (max-width: 992px){.test-details-container[_ngcontent-%COMP%]   .partial-payment[_ngcontent-%COMP%]{position:static;position:initial;display:flex;justify-content:end;margin-top:2rem;margin-right:2em}.mat-form-field[_ngcontent-%COMP%]{width:100%!important}.test-right-container[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px;margin-top:2em}.test-left-container[_ngcontent-%COMP%]{padding-right:15px}.phlebo-result[_ngcontent-%COMP%]{right:30px}.tat-bottom[_ngcontent-%COMP%]{padding-left:1em;margin-right:0}}@media only screen and (min-width: 576px) and (max-width: 768px){.test-details-container[_ngcontent-%COMP%]   .partial-payment[_ngcontent-%COMP%]{position:static;position:initial;display:flex;justify-content:end;margin-top:2rem;margin-right:2em}.mat-form-field[_ngcontent-%COMP%]{width:100%!important}.test-right-container[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px;margin-top:2em}.test-left-container[_ngcontent-%COMP%]{padding-right:15px}.phlebo-result[_ngcontent-%COMP%]{right:30px}.tat-bottom[_ngcontent-%COMP%]{padding-left:1em;margin-right:0}}input[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}input[_ngcontent-%COMP%]:disabled{cursor:not-allowed}a[_ngcontent-%COMP%]{color:var(--primary-color-500)!important;font-weight:600!important;text-decoration:underline!important;cursor:pointer}.left-icon[_ngcontent-%COMP%]{cursor:pointer;margin-right:5px;color:#aaa;font-size:26px;z-index:99}.right-icon[_ngcontent-%COMP%]{cursor:pointer;margin-left:5px;color:#aaa;font-size:26px;z-index:99}"],changeDetection:0}),a})(),ne=(()=>{class a{constructor(){}ngOnInit(){}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-test-roles"]],decls:2,vars:0,template:function(e,i){1&e&&(t.TgZ(0,"p"),t._uU(1,"test-roles works!"),t.qZA())},changeDetection:0}),a})();var ae=m(69196),se=m(98739);function Zn(a,s){1&a&&(t.TgZ(0,"div",38)(1,"div",39)(2,"div",40)(3,"label"),t._uU(4,"Name"),t.qZA(),t.TgZ(5,"mat-form-field",41),t._UZ(6,"input",42),t.qZA()(),t.TgZ(7,"div",40)(8,"label"),t._uU(9,"Unit"),t.qZA(),t.TgZ(10,"mat-form-field",41),t._UZ(11,"input",43),t.qZA()(),t.TgZ(12,"div",40)(13,"label"),t._uU(14,"Position"),t.qZA(),t.TgZ(15,"mat-form-field",41),t._UZ(16,"input",44),t.qZA()(),t.TgZ(17,"div",40)(18,"label"),t._uU(19,"Method"),t.qZA(),t.TgZ(20,"mat-form-field",41),t._UZ(21,"input",45),t.qZA()(),t.TgZ(22,"div",40)(23,"label"),t._uU(24,"Equipment"),t.qZA(),t.TgZ(25,"mat-form-field",46)(26,"mat-select",47),t._UZ(27,"mat-option"),t.qZA(),t._UZ(28,"mat-icon",48),t.qZA()(),t.TgZ(29,"div",40)(30,"label"),t._uU(31,"Type"),t.qZA(),t.TgZ(32,"mat-form-field",46)(33,"mat-select",49),t._UZ(34,"mat-option"),t.qZA(),t._UZ(35,"mat-icon",48),t.qZA()()()())}function wn(a,s){1&a&&(t.TgZ(0,"div",38)(1,"div",39)(2,"div",40)(3,"label"),t._uU(4,"Name"),t.qZA(),t.TgZ(5,"mat-form-field",41),t._UZ(6,"input",42),t.qZA()(),t.TgZ(7,"div",40)(8,"label"),t._uU(9,"Unit"),t.qZA(),t.TgZ(10,"mat-form-field",41),t._UZ(11,"input",43),t.qZA()(),t.TgZ(12,"div",40)(13,"label"),t._uU(14,"Position"),t.qZA(),t.TgZ(15,"mat-form-field",41),t._UZ(16,"input",44),t.qZA()(),t.TgZ(17,"div",40)(18,"label"),t._uU(19,"Method"),t.qZA(),t.TgZ(20,"mat-form-field",41),t._UZ(21,"input",45),t.qZA()(),t.TgZ(22,"div",40)(23,"label"),t._uU(24,"Equipment"),t.qZA(),t.TgZ(25,"mat-form-field",46)(26,"mat-select",47),t._UZ(27,"mat-option"),t.qZA(),t._UZ(28,"mat-icon",48),t.qZA()(),t.TgZ(29,"div",40)(30,"label"),t._uU(31,"Type"),t.qZA(),t.TgZ(32,"mat-form-field",46)(33,"mat-select",49),t._UZ(34,"mat-option"),t.qZA(),t._UZ(35,"mat-icon",48),t.qZA()()()())}function kn(a,s){1&a&&(t.TgZ(0,"th",50),t._uU(1,"Sl.No"),t.qZA())}function Sn(a,s){if(1&a&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&a){const e=s.$implicit;t.xp6(1),t.hij(" ",e.sl_no," ")}}function An(a,s){1&a&&(t.TgZ(0,"th",50),t._uU(1,"From Age"),t.qZA())}function Pn(a,s){if(1&a&&(t.TgZ(0,"td",52),t._uU(1),t.qZA()),2&a){const e=s.$implicit;t.xp6(1),t.hij(" ",e.from_age," ")}}function In(a,s){1&a&&(t.TgZ(0,"th",50),t._uU(1,"To Age"),t.qZA())}function On(a,s){if(1&a&&(t.TgZ(0,"td",53),t._uU(1),t.qZA()),2&a){const e=s.$implicit;t.xp6(1),t.hij(" ",e.to_age," ")}}function Fn(a,s){1&a&&(t.TgZ(0,"th",50),t._uU(1,"Min Reading"),t.qZA())}function qn(a,s){if(1&a&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&a){const e=s.$implicit;t.xp6(1),t.hij(" ",e.min_reading," ")}}function Rn(a,s){1&a&&(t.TgZ(0,"th",50),t._uU(1,"Max Reading"),t.qZA())}function Mn(a,s){if(1&a&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&a){const e=s.$implicit;t.xp6(1),t.hij(" ",e.max_reading," ")}}function Nn(a,s){1&a&&(t.TgZ(0,"th",50),t._uU(1,"Min Critical"),t.qZA())}function En(a,s){if(1&a&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&a){const e=s.$implicit;t.xp6(1),t.hij(" ",e.min_critical," ")}}function Ln(a,s){1&a&&(t.TgZ(0,"th",50),t._uU(1,"Max Critical"),t.qZA())}function Un(a,s){if(1&a&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&a){const e=s.$implicit;t.xp6(1),t.hij(" ",e.max_critical," ")}}function Jn(a,s){1&a&&(t.TgZ(0,"th",50),t._uU(1,"Unit"),t.qZA())}function Yn(a,s){if(1&a&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&a){const e=s.$implicit;t.xp6(1),t.hij(" ",e.unit," ")}}function Qn(a,s){1&a&&(t.TgZ(0,"th",50),t._uU(1,"Display"),t.qZA())}function Gn(a,s){if(1&a&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&a){const e=s.$implicit;t.xp6(1),t.hij(" ",e.display," ")}}function Hn(a,s){1&a&&(t.TgZ(0,"th",50),t._uU(1,"Action"),t.qZA())}function Bn(a,s){1&a&&(t.TgZ(0,"td",51),t._UZ(1,"mat-icon",54),t.qZA())}function Vn(a,s){1&a&&t._UZ(0,"tr",55)}function $n(a,s){1&a&&t._UZ(0,"tr",56)}function jn(a,s){1&a&&(t.TgZ(0,"div",57),t._uU(1,"No Data Available!"),t.qZA())}let zn=(()=>{class a{constructor(){this.data=[]=[{sl_no:1,from_age:0,to_age:5,min_reading:5,max_reading:5,min_critical:3,max_critical:11,unit:"mg/L",display:"5-10"},{sl_no:1,from_age:0,to_age:5,min_reading:5,max_reading:5,min_critical:3,max_critical:11,unit:"mg/L",display:"5-10"}],this.dataSource=new v.by(this.data),this.clientsPagination=new ae.p({page:0,perPage:5,total:0}),this.displayedColumns=["sl_no","from_age","to_age","min_reading","max_reading","min_critical","max_critical","unit","display","action"]}ngOnInit(){this.selectedTab=0,this.selectedTabs=0}tabChange(e){this.selectedTab=e.index}tabChanged(e){this.selectedTabs=e.index}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-add-range-dialog"]],decls:68,vars:11,consts:[[1,"add-range"],[1,"add-range__title"],[1,"primary","range"],[1,"add-range__tab"],["animationDuration","2ms",1,"agm-tab",3,"selectedTabChange"],["tabGroup",""],["label","Normal Range"],["label","Age Wise Range"],[1,"button-mat-all"],["class","add-range__table",4,"ngIf"],[1,"add-range__genderTab"],[1,"add-range__genderTab--tab"],["label","Male"],["label","Female"],[1,"add-range__genderTab--info"],[1,"item","primary"],[1,"primary"],[1,"agm-table--container"],["mat-table","",1,"mat-elevation-z8","agm-table",3,"dataSource"],["matColumnDef","sl_no"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","from_age"],["class","line-break","mat-cell","",4,"matCellDef"],["matColumnDef","to_age"],["class","email-break","mat-cell","",4,"matCellDef"],["matColumnDef","min_reading"],["matColumnDef","max_reading"],["matColumnDef","min_critical"],["matColumnDef","max_critical"],["matColumnDef","unit"],["matColumnDef","display"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","empty-row",4,"ngIf"],["aria-label","Select page",3,"length","pageSize","pageIndex","pageSizeOptions","showFirstLastButtons"],["paginator",""],[1,"add-range__table"],[1,"row","add-range__table--tableData"],[1,"details","col-sm-2"],["appearance","outline",1,"field-common"],["matInput","","placeholder","Enter Name",1,"primary"],["matInput","","placeholder","Enter Unit",1,"primary"],["matInput","","placeholder","Enter Position",1,"primary"],["matInput","","placeholder","Enter Method",1,"primary"],["appearance","outline"],["placeholder","Equipment"],["matSuffix","","svgIcon","appDownArrow"],["placeholder","Type"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",1,"line-break"],["mat-cell","",1,"email-break"],["svgIcon","appDelete"],["mat-header-row",""],["mat-row",""],[1,"empty-row"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"h3"),t._uU(4,"Add Range"),t.qZA()(),t.TgZ(5,"div",2)(6,"h4"),t._uU(7,"Range For Both"),t.qZA(),t._UZ(8,"mat-checkbox"),t.qZA()(),t.TgZ(9,"div",3)(10,"div")(11,"mat-tab-group",4,5),t.NdJ("selectedTabChange",function(r){return i.tabChange(r)}),t._UZ(13,"mat-tab",6)(14,"mat-tab",7),t.qZA()(),t.TgZ(15,"div")(16,"button",8),t._uU(17,"Add New Range"),t.qZA()()(),t.YNc(18,Zn,36,0,"div",9),t.YNc(19,wn,36,0,"div",9),t.TgZ(20,"div",10)(21,"div",11)(22,"mat-tab-group",4,5),t.NdJ("selectedTabChange",function(r){return i.tabChanged(r)}),t._UZ(24,"mat-tab",12)(25,"mat-tab",13),t.qZA()(),t.TgZ(26,"div",14)(27,"span",15),t._uU(28,"Reflectometry"),t.qZA(),t.TgZ(29,"span",16),t._uU(30,"Vitrous"),t.qZA()()(),t.TgZ(31,"div",17)(32,"table",18),t.ynx(33,19),t.YNc(34,kn,2,0,"th",20),t.YNc(35,Sn,2,1,"td",21),t.BQk(),t.ynx(36,22),t.YNc(37,An,2,0,"th",20),t.YNc(38,Pn,2,1,"td",23),t.BQk(),t.ynx(39,24),t.YNc(40,In,2,0,"th",20),t.YNc(41,On,2,1,"td",25),t.BQk(),t.ynx(42,26),t.YNc(43,Fn,2,0,"th",20),t.YNc(44,qn,2,1,"td",21),t.BQk(),t.ynx(45,27),t.YNc(46,Rn,2,0,"th",20),t.YNc(47,Mn,2,1,"td",21),t.BQk(),t.ynx(48,28),t.YNc(49,Nn,2,0,"th",20),t.YNc(50,En,2,1,"td",21),t.BQk(),t.ynx(51,29),t.YNc(52,Ln,2,0,"th",20),t.YNc(53,Un,2,1,"td",21),t.BQk(),t.ynx(54,30),t.YNc(55,Jn,2,0,"th",20),t.YNc(56,Yn,2,1,"td",21),t.BQk(),t.ynx(57,31),t.YNc(58,Qn,2,0,"th",20),t.YNc(59,Gn,2,1,"td",21),t.BQk(),t.ynx(60,32),t.YNc(61,Hn,2,0,"th",20),t.YNc(62,Bn,2,0,"td",21),t.BQk(),t.YNc(63,Vn,1,0,"tr",33),t.YNc(64,$n,1,0,"tr",34),t.qZA(),t.YNc(65,jn,2,0,"div",35),t._UZ(66,"mat-paginator",36,37),t.qZA()()),2&e&&(t.xp6(18),t.Q6J("ngIf",0==i.selectedTab),t.xp6(1),t.Q6J("ngIf",1==i.selectedTab),t.xp6(13),t.Q6J("dataSource",i.dataSource),t.xp6(31),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("ngIf",0===i.data.length),t.xp6(1),t.Q6J("length",i.clientsPagination.total)("pageSize",i.clientsPagination.perPage)("pageIndex",i.clientsPagination.page)("pageSizeOptions",i.clientsPagination.paginationSizes)("showFirstLastButtons",!0))},dependencies:[y.O5,B.Hw,_t.ey,F.KE,F.R9,it.Nt,at.SP,at.uX,yt.gD,v.BZ,v.fO,v.as,v.w1,v.Dz,v.nj,v.ge,v.ev,v.XQ,v.Gk,vt.oG,se.NW],styles:["app-add-range-dialog .add-range{padding:2em}  app-add-range-dialog .add-range__title{display:flex;justify-content:space-between}  app-add-range-dialog .add-range__title .range{display:flex;align-items:center}  app-add-range-dialog .add-range__title .range h4{margin-right:1em;margin-bottom:0}  app-add-range-dialog .add-range__title .range .mat-checkbox .mat-checkbox-inner-container{width:30px;height:30px}  app-add-range-dialog .add-range__tab{margin-top:2em;display:flex;justify-content:space-between}  app-add-range-dialog .add-range__tab .button-mat-all{padding:.5em 1em!important;border-radius:5px!important}  app-add-range-dialog .add-range__table{margin-top:2em}  app-add-range-dialog .add-range__table--tableData{display:flex}  app-add-range-dialog .add-range__table .mat-select-arrow{display:none}  app-add-range-dialog .add-range__table .mat-icon{width:14px}  app-add-range-dialog .add-range__genderTab{margin-top:2em;display:flex;justify-content:space-between}  app-add-range-dialog .add-range__genderTab--info{margin-top:5em;display:flex}  app-add-range-dialog .add-range__genderTab--info .item{margin-right:1em;padding-right:1em;border-right:1px solid rgba(4,55,82,.3)}  app-add-range-dialog .add-range .agm-table--container{margin-top:2em}  app-add-range-dialog .add-range .agm-table--container th{background-color:#f4f4f4;border-bottom:none}"],changeDetection:0}),a})();var Kn=m(44850);function Wn(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",34)(1,"h5",35),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.openRangeDialog())}),t._uU(2,"Add Range"),t.qZA(),t.TgZ(3,"h5"),t._uU(4,"Add Image"),t.qZA(),t.TgZ(5,"h5"),t._uU(6,"Add Values"),t.qZA(),t.TgZ(7,"h5"),t._uU(8,"Add Description"),t.qZA(),t.TgZ(9,"h5"),t._uU(10,"Result Interpretation"),t.qZA(),t.TgZ(11,"h5"),t._uU(12,"PDF Styles"),t.qZA()()}}function Xn(a,s){1&a&&(t.TgZ(0,"div",34)(1,"h5"),t._uU(2,"Result Interpretation"),t.qZA(),t.TgZ(3,"h5"),t._uU(4,"PDF Styles"),t.qZA()())}let re=(()=>{class a{constructor(e,i,n,r){this.cdr=e,this.activatedroute=i,this.router=n,this.matDialog=r;let l=this.router.url.split("/");this.currentTabValue=l[2],this.cdr.markForCheck(),console.log("test value",l[2])}ngOnInit(){this.getParams()}getParams(){this.activatedroute.params.subscribe(e=>{this.testTypeChecking=e.type})}openRangeDialog(){this.dialog=this.matDialog.open(zn,{width:"1500px",height:"800px",disableClose:!1,data:{}})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(t.sBO),t.Y36(A.gz),t.Y36(A.F0),t.Y36(q.uw))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-test-values"]],decls:118,vars:2,consts:[[1,"values","row"],[1,"values__inputs","col-sm-2"],[1,"primary"],["class","values__inputs--listItems primary",4,"ngIf"],[1,"values__templates","col-sm-4"],[1,"row","values__templates--input"],[1,"col-sm-3",2,"padding-right","0px"],[1,"col-sm-7","formFiled",2,"padding-right","0px"],["appearance","outline",1,"field-common"],["matInput","","placeholder","Add New Template"],[1,"col-sm-2"],["matButton","",1,"mat-button","button-mat-all"],[1,"row","values__templates--data-container"],[1,"row","dataList"],[1,"col-sm-4"],["svgIcon","appEdit"],["svgIcon","appDelete"],[1,"col-sm-3",2,"margin-right","0.8em"],[1,"col-sm-3"],[1,"values__report","col-sm-6"],[1,"values__report--samplePdf"],[1,"title"],[1,"address"],[1,"details","row"],[1,"col-sm-6"],[1,"department"],[1,"testName"],[1,"table"],[1,"table__data"],[1,"table__data--label"],[1,"table__data--span"],[1,"end"],[1,"signature"],[1,"footer"],[1,"values__inputs--listItems","primary"],[3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"section",1)(2,"h3",2),t._uU(3,"Inputs"),t.qZA(),t.YNc(4,Wn,13,0,"div",3),t.YNc(5,Xn,5,0,"div",3),t.qZA(),t.TgZ(6,"section",4)(7,"div",5)(8,"div",6)(9,"label",2),t._uU(10,"Template Name"),t.qZA()(),t.TgZ(11,"div",7)(12,"mat-form-field",8),t._UZ(13,"input",9),t.qZA()(),t.TgZ(14,"div",10)(15,"button",11),t._uU(16,"Save"),t.qZA()()(),t.TgZ(17,"div",12)(18,"span",2),t._uU(19,"Saved Templates"),t.qZA(),t.TgZ(20,"div",13)(21,"div",14)(22,"label"),t._uU(23,"Temp1"),t.qZA()(),t.TgZ(24,"div",10),t._UZ(25,"mat-icon",15)(26,"mat-icon",16),t.qZA(),t.TgZ(27,"div",17)(28,"button",11),t._uU(29,"Duplicate"),t.qZA()(),t.TgZ(30,"div",18)(31,"button",11),t._uU(32,"Default"),t.qZA()()()()(),t.TgZ(33,"section",19)(34,"div",20)(35,"div",21)(36,"h4")(37,"b"),t._uU(38,"Agam"),t.qZA()()(),t._UZ(39,"mat-divider"),t.TgZ(40,"div",22)(41,"div"),t._uU(42,"Barcode"),t.qZA(),t.TgZ(43,"div")(44,"span"),t._uU(45,"Location"),t.qZA(),t.TgZ(46,"p"),t._uU(47,"Chennai"),t.qZA()()(),t.TgZ(48,"div",23)(49,"div",24)(50,"p"),t._uU(51,"Name"),t.qZA(),t.TgZ(52,"p"),t._uU(53,"Age/DOB"),t.qZA(),t.TgZ(54,"p"),t._uU(55,"Patient ID"),t.qZA(),t.TgZ(56,"p"),t._uU(57,"Gender"),t.qZA(),t.TgZ(58,"p"),t._uU(59,"Referred By"),t.qZA(),t.TgZ(60,"p"),t._uU(61,"Mobile Number"),t.qZA()(),t.TgZ(62,"div",24)(63,"p"),t._uU(64,"Collected On"),t.qZA(),t.TgZ(65,"p"),t._uU(66,"Received On"),t.qZA(),t.TgZ(67,"p"),t._uU(68,"Reported On"),t.qZA(),t.TgZ(69,"p"),t._uU(70,"Adhaar Number"),t.qZA(),t.TgZ(71,"p"),t._uU(72,"SRF Number"),t.qZA(),t.TgZ(73,"p"),t._uU(74,"Nationality"),t.qZA()()(),t.TgZ(75,"div",25)(76,"span")(77,"b"),t._uU(78,"Immunology"),t.qZA()()(),t._UZ(79,"mat-divider"),t.TgZ(80,"div",26)(81,"h4"),t._uU(82,"Cholesterol Test"),t.qZA()(),t.TgZ(83,"div",27)(84,"div",28)(85,"label",29),t._uU(86,"Test Description"),t.qZA(),t.TgZ(87,"span",30),t._uU(88,"Test 1"),t.qZA()(),t.TgZ(89,"div",28)(90,"label",29),t._uU(91,"Value"),t.qZA(),t.TgZ(92,"span",30),t._uU(93," 10"),t.qZA()(),t.TgZ(94,"div",28)(95,"label",29),t._uU(96,"Unit"),t.qZA(),t.TgZ(97,"span",30),t._uU(98,"ml"),t.qZA()(),t.TgZ(99,"div",28)(100,"label",29),t._uU(101,"Reference Range"),t.qZA(),t.TgZ(102,"span",30),t._uU(103,"5-9"),t.qZA()()(),t.TgZ(104,"div",31)(105,"h4"),t._uU(106,"End Of Report"),t.qZA()(),t.TgZ(107,"div",32)(108,"div"),t._uU(109,"Secondary Signature"),t.qZA(),t.TgZ(110,"div"),t._uU(111,"Primary Signature"),t.qZA()(),t._UZ(112,"mat-divider"),t.TgZ(113,"div",33)(114,"h6"),t._uU(115,"Page 1 of 1"),t.qZA(),t.TgZ(116,"p"),t._uU(117," Lorem, ipsum dolor sit amet consectetur adipisicing elit. Repudiandae velit qui, quas doloribus atque saepe aperiam ullam earum tempora non harum totam, deserunt, omnis incidunt libero quod ad voluptatem repellat. "),t.qZA()()()()()),2&e&&(t.xp6(4),t.Q6J("ngIf","package"!=i.currentTabValue),t.xp6(1),t.Q6J("ngIf","package"==i.currentTabValue))},dependencies:[y.O5,B.Hw,F.KE,it.Nt,Kn.d],styles:["app-test-values .values button{cursor:pointer}  app-test-values .values__inputs{border-right:1px solid rgba(4,55,82,.3);height:100vh}  app-test-values .values__inputs--listItems{margin-top:2em;display:flex;flex-direction:column;cursor:pointer}  app-test-values .values__inputs--listItems h5{padding:1em 2em;font-size:14px;margin:0;border-bottom:1px solid rgba(4,55,82,.5)}  app-test-values .values__inputs--listItems h5:hover{background:rgba(6,70,98,.1)}  app-test-values .values__templates{border-right:1px solid rgba(4,55,82,.3);height:100vh;padding:0 2em}  app-test-values .values__templates--input{display:flex;align-items:center}  app-test-values .values__templates--input .button-mat-all{padding:0!important;border-radius:3px!important}  app-test-values .values__templates--input .formFiled .mat-form-field{margin-top:1em;width:100%}  app-test-values .values__templates--input .formFiled .mat-form-field-appearance-outline .mat-form-field-infix{padding:.3em}  app-test-values .values__templates--data-container{padding:1.2em;background:#c4ced4;box-shadow:0 4px 23px 1px #0000002e;border-radius:3px}  app-test-values .values__templates--data-container .button-mat-all{padding:0 1.2em!important;border-radius:3px!important}  app-test-values .values__templates--data-container .dataList{margin-top:2em;display:flex;align-items:center}  app-test-values .values__templates--data-container .mat-icon{width:1.2rem!important;height:1.2rem!important;cursor:pointer}  app-test-values .values__templates--data-container .mat-icon{border-right:1px solid rgba(4,55,82,.3)}  app-test-values .values__templates--data-container .mat-icon:last-of-type{border:none}  app-test-values .values__report--samplePdf{background:#ffffff;box-shadow:0 4px 23px 1px #0000002e;border-radius:3px;padding:2em}  app-test-values .values__report--samplePdf .title{text-align:center}  app-test-values .values__report--samplePdf .address{display:flex;justify-content:space-between;margin:2em 0}  app-test-values .values__report--samplePdf .details{padding:.6em;margin:.2em;border:1px solid black}  app-test-values .values__report--samplePdf .department{text-align:center;margin:2em 0 1em}  app-test-values .values__report--samplePdf .testName{text-align:center;margin-top:1em}  app-test-values .values__report--samplePdf .table{display:flex;justify-content:space-between}  app-test-values .values__report--samplePdf .table__data{display:flex;flex-direction:column;text-align:center}  app-test-values .values__report--samplePdf .table__data--label{margin-top:1em;font-weight:700}  app-test-values .values__report--samplePdf .table__data--span{margin-top:1em}  app-test-values .values__report--samplePdf .end{margin-top:5em;text-align:center}  app-test-values .values__report--samplePdf .signature{margin:3em 0 1em;display:flex;justify-content:space-between}  app-test-values .values__report--samplePdf .footer{margin-top:1em}  app-test-values .values__report--samplePdf .footer h6{text-align:end}  app-test-values .values__report--samplePdf .mat-divider{border:1px solid black}"],changeDetection:0}),a})();var ta=m(4128),oe=m(98138),ea=m(10266),ia=m(92688),na=m(82179);function aa(a,s){if(1&a&&(t.TgZ(0,"th",34),t._uU(1),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.hij(" ","single"===e.testType?"Test":"group"===e.testType?"Group":""," Code ")}}function sa(a,s){if(1&a&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&a){const e=t.oxw().$implicit;t.xp6(1),t.hij("TC",e.code," ")}}function ra(a,s){if(1&a&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&a){const e=t.oxw().$implicit;t.xp6(1),t.hij("GC",e.code," ")}}function oa(a,s){if(1&a&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&a){const e=t.oxw().$implicit;t.xp6(1),t.hij("PC",e.code," ")}}function la(a,s){if(1&a&&(t.TgZ(0,"td",35),t.YNc(1,sa,2,1,"span",36),t.YNc(2,ra,2,1,"span",36),t.YNc(3,oa,2,1,"span",36),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Q6J("ngIf","single"===e.testType),t.xp6(1),t.Q6J("ngIf","group"===e.testType),t.xp6(1),t.Q6J("ngIf","package"===e.testType)}}function ca(a,s){if(1&a&&(t.TgZ(0,"th",34),t._uU(1),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.hij(" ","single"===e.testType?"Test":"group"===e.testType?"Group":""," Name ")}}function da(a,s){if(1&a&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&a){const e=s.$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function pa(a,s){1&a&&(t.TgZ(0,"th",34),t._uU(1,"Center"),t.qZA())}function ha(a,s){1&a&&(t.TgZ(0,"span"),t._uU(1,","),t.qZA())}function ma(a,s){if(1&a&&(t.TgZ(0,"span"),t._uU(1),t.YNc(2,ha,2,0,"span",36),t.qZA()),2&a){const e=s.$implicit,i=s.last;t.xp6(1),t.hij(" ",e.name," "),t.xp6(1),t.Q6J("ngIf",!i)}}function ua(a,s){if(1&a&&(t.TgZ(0,"td",38)(1,"div",39),t.YNc(2,ma,3,2,"span",40),t.qZA()()),2&a){const e=s.$implicit,i=t.oxw();t.xp6(1),t.Q6J("matTooltip",i.getCenters(e.centers)),t.xp6(1),t.Q6J("ngForOf",e.centers)}}function ga(a,s){1&a&&(t.TgZ(0,"th",34),t._uU(1,"Type"),t.qZA())}function _a(a,s){if(1&a&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&a){const e=s.$implicit;t.xp6(1),t.hij(" ",e.test_type," ")}}function fa(a,s){1&a&&(t.TgZ(0,"th",34),t._uU(1,"Report Timing"),t.qZA())}function va(a,s){if(1&a&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&a){const e=s.$implicit;t.xp6(1),t.AsE(" ",e.report_duration," ",null==e.report_unit?null:e.report_unit.name," ")}}function Ta(a,s){1&a&&(t.TgZ(0,"th",34),t._uU(1,"Price"),t.qZA())}function ya(a,s){if(1&a&&(t.TgZ(0,"td",35),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&a){const e=s.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.price)," ")}}function xa(a,s){1&a&&(t.TgZ(0,"th",34),t._uU(1,"Action"),t.qZA())}function Da(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"td",35)(1,"mat-icon",42),t.NdJ("click",function(){const r=t.CHM(e).$implicit,o=t.oxw();return t.KtG(o.edit(r.id))}),t.qZA(),t.TgZ(2,"mat-icon",43),t.NdJ("click",function(){const r=t.CHM(e).$implicit,o=t.oxw();return t.KtG(o.openDeleteDialog(r))}),t.qZA()()}}function Ca(a,s){1&a&&t._UZ(0,"tr",44)}function ba(a,s){1&a&&t._UZ(0,"tr",45)}function Za(a,s){1&a&&(t.TgZ(0,"div",46),t._uU(1," No Data Available! "),t.qZA())}function wa(a,s){1&a&&(t.TgZ(0,"div",47),t._UZ(1,"mat-spinner"),t.qZA())}const ka=[{path:"",component:(()=>{class a{constructor(e){this.customIconService=e}ngOnInit(){}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(oe.U))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-test-management"]],decls:1,vars:0,template:function(e,i){1&e&&t._UZ(0,"router-outlet")},dependencies:[A.lC],changeDetection:0}),a})(),children:[{path:"",redirectTo:"single",pathMatch:"full"},{path:":type",component:(()=>{class a{constructor(e,i,n,r,o,l,c,d,h,f){this.customIconService=e,this.cdr=i,this.route=n,this.router=r,this.testService=o,this.sharedService=l,this.fb=c,this.matDialog=d,this.snackbar=h,this.snackBbar=f,this.centers=[],this.type=[],this.dept=[],this.gender=[{key:"Male",value:"male"},{key:"Female",value:"female"}],this.displayedColumns=["code","name","centers","test_type","report_duration","price","action"],this.totalLength=0,this.pageSize=5,this.pageIndex=0,this.searchStr=new g.NI(""),this.data=[],this.dataSource=new v.by(this.data),this.searchPlaceholder="",this.spinner=!1,this.payload={filter:{}},this.searchBy=[],this.search=new g.NI(""),this.agamFilters=[],this.clientsPagination=new ae.p({page:1,perPage:5,total:this.totalLength})}ngOnInit(){this.getParams(),this.initForm()}loadFilters(){this.spinner=!0,(0,ta.D)([this.sharedService.getDepartmentList(),this.sharedService.getCenterList(),this.sharedService.getSampleTypeList()]).subscribe(([e,i,n])=>{this.spinner=!1,this.agamFilters=[{type:"sampleTypes",name:"Sample type",data:n?.data.Sample_types,lableKey:"name",multiple:!0},{type:"depts",name:"Department",data:e.data.departments,lableKey:"name",multiple:!0},{type:"centers",name:"Center",data:i?.data.centers,lableKey:"name",multiple:!0},{type:"genders",name:"Gender",data:[{id:"male",name:"Male"},{id:"female",name:"Female"},{id:"other",name:"Both"}],lableKey:"name"}],("group"===this.testType||"package"===this.testType)&&this.agamFilters.forEach(r=>{"depts"===r.type&&(r.multiple=!1)}),"package"===this.testType&&this.agamFilters.forEach(r=>{"sampleTypes"===r.type&&(r.multiple=!1),"centers"===r.type&&(r.multiple=!1)})})}onSearch(){if(this.search&&""!==this.search.value)this.payload.filter.search=this.search,this.searchBy.includes("name")&&this.searchBy.includes("code")||(this.searchBy.push("name"),this.searchBy.push("code"));else if(this.payload.filter.search=void 0,this.searchBy.includes("name")&&this.searchBy.includes("code")){let e;e=this.searchBy.indexOf("name"),this.searchBy.splice(e,1),e=this.searchBy.push("code"),this.searchBy.splice(e,1)}this.payload.filter.search_by=this.getSearchBy(),this.getTestList()}getParams(){this.route.params.subscribe(e=>{this.testType=e.type,console.log(this.testType),this.initializeState()})}initForm(){this.testFilterForm=this.fb.group(this.getTestFilterFormGroup()),this.searchChange(),this.sampleTypeChange(),this.centerChange(),this.departmentChange(),this.genderChange()}getTestFilterFormGroup(){return{search:[""],sampleType:[""],department:[""],testCenter:[""],genderFilter:[""]}}getDepartmentList(){this.spinner=!0,this.cdr.detectChanges(),this.sharedService.getDepartmentList().subscribe({next:e=>{this.spinner=!1,this.cdr.detectChanges(),this.dept=e.data.departments},error:e=>{this.spinner=!1,this.cdr.detectChanges()}})}getCenterList(){this.spinner=!0,this.cdr.detectChanges(),this.sharedService.getCenterList().subscribe({next:e=>{this.spinner=!1,this.cdr.detectChanges(),this.centers=e.data.centers},error:e=>{this.spinner=!1,this.cdr.detectChanges()}})}getSampleTypeList(){this.spinner=!0,this.cdr.detectChanges(),this.sharedService.getSampleTypeList().subscribe({next:e=>{this.spinner=!1,this.type=e.data.Sample_types,this.cdr.detectChanges()},error:e=>{this.spinner=!1,this.cdr.detectChanges()}})}initializeState(){this.loadFilters(),this.setSearchPlaceholder(),this.getTestList()}setSearchPlaceholder(){this.searchPlaceholder="single"===this.testType?"Search By Test Name, Test code":"group"===this.testType?"Search By  Group name, Group Code":""}getTestList(){this.searchList().subscribe({next:e=>{this.setTestList(e)},error:e=>{this.spinner=!1,this.cdr.detectChanges()}})}searchList(){return this.spinner=!0,this.cdr?.markForCheck(),this.testService.searchTest(this.testType,this.pageSize,this.pageIndex+1,this.payload)}setTestList(e){this.spinner=!1,this.data=e.data.results,this.totalLength=e.data.pagination.total,this.dataSource=new v.by(this.data),this.cdr.markForCheck()}getSearchBy(){if(this.searchBy.length>0){let e="";return this.searchBy.forEach((i,n)=>{e+=i,n!==this.searchBy.length-1&&(e+=",")}),e}}searchChange(){this.search?.valueChanges.pipe((0,V.b)(500),(0,E.w)(e=>{if(e&&""!==e)if(parseInt(e)){if(this.payload.filter.code=parseInt(e),this.payload.filter.search=void 0,this.searchBy.includes("name")){let i;i=this.searchBy.indexOf("name"),this.searchBy.splice(i,1)}}else this.payload.filter.search=e,this.searchBy.includes("name")||this.searchBy.push("name");else if(this.payload.filter.search=void 0,this.payload.filter.code=void 0,this.searchBy.includes("name")){let i;i=this.searchBy.indexOf("name"),this.searchBy.splice(i,1)}return this.payload.filter.search_by=this.getSearchBy(),this.searchList()})).subscribe(e=>{this.setTestList(e)})}sampleTypeChange(){this.payload={filter:{}},this.searchList().subscribe(e=>{this.setTestList(e)})}centerChange(){this.testFilterForm.get("testCenter")?.valueChanges.pipe((0,V.b)(500),(0,E.w)(e=>(this.payload.filter.centers=e?{id:e}:void 0,this.searchList()))).subscribe(e=>{this.setTestList(e)})}departmentChange(){this.testFilterForm.get("department")?.valueChanges.pipe((0,V.b)(500),(0,E.w)(e=>(this.payload.filter.departments=e?{id:e}:void 0,this.searchList()))).subscribe(e=>{this.setTestList(e)})}genderChange(){this.testFilterForm.get("genderFilter")?.valueChanges.pipe((0,V.b)(500),(0,E.w)(e=>{if(e&&""!==e)this.testFilterForm.get("search")?.setValue("",{emitEvent:!1}),this.testFilterForm.get("sampleType")?.setValue("",{emitEvent:!1}),this.payload.filter.search=e,this.searchBy.includes("gender")||this.searchBy.push("gender");else if(this.payload.filter.search=void 0,this.searchBy.includes("gender")){let i;i=this.searchBy.indexOf("gender"),this.searchBy.splice(i,1)}return this.payload.filter.search_by=this.getSearchBy(),this.searchList()})).subscribe(e=>{this.setTestList(e)})}reset(){this.testFilterForm.reset(this.getTestFilterFormGroup(),{emitEvent:!1}),this.payload.filter={},this.getTestList()}changePage(e){this.totalLength=e.length,this.pageSize=e.pageSize,this.pageIndex=e.pageIndex,this.getTestList()}edit(e){this.router.navigate([`./edit/${e}`],{relativeTo:this.route})}deleteTest(e){this.testService.deleteTest(this.testType,e).subscribe({next:i=>{this.spinner=!1,this.cdr.detectChanges(),this.getTestList(),this.snackBbar.open(i.message,"close")},error:i=>{this.spinner=!1,this.cdr.detectChanges(),this.snackBbar.open(i.error.message,"close")}})}openDeleteDialog(e){(new Tt.u_).duration=2e3,this.matDialog.open(gt.$,{width:"40%",height:"auto",disableClose:!1,data:{message:"Are you sure want to Delete the Test: "+e.name+"?",buttonText:{ok:"Delete",cancel:"Cancel"}}}).afterClosed().subscribe(r=>{r&&this.deleteTest(e.id)})}handleFilter(e){"sampleTypes"===e.type?"package"===this.testType?(this.payload.filter.sample_type={},this.payload.filter.sample_type.id=e.selected?.option?.value?.id):(this.payload.filter.sample_type=[],this.payload.filter.sample_type=e.selected?.value?.map(i=>i.id)):"depts"===e.type?"group"===this.testType||"package"===this.testType?(this.payload.filter.departments={},this.payload.filter.departments.id=e.selected?.option?.value?.id):(this.payload.filter.departments=[],this.payload.filter.departments=e.selected?.value?.map(i=>i.id)):"centers"===e.type?"package"===this.testType?(this.payload.filter.centers={},this.payload.filter.centers.id=e.selected?.option?.value?.id):(this.payload.filter.centers=[],this.payload.filter.centers=e.selected?.value?.map(i=>i.id)):"genders"===e.type&&(this.payload.filter.gender=e.selected?.option?.value?.id)}getCenters(e){return e.map(i=>i.name)}clearTest(){this.sharedService.settestFormData(null)}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(oe.U),t.Y36(t.sBO),t.Y36(A.gz),t.Y36(A.F0),t.Y36(H),t.Y36(tt.F),t.Y36(g.qu),t.Y36(q.uw),t.Y36(Tt.ux),t.Y36(ft.c))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-single"]],decls:48,vars:14,consts:[[1,"test-container",3,"formGroup"],[1,"row"],[1,"col-lg-12"],[1,"primary"],[1,"row","topSearch_box"],[1,"col-lg-7"],["placholder","Search Test Name, Test Code",3,"formControl","filters","search","filter","reset"],[1,"col-lg-1"],[1,"col-lg-4","position-relative"],[1,"action"],["routerLink","./create",1,"btn"],[1,"icon"],[1,"desc",3,"click"],["svgIcon","appCreateTest"],[1,"agm-table--container"],["mat-table","",1,"mat-elevation-z8","agm-table",3,"dataSource"],["matColumnDef","code"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["class","line-break","mat-cell","",4,"matCellDef"],["matColumnDef","centers"],["class","email-break","mat-cell","",4,"matCellDef"],["matColumnDef","test_type"],["matColumnDef","report_duration"],["class","status","mat-cell","",4,"matCellDef"],["matColumnDef","price"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","empty-row",4,"ngIf"],["aria-label","Select page",3,"length","pageSize","pageIndex","pageSizeOptions","showFirstLastButtons","page"],["paginator",""],["class","spinner",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[4,"ngIf"],["mat-cell","",1,"line-break"],["mat-cell","",1,"email-break"],[1,"ellipsis",3,"matTooltip"],[4,"ngFor","ngForOf"],["mat-cell","",1,"status"],["svgIcon","appEdit",3,"click"],["svgIcon","appDelete",3,"click"],["mat-header-row",""],["mat-row",""],[1,"empty-row"],[1,"spinner"]],template:function(e,i){1&e&&(t.TgZ(0,"form",0)(1,"section",1)(2,"div",2)(3,"h3",3),t._uU(4,"Test Management"),t.qZA()()(),t.TgZ(5,"section",4)(6,"div",5)(7,"app-agam-search-filter",6),t.NdJ("search",function(){return i.getTestList()})("filter",function(r){return i.handleFilter(r)})("reset",function(){return i.reset()}),t.qZA()(),t._UZ(8,"div",7),t.TgZ(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12),t.NdJ("click",function(){return i.clearTest()}),t.TgZ(14,"b"),t._uU(15),t.qZA()(),t._UZ(16,"mat-icon",13),t.qZA()()()()(),t.TgZ(17,"section",1)(18,"div",2)(19,"div",14)(20,"table",15),t.ynx(21,16),t.YNc(22,aa,2,1,"th",17),t.YNc(23,la,4,3,"td",18),t.BQk(),t.ynx(24,19),t.YNc(25,ca,2,1,"th",17),t.YNc(26,da,2,1,"td",20),t.BQk(),t.ynx(27,21),t.YNc(28,pa,2,0,"th",17),t.YNc(29,ua,3,2,"td",22),t.BQk(),t.ynx(30,23),t.YNc(31,ga,2,0,"th",17),t.YNc(32,_a,2,1,"td",18),t.BQk(),t.ynx(33,24),t.YNc(34,fa,2,0,"th",17),t.YNc(35,va,2,2,"td",25),t.BQk(),t.ynx(36,26),t.YNc(37,Ta,2,0,"th",17),t.YNc(38,ya,3,3,"td",18),t.BQk(),t.ynx(39,27),t.YNc(40,xa,2,0,"th",17),t.YNc(41,Da,3,0,"td",18),t.BQk(),t.YNc(42,Ca,1,0,"tr",28),t.YNc(43,ba,1,0,"tr",29),t.qZA(),t.YNc(44,Za,2,0,"div",30),t.TgZ(45,"mat-paginator",31,32),t.NdJ("page",function(r){return i.changePage(r)}),t.qZA()()()()(),t.YNc(47,wa,2,0,"div",33)),2&e&&(t.Q6J("formGroup",i.testFilterForm),t.xp6(7),t.Q6J("formControl",i.search)("filters",i.agamFilters),t.xp6(8),t.hij(" Create ","single"===i.testType?"Test":"group"===i.testType?"Group":"",""),t.xp6(5),t.Q6J("dataSource",i.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("ngIf",0===i.data.length),t.xp6(1),t.Q6J("length",i.totalLength)("pageSize",i.pageSize)("pageIndex",i.pageIndex)("pageSizeOptions",i.clientsPagination.paginationSizes)("showFirstLastButtons",!0),t.xp6(2),t.Q6J("ngIf",i.spinner))},dependencies:[y.sg,y.O5,A.rH,B.Hw,g._Y,g.JJ,g.JL,g.oH,g.sg,v.BZ,v.fO,v.as,v.w1,v.Dz,v.nj,v.ge,v.ev,v.XQ,v.Gk,nt.Ou,se.NW,ea.gM,ia.N,na.Q],styles:[".test-container[_ngcontent-%COMP%]{padding:2.6rem}.test-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{width:100%;margin-left:0;margin-right:0}.test-container[_ngcontent-%COMP%]   .col-lg-12[_ngcontent-%COMP%]{padding:0}.test-container[_ngcontent-%COMP%]   .topSearch_box[_ngcontent-%COMP%]{margin-top:2em;padding:0}.test-container[_ngcontent-%COMP%]   .topSearch_box[_ngcontent-%COMP%]   .col-lg-7[_ngcontent-%COMP%]{padding-left:0}.test-container[_ngcontent-%COMP%]   .topSearch_box[_ngcontent-%COMP%]     input:focus::-webkit-input-placeholder{color:transparent}.test-container[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{width:80%;margin:.5em 0 auto auto;display:flex;flex-direction:row;justify-content:flex-end}.test-container[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   .bulkupload[_ngcontent-%COMP%]{margin-right:3em}.test-container[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}.test-container[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:200px;height:50px;background:linear-gradient(95.53deg,#cdd7dc -59.16%,#043752 100%);box-shadow:0 4px 4px #00000040;border-radius:40px;display:flex;align-items:center;justify-content:space-evenly;margin-bottom:10px}.test-container[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:32px;height:32px;font-size:32px;color:#fff}.test-container[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .test-container[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{color:#fff}.test-container[_ngcontent-%COMP%]   .agm-table--container[_ngcontent-%COMP%]{margin-top:2em}.test-container[_ngcontent-%COMP%]     .mat-paginator-container .mat-select-value{text-align:center}.test-container[_ngcontent-%COMP%]   .ellipsis[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.position-relative[_ngcontent-%COMP%]{position:relative}@media only screen and (min-width: 992px) and (max-width: 1200px){.action[_ngcontent-%COMP%]{position:relative!important;top:auto!important;top:initial!important}.topSearch_box[_ngcontent-%COMP%]   .col-lg-7[_ngcontent-%COMP%]{padding-right:0}}@media only screen and (min-width: 768px) and (max-width: 992px){.action[_ngcontent-%COMP%]{position:relative!important;top:auto!important;top:initial!important}}@media only screen and (min-width: 576px) and (max-width: 768px){.action[_ngcontent-%COMP%]{position:relative!important;top:auto!important;top:initial!important}}  .mat-tooltip{background:#323232!important;font-size:12px}"],changeDetection:0}),a})()},{path:":type/:action",component:Wt,children:[{path:"",redirectTo:"details",pathMatch:"full"},{path:"details",component:ie},{path:"test",component:Kt},{path:"values",component:re},{path:"roles",component:ne}]},{path:":type/:action/:id",component:Wt,children:[{path:"",redirectTo:"details",pathMatch:"full"},{path:"details",component:ie},{path:"test",component:Kt},{path:"values",component:re},{path:"roles",component:ne}]}]}];let Sa=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[A.Bz.forChild(ka),A.Bz]}),a})();var Aa=m(44466);let Pa=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({providers:[H],imports:[y.ez,Sa,Aa.m,g.UX,$.Hi,Pe]}),a})()}}]);